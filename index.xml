<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cory</title><link>https://huweim.github.io/</link><description>Recent content on Cory</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 23 Mar 2023 11:00:42 +0800</lastBuildDate><atom:link href="https://huweim.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>About</title><link>https://huweim.github.io/about/</link><pubDate>Thu, 08 Jul 2021 17:46:31 +0800</pubDate><guid>https://huweim.github.io/about/</guid><description>&lt;p>oh man, I love computer science and coding.&lt;/p>
&lt;p>ä¸€ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„æ–¹å‘çš„å­¦ç”Ÿï¼Œå–œæ¬¢ä½“ç³»ç»“æ„ï¼Œå–œæ¬¢ç¼–ç¨‹ï¼Œå–œæ¬¢ç¯®çƒã€‚ç›®å‰çš„è¯¾é¢˜ä¸»è¦å…³æ³¨ GPU/GPGPUã€‚&lt;/p>
&lt;p>ä¸ç¡®å®šè‡ªå·±æ˜¯å¦å–œæ¬¢æŠ˜è…¾ï¼Œæ˜¯å¦å–œæ¬¢æ–°é²œäº‹ç‰©ï¼Œæ˜¯å¦æ“…é•¿ç¼–ç¨‹ã€‚å¸Œæœ›åœ¨ä¸€æ­¥ä¸€æ­¥æ¢ç´¢ä¸­æ‰¾åˆ°è‡ªå·±çœŸæ­£æ„Ÿå…´è¶£çš„äº‹æƒ…ï¼Œæˆ–è€…ç¡®å®šè¿™å°±æ˜¯è‡ªå·±çœŸæ­£æ„Ÿå…´è¶£çš„äº‹æƒ…ã€‚&lt;/p></description></item><item><title>Makefileå­¦ä¹ å’Œå®è·µ</title><link>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_makefile%E5%AD%A6%E4%B9%A0%E5%92%8C%E5%AE%9E%E8%B7%B5/</link><pubDate>Thu, 23 Mar 2023 11:00:42 +0800</pubDate><guid>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_makefile%E5%AD%A6%E4%B9%A0%E5%92%8C%E5%AE%9E%E8%B7%B5/</guid><description>&lt;h1 id="1-ç®€ä»‹å’ŒåŸºç¡€çŸ¥è¯†">1. ç®€ä»‹å’ŒåŸºç¡€çŸ¥è¯†&lt;/h1>
&lt;p>Cè¯­è¨€ä¸­æ–‡ç½‘ &lt;a href="http://c.biancheng.net/view/7096.html">http://c.biancheng.net/view/7096.html&lt;/a>&lt;/p>
&lt;h2 id="11-makefileæ–‡ä»¶æ˜¯ä»€ä¹ˆ">1.1 Makefileæ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2>
&lt;h3 id="111-definition">1.1.1 Definition&lt;/h3>
&lt;p>Makefileæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;ul>
&lt;li>ç”¨äºæè¿°ç¼–è¯‘è§„åˆ™çš„å·¥ç¨‹æ–‡ä»¶
&lt;ul>
&lt;li>å³å“ªäº›æ–‡ä»¶å…ˆç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶æ— éœ€ç¼–è¯‘&lt;/li>
&lt;li>ä½¿å¾—é¡¹ç›®çš„ç¼–è¯‘è‡ªåŠ¨åŒ–ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½æ‰‹åŠ¨è¾“å…¥ä¸€å †æºæ–‡ä»¶å’Œå‚æ•°ã€‚&lt;/li>
&lt;li>å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€ï¼Œç±»ä¼¼ Shell, Perl, Python&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Windows ä¸‹çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å·²ç»å†…ç½®äº† Makefileï¼Œæˆ–è€…è¯´ä¼šè‡ªåŠ¨ç”Ÿæˆ Makefileï¼Œæ— éœ€æ‰‹å†™&lt;/p>
&lt;p>å¯¹äº Linuxï¼Œä¸æ‡‚ Makefileï¼Œå°±æ“ä½œä¸äº†å¤šæ–‡ä»¶ç¼–ç¨‹ï¼Œå°±å®Œæˆä¸äº†ç›¸å¯¹äºå¤§çš„å·¥ç¨‹é¡¹ç›®çš„æ“ä½œã€‚å¦‚æœä½ æƒ³åœ¨ Linux(Unix) ç¯å¢ƒä¸‹åšå¼€å‘çš„è¯ï¼ŒMakefile æ˜¯å¿…é¡»æŒæ¡çš„ä¸€é¡¹æŠ€èƒ½ã€‚&lt;/p>
&lt;h3 id="112-case">1.1.2 Case&lt;/h3>
&lt;p>æ¯”å¦‚å¤šæ–‡ä»¶ç¼–è¯‘ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>gcc -o outfile name1.c name2.c ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ–‡ä»¶æ•°é‡å¤šäº†ï¼Œå°±ä¼šæœ‰é—®é¢˜&lt;/p>
&lt;h3 id="113-é“¾æ¥åº“">1.1.3 é“¾æ¥åº“&lt;/h3>
&lt;ul>
&lt;li>Cè¯­è¨€ï¼Œç¼–è¯‘çš„æ—¶å€™ gcc åªä¼šé»˜è®¤é“¾æ¥ä¸€äº›åŸºæœ¬çš„Cè¯­è¨€æ ‡å‡†åº“ï¼Œå¾ˆå¤šæºæ–‡ä»¶ä¾èµ–çš„æ ‡å‡†åº“éƒ½éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é“¾æ¥ã€‚&lt;/li>
&lt;li>name1.c ç”¨åˆ°äº†æ•°å­¦è®¡ç®—åº“ math ä¸­çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¾—æ‰‹åŠ¨æ·»åŠ å‚æ•° -Imï¼›&lt;/li>
&lt;li>name5.c ä½¿ç”¨åˆ°äº†çº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å»æ‰‹åŠ¨æ·»åŠ å‚æ•° -lpthreadã€‚
&lt;ul>
&lt;li>è¿™ä¸ªæƒ…å†µåœ¨å†™ CUDA çš„æ—¶å€™å°±é‡åˆ°äº†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¯ä»¥æŠŠè¦é“¾æ¥çš„åº“æ–‡ä»¶æ”¾åœ¨ Makefile ä¸­ï¼Œåˆ¶å®šç›¸åº”çš„è§„åˆ™å’Œå¯¹åº”çš„é“¾æ¥é¡ºåºã€‚è¿™æ ·åªéœ€è¦æ‰§è¡Œ make å‘½ä»¤ï¼Œå·¥ç¨‹å°±ä¼šè‡ªåŠ¨ç¼–è¯‘ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¼–è¯‘å¤§çš„å·¥ç¨‹ä¼šèŠ±è´¹å¾ˆé•¿çš„æ—¶é—´&lt;/p>
&lt;ul>
&lt;li>Makefile æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ“ä½œï¼Œä¼šæå¤§çš„ç¼©çŸ­æˆ‘ä»¬çš„ç¼–è¯‘æ—¶é—´ï¼Œ&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å…·ä½“æ“ä½œåº”è¯¥æ˜¯ &lt;code>make -j8&lt;/code>ï¼Œä½¿ç”¨å…«ä¸ªçº¿ç¨‹&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>å¹¶ä¸”å½“æˆ‘ä»¬ä¿®æ”¹äº†æºæ–‡ä»¶ä¹‹åï¼Œç¼–è¯‘æ•´ä¸ªå·¥ç¨‹çš„æ—¶å€™ï¼Œmake å‘½ä»¤åªä¼šç¼–è¯‘æˆ‘ä»¬ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œæ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶ä¸ç”¨é‡æ–°ç¼–è¯‘ï¼Œä¹Ÿæå¤§çš„è§£å†³äº†æˆ‘ä»¬è€—è´¹æ—¶é—´çš„é—®é¢˜ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="12-makefile-æ–‡ä»¶ç»“æ„">1.2 Makefile æ–‡ä»¶ç»“æ„&lt;/h2>
&lt;h3 id="121-ç›®æ ‡ä¾èµ–-targetprerequisite">1.2.1 ç›®æ ‡ï¼Œä¾èµ– targetï¼Œprerequisite&lt;/h3>
&lt;p>å®ƒçš„è§„åˆ™ä¸»è¦æ˜¯ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ä¾èµ–çš„å…³ç³»å’Œæ‰§è¡Œçš„å‘½ä»¤ï¼Œå…¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">targets &lt;/span>&lt;span style="color:#f92672">:&lt;/span> prerequisites
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>or&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">targets &lt;/span>&lt;span style="color:#f92672">:&lt;/span> prerequisites; command
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>targetsï¼šè§„åˆ™çš„ç›®æ ‡ï¼Œå¯ä»¥æ˜¯ Object Fileï¼ˆä¸€èˆ¬ç§°å®ƒä¸ºä¸­é—´æ–‡ä»¶ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼›
&lt;ul>
&lt;li>ä¹Ÿå°±æ˜¯ command çš„è¾“å‡º&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>prerequisitesï¼šæ˜¯æˆ‘ä»¬çš„ä¾èµ–æ–‡ä»¶ï¼Œè¦ç”Ÿæˆ targets éœ€è¦çš„æ–‡ä»¶æˆ–è€…æ˜¯ç›®æ ‡ã€‚å¯ä»¥æ˜¯&lt;strong>å¤šä¸ª&lt;/strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯æ²¡æœ‰
&lt;ul>
&lt;li>a &amp;ldquo;prerequisite&amp;rdquo; is a file or target that must exist before a particular target can be builtï¼›&lt;/li>
&lt;li>æ„é€  target çš„å‰ç½®æ¡ä»¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>commandï¼šmake éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»»æ„çš„ shell å‘½ä»¤ï¼‰ã€‚å¯ä»¥æœ‰å¤šæ¡å‘½ä»¤ï¼Œæ¯ä¸€æ¡å‘½ä»¤å ä¸€è¡Œã€‚&lt;/li>
&lt;li>recipeï¼ša series of commands that are executed to create or update a target&lt;/li>
&lt;/ul>
&lt;p>â— Notionï¼šæˆ‘ä»¬çš„ç›®æ ‡å’Œä¾èµ–æ–‡ä»¶ä¹‹é—´è¦ä½¿ç”¨å†’å·åˆ†éš”å¼€ï¼Œå‘½ä»¤çš„å¼€å§‹ä¸€å®šè¦ä½¿ç”¨&lt;code>Tab&lt;/code>é”®ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨äº†ç©ºæ ¼å°±ä¼šæŠ¥é”™&lt;/li>
&lt;li>&lt;code>Makefile:2: *** ç¼ºå¤±åˆ†éš”ç¬¦ã€‚ åœæ­¢ã€‚&lt;/code>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>2022-11-25 19:55:02ã€‚è¿™ä¸ªç‰¹ç‚¹å’Œ shell æ–‡ä»¶ç±»ä¼¼ï¼Œç©ºæ ¼çš„æ ‡å‡†æ˜¯ä¸€å¼€å§‹å¾ˆå®¹æ˜“å‡ºé”™è€Œæ„è¯†ä¸åˆ°çš„åœ°æ–¹&lt;/p>
&lt;/blockquote>
&lt;h4 id="1211-case">1.2.1.1 Case&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">main &lt;/span>&lt;span style="color:#f92672">:&lt;/span> main.c fun1.c fun2.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -o main main.c fun1.c fun2.c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®é™…æƒ…å†µä¸­ä¸€è¡Œè§„åˆ™æ˜¯è‚¯å®šä¸å¤Ÿç”¨çš„&lt;/p>
&lt;h2 id="13-å˜é‡">1.3 å˜é‡&lt;/h2>
&lt;h3 id="131-å˜é‡å®šä¹‰">1.3.1 å˜é‡å®šä¹‰&lt;/h3>
&lt;p>åŸºæœ¬è¯­æ³•â—&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>å˜é‡çš„åç§° &lt;span style="color:#f92672">=&lt;/span> å€¼åˆ—è¡¨
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å˜é‡çš„åç§°å¯ä»¥ç”±å¤§å°å†™å­—æ¯ã€é˜¿æ‹‰ä¼¯æ•°å­—å’Œä¸‹åˆ’çº¿æ„æˆã€‚&lt;/p>
&lt;p>â—ç­‰å·å·¦å³çš„ç©ºç™½ç¬¦æ²¡æœ‰æ˜ç¡®çš„è¦æ±‚ï¼Œå› ä¸ºåœ¨æ‰§è¡Œ make çš„æ—¶å€™å¤šä½™çš„ç©ºç™½ç¬¦ä¼šè¢«è‡ªåŠ¨çš„åˆ é™¤ã€‚&lt;/p>
&lt;blockquote>
&lt;p>2022-11-25 19:54:29ã€‚shell èµ‹å€¼çš„è¯ï¼Œåœ¨ &lt;code>=&lt;/code> ä¸¤è¾¹ä¸èƒ½ç•™æœ‰ç©ºç™½ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸º gcc ä¹‹å‰æ˜¯å¿…é¡»ç”¨ &lt;code>Tab&lt;/code>ï¼Œè€Œå˜é‡èµ‹å€¼æ— éœ€&lt;/li>
&lt;/ul>
&lt;p>è‡³äºå€¼åˆ—è¡¨ï¼Œæ—¢å¯ä»¥æ˜¯é›¶é¡¹ï¼Œåˆå¯ä»¥æ˜¯ä¸€é¡¹æˆ–è€…æ˜¯å¤šé¡¹ã€‚
è°ƒç”¨å˜é‡çš„æ—¶å€™å¯ä»¥ç”¨ &amp;ldquo;$(VALUE_LIST)&amp;rdquo; æˆ–è€…æ˜¯ &amp;ldquo;${VALUE_LIST}&amp;rdquo; æ¥æ›¿æ¢ï¼Œè¿™å°±æ˜¯å˜é‡çš„å¼•ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>OBJ&lt;span style="color:#f92672">=&lt;/span>main.o test.o test1.o test2.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">test&lt;/span>&lt;span style="color:#f92672">:&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>OBJ&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -o test &lt;span style="color:#66d9ef">$(&lt;/span>OBJ&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="132-å˜é‡çš„åŸºæœ¬èµ‹å€¼">1.3.2 å˜é‡çš„åŸºæœ¬èµ‹å€¼&lt;/h3>
&lt;ul>
&lt;li>ç®€å•èµ‹å€¼ ( := ) ç¼–ç¨‹è¯­è¨€ä¸­å¸¸è§„ç†è§£çš„èµ‹å€¼æ–¹å¼ï¼Œåªå¯¹å½“å‰è¯­å¥çš„å˜é‡æœ‰æ•ˆã€‚&lt;/li>
&lt;li>é€’å½’èµ‹å€¼ ( = ) èµ‹å€¼è¯­å¥å¯èƒ½å½±å“å¤šä¸ªå˜é‡ï¼Œæ‰€æœ‰ç›®æ ‡å˜é‡ç›¸å…³çš„å…¶ä»–å˜é‡éƒ½å—å½±å“ã€‚&lt;/li>
&lt;li>æ¡ä»¶èµ‹å€¼ ( ?= ) å¦‚æœå˜é‡æœªå®šä¹‰ï¼Œåˆ™ä½¿ç”¨ç¬¦å·ä¸­çš„å€¼å®šä¹‰å˜é‡ã€‚å¦‚æœè¯¥å˜é‡å·²ç»èµ‹å€¼ï¼Œåˆ™è¯¥èµ‹å€¼è¯­å¥æ— æ•ˆã€‚&lt;/li>
&lt;li>è¿½åŠ èµ‹å€¼ ( += ) åŸå˜é‡ç”¨ç©ºæ ¼éš”å¼€çš„æ–¹å¼è¿½åŠ ä¸€ä¸ªæ–°å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¯¦ç»†è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p>
&lt;h4 id="1321-ç®€å•èµ‹å€¼-">1.3.2.1 ç®€å•èµ‹å€¼ :=&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">:=&lt;/span>foo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>x&lt;span style="color:#66d9ef">)&lt;/span>b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">:=&lt;/span>new
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">testï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;y=&amp;gt;$(y)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;x=&amp;gt;$(x)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ shell å‘½ä»¤è¡Œæ‰§è¡Œ&lt;code>make test&lt;/code>æˆ‘ä»¬ä¼šçœ‹åˆ°:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">=&lt;/span>&amp;gt;foob
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>&amp;gt;new
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1322-é€’å½’èµ‹å€¼-">1.3.2.2 é€’å½’èµ‹å€¼ =&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>foo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>x&lt;span style="color:#66d9ef">)&lt;/span>b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>new
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">testï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;y=&amp;gt;$(y)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;x=&amp;gt;$(x)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ shell å‘½ä»¤è¡Œæ‰§è¡Œ&lt;code>make test&lt;/code>æˆ‘ä»¬ä¼šçœ‹åˆ°:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">=&lt;/span>&amp;gt;newb &lt;span style="color:#75715e">#ç†è§£ä¸ºå½“æŸå˜é‡ x æ›´æ–°åï¼Œæ‰€ä»¥å’Œ x ç›¸å…³çš„å˜é‡éƒ½ä¼šæ›´æ–°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>&amp;gt;new
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1323-æ¡ä»¶èµ‹å€¼-">1.3.2.3 æ¡ä»¶èµ‹å€¼ ?=&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">:=&lt;/span>foo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>x&lt;span style="color:#66d9ef">)&lt;/span>b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">?=&lt;/span>new
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">testï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;y=&amp;gt;$(y)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;x=&amp;gt;$(x)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ shell å‘½ä»¤è¡Œæ‰§è¡Œ&lt;code>make test&lt;/code>æˆ‘ä»¬ä¼šçœ‹åˆ°:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">=&lt;/span>&amp;gt;foob
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>&amp;gt;foo &lt;span style="color:#75715e"># x å·²ç»å®šä½ä¸º foo æ‰€ä»¥å¿½ç•¥æ‰ new çš„èµ‹å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1324-è¿½åŠ èµ‹å€¼-">1.3.2.4 è¿½åŠ èµ‹å€¼ +=&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">:=&lt;/span>foo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">:=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>x&lt;span style="color:#66d9ef">)&lt;/span>b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">+=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>y&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">testï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;y=&amp;gt;$(y)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">@echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;x=&amp;gt;$(x)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ shell å‘½ä»¤è¡Œæ‰§è¡Œ&lt;code>make test&lt;/code>æˆ‘ä»¬ä¼šçœ‹åˆ°:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>y&lt;span style="color:#f92672">=&lt;/span>&amp;gt;foob
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x&lt;span style="color:#f92672">=&lt;/span>&amp;gt;foo foob &lt;span style="color:#75715e">#ä¸ºä»€ä¹ˆæœ‰ç©ºæ ¼ï¼Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="133-é€šé…ç¬¦">1.3.3 é€šé…ç¬¦&lt;/h3>
&lt;p>å›æƒ³ä¸€ä¸‹æ•°æ®åº“çš„çŸ¥è¯†&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é€šé…ç¬¦&lt;/th>
&lt;th>ä½¿ç”¨è¯´æ˜&lt;/th>
&lt;th>è‡ªåŠ¨å˜é‡&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>*&lt;/td>
&lt;td>åŒ¹é…0ä¸ªæˆ–è€…æ˜¯ä»»æ„ä¸ªå­—ç¬¦&lt;/td>
&lt;td>$&amp;lt;&lt;/td>
&lt;td>ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ï¼Ÿ&lt;/td>
&lt;td>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ # æ³¨æ„æ˜¯ 1 ä¸ª&lt;/td>
&lt;td>$@&lt;/td>
&lt;td>ç›®æ ‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>[]&lt;/td>
&lt;td>æˆ‘ä»¬å¯ä»¥æŒ‡å®šåŒ¹é…çš„å­—ç¬¦æ”¾åœ¨ &amp;ldquo;[]&amp;rdquo; ä¸­&lt;/td>
&lt;td>$^&lt;/td>
&lt;td>æ‰€æœ‰ä¸é‡å¤çš„ä¾èµ–æ–‡ä»¶ï¼Œä»¥ç©ºæ ¼åˆ†å¼€&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="1331-case-1">1.3.3.1 Case 1&lt;/h4>
&lt;p>æµ‹è¯•å¯ç”¨ â¬‡ï¸&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">test&lt;/span>&lt;span style="color:#f92672">:&lt;/span>*.c gcc -o $@ $^
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªå®ä¾‹å¯ä»¥è¯´æ˜æˆ‘ä»¬çš„é€šé…ç¬¦ä¸ä»…å¯ä»¥ä½¿ç”¨åœ¨è§„åˆ™çš„å‘½ä»¤ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åœ¨è§„åˆ™ä¸­ã€‚ç”¨æ¥è¡¨ç¤ºç”Ÿæ‰€æœ‰çš„ä»¥ .c ç»“å°¾çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;ul>
&lt;li>è¡¨ç¤ºæ‰€æœ‰ä»¥ .c ç»“å°¾çš„æ–‡ä»¶åŒæ—¶ç¼–è¯‘ï¼Œç”Ÿæˆ test æ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;h4 id="1332-case-2">1.3.3.2 Case 2&lt;/h4>
&lt;p>âš ï¸ è®²è¿°å˜é‡å’Œé€šé…ç¬¦ä¸è¦æ··ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>OBJ&lt;span style="color:#f92672">=&lt;/span>*.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">test&lt;/span>&lt;span style="color:#f92672">:&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>OBJ&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -o $@ $^
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>â­æˆ‘ä»¬å»æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯ï¼Œæç¤ºæˆ‘ä»¬æ²¡æœ‰ &amp;ldquo;*.c&amp;rdquo; æ–‡ä»¶ï¼Œå®ä¾‹ä¸­æˆ‘ä»¬ç›¸è¦è¡¨ç¤ºçš„æ˜¯å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ &amp;ldquo;.c&amp;rdquo; æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å¹¶æ²¡æœ‰å±•å¼€ï¼Œè€Œæ˜¯ç›´æ¥è¯†åˆ«æˆäº†ä¸€ä¸ªæ–‡ä»¶ã€‚æ–‡ä»¶åæ˜¯ &amp;ldquo;*.c&amp;rdquo;ã€‚&lt;/p>
&lt;p>ğŸ…¿ï¸ ä¸è¿‡è‡ªå·±æµ‹è¯•çš„æ—¶å€™å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œè¿™å¯èƒ½æ˜¯ makefile è‡ªå·±åšäº†ä¼˜åŒ–&lt;/p>
&lt;h3 id="134-wildcard-å‡½æ•°">1.3.4 wildcard å‡½æ•°&lt;/h3>
&lt;p>å¦‚æœæˆ‘ä»¬å°±æ˜¯ç›¸è¦é€šè¿‡å¼•ç”¨å˜é‡çš„è¯ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå‡½æ•° &amp;ldquo;wildcard&amp;rdquo;ï¼Œè¿™ä¸ªå‡½æ•°åœ¨æˆ‘ä»¬å¼•ç”¨å˜é‡çš„æ—¶å€™ï¼Œä¼šå¸®æˆ‘ä»¬å±•å¼€ã€‚æˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>OBJ&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>wildcard *.c&lt;span style="color:#66d9ef">)&lt;/span>test:&lt;span style="color:#66d9ef">$(&lt;/span>OBJ&lt;span style="color:#66d9ef">)&lt;/span> gcc -o $@ $^
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·æˆ‘ä»¬å†å»ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥äº†ã€‚è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å±•å¼€å‡½æ•°ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ä¸€ä¸ªå’Œé€šé…ç¬¦ &amp;ldquo;*&amp;rdquo; ç›¸ç±»ä¼¼çš„å­—ç¬¦ï¼Œè¿™ä¸ªå­—ç¬¦æ˜¯ &amp;ldquo;%&amp;quot;ï¼Œä¹Ÿæ˜¯åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼Œä½¿ç”¨åœ¨æˆ‘ä»¬çš„çš„è§„åˆ™å½“ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">test&lt;/span>&lt;span style="color:#f92672">:&lt;/span>test.o test1.o gcc -o $@ $^%.o:%.c gcc -o $@ $^
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;ldquo;%.o&amp;rdquo; æŠŠæˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰çš„ &amp;ldquo;.o&amp;rdquo; æ–‡ä»¶ç»„åˆæˆä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œä»åˆ—è¡¨ä¸­æŒ¨ä¸ªå–å‡ºçš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œ&amp;rdquo;%&amp;quot; è¡¨ç¤ºå–å‡ºæ¥æ–‡ä»¶çš„æ–‡ä»¶åï¼ˆä¸åŒ…å«åç¼€ï¼‰ï¼Œç„¶åæ‰¾åˆ°æ–‡ä»¶ä¸­å’Œ &amp;ldquo;%&amp;ldquo;åç§°ç›¸åŒçš„ &amp;ldquo;.c&amp;rdquo; æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œç›´åˆ°åˆ—è¡¨ä¸­çš„æ–‡ä»¶å…¨éƒ¨è¢«å–å‡ºæ¥ä¸ºæ­¢ã€‚&lt;/p>
&lt;h2 id="14-ç®€å•å®ä¾‹">1.4 ç®€å•å®ä¾‹&lt;/h2>
&lt;p>æ¥è‡ªçŸ¥ä¹ &lt;a href="https://www.zhihu.com/question/23792247/answer/600773044">https://www.zhihu.com/question/23792247/answer/600773044&lt;/a>&lt;/p>
&lt;h3 id="141-ç¬¬ä¸€ç‰ˆ">1.4.1 ç¬¬ä¸€ç‰ˆ&lt;/h3>
&lt;p>æµ‹è¯•è¿‡ï¼Œå¯ä»¥ work&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">main &lt;/span>&lt;span style="color:#f92672">:&lt;/span> main.c fun1.c fun2.c gcc -o main main.c fun1.c fun2.c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>â— ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>å¯¹äºç®€å•ä»£ç è¿˜å¥½ï¼Œè€Œå¯¹äºå¤§å‹é¡¹ç›®ï¼Œå…·æœ‰æˆåƒä¸Šä¸‡ä»£ç æ¥è¯´ï¼Œä»…ç”¨ä¸€è¡Œè§„åˆ™æ˜¯å®Œå…¨ä¸å¤Ÿçš„ï¼Œå³ä½¿å¤Ÿçš„è¯ä¹Ÿéœ€è¦å†™å¾ˆé•¿çš„ä¸€æ¡è§„åˆ™&lt;/li>
&lt;li>ä»»ä½•æ–‡ä»¶åªè¦ç¨å¾®åšäº†ä¿®æ”¹å°±éœ€è¦æ•´ä¸ªé¡¹ç›®å®Œæ•´çš„é‡è¦ç¼–è¯‘
&lt;ul>
&lt;li>Which means æœ‰åŠæ³•åœ¨ä¿®æ”¹ä¸€éƒ¨åˆ†æ—¶åªç¼–è¯‘é‚£ä¸€å°éƒ¨åˆ†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>2023-03-23 10:28:52ï¼Œè‡ªå·±çš„ç†è§£ï¼šè¿™æ ·å†™çš„è¯ï¼Œæ‰€æœ‰çš„ .c æ–‡ä»¶éƒ½æ˜¯ &lt;code>main&lt;/code> çš„ä¾èµ–ï¼Œé‚£ä¹ˆä»»æ„æ”¹å…¶ä¸­ä¸€ä¸ª .c æ–‡ä»¶ï¼Œ&lt;code>main&lt;/code> éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œsrc code ä¹‹é—´çš„ç‹¬ç«‹æ€§ä¸å¼ºã€‚&lt;/p>
&lt;h3 id="142-ç¬¬äºŒç‰ˆ">1.4.2 ç¬¬äºŒç‰ˆ&lt;/h3>
&lt;p>ä¸ºäº†é¿å…æ”¹åŠ¨ä»»ä½•ä»£ç å°±éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†ä¸»è§„åˆ™çš„å„ä¸ªä¾èµ–æ›¿æ¢æˆå„è‡ªçš„ä¸­é—´æ–‡ä»¶
å³main.c &amp;ndash;&amp;gt; main.oï¼Œfun1.c &amp;ndash;&amp;gt; fun1.oï¼Œfun2.c &amp;ndash;&amp;gt; fun2.oï¼Œå†å¯¹æ¯ä¸ªä¸­é—´æ–‡ä»¶çš„ç”Ÿæˆåˆ†åˆ«å†™ä¸€æ¡è§„åˆ™
æ¯”å¦‚å¯¹äºmain.oï¼Œè§„åˆ™ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">main.o&lt;/span>&lt;span style="color:#f92672">:&lt;/span> main.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -c main.c -o main.o
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå½“æœ‰ä¸€ä¸ªæ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶ï¼Œåªéœ€é‡æ–°ç¼–è¯‘æ­¤æ–‡ä»¶å³å¯ï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ã€‚å®Œæ•´Makefileå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">app &lt;/span>&lt;span style="color:#f92672">:&lt;/span> main.o fun1.o fun2.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc main.o fun1.o fun2.o -o app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">main.o &lt;/span>&lt;span style="color:#f92672">:&lt;/span> main.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -c main.c -o main.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">fun1.o &lt;/span>&lt;span style="color:#f92672">:&lt;/span> fun1.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -c fun1.c -o fun1.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">fun2.o &lt;/span>&lt;span style="color:#f92672">:&lt;/span> fun2.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gcc -c fun2.c -o fun2.o
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>âš ï¸ æ³¨æ„ä¸è¦åŠ å¤šä½™çš„ç©ºæ ¼ï¼Œ(gcc) å‘½ä»¤çš„å¼€å§‹ä¸€å®šè¦ä½¿ç”¨&lt;code>Tab&lt;/code>é”®ï¼Œä¸èƒ½æ˜¯ç©ºæ ¼&lt;/p>
&lt;p>â— ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>é‡Œé¢å­˜åœ¨ä¸€äº›é‡å¤çš„å†…å®¹ï¼Œå¯ä»¥è€ƒè™‘ç”¨å˜é‡ä»£æ›¿ï¼›&lt;/li>
&lt;li>åé¢ä¸‰æ¡è§„åˆ™éå¸¸ç±»ä¼¼ï¼Œå¯ä»¥è€ƒè™‘ç”¨ä¸€æ¡æ¨¡å¼è§„åˆ™ä»£æ›¿ã€‚
&lt;ul>
&lt;li>è¯´ç™½äº†ä¹Ÿå°±æ˜¯æœ‰é‡å¤&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>2023-03-23 10:31:39ï¼Œä½†æ˜¯è¿™é‡Œçš„é‡å¤åªæ˜¯å†™æ³•ä¸Šçš„é‡å¤ï¼Œè€Œ &lt;code>app&lt;/code> å¯¹ src code çš„ä¾èµ–å…³ç³»å·²ç»ç‹¬ç«‹å¼€æ¥ï¼Œèƒ½å¤Ÿæå‡é‡æ–°ç¼–è¯‘çš„æ•ˆç‡ã€‚&lt;/p>
&lt;h3 id="143-ç¬¬ä¸‰ç‰ˆ">1.4.3 ç¬¬ä¸‰ç‰ˆ&lt;/h3>
&lt;p>å¼•å…¥äº†å˜é‡çš„æ¦‚å¿µ&lt;/p>
&lt;p>åœ¨ç¬¬ä¸‰ç‰ˆMakefileä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡åŠæ¨¡å¼è§„åˆ™ä½¿Makefileæ›´åŠ ç®€æ´ã€‚ä½¿ç”¨çš„ä¸‰ä¸ªå˜é‡å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> main.o fun1.o fun2.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>target &lt;span style="color:#f92672">=&lt;/span> app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CC &lt;span style="color:#f92672">=&lt;/span> gcc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨çš„æ¨¡å¼è§„åˆ™ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">%.o&lt;/span>&lt;span style="color:#f92672">:&lt;/span> %.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> -c $&amp;lt; -o $@
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Means -&amp;gt; æ‰€æœ‰çš„.oæ–‡ä»¶éƒ½ç”±å¯¹åº”çš„.cæ–‡ä»¶ç”Ÿæˆã€‚åœ¨è§„åˆ™é‡Œï¼Œæˆ‘ä»¬åˆçœ‹åˆ°äº†ä¸¤ä¸ªè‡ªåŠ¨å˜é‡ï¼š&lt;code>$&amp;lt;&lt;/code> å’Œ &lt;code>$@&lt;/code>ã€‚
å…¶å®è‡ªåŠ¨å˜é‡æœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„æœ‰ä¸‰ä¸ªï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>$&amp;lt;&lt;/code>ï¼šç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶ï¼›&lt;/li>
&lt;li>&lt;code>$@&lt;/code>ï¼šç›®æ ‡ï¼›&lt;/li>
&lt;li>&lt;code>$^&lt;/code>ï¼šæ‰€æœ‰ä¸é‡å¤çš„ä¾èµ–æ–‡ä»¶ï¼Œä»¥ç©ºæ ¼åˆ†å¼€&lt;/li>
&lt;/ul>
&lt;p>ç›´æ¥å¤åˆ¶è¿‡æ¥çš„æºç æ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ä¸€ä¸‹ Tabã€‚â¬‡ï¸ æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> main.o fun1.o fun2.o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>target &lt;span style="color:#f92672">=&lt;/span> app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CC &lt;span style="color:#f92672">=&lt;/span> gcc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">$(target)&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span> -o &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">%.o&lt;/span>&lt;span style="color:#f92672">:&lt;/span> %.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> -c $&amp;lt; -o $@ &lt;span style="color:#75715e">#è¿™ä¸ª ç™¾åˆ†å·% å°±ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„åŒ¹é… æ‰€æœ‰ä»¥ .o ç»“å°¾çš„æ˜¯ target ä»¥ .c ç»“å°¾çš„æ˜¯ prerequisites&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>â— ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>objå¯¹åº”çš„æ–‡ä»¶éœ€è¦ä¸€ä¸ªä¸ªè¾“å…¥ï¼Œå·¥ä½œé‡å¤§ï¼›&lt;/li>
&lt;li>æ–‡ä»¶æ•°ç›®æ¯”è¾ƒå°‘æ—¶è¿˜å¥½ï¼Œæ–‡ä»¶æ•°ç›®ä¸€æ—¦å¾ˆå¤šçš„è¯ï¼Œobjå°†å¾ˆé•¿ï¼›&lt;/li>
&lt;li>è€Œä¸”æ¯å¢åŠ /åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½éœ€è¦ä¿®æ”¹Makefileã€‚&lt;/li>
&lt;/ul>
&lt;p>2023-03-23 10:35:37ï¼Œè¿™é‡Œçš„æ„æ€åº”è¯¥æ˜¯è¦äº‹å…ˆå‡†å¤‡å¥½æ‰€æœ‰éœ€è¦çš„ .o æ–‡ä»¶ï¼Œè€Œ .o æ–‡ä»¶éœ€è¦ä» .c æ–‡ä»¶ç¼–è¯‘å¾—åˆ°ã€‚å…¶ä¸­ä»ç„¶æ˜¯å­˜åœ¨å°†æ‰€æœ‰ .c ç¼–è¯‘æˆå¯¹åº”çš„ .o æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œä¸å¤Ÿè‡ªåŠ¨åŒ–ã€‚&lt;/p>
&lt;h3 id="144-ç¬¬å››ç‰ˆ">1.4.4 ç¬¬å››ç‰ˆ&lt;/h3>
&lt;p>åœ¨ç¬¬å››ç‰ˆMakefileä¸­ï¼Œæ¨å‡ºäº†ä¸¤ä¸ªå‡½æ•°ï¼š&lt;strong>wildcard&lt;/strong> å’Œ &lt;strong>patsubst&lt;/strong>ã€‚&lt;/p>
&lt;h4 id="1441-wildcard">1.4.4.1 wildcard&lt;/h4>
&lt;p>ä½œç”¨ï¼šæ‰©å±•é€šé…ç¬¦ï¼Œæœç´¢æŒ‡å®šæ–‡ä»¶ã€‚åœ¨æ­¤æˆ‘ä»¬ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>src &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>wildcard ./*.c&lt;span style="color:#66d9ef">)&lt;/span>ï¼Œ#ä»£è¡¨åœ¨å½“å‰ç›®å½•ä¸‹æœç´¢æ‰€æœ‰çš„.cæ–‡ä»¶ï¼Œå¹¶èµ‹å€¼ç»™srcã€‚å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œsrcçš„å€¼ä¸ºï¼šmain.c fun1.c fun2.cã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1442-patsubst">1.4.4.2 patsubst&lt;/h4>
&lt;p>ä½œç”¨ï¼šæ›¿æ¢é€šé…ç¬¦ï¼ŒæŒ‰æŒ‡å®šè§„åˆ™åšæ›¿æ¢ã€‚åœ¨æ­¤æˆ‘ä»¬ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>patsubst %.c, %.o, &lt;span style="color:#66d9ef">$(&lt;/span>src&lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»£è¡¨å°†srcé‡Œçš„æ¯ä¸ªæ–‡ä»¶éƒ½ç”±.cæ›¿æ¢æˆ.oã€‚å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œ&lt;code>obj&lt;/code> çš„å€¼ä¸º &lt;code>main.o fun1.o fun2.o&lt;/code>ï¼Œå…¶å®è·Ÿç¬¬ä¸‰ç‰ˆ Makefile çš„ obj å€¼ä¸€æ¨¡ä¸€æ ·ï¼Œåªä¸è¿‡åœ¨è¿™é‡Œå®ƒæ›´æ™ºèƒ½ä¸€äº›ï¼Œä¹Ÿæ›´çµæ´»ã€‚&lt;/p>
&lt;p>é™¤äº†ä½¿ç”¨ &lt;code>patsubst&lt;/code> å‡½æ•°å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡å¼è§„åˆ™è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>src:%.c&lt;span style="color:#f92672">=&lt;/span>%.o&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¹Ÿæ˜¯ä»£è¡¨å°†srcé‡Œçš„æ¯ä¸ªæ–‡ä»¶éƒ½ç”±.cæ›¿æ¢æˆ.oã€‚&lt;/p>
&lt;p>å‡ ä¹æ¯ä¸ª Makefile é‡Œéƒ½ä¼šæœ‰ä¸€ä¸ª &lt;strong>ä¼ªç›®æ ‡&lt;/strong> cleanï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡æ‰§è¡Œmake cleanå‘½ä»¤å°±æ˜¯å°†ä¸­é—´æ–‡ä»¶å¦‚ .o æ–‡ä»¶åŠç›®æ ‡æ–‡ä»¶å…¨éƒ¨åˆ é™¤ï¼Œç•™ä¸‹å¹²å‡€çš„ç©ºé—´ã€‚ä¸€èˆ¬æ˜¯å¦‚ä¸‹å†™æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY&lt;/span>&lt;span style="color:#f92672">:&lt;/span> clean clean: rm -rf &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>.PHONYä»£è¡¨å£°æ˜cleanæ˜¯ä¸€ä¸ª &lt;strong>ä¼ªç›®æ ‡&lt;/strong>ï¼Œè¿™æ ·æ¯æ¬¡æ‰§è¡Œ &lt;code>make clean&lt;/code> æ—¶ï¼Œä¸‹é¢çš„è§„åˆ™éƒ½ä¼šè¢«æ‰§è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>src &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>wildcard ./*.c&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>patsubst %.c, %.o, &lt;span style="color:#66d9ef">$(&lt;/span>src&lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>obj &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>src:%.c&lt;span style="color:#f92672">=&lt;/span>%.o&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>target &lt;span style="color:#f92672">=&lt;/span> app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CC &lt;span style="color:#f92672">=&lt;/span> gcc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">$(target)&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span> -o &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">%.o&lt;/span>&lt;span style="color:#f92672">:&lt;/span> %.c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CC&lt;span style="color:#66d9ef">)&lt;/span> -c $&amp;lt; -o $@
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY&lt;/span>&lt;span style="color:#f92672">:&lt;/span> clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">clean&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm -rf &lt;span style="color:#66d9ef">$(&lt;/span>obj&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>target&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="2-å¸¸ç”¨çš„ç¼–è¯‘é€‰é¡¹-cli-option">2. å¸¸ç”¨çš„ç¼–è¯‘é€‰é¡¹ CLI option&lt;/h1>
&lt;p>ç»™å‡ºå‡ ä¸ªè‡ªå·±ç”¨åˆ°è¿‡çš„é€‰é¡¹&lt;/p>
&lt;h2 id="21--n-æ‰“å°æ‰€æœ‰ç¼–è¯‘å‘½ä»¤ä½†å¹¶ä¸æ‰§è¡Œ">2.1 -n æ‰“å°æ‰€æœ‰ç¼–è¯‘å‘½ä»¤ï¼Œä½†å¹¶ä¸æ‰§è¡Œ&lt;/h2>
&lt;p>&lt;code>make -n mlp_learning_an_image&lt;/code>&lt;/p>
&lt;h2 id="22--s--f">2.2 -s -f&lt;/h2>
&lt;p>&lt;code>-s&lt;/code>ï¼šç¦æ­¢è¾“å‡ºç¼–è¯‘å‘½ä»¤ä¿¡æ¯ -sã€‚
&lt;code>-f&lt;/code>ï¼šç”¨äºæŒ‡å®š makefile æ–‡ä»¶çš„åç§°æˆ–è·¯å¾„ã€‚å®ƒå‘Šè¯‰ make å‘½ä»¤ä½¿ç”¨æŒ‡å®šçš„ makefile æ–‡ä»¶è€Œä¸æ˜¯é»˜è®¤çš„ Makefile æ–‡ä»¶æ¥æ‰§è¡Œç¼–è¯‘ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒMakefile æ–‡ä»¶æ˜¯ &lt;code>build.make&lt;/code>ï¼Œå› ä¸º &lt;code>make&lt;/code> å‘½ä»¤é»˜è®¤æ˜¯æ‰¾ç›®å½•ä¸‹çš„åä¸º &lt;code>Makefile&lt;/code> æ–‡ä»¶ã€‚è¿™é‡Œçš„ Makefile å¹¶éé»˜è®¤çš„åç§°ï¼Œå› æ­¤éœ€è¦ç”¨ &lt;code>-f&lt;/code> é€‰é¡¹æ¥æŒ‡å®šæ–‡ä»¶ã€‚è€Œ &lt;code>make&lt;/code> target æ˜¯ &lt;code>dependencies/fmt/CMakeFiles/fmt.dir/build&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">make&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">-s&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">-f&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">dependencies/fmt/CMakeFiles/fmt.dir/build.make&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">dependencies/fmt/CMakeFiles/fmt.dir/build&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="3-å˜é‡-variable">3. å˜é‡ variable&lt;/h1>
&lt;h1 id="4-æ¡ä»¶è¯­å¥å’Œå‡½æ•°-conditional-syntax-and-functions">4. æ¡ä»¶è¯­å¥å’Œå‡½æ•° conditional syntax and functions&lt;/h1>
&lt;h1 id="5-å…³é”®å­—-built-in-targets">5. å…³é”®å­— built-in targets&lt;/h1>
&lt;h2 id="51-phony">5.1 .PHONY&lt;/h2>
&lt;blockquote>
&lt;p>In a Makefile, .PHONY is a special target that is used to declare a target that doesn&amp;rsquo;t represent an actual file. Instead, it is used to specify a target that is always considered out of date, and therefore, its recipe will always be executed whenever it is requested.&lt;/p>
&lt;/blockquote>
&lt;p>ä¹Ÿå°±æ˜¯è¯´åœ¨å¯¹äº .PHONY å…³é”®å­—åé¢çš„å†…å®¹ï¼Œåªè¦æœ‰è¯·æ±‚ï¼Œå°±ä¼šæ‰§è¡Œã€‚è¿˜æ˜¯å¾ˆç»•ï¼Œç›´æ¥çœ‹ä¾‹å­å§ã€‚ä½¿ç”¨ .PHONY å£°æ˜äº† CMakeFiles/tiny-cuda-nn.dir/dependï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦è¾“å…¥å‘½ä»¤ &lt;code>make CMakeFiles/tiny-cuda-nn.dir/depend&lt;/code>ï¼Œå°±ä¼šæ‰§è¡Œå…¶å‘½ä»¤è¡Œï¼Œä¸ç®¡æœ‰å“ªç§ä¾èµ–&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">CMakeFiles/tiny-cuda-nn.dir/depend&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cd /home/wmhu/work/tiny-cuda-nn/build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>CMAKE_COMMAND&lt;span style="color:#66d9ef">)&lt;/span> -E cmake_depends &lt;span style="color:#e6db74">&amp;#34;Unix Makefiles&amp;#34;&lt;/span> /home/wmhu/work/tiny-cuda-nn /home/wmhu/work/tiny-cuda-nn /home/wmhu/work/tiny-cuda-nn/build /home/wmhu/work/tiny-cuda-nn/build /home/wmhu/work/tiny-cuda-nn/build/CMakeFiles/tiny-cuda-nn.dir/DependInfo.cmake --color&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>COLOR&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY &lt;/span>&lt;span style="color:#f92672">:&lt;/span> CMakeFiles/tiny-cuda-nn.dir/depend
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å†æ¥ä¸€ä¸ªä¾‹å­ï¼Œå…³äº cleanã€‚å£°æ˜ä¹‹åï¼Œä¸ç®¡ .o æ–‡ä»¶å’Œ bin æ–‡ä»¶æ˜¯ä¸æ˜¯å­˜åœ¨ï¼Œåªè¦ &lt;code>make clean&lt;/code>ï¼Œå°±ä¼šæ‰§è¡Œ &lt;code>rm -f *.o myprogram&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Makefile" data-lang="Makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY&lt;/span>&lt;span style="color:#f92672">:&lt;/span> clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">clean&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm -f *.o myprogram
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="52-default">5.2 .DEFAULT&lt;/h2>
&lt;h1 id="6-åº”ç”¨æŠ€å·§">6. åº”ç”¨æŠ€å·§&lt;/h1>
&lt;p>è¿™ä¸€ç« æè¿°ä¸€äº›å®è·µè¿‡ç¨‹ä¸­çš„æŠ€å·§ï¼Œå¯ä»¥å‚è€ƒ chatgpt ç»™çš„å¤§çº²ï¼ŒæŸ¥ç¼ºè¡¥æ¼ï¼Œç»†ç»†å®Œå–„ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>Makefile åŸºç¡€çŸ¥è¯†
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ä»€ä¹ˆæ˜¯ Makefile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„å·¥ä½œåŸç†
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„åŸºæœ¬è¯­æ³•
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„å˜é‡
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„ç›®æ ‡å’Œä¾èµ–å…³ç³»
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„å¸¸ç”¨å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>clean å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>distclean å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>install å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uninstall å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„é«˜çº§åº”ç”¨
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„æ¡ä»¶è¯­å¥
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„å‡½æ•°
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„è‡ªåŠ¨åŒ–å˜é‡
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„æ¨¡å¼è§„åˆ™
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile ä¸­çš„å¤šç›®æ ‡è§„åˆ™
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å®é™…é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•åœ¨ Makefile ä¸­è®¾ç½®ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•åœ¨ Makefile ä¸­ç¼–è¯‘å’Œé“¾æ¥å¤šä¸ªæºæ–‡ä»¶
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•åœ¨ Makefile ä¸­ç¼–è¯‘å’Œé“¾æ¥é™æ€åº“å’ŒåŠ¨æ€åº“
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•åœ¨ Makefile ä¸­å®šä¹‰å’Œä½¿ç”¨å®å®šä¹‰
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•åœ¨ Makefile ä¸­ä½¿ç”¨æ¡ä»¶ç¼–è¯‘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„è°ƒè¯•æŠ€å·§
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•ä½¿ç”¨ Makefile çš„è°ƒè¯•é€‰é¡¹
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•è¾“å‡º Makefile ä¸­çš„å˜é‡å’Œå®å®šä¹‰
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•æŸ¥çœ‹ Makefile ä¸­çš„ä¾èµ–å…³ç³»
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•æŸ¥çœ‹ Makefile ä¸­çš„ç¼–è¯‘å’Œé“¾æ¥å‘½ä»¤
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Makefile çš„æœ€ä½³å®è·µ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•ç¼–å†™å¯ç§»æ¤çš„ Makefile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•ç¼–å†™å¯ç»´æŠ¤çš„ Makefile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•ç¼–å†™é«˜æ•ˆçš„ Makefile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>å¦‚ä½•ç»„ç»‡ Makefile çš„ç›®å½•ç»“æ„
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ä»¥ä¸Šæ˜¯ä¸€äº›å¯ä»¥ä½œä¸º Makefile ç¬”è®°çš„ä¸»é¢˜å’Œå­ä¸»é¢˜ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œæ‰©å……å’Œè°ƒæ•´ã€‚åœ¨æ•´ç†ç¬”è®°çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ç»“åˆè‡ªå·±çš„å®é™…å­¦ä¹ å’Œåº”ç”¨æƒ…å†µï¼Œå°†ç†è®ºçŸ¥è¯†å’Œå®è·µé—®é¢˜ç»“åˆèµ·æ¥ï¼Œè¿™æ ·èƒ½å¤Ÿä½¿ç¬”è®°æ›´åŠ ä¸°å¯Œå’Œå®ç”¨ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="7-é€šè¿‡å®ä¾‹å­¦ä¹ ">7. é€šè¿‡å®ä¾‹å­¦ä¹ &lt;/h1>
&lt;h2 id="71-cutlass-å®ä¾‹">7.1 cutlass å®ä¾‹&lt;/h2>
&lt;h3 id="712-make-ä¸­çš„é€‰é¡¹">7.1.2 make ä¸­çš„é€‰é¡¹&lt;/h3>
&lt;p>&lt;code>make -s -f CMakeFiles/Makefile2 samples/CMakeFiles/mlp_learning_an_image.dir/all&lt;/code>&lt;/p>
&lt;p>è¿™ä¸€å¥å‘½ä»¤è¡¨ç¤ºä½¿ç”¨ CMakeFiles/Makefile2 æ–‡ä»¶ä¸­å®šä¹‰çš„è§„åˆ™æ¥ç¼–è¯‘ samples/CMakeFiles/mlp_learning_an_image.dir/all ç›®æ ‡ã€‚-s é€‰é¡¹æŒ‡ç¤º make å‘½ä»¤åœ¨æ‰§è¡Œç¼–è¯‘è¿‡ç¨‹æ—¶ä¸æ˜¾ç¤ºç¼–è¯‘å‘½ä»¤ã€‚&lt;/p>
&lt;p>all æ˜¯ä¸€ä¸ªä¼ªç›®æ ‡ï¼ŒæŒ‡ç¤º make å‘½ä»¤ç¼–è¯‘æ‰€æœ‰çš„ç›®æ ‡ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œsamples/CMakeFiles/mlp_learning_an_image.dir/all æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç›®æ ‡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ç”± CMake è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªä¸­é—´ç›®æ ‡ã€‚å®ƒçš„ä½œç”¨æ˜¯å°† samples/CMakeFiles/mlp_learning_an_image.dir ç›®å½•ä¸­æ‰€æœ‰çš„æºæ–‡ä»¶ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬é“¾æ¥ä¸ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p>
&lt;p>åœ¨ Makefile ä¸­ï¼Œé€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ªåä¸º all çš„ä¼ªç›®æ ‡ï¼Œç”¨äºç¼–è¯‘æ‰€æœ‰çš„ç›®æ ‡ã€‚all ç›®æ ‡é€šå¸¸æ˜¯é»˜è®¤ç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸æŒ‡å®šç›®æ ‡çš„æƒ…å†µä¸‹ï¼Œmake å‘½ä»¤å°†ä¼šç¼–è¯‘å®ƒã€‚å½“ç„¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–çš„ä¼ªç›®æ ‡æ¥æ‰§è¡ŒæŒ‡å®šçš„ç¼–è¯‘ä»»åŠ¡ã€‚&lt;/p>
&lt;p>ä»€ä¹ˆæ˜¯ä¼ªç›®æ ‡ï¼Ÿ&lt;/p>
&lt;p>å®é™…ç›®æ ‡æŒ‡çš„æ˜¯ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶æˆ–å…¶ä»–éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚
ä¼ªç›®æ ‡åˆ™æ˜¯æŒ‡ç”¨æ¥æ§åˆ¶ Makefile ä¸­è§„åˆ™æ‰§è¡Œé¡ºåºçš„ç›®æ ‡ï¼Œä¸ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä¼ªç›®æ ‡çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œ make å‘½ä»¤æ—¶ï¼Œå‘Šè¯‰ make å‘½ä»¤è¦æ‰§è¡Œå“ªäº›è§„åˆ™ã€‚å®ƒé€šå¸¸ç”¨æ¥æ§åˆ¶ Makefile ä¸­è§„åˆ™çš„æ‰§è¡Œé¡ºåºï¼Œæˆ–è€…æ‰§è¡Œä¸€äº›ç‰¹å®šçš„ä»»åŠ¡ï¼Œå¦‚æ¸…é™¤ç”Ÿæˆçš„æ–‡ä»¶ç­‰ã€‚&lt;/p>
&lt;p>åœ¨ Makefile ä¸­ï¼Œä¼ªç›®æ ‡çš„ç‰¹å¾æ˜¯æ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶åï¼Œå¹¶ä¸”åœ¨è§„åˆ™ä¸­ä½¿ç”¨äº† .PHONY å£°æ˜ï¼Œä»¥å‘Šè¯‰ make å‘½ä»¤å®ƒæ˜¯ä¸€ä¸ªä¼ªç›®æ ‡ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY&lt;/span>&lt;span style="color:#f92672">:&lt;/span> clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">clean&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm -f *.o
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œclean æ˜¯ä¸€ä¸ªä¼ªç›®æ ‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ .o æ–‡ä»¶ã€‚.PHONY å£°æ˜å‘Šè¯‰ make å‘½ä»¤ clean æ˜¯ä¸€ä¸ªä¼ªç›®æ ‡ï¼Œä¸å¯¹åº”ä»»ä½•æ–‡ä»¶ï¼Œåªæ˜¯ä¸€ä¸ªæ§åˆ¶è§„åˆ™æ‰§è¡Œé¡ºåºçš„ç›®æ ‡ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨ .PHONY å£°æ˜å£°æ˜ä¸€ä¸ªä¼ªç›®æ ‡ï¼Œé‚£ä¹ˆå½“åœ¨å½“å‰ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ªä¸ç›®æ ‡åŒåçš„æ–‡ä»¶æ—¶ï¼Œmake å‘½ä»¤ä¼šå°†å…¶è¯¯è®¤ä¸ºæ˜¯å®é™…ç›®æ ‡ï¼Œå¯¼è‡´é”™è¯¯çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œå®šä¹‰ä¼ªç›®æ ‡æ—¶ä¸€å®šè¦åŠ ä¸Š .PHONY å£°æ˜ã€‚&lt;/p>
&lt;hr>
&lt;h1 id="0-cmake-å’Œ-makefile-å¼‚åŒ">0. Cmake å’Œ Makefile å¼‚åŒ&lt;/h1>
&lt;p>è¿™ä¸€ç« å‚è€ƒ &lt;a href="https://www.zhihu.com/question/27455963/answer/36722992">çŸ¥ä¹æ–‡ç« &lt;/a>&lt;/p>
&lt;h2 id="01-åŠŸèƒ½æè¿°">0.1 åŠŸèƒ½æè¿°&lt;/h2>
&lt;ul>
&lt;li>&lt;code>make&lt;/code> command æ˜¯ç”¨æ¥æ‰§è¡Œ Makefile çš„&lt;/li>
&lt;li>Makefile æ˜¯ç±» UNIX ç¯å¢ƒä¸‹(æ¯”å¦‚Linux)çš„ç±»ä¼¼äºæ‰¹å¤„ç†çš„&amp;quot;è„šæœ¬&amp;quot;æ–‡ä»¶ã€‚
å…¶åŸºæœ¬è¯­æ³•æ˜¯: &lt;strong>ç›®æ ‡+ä¾èµ–+å‘½ä»¤&lt;/strong>ï¼Œåªæœ‰åœ¨&lt;strong>ç›®æ ‡&lt;/strong>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–&lt;strong>ç›®æ ‡&lt;/strong>æ¯”&lt;strong>ä¾èµ–&lt;/strong>çš„æ–‡ä»¶æ›´æ—§ï¼Œ&lt;strong>å‘½ä»¤&lt;/strong>æ‰ä¼šè¢«æ‰§è¡Œã€‚ç”±æ­¤å¯è§ï¼ŒMakefileå’Œmakeå¯é€‚ç”¨äºä»»æ„å·¥ä½œï¼Œä¸é™äºç¼–ç¨‹ã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†latexã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>2022-11-25 19:47:20ï¼Œä»è¿™ä¸ªæè¿°æ¥çœ‹ï¼ŒçŒœæµ‹åˆ¤æ–­ &lt;strong>ç›®æ ‡&lt;/strong> æ˜¯å¦ &lt;code>Already Update..&lt;/code> çš„ä¾æ®æ˜¯ç³»ç»Ÿæ—¶é—´ã€‚åˆ¤æ–­ &lt;strong>ç›®æ ‡&lt;/strong> çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ™šäº &lt;strong>ä¾èµ–&lt;/strong> æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>Makefile+makeå¯ç†è§£ä¸ºç±»unixç¯å¢ƒä¸‹çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œä½†å®ƒå¤ªåŸºç¡€äº†ï¼ŒæŠ½è±¡ç¨‹åº¦ä¸é«˜ï¼Œè€Œä¸”åœ¨windowsä¸‹ä¸å¤ªå‹å¥½(é’ˆå¯¹visual studioç”¨æˆ·)ï¼Œäºæ˜¯å°±æœ‰äº†è·¨å¹³å°é¡¹ç›®ç®¡ç†å·¥å…·cmake&lt;/p>
&lt;/li>
&lt;li>
&lt;p>cmakeæ˜¯è·¨å¹³å°é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå®ƒç”¨æ›´æŠ½è±¡çš„è¯­æ³•æ¥ç»„ç»‡é¡¹ç›®ã€‚è™½ç„¶ï¼Œä»ç„¶æ˜¯ç›®æ ‡ï¼Œä¾èµ–ä¹‹ç±»çš„ä¸œè¥¿ï¼Œä½†æ›´ä¸ºæŠ½è±¡å’Œå‹å¥½ï¼Œæ¯”å¦‚ä½ å¯ç”¨mathè¡¨ç¤ºæ•°å­¦åº“ï¼Œè€Œä¸éœ€è¦å†å…·ä½“æŒ‡å®šåˆ°åº•æ˜¯math.dllè¿˜æ˜¯libmath.soï¼Œåœ¨windowsä¸‹å®ƒä¼šæ”¯æŒç”Ÿæˆvisual studioçš„å·¥ç¨‹ï¼Œåœ¨linuxä¸‹å®ƒä¼šç”ŸæˆMakefileï¼Œç”šè‡³å®ƒè¿˜èƒ½ç”Ÿæˆeclipseå·¥ç¨‹æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»åŒä¸€ä¸ªæŠ½è±¡è§„åˆ™å‡ºå‘ï¼Œå®ƒä¸ºå„ä¸ªç¼–è¯‘å™¨å®šåˆ¶å·¥ç¨‹æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>cmakeæ˜¯æŠ½è±¡å±‚æ¬¡æ›´é«˜çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œcmakeå‘½ä»¤æ‰§è¡Œçš„CMakeLists.txtæ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>cmake æŠ½è±¡ç¨‹åº¦æ›´é«˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>qmakeæ˜¯Qtä¸“ç”¨çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå¯¹åº”çš„å·¥ç¨‹æ–‡ä»¶æ˜¯*.proï¼Œåœ¨Linuxä¸‹é¢å®ƒä¹Ÿä¼šç”ŸæˆMakefileï¼Œå½“ç„¶ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹æ‰ä¼šéœ€è¦æ‰‹åŠ¨æ‰§è¡Œqmakeï¼Œå®Œå…¨å¯ä»¥åœ¨qtcreatorè¿™ä¸ªä¸“ç”¨çš„IDEä¸‹é¢æ‰“å¼€*.proæ–‡ä»¶ï¼Œä½¿ç”¨qmakeå‘½ä»¤çš„ç¹çç»†èŠ‚ä¸ç”¨ä½ ç®¡äº†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ€»ç»“&lt;/strong>&lt;/p>
&lt;p>æ€»ç»“ä¸€ä¸‹ï¼Œmakeç”¨æ¥æ‰§è¡ŒMakefileï¼Œcmakeç”¨æ¥æ‰§è¡ŒCMakeLists.txtï¼Œqmakeç”¨æ¥å¤„ç†*.proå·¥ç¨‹æ–‡ä»¶ã€‚Makefileçš„æŠ½è±¡å±‚æ¬¡æœ€ä½ï¼Œcmakeå’Œqmakeåœ¨Linuxç­‰ç¯å¢ƒä¸‹æœ€åè¿˜æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªMakefileã€‚cmakeå’Œqmakeæ”¯æŒè·¨å¹³å°ï¼Œcmakeçš„åšæ³•æ˜¯ç”ŸæˆæŒ‡å®šç¼–è¯‘å™¨çš„å·¥ç¨‹æ–‡ä»¶ï¼Œè€Œqmakeå®Œå…¨è‡ªæˆä½“ç³»ã€‚&lt;/p>
&lt;h2 id="02-ä¸ªäººç†è§£">0.2 ä¸ªäººç†è§£&lt;/h2>
&lt;ul>
&lt;li>â­ â€‹å…·ä½“ä½¿ç”¨æ—¶ï¼ŒLinuxä¸‹ï¼Œå°å·¥ç¨‹å¯æ‰‹åŠ¨å†™Makefileï¼Œ
&lt;ul>
&lt;li>æ‰€ä»¥å­¦ä¼šè‡ªå·±æ‰‹å†™ Makefile å¯¹äºä¸€äº›æµ‹è¯•å·¥ä½œä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¤§å·¥ç¨‹ç”¨automakeæ¥å¸®ä½ ç”ŸæˆMakefileï¼Œ&lt;/li>
&lt;li>è¦æƒ³è·¨å¹³å°ï¼Œå°±ç”¨cmakeã€‚&lt;/li>
&lt;li>å¦‚æœGUIç”¨äº†Qtï¼Œä¹Ÿå¯ä»¥ç”¨qmake+*.proæ¥ç®¡ç†å·¥ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯è·¨å¹³å°çš„ã€‚å½“ç„¶ï¼Œcmakeä¸­ä¹Ÿæœ‰é’ˆå¯¹Qtçš„ä¸€äº›è§„åˆ™ï¼Œå¹¶ä»£æ›¿qmakeå¸®ä½ å°†qtç›¸å…³çš„å‘½ä»¤æ•´ç†å¥½äº†ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–ï¼Œéœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œmakeå’Œcmakeä¸»è¦å‘½ä»¤åªæœ‰ä¸€æ¡ï¼Œmakeç”¨äºå¤„ç†Makefileï¼Œcmakeç”¨æ¥è½¬è¯‘CMakeLists.txtï¼Œè€Œqmakeæ˜¯ä¸€ä¸ªä½“ç³»ï¼Œç”¨äºæ”¯æ’‘ä¸€ä¸ªç¼–ç¨‹ç¯å¢ƒï¼Œå®ƒè¿˜åŒ…å«é™¤qmakeä¹‹å¤–çš„å…¶å®ƒå¤šæ¡å‘½ä»¤(æ¯”å¦‚uicï¼Œrcc,moc)ã€‚&lt;/p>
&lt;p>ä¸Šä¸ªç®€å›¾ï¼Œå…¶ä¸­clè¡¨ç¤ºvisual studioçš„ç¼–è¯‘å™¨ï¼Œgccè¡¨ç¤ºlinuxä¸‹çš„ç¼–è¯‘å™¨&lt;/p></description></item><item><title>Xxxxx</title><link>https://huweim.github.io/posts/xxxxx/</link><pubDate>Fri, 13 Jan 2023 14:49:52 +0800</pubDate><guid>https://huweim.github.io/posts/xxxxx/</guid><description/></item><item><title>Xx</title><link>https://huweim.github.io/posts/xx/</link><pubDate>Fri, 13 Jan 2023 14:25:14 +0800</pubDate><guid>https://huweim.github.io/posts/xx/</guid><description/></item><item><title>è‡ªå·±åŠ¨æ‰‹éƒ¨ç½²transformeræ¨¡å‹ by huggingface</title><link>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E9%83%A8%E7%BD%B2transformer%E6%A8%A1%E5%9E%8B_huggingface/</link><pubDate>Sun, 23 Oct 2022 11:00:17 +0800</pubDate><guid>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E9%83%A8%E7%BD%B2transformer%E6%A8%A1%E5%9E%8B_huggingface/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>è¿™éƒ¨åˆ†å†…å®¹è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œé¢„è®¡ä¼šè®¾è®¡å¸¸è§çš„ pytorch æ¨¡å‹éƒ¨ç½²æ–¹æ³•ï¼Œç†è§£æ¡†æ¶ä¸­ï¼Œæ¯ä¸ªæ¨¡å—åœ¨åšä»€ä¹ˆã€‚å¦å¤–ï¼Œè¿™ä¹Ÿæ˜¯å·¥ç¨‹ä¸Šå¿…å¤‡çš„æŠ€èƒ½ã€‚&lt;/p>
&lt;h2 id="01-æ¨¡å‹åŠä¸‹è½½åœ°å€">0.1 æ¨¡å‹åŠä¸‹è½½åœ°å€&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Model&lt;/th>
&lt;th>Repo&lt;/th>
&lt;th>Paper&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ResNet (18: 12M; 50: 26M; 152: 60M)&lt;/td>
&lt;td>&lt;a href="https://github.com/pytorch/vision/blob/main/torchvision/models/resnet.py">https://github.com/pytorch/vision/blob/main/torchvision/models/resnet.py&lt;/a>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BERT (110 / 330M)&lt;/td>
&lt;td>&lt;a href="https://github.com/NVIDIA/DeepLearningExamples/tree/master/PyTorch/LanguageModeling/BERT">https://github.com/NVIDIA/DeepLearningExamples/tree/master/PyTorch/LanguageModeling/BERT&lt;/a>&lt;/td>
&lt;td>&lt;a href="https://arxiv.org/abs/1810.04805">https://arxiv.org/abs/1810.04805&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPT-2 (1.5B)&lt;/td>
&lt;td>&lt;a href="https://github.com/openai/gpt-2">https://github.com/openai/gpt-2&lt;/a>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OPT (125 / 350M; 1.3 / 2.7 / 6.7 / 13 / 30 / 66 / 175B)&lt;/td>
&lt;td>&lt;a href="https://github.com/facebookresearch/metaseq">https://github.com/facebookresearch/metaseq&lt;/a>&lt;/td>
&lt;td>&lt;a href="https://arxiv.org/pdf/2205.01068.pdf">https://arxiv.org/pdf/2205.01068.pdf&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BLOOM (560M; 1.1 / 1.7 / 3 / 7.1 / 176B)&lt;/td>
&lt;td>&lt;a href="https://huggingface.co/docs/transformers/model_doc/bloom">https://huggingface.co/docs/transformers/model_doc/bloom&lt;/a>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>T5 (60 / 220 / 770M; 3 / 11B)&lt;/td>
&lt;td>&lt;a href="https://github.com/google-research/text-to-text-transfer-transformer#released-model-checkpoints">https://github.com/google-research/text-to-text-transfer-transformer#released-model-checkpoints&lt;/a>&lt;/td>
&lt;td>&lt;a href="https://jmlr.org/papers/volume21/20-074/20-074.pdf">https://jmlr.org/papers/volume21/20-074/20-074.pdf&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="02-æ¨¡å‹ä¸‹è½½æ–¹æ³•">0.2 æ¨¡å‹ä¸‹è½½æ–¹æ³•&lt;/h2>
&lt;p>2023-07-08 20:10:12ï¼Œé‡æ–°å›é¡¾ 22 å¹´å…³äºå¤§æ¨¡å‹ç ”ç©¶çš„å·¥ä½œã€‚ä» chatgpt çˆ†ç«ä¹‹åï¼Œå¤§æ¨¡å‹åº”ç”¨çš„æ¡†æ¶å˜å¾—ç«çƒ­ï¼Œè¯­è¨€æ¨¡å‹çš„ç¤¾åŒºä¹Ÿå˜å¾—ç«çƒ­èµ·æ¥ã€‚å‡†å¤‡åœ¨ ant_ext å·¥ä½œä¸­åŠ å…¥ä¸€äº›æ–°çš„æ¨¡å‹çš„è¯„ä¼°ï¼Œä½†æ˜¯æœŸæ™ºè¿æ¥ huggingface çš„ç½‘ç»œè€æ˜¯æŠ½é£ï¼Œå¯¼è‡´è¯•å›¾ä» huggingface ä¸‹è½½æ¨¡å‹æ—¶å‡ºç°é”™è¯¯ã€‚ç°åœ¨æ€»ç»“ä¸€äº›å…¶ä»–çš„ä¸‹è½½æ–¹æ³•ã€‚&lt;/p>
&lt;p>Ref: &lt;a href="https://zhuanlan.zhihu.com/p/475260268">https://zhuanlan.zhihu.com/p/475260268&lt;/a>&lt;/p>
&lt;h3 id="021-git-lfs">0.2.1 git lfs&lt;/h3>
&lt;p>è¿™ä¸ªæ–¹æ³•ä¼šä¸‹è½½æ‰€æœ‰æ¡†æ¶çš„æ¨¡å‹æ–‡ä»¶ï¼Œflax_model.msgpackã€tf_model.h5å’Œpytorch_model.binï¼Œå¯ä»¥çœ‹åˆ°æœ‰ 3 ç§æ¡†æ¶çš„æ¨¡å‹æ–‡ä»¶ï¼Œæ¯”è¾ƒå†—ä½™ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git lfs install
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git clone https://huggingface.co/bert-base-chinese
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="022-hungging-face-hub">0.2.2 hungging face hub&lt;/h3>
&lt;p>è¿™ç§æ–¹æ³•å…¶å®ä»ç„¶æ˜¯é€šè¿‡è®¿é—® huggingface ç½‘ç«™æ¥ä¸‹è½½&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>python
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;gt;&amp;gt;&amp;gt; from huggingface_hub import snapshot_download
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;gt;&amp;gt;&amp;gt; snapshot_download&lt;span style="color:#f92672">(&lt;/span>repo_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;facebook/opt-13b&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é€šè¿‡å‚æ•°å¯ä»¥æŒ‡å®šä¸‹è½½çš„æ–‡ä»¶ï¼Œå±è”½ä¸éœ€è¦çš„æ–‡ä»¶å³å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;gt;&amp;gt;&amp;gt; snapshot_download&lt;span style="color:#f92672">(&lt;/span>repo_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;facebook/opt-13b&amp;#34;&lt;/span>, ignore_patterns&lt;span style="color:#f92672">=[&lt;/span>&lt;span style="color:#e6db74">&amp;#34;*.h5&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;*.ot&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;*.msgpack&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span>, local_dir&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/localdata_ssd/model&amp;#34;&lt;/span>, local_dir_use_symlinks&lt;span style="color:#f92672">=&lt;/span>False&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="1-hugging-face">1. Hugging Face&lt;/h1>
&lt;p>ç®€ä»‹ï¼šHugging face æ˜¯ä¸€å®¶æ€»éƒ¨ä½äºçº½çº¦çš„èŠå¤©æœºå™¨äººåˆåˆ›æœåŠ¡å•†ï¼Œå¼€å‘çš„åº”ç”¨åœ¨é’å°‘å¹´ä¸­é¢‡å—æ¬¢è¿ï¼Œç›¸æ¯”äºå…¶ä»–å…¬å¸ï¼ŒHugging Faceæ›´åŠ æ³¨é‡äº§å“å¸¦æ¥çš„æƒ…æ„Ÿä»¥åŠç¯å¢ƒå› ç´ ã€‚ä½†æ›´ä»¤å®ƒå¹¿ä¸ºäººçŸ¥çš„æ˜¯Hugging Faceä¸“æ³¨äºNLPæŠ€æœ¯ï¼Œæ‹¥æœ‰å¤§å‹çš„å¼€æºç¤¾åŒºã€‚å°¤å…¶æ˜¯åœ¨githubä¸Šå¼€æºçš„è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œé¢„è®­ç»ƒæ¨¡å‹åº“ Transformersï¼Œå·²è¢«ä¸‹è½½è¶…è¿‡ä¸€ç™¾ä¸‡æ¬¡ï¼Œgithubä¸Šè¶…è¿‡24000ä¸ªstarã€‚Transformers æä¾›äº†NLPé¢†åŸŸå¤§é‡state-of-artçš„ é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ç»“æ„çš„æ¨¡å‹å’Œè°ƒç”¨æ¡†æ¶ã€‚&lt;/p>
&lt;p>BERT æ¨¡å‹ä¸­ï¼Œä¸€ä¸ª token-wise å°±æ˜¯ 768 ç»´çš„å‘é‡ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ€»çš„æ¥è¯´ï¼Œæä¾›äº†å„ç§æ˜“ç”¨ transformer æ¨¡å‹ï¼Œå¹¶ä¸”æœ‰å¾ˆå¥½çš„ç¤¾åŒºå’Œæ–‡æ¡£ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="11-ç®€ä»‹">1.1 ç®€ä»‹&lt;/h2>
&lt;h3 id="111-ç”¨é€”">1.1.1 ç”¨é€”&lt;/h3>
&lt;p>ç†è§£äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰æ˜¯æä¾›é¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œè‡ªå·±å¯ä»¥ç”¨æ¥è§£å†³ä¸€äº›ä»»åŠ¡ã€‚&lt;/p>
&lt;h3 id="112-é‡è¦æ¦‚å¿µ">1.1.2 é‡è¦æ¦‚å¿µ&lt;/h3>
&lt;h4 id="1121-pipeline">1.1.2.1 Pipeline&lt;/h4>
&lt;p>pipeline å‡½æ•°ï¼šåŒ…å« pro-processing, model, post-processing&lt;/p>
&lt;p>å¦‚æœåªæ˜¯æƒ³ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹çš„åŠŸèƒ½ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ã€‚pipeline å‡½æ•°ä¸­åº”è¯¥å®Œæˆäº†ä¸€å¥— workflowã€‚ä¸‹åˆ—ä»£ç ä¸‹è½½äº†å¤§æ¦‚ 300MB çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œç»™å‡ºäº†å¯¹æˆ‘è¾“å…¥çš„å¥å­çš„æƒ…æ„Ÿåˆ†æã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> pipeline
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>classifier &lt;span style="color:#f92672">=&lt;/span> pipeline(&lt;span style="color:#e6db74">&amp;#34;sentiment-analysis&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(classifier(&lt;span style="color:#e6db74">&amp;#34;You like a pig&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>output: [{&lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;NEGATIVE&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;score&amp;#39;&lt;/span>: &lt;span style="color:#ae81ff">0.9961085915565491&lt;/span>}]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1122-autoclass">1.1.2.2 AutoClass&lt;/h4>
&lt;p>&lt;code>AutoModelForSequenceClassification&lt;/code> ä»¥åŠ &lt;code>AutoTokenizer&lt;/code> ç”¨äºæ”¯æŒ &lt;code>pipeline()&lt;/code>ã€‚AutoClass æ˜¯ä¸€ç§å¿«æ·æ–¹å¼ï¼Œå¯ä»¥è‡ªåŠ¨ä»é¢„è®­ç»ƒæ¨¡å‹çš„åç§°æˆ–è·¯å¾„ä¸­æ£€ç´¢æ¨¡å‹æ¶æ„ã€‚ æ‚¨åªéœ€è¦ä¸ºæ‚¨çš„ä»»åŠ¡é€‰æ‹©é€‚å½“çš„ AutoClass åŠå…¶å…³è”çš„é¢„å¤„ç†ç±»ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åœ¨è‡ªå·±ä½¿ç”¨æ—¶ï¼Œé€‰æ‹© GPT2 æ¨¡å‹ï¼Œéœ€è¦ &lt;code>from transformers import GPT2Model&lt;/code>ï¼Œå¦‚æœè¦å¼•å…¥å…¶ä»–æ¨¡å‹ä¹Ÿæ˜¯ç±»ä¼¼çš„åšæ³•ã€‚&lt;code>from transformers import AutoModel&lt;/code>ï¼Œåº”è¯¥å¯ä»¥æ ¹æ®æ¨¡å‹åç§°è‡ªå·±å»æ£€ç´¢ä¸‹è½½ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>2022-10-25 21:13:01ï¼Œå½“æˆ‘æœ‰å¯èƒ½é€šè¿‡å‚æ•°è½½å…¥å¤šç§æ¨¡å‹æ—¶ï¼Œæˆ‘æ„è¯†åˆ°äº† AutoClass çš„ä½œç”¨ã€‚&lt;/p>
&lt;h4 id="1123-custom-model">1.1.2.3 Custom Model&lt;/h4>
&lt;p>ä¸»è¦é€”å¾„æ˜¯è·å–æ¨¡å‹çš„ configï¼Œç„¶åæ‰‹åŠ¨ä¿®æ”¹å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> AutoConfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>my_config &lt;span style="color:#f92672">=&lt;/span> AutoConfig&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;distilbert-base-uncased&amp;#34;&lt;/span>, n_heads&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">12&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>my_model &lt;span style="color:#f92672">=&lt;/span> AutoModel&lt;span style="color:#f92672">.&lt;/span>from_config(my_config)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1124-trainer---a-pytorch-optimized-training-loop">1.1.2.4 Trainer - a PyTorch optimized training loop&lt;/h4>
&lt;p>ç›®å‰çš„å¾ˆå¤šæ¡†æ¶ä¸­éƒ½æœ‰ä¸€å¥—è®­ç»ƒçš„ loopï¼Œhugging face ä¹Ÿæä¾›äº†è¿™å¥—æµç¨‹ã€‚è®¾ç½®å¥½å‡ ä¸ªå¿…å¤‡çš„å‚æ•°å’Œè¾“å…¥å³å¯ã€‚&lt;/p>
&lt;ol>
&lt;li>A PreTrainedModel or a &lt;code>torch.nn.Module&lt;/code>ï¼›è‡ªå·±å®šåˆ¶ä¸€ä¸ªæ¨¡å‹åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> AutoModelForSequenceClassification
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> AutoModelForSequenceClassification&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;distilbert-base-uncased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>&lt;code>TrainingArguments&lt;/code>ï¼šè¶…å‚æ•°ï¼Œæ¯”å¦‚ learning rate, batch size, epoch&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> TrainingArguments
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>training_args &lt;span style="color:#f92672">=&lt;/span> TrainingArguments(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output_dir&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;path/to/save/folder/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> learning_rate&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2e-5&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> per_device_train_batch_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> per_device_eval_batch_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_train_epochs&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>è®¾ç½®é¢„å¤„ç†è¿‡ç¨‹ï¼šæ¯”å¦‚ tokenizer, feature extractor, processor&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> AutoTokenizer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tokenizer &lt;span style="color:#f92672">=&lt;/span> AutoTokenizer&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;distilbert-base-uncased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>å®šä¹‰é¢„å¤„ç†çš„è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ï¼›ä¸è¿‡è¿™æ®µä»£ç ä¹‹å‰å¾—å…ˆæŠŠ dataset load è¿›æ¥å§ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>train_dataset &lt;span style="color:#f92672">=&lt;/span> dataset[&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>] &lt;span style="color:#75715e"># doctest: +SKIP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>eval_dataset &lt;span style="color:#f92672">=&lt;/span> dataset[&lt;span style="color:#e6db74">&amp;#34;eval&amp;#34;&lt;/span>] &lt;span style="color:#75715e"># doctest: +SKIP&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>&lt;code>DataCollator()&lt;/code> to create a batch of examples from your dataset&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> DefaultDataCollator
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data_collator &lt;span style="color:#f92672">=&lt;/span> DefaultDataCollator()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>2022-10-24 09:43:20ï¼Œè¿™ä¸ª example æ¯”è¾ƒé™Œç”Ÿ&lt;/p>
&lt;/blockquote>
&lt;ol start="6">
&lt;li>Put it all together&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> Trainer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>trainer &lt;span style="color:#f92672">=&lt;/span> Trainer(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">=&lt;/span>model,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">=&lt;/span>training_args,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train_dataset&lt;span style="color:#f92672">=&lt;/span>dataset[&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eval_dataset&lt;span style="color:#f92672">=&lt;/span>dataset[&lt;span style="color:#e6db74">&amp;#34;test&amp;#34;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tokenizer&lt;span style="color:#f92672">=&lt;/span>tokenizer,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data_collator&lt;span style="color:#f92672">=&lt;/span>data_collator,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) &lt;span style="color:#75715e"># doctest: +SKIP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># start training&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>trainer&lt;span style="color:#f92672">.&lt;/span>train()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1125-é¢„å¤„ç†">1.1.2.5 é¢„å¤„ç†&lt;/h4>
&lt;p>å¯¹äº NLP æ¨¡å‹ï¼Œä¸€èˆ¬å°±æ˜¯ç”¨ tokenizer æ¥åšã€‚ç»è¿‡ tokenizer çš„å­—å…¸æœ‰ä¸‰ä¸ªé‡è¦çš„ items&lt;/p>
&lt;ul>
&lt;li>input_ids, the indices corresponding to each token in the sentence.&lt;/li>
&lt;li>attention_mask, indicates whether a token should be attended to or not.&lt;/li>
&lt;li>token_type_ids, identifies which sequence a token belongs to when there is more than one sequence.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>padding&lt;/strong>&lt;/p>
&lt;p>æ¯ä¸ª sentence é•¿åº¦ä¸ä¸€è‡´ï¼Œç”¨ padding æ¥ tensor å¯¹é½ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>batch_sentences &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;But what about second breakfast?&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Don&amp;#39;t think he knows about second breakfast, Pip.&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;What about elevensies?&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>encoded_input &lt;span style="color:#f92672">=&lt;/span> tokenizer(batch_sentences, padding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(encoded_input)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#e6db74">&amp;#39;input_ids&amp;#39;&lt;/span>: [[&lt;span style="color:#ae81ff">101&lt;/span>, &lt;span style="color:#ae81ff">1252&lt;/span>, &lt;span style="color:#ae81ff">1184&lt;/span>, &lt;span style="color:#ae81ff">1164&lt;/span>, &lt;span style="color:#ae81ff">1248&lt;/span>, &lt;span style="color:#ae81ff">6462&lt;/span>, &lt;span style="color:#ae81ff">136&lt;/span>, &lt;span style="color:#ae81ff">102&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">101&lt;/span>, &lt;span style="color:#ae81ff">1790&lt;/span>, &lt;span style="color:#ae81ff">112&lt;/span>, &lt;span style="color:#ae81ff">189&lt;/span>, &lt;span style="color:#ae81ff">1341&lt;/span>, &lt;span style="color:#ae81ff">1119&lt;/span>, &lt;span style="color:#ae81ff">3520&lt;/span>, &lt;span style="color:#ae81ff">1164&lt;/span>, &lt;span style="color:#ae81ff">1248&lt;/span>, &lt;span style="color:#ae81ff">6462&lt;/span>, &lt;span style="color:#ae81ff">117&lt;/span>, &lt;span style="color:#ae81ff">21902&lt;/span>, &lt;span style="color:#ae81ff">1643&lt;/span>, &lt;span style="color:#ae81ff">119&lt;/span>, &lt;span style="color:#ae81ff">102&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">101&lt;/span>, &lt;span style="color:#ae81ff">1327&lt;/span>, &lt;span style="color:#ae81ff">1164&lt;/span>, &lt;span style="color:#ae81ff">5450&lt;/span>, &lt;span style="color:#ae81ff">23434&lt;/span>, &lt;span style="color:#ae81ff">136&lt;/span>, &lt;span style="color:#ae81ff">102&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>]],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;token_type_ids&amp;#39;&lt;/span>: [[&lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>]],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;attention_mask&amp;#39;&lt;/span>: [[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>]]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Truncation&lt;/strong>&lt;/p>
&lt;p>ä¹Ÿæ˜¯ä¸€ç§å¯¹é½çš„æ–¹å¼&lt;/p>
&lt;h3 id="113-æ¨¡å‹-model">1.1.3 æ¨¡å‹ Model&lt;/h3>
&lt;p>æ”¯æŒçš„æ¨¡å‹å¾ˆå¤šï¼Œæ¯”è¾ƒçƒ­é—¨çš„é¢„è®­ç»ƒæ¨¡å‹åŸºæœ¬éƒ½æœ‰ã€‚å­¦æœ¯ç•Œçš„å¾ˆå¤šæ¨¡å‹ä¹Ÿæœ‰ï¼Œæ¯”å¦‚ I-BERTï¼ŒRoBERTa&lt;/p>
&lt;h2 id="12-api">1.2 API&lt;/h2>
&lt;h3 id="121-from_pretrained">1.2.1 from_pretrained&lt;/h3>
&lt;p>åŠŸèƒ½ï¼š&lt;code>from_pretrained&lt;/code> æä¾›äº†æ¨¡å‹ç±»åˆ«åˆ¤æ–­ï¼Œæ¨¡å‹æ–‡ä»¶åˆ—è¡¨æ˜ å°„ï¼Œæ¨¡å‹æ–‡ä»¶ä¸‹è½½åŠç¼“å­˜ï¼Œç½‘ç»œä¸‹è½½ç¨³å®šæ€§å®¹é”™ç­‰åŠŸèƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Download from huggingface.co and cache&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> BertModel&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;bert-base-uncased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model&lt;span style="color:#f92672">.&lt;/span>save_pretrained(&lt;span style="color:#e6db74">&amp;#39;./local_model_directory/&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Load from local&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> BertModel&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#39;./local_model_directory/&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span>(os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>exists(&lt;span style="color:#e6db74">&amp;#39;./model/&amp;#39;&lt;/span>&lt;span style="color:#f92672">+&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>gpt2_model&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#e6db74">&amp;#39;pytorch_model.bin&amp;#39;&lt;/span>)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">.&lt;/span>GPT2ForSequenceClassification&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#39;./model/&amp;#39;&lt;/span>&lt;span style="color:#f92672">+&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>gpt2_model)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model &lt;span style="color:#f92672">=&lt;/span> GPT2ForSequenceClassification&lt;span style="color:#f92672">.&lt;/span>from_pretrained(args&lt;span style="color:#f92672">.&lt;/span>gpt2_model)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_labels &lt;span style="color:#f92672">=&lt;/span> len(model&lt;span style="color:#f92672">.&lt;/span>config&lt;span style="color:#f92672">.&lt;/span>id2label)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model &lt;span style="color:#f92672">=&lt;/span> GPT2ForSequenceClassification&lt;span style="color:#f92672">.&lt;/span>from_pretrained(args&lt;span style="color:#f92672">.&lt;/span>gpt2_model, num_labels&lt;span style="color:#f92672">=&lt;/span>num_labels)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">.&lt;/span>save_pretrained(&lt;span style="color:#e6db74">&amp;#39;./model/&amp;#39;&lt;/span>&lt;span style="color:#f92672">+&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>gpt2_model)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="13-fine-tune-a-pretrained-model">1.3 Fine-tune a pretrained model&lt;/h2>
&lt;p>å¯ä»¥ç”¨ 1.1.2.4 ä¸­çš„ &lt;code>Trainer()&lt;/code> æ¥å®ç°å¾®è°ƒå’Œè®­ç»ƒï¼Œä¹Ÿå¯ä»¥åœ¨ pytorch æ¡†æ¶ä¸­å®ç°ã€‚ä¸‹é¢æ˜¯æ­¥éª¤ã€‚&lt;/p>
&lt;h3 id="131-prepare-a-dataset">1.3.1 Prepare a dataset&lt;/h3>
&lt;p>æ¯”å¦‚ï¼Œä» &lt;code>Yelp Reviews&lt;/code> ä¸­ load æ•°æ®ï¼Œç„¶åè¿›è¡Œé¢„å¤„ç†ã€‚ä¸‹é¢çš„ä»£ç ç”¨åˆ°äº† &lt;code>map()&lt;/code> å‡½æ•°ï¼Œå†™æ³•æ¯”è¾ƒé™Œç”Ÿï¼Œä¸è¿‡è¿™ä¸ªè¿‡ç¨‹æ˜¯é€šç”¨çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># load&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datasets &lt;span style="color:#f92672">import&lt;/span> load_dataset
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(&lt;span style="color:#e6db74">&amp;#34;yelp_review_full&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset[&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>][&lt;span style="color:#ae81ff">100&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;My expectations for McDonalds are t rarely high....&amp;#39;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># tokenizer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> AutoTokenizer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tokenizer &lt;span style="color:#f92672">=&lt;/span> AutoTokenizer&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;bert-base-cased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">tokenize_function&lt;/span>(examples):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> tokenizer(examples[&lt;span style="color:#e6db74">&amp;#34;text&amp;#34;&lt;/span>], padding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;max_length&amp;#34;&lt;/span>, truncation&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tokenized_datasets &lt;span style="color:#f92672">=&lt;/span> dataset&lt;span style="color:#f92672">.&lt;/span>map(tokenize_function, batched&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="132-train">1.3.2 Train&lt;/h3>
&lt;p>ç”¨ &lt;code>Trainer()&lt;/code> è®­ç»ƒåœ¨ 1.1.2.4 ä¸­è®²è¿‡äº†ï¼Œè®²ä¸€ä¸‹ç”¨ native pytorch è®­ç»ƒï¼Œ&lt;strong>Train in native PyTorch&lt;/strong>&lt;/p>
&lt;h4 id="1321-dataloader">1.3.2.1 DataLoader&lt;/h4>
&lt;p>ä¸ºè®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†åˆ›å»ºä¸€ä¸ª &lt;code>DataLoader&lt;/code>ï¼Œä»¥ä¾¿å¯ä»¥éå†æ•°æ®çš„ batchã€‚ç»™å‡º BERT æ¡†æ¶ä¸­çš„ç¤ºä¾‹ä»£ç ã€‚å˜é‡ &lt;code>batch&lt;/code> ä¸­å°±æ˜¯ä¸€ä¸ª batchï¼Œç»è¿‡ tokenizer ä¹‹åçš„æ•°æ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> torch.utils.data &lt;span style="color:#f92672">import&lt;/span> (DataLoader, RandomSampler, SequentialSampler, TensorDataset)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>train_features &lt;span style="color:#f92672">=&lt;/span> get_train_features(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>data_dir,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>gpt2_model,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>max_seq_length,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>do_lower_case,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>local_rank,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>train_batch_size,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>gradient_accumulation_steps,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>num_train_epochs,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tokenizer,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> processor,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>train_data &lt;span style="color:#f92672">=&lt;/span> gen_tensor_dataset(train_features)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train_dataloader &lt;span style="color:#f92672">=&lt;/span> DataLoader(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train_data,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sampler&lt;span style="color:#f92672">=&lt;/span>train_sampler,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> batch_size&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>train_batch_size,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> e &lt;span style="color:#f92672">in&lt;/span> range(args&lt;span style="color:#f92672">.&lt;/span>num_train_epochs):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> step, batch &lt;span style="color:#f92672">in&lt;/span> enumerate(train_dataloader):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1322-optimizer-and-learning-rate-scheduler">1.3.2.2 Optimizer and learning rate scheduler&lt;/h4>
&lt;p>ä¼˜åŒ–å™¨æ ¹æ®æ¨¡å‹æ¥å®šä¹‰ï¼Œè¦ä¼ å…¥ learning rate å—ï¼Œä»£ç ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>model, optimizer, scheduler &lt;span style="color:#f92672">=&lt;/span> init_optimizer_and_amp(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>learning_rate,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>loss_scale,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>warmup_proportion,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_train_optimization_steps,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>fp16,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">init_optimizer_and_amp&lt;/span>(model, learning_rate, loss_scale, warmup_proportion,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_train_optimization_steps, use_fp16):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> optimizer, scheduler &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>, &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger&lt;span style="color:#f92672">.&lt;/span>info(&lt;span style="color:#e6db74">&amp;#34;using fp32&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> num_train_optimization_steps &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> optimizer &lt;span style="color:#f92672">=&lt;/span> BertAdam(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> optimizer_grouped_parameters,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lr&lt;span style="color:#f92672">=&lt;/span>learning_rate,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> warmup&lt;span style="color:#f92672">=&lt;/span>warmup_proportion,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> t_total&lt;span style="color:#f92672">=&lt;/span>num_train_optimization_steps,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> model, optimizer, scheduler
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1323-training-loop">1.3.2.3 Training Loop&lt;/h4>
&lt;p>è¿™ä¸ªæ— éœ€å¤šè¯´ã€‚è®¾ç½®å¥½ epochï¼Œæ¯ä¸ª epoch ä¼šè¿‡å®Œè®­ç»ƒæ•°æ®é›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚ï¼ˆå½“ç„¶ï¼Œä¹Ÿæœ‰éšæœºæŠ½æ ·çš„å½¢å¼ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>model&lt;span style="color:#f92672">.&lt;/span>train()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> e &lt;span style="color:#f92672">in&lt;/span> range(args&lt;span style="color:#f92672">.&lt;/span>num_train_epochs):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> step, batch &lt;span style="color:#f92672">in&lt;/span> enumerate(train_dataloader):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> batch &lt;span style="color:#f92672">=&lt;/span> tuple(t&lt;span style="color:#f92672">.&lt;/span>to(device) &lt;span style="color:#66d9ef">for&lt;/span> t &lt;span style="color:#f92672">in&lt;/span> batch)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_ids, input_mask, segment_ids, label_ids &lt;span style="color:#f92672">=&lt;/span> batch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># outputs = model(**batch)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outputs &lt;span style="color:#f92672">=&lt;/span> model(input_ids&lt;span style="color:#f92672">=&lt;/span>input_ids, token_type_ids&lt;span style="color:#f92672">=&lt;/span>segment_ids, attention_mask&lt;span style="color:#f92672">=&lt;/span>input_mask, labels&lt;span style="color:#f92672">=&lt;/span>label_ids)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loss &lt;span style="color:#f92672">=&lt;/span> outputs&lt;span style="color:#f92672">.&lt;/span>loss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loss&lt;span style="color:#f92672">.&lt;/span>backward()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> optimizer&lt;span style="color:#f92672">.&lt;/span>step()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lr_scheduler&lt;span style="color:#f92672">.&lt;/span>step()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> optimizer&lt;span style="color:#f92672">.&lt;/span>zero_grad()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> progress_bar&lt;span style="color:#f92672">.&lt;/span>update(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1324-evaluate">1.3.2.4 Evaluate&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>model&lt;span style="color:#f92672">.&lt;/span>eval()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> i, (input_ids, input_mask, segment_ids, label_ids) &lt;span style="color:#f92672">in&lt;/span> enumerate(eval_dataloader):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_ids &lt;span style="color:#f92672">=&lt;/span> input_ids&lt;span style="color:#f92672">.&lt;/span>to(device)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_mask &lt;span style="color:#f92672">=&lt;/span> input_mask&lt;span style="color:#f92672">.&lt;/span>to(device)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> segment_ids &lt;span style="color:#f92672">=&lt;/span> segment_ids&lt;span style="color:#f92672">.&lt;/span>to(device)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> label_ids &lt;span style="color:#f92672">=&lt;/span> label_ids&lt;span style="color:#f92672">.&lt;/span>to(device)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>no_grad():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># label_ids = label_ids.to(torch.float)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outputs &lt;span style="color:#f92672">=&lt;/span> model(input_ids&lt;span style="color:#f92672">=&lt;/span>input_ids, token_type_ids&lt;span style="color:#f92672">=&lt;/span>segment_ids, attention_mask&lt;span style="color:#f92672">=&lt;/span>input_mask, labels&lt;span style="color:#f92672">=&lt;/span>label_ids)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logits &lt;span style="color:#f92672">=&lt;/span> outputs&lt;span style="color:#f92672">.&lt;/span>logits
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="14-accelerate">1.4 Accelerate&lt;/h2>
&lt;p>Easily rain and use PyTorch models with multi-GPU, TPU, mixed-precision&lt;/p>
&lt;h3 id="140-æœ¯è¯­">1.4.0 æœ¯è¯­&lt;/h3>
&lt;p>å…³äºåˆ†å¸ƒå¼çš„ä¸€äº›æ¦‚å¿µå’Œæœ¯è¯­ã€‚&lt;/p>
&lt;p>å‚è€ƒï¼š&lt;/p>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/544273093">https://zhuanlan.zhihu.com/p/544273093&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.zhihu.com/question/453920336/answer/1828326535">https://www.zhihu.com/question/453920336/answer/1828326535&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Scatter: æŠŠæ•°æ®åˆ†å‘åˆ°å…¶ä»–çº¿ç¨‹ or è¿›ç¨‹&lt;/li>
&lt;li>Gather: æŠŠæ•°æ®ä»å…¶ä»–è¿›ç¨‹ or çº¿ç¨‹ä¸­æ”¶é›†åˆ°ä¸€ä¸ªä¸»è¿›ç¨‹ä¸­&lt;/li>
&lt;li>Reduce: è®¡ç®—åœ¨å„ä¸ªè¿›ç¨‹ or çº¿ç¨‹ä¸­è¿›è¡Œï¼Œç„¶åå½’çº¦åˆ°ä¸€ä¸ªä¸»è¿›ç¨‹ä¸­&lt;/li>
&lt;li>All-Reduce: åŒ Reduce ä¸€æ ·ï¼Œè®¡ç®—å†å„ä¸ªè¿›ç¨‹ or çº¿ç¨‹ä¸­è¿›è¡Œï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¸€èµ·å½’çº¦ï¼Œä¿æŒæ¯ä¸ªèŠ‚ç‚¹çš„ç»“æœä¸€è‡´&lt;/li>
&lt;li>Broadcast: æŠŠæ•°æ®å¤åˆ¶åˆ°å„ä¸ªè¿›ç¨‹ or çº¿ç¨‹&lt;/li>
&lt;li>All-Gather: ä¸ Gather ä¸åŒï¼Œæ¯ä¸ªè¿›ç¨‹ or çº¿ç¨‹ä¸­å®Œæˆæ•°æ®çš„æ‰‹æœºï¼Œä¿è¯æ¯ä¸ªèŠ‚ç‚¹çš„ç»“æœä¸€è‡´&lt;/li>
&lt;li>CLI (Command Line Interface)ï¼šä¸€ç§é€šè¿‡å‘½ä»¤è¡Œæ¥äº¤äº’çš„å·¥å…·æˆ–è€…åº”ç”¨ï¼Œæ¯”å¦‚ mkdir, cd, scp, npm ç­‰&lt;/li>
&lt;li>Rank: è¡¨ç¤ºè¿›ç¨‹çš„ç¼–å·/åºå·ã€‚ï¼ˆè‡ªå·±è§‚å¯Ÿåˆ°ä¸€ä¸ª GPU ä¼¼ä¹å¯¹åº”ä¸€ä¸ª rankï¼Œä¸è¿‡ rank å’Œ GPU æ²¡æœ‰ä¸¥æ ¼çš„å¯¹åº”å…³ç³»ã€‚å¦‚æœæ˜¯å¤šè¿›ç¨‹å…±äº« GPUï¼Œé‚£ä¹ˆä¸€ä¸ª GPU å¯ä»¥ä¸ºå¤šä¸ª rank æœåŠ¡ï¼‰&lt;/li>
&lt;li>Node: ç‰©ç†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä¸€å°æœºå™¨æˆ–è€…ä¸€ä¸ªå®¹å™¨ï¼ŒèŠ‚ç‚¹å†…å¯ä»¥æœ‰å¤šä¸ª GPU&lt;/li>
&lt;li>Rank å’Œ Local Rank: rankæ˜¯æŒ‡åœ¨æ•´ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ä¸­è¿›ç¨‹çš„åºå·ï¼›local_rankæ˜¯æŒ‡åœ¨ä¸€ä¸ªnodeä¸Šè¿›ç¨‹çš„ç›¸å¯¹åºå·ï¼Œlocal_rankåœ¨nodeä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚&lt;/li>
&lt;li>nnodesã€node_rank ä¸ nproc_per_nodeï¼š nnodesæ˜¯æŒ‡ç‰©ç†èŠ‚ç‚¹æ•°é‡ï¼Œnode_rankæ˜¯ç‰©ç†èŠ‚ç‚¹çš„åºå·ï¼›nproc_per_nodeæ˜¯æŒ‡æ¯ä¸ªç‰©ç†èŠ‚ç‚¹ä¸Šé¢è¿›ç¨‹çš„æ•°é‡ã€‚&lt;/li>
&lt;li>word size ï¼š å…¨å±€ï¼ˆä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ï¼‰ä¸­ï¼Œrankçš„æ•°é‡ã€‚&lt;/li>
&lt;li>csrc: åº”è¯¥æ˜¯ C source code&lt;/li>
&lt;li>NVIDIA Megatron-LM: é’ˆå¯¹Transformerç±»çš„æ¨¡å‹æä¾›åŠè‡ªåŠ¨çš„åˆ†å¸ƒå¼éƒ¨ç½²ã€‚&lt;/li>
&lt;li>DeepSpeed: å¾®è½¯æä¾›çš„ä¸€ä¸ªå¼€æºæ·±åº¦å­¦ä¹ è®­ç»ƒä¼˜åŒ–åº“ã€‚åŸºäºè‹±ä¼Ÿè¾¾ Megatron-LM è¿›è¡Œäº†å¼ é‡åˆ‡åˆ†å¼çš„æ¨¡å‹å¹¶è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;p>åŒæ­¥ SGDï¼šæ¯ä¸ª Worker éƒ½æ˜¯åŒæ­¥è®¡ç®—ä¸€ä¸ªæ‰¹é‡ã€‚&lt;/p>
&lt;h3 id="141-åˆ†å¸ƒå¼æ¦‚å¿µ-distributed">1.4.1 åˆ†å¸ƒå¼æ¦‚å¿µ Distributed&lt;/h3>
&lt;p>2022-10-24 10:43:08ï¼Œæ—¥åå¡«å‘ã€‚&lt;/p>
&lt;p>2022-11-01 09:04:30ï¼Œå¼€å§‹å­¦ä¹ ã€‚&lt;/p>
&lt;p>&lt;code>nn.parallel.scatter(data, devices)&lt;/code>ï¼Œå¯ä»¥å°†ä¸€ç»„æ•°æ® split åˆ°å¤šä¸ª devices ä¸Š&lt;/p>
&lt;h4 id="1411-dataparallel">1.4.1.1 DataParallel&lt;/h4>
&lt;p>&lt;code>nn.DataParallel(net, devices_ids=devices)&lt;/code>ï¼ŒDP æ¨¡å‹ã€‚å•è¿›ç¨‹ï¼Œå¤šçº¿ç¨‹ï¼Œé€‚äºä¸€å°æœºå™¨çš„æƒ…å†µã€‚&lt;/p>
&lt;p>åšæ³•æ˜¯å°† model å¤åˆ¶åˆ°ä¸åŒçš„ GPU ä¸Šï¼Œå„ä¸ª GPU è®¡ç®—ä¸åŒ batch çš„æ•°æ®ã€‚&lt;/p>
&lt;h4 id="1412-distributeddataparallel">1.4.1.2 DistributedDataParallel&lt;/h4>
&lt;p>&lt;code>torch.nn.parallel.DistributedDataParallel&lt;/code>ï¼ŒDDP æ¨¡å‹ï¼ˆPyTorch å®˜ç½‘æ›´æ¨èï¼‰ã€‚&lt;/p>
&lt;p>éœ€è¦å¯åŠ¨ &lt;code>init_process_group&lt;/code>&lt;/p>
&lt;p>å¦‚æœæƒ³åœ¨ä¸€ä¸ªæœ‰ N ä¸ª GPU çš„è®¾å¤‡ä¸Šé¢ä½¿ç”¨ DistributedDataParallelï¼Œåˆ™éœ€è¦ spawn up N ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹å¯¹åº”0-N-1 çš„ä¸€ä¸ª GPUã€‚è¿™å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥å®ç°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>cuda&lt;span style="color:#f92672">.&lt;/span>set_device(i)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># i from 0-N-1ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­éƒ½éœ€è¦ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>distributed&lt;span style="color:#f92672">.&lt;/span>init_process_group(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> backend&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;nccl&amp;#39;&lt;/span>, world_size&lt;span style="color:#f92672">=&lt;/span>N, init_method&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> DistributedDataParallel(model, device_ids&lt;span style="color:#f92672">=&lt;/span>[i], output_device&lt;span style="color:#f92672">=&lt;/span>i)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®è·µ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> args&lt;span style="color:#f92672">.&lt;/span>local_rank &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">or&lt;/span> args&lt;span style="color:#f92672">.&lt;/span>no_cuda:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> device &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>device(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;cuda&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>cuda&lt;span style="color:#f92672">.&lt;/span>is_available() &lt;span style="color:#f92672">and&lt;/span> &lt;span style="color:#f92672">not&lt;/span> args&lt;span style="color:#f92672">.&lt;/span>no_cuda &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#e6db74">&amp;#34;cpu&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> n_gpu &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>cuda&lt;span style="color:#f92672">.&lt;/span>device_count()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> torch&lt;span style="color:#f92672">.&lt;/span>cuda&lt;span style="color:#f92672">.&lt;/span>set_device(args&lt;span style="color:#f92672">.&lt;/span>local_rank)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> device &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>device(&lt;span style="color:#e6db74">&amp;#34;cuda&amp;#34;&lt;/span>, args&lt;span style="color:#f92672">.&lt;/span>local_rank)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> n_gpu &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Initializes the distributed backend which will take care of&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># sychronizing nodes/GPUs.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">not&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>distributed&lt;span style="color:#f92672">.&lt;/span>is_initialized():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> torch&lt;span style="color:#f92672">.&lt;/span>distributed&lt;span style="color:#f92672">.&lt;/span>init_process_group(backend&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;nccl&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¤šè¿›ç¨‹ï¼Œé€‚äºå¤šå°æœºå™¨çš„æƒ…å†µï¼Œå¯ä»¥ç»“åˆæ¨¡å‹å¹¶è¡Œçš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>ä½¿ç”¨æ—¶å»ºè®®&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ä¸€ä¸ª big dataset&lt;/li>
&lt;li>å¥½çš„ CPU-GPU å’Œæœºå™¨-æœºå™¨å¸¦å®½&lt;/li>
&lt;li>é«˜æ•ˆçš„ data load ä»¥åŠ preprocess&lt;/li>
&lt;li>æ¨¡å‹éœ€è¦æœ‰å¥½çš„è®¡ç®—ï¼ˆFLOPï¼‰é€šè®¯ï¼ˆmodel sizeï¼‰æ¯”
&lt;ul>
&lt;li>Inception &amp;gt; ResNet &amp;gt; AlexNet&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä½¿ç”¨è¶³å¤Ÿå¤§çš„ batch size æ¥è·å–å¥½çš„ç³»ç»Ÿæ€§èƒ½&lt;/li>
&lt;li>ä½¿ç”¨é«˜æ•ˆçš„ä¼˜åŒ–ç®—æ³•å¯¹åº”å¤§æ‰¹é‡å¤§å°&lt;/li>
&lt;/ul>
&lt;h3 id="142-hugging-face-æ–‡æ¡£">1.4.2 Hugging face æ–‡æ¡£&lt;/h3>
&lt;h4 id="1421-æ­¥éª¤">1.4.2.1 æ­¥éª¤&lt;/h4>
&lt;ul>
&lt;li>import Accelerator å¹¶ä¸”å®ä¾‹åŒ–&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> accelerator &lt;span style="color:#f92672">import&lt;/span> Accelerator
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>accelerator &lt;span style="color:#f92672">=&lt;/span> Accelerator()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>æ¶ˆå» model ä»¥åŠ input data çš„ &lt;code>.to(device)&lt;/code> æˆ–è€… &lt;code>.cuda()&lt;/code> æ“ä½œã€‚&lt;code>accelerator&lt;/code> ä¼šå¸®ä½ å®Œæˆè¿™ä»¶äº‹&lt;/li>
&lt;li>æŠŠç›¸å…³çš„å¯¹è±¡ï¼ˆoptimizer, model, train_dataloader, lr_schedulerï¼‰ä¼ é€’ç»™ &lt;code>prepare()&lt;/code> æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>model, optimizer, train_dataloader, lr_scheduler &lt;span style="color:#f92672">=&lt;/span> accelerator&lt;span style="color:#f92672">.&lt;/span>prepare(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model, optimizer, train_dataloader, lr_scheduler
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>æ¯ä¸ª GPU ä¼šåŠ è½½ training dataset ä¸­çš„ä¸åŒéƒ¨åˆ†ï¼ˆbatchï¼‰ï¼Œè¿™çœ‹èµ·æ¥åƒæ˜¯æ•°æ®å¹¶è¡Œã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Replace the line &lt;code>loss.backward()&lt;/code> by &lt;code>accelerator.backward(loss)&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="1422-distributed-evaluation">1.4.2.2 Distributed evaluation&lt;/h4>
&lt;p>å¦‚æœéœ€è¦åˆ†å¸ƒå¼è¯„ä¼°ï¼ŒåŒç†ï¼ŒæŠŠ validation dataloader å‘é€ç»™ &lt;code>prepare()&lt;/code> æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>validation_dataloader &lt;span style="color:#f92672">=&lt;/span> accelerator&lt;span style="color:#f92672">.&lt;/span>prepare(validation_dataloader)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·çš„è¯æ¯ä¸ª devices åªèƒ½çœ‹è§ evaluation data ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æœ€åéœ€è¦æŠŠç»“æœ group åˆ°ä¸€èµ·ï¼Œé€šè¿‡ &lt;code>gather_for_metrics()&lt;/code> æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> inputs, targets &lt;span style="color:#f92672">in&lt;/span> validation_dataloader:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> predictions &lt;span style="color:#f92672">=&lt;/span> model(inputs)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Gather all predictions and targets&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> all_predictions, all_targets &lt;span style="color:#f92672">=&lt;/span> accelerator&lt;span style="color:#f92672">.&lt;/span>gather_for_metrics((predictions, targets))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Example of use with a *Datasets.Metric*&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> metric&lt;span style="color:#f92672">.&lt;/span>add_batch(all_predictions, all_targets)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1423-launch">1.4.2.3 Launch&lt;/h4>
&lt;p>&lt;code>accelerate&lt;/code> å‘½ä»¤æ•´åˆäº†åœ¨ä¸åŒå¹³å°ä¸Šå‘å°„è„šæœ¬çš„å‘½ä»¤ï¼Œä½ æ— éœ€è‡ªå·±è®°ä½æ‰€æœ‰å‘½ä»¤ã€‚å¦‚æœä½ è‡ªå·±ç†Ÿæ‚‰ PyTorch æä¾›çš„å‘å°„è„šæœ¬ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ &lt;code>accelerate&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å• GPU æ‰§è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CUDA_VISIBLE_DEVICES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span> accelerate launch &lt;span style="color:#f92672">{&lt;/span>script_name.py&lt;span style="color:#f92672">}&lt;/span> --arg1 --arg2 ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é»˜è®¤å‚æ•°ï¼Œä½¿ç”¨æ‰€æœ‰çš„ GPUï¼Œä¸å¯åŠ¨æ··åˆç²¾åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>accelerate launch --multi_gpu &lt;span style="color:#f92672">{&lt;/span>script_name.py&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg1&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg2&lt;span style="color:#f92672">}&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå‚æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>accelerate launch --multi_gpu --mixed_precision&lt;span style="color:#f92672">=&lt;/span>fp16 --num_processes&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#f92672">{&lt;/span>script_name.py&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg1&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg2&lt;span style="color:#f92672">}&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŸ¥çœ‹æ‰€æœ‰å‚æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>accelerate launch -h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>accelerate config&lt;/strong>&lt;/p>
&lt;p>å½“ç„¶ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯é…ç½®ä¸€ä¸ª config æ–‡ä»¶ã€‚ä½¿ç”¨äº† &lt;code>accelerate config&lt;/code> ä¹‹åï¼Œä¼šåœ¨ &lt;code>~/.cache/huggingface/accelerate&lt;/code> ç›®å½•ä¸‹ç”Ÿæˆ &lt;code>default_config.yaml&lt;/code> æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥è‡ªå·±å®šåˆ¶ config æ–‡ä»¶ç„¶åè¯»å–ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>accelerate launch --config_file ~/.cache/huggingface/accelerate &lt;span style="color:#f92672">{&lt;/span>script_name.py&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg1&lt;span style="color:#f92672">}&lt;/span> &lt;span style="color:#f92672">{&lt;/span>--arg2&lt;span style="color:#f92672">}&lt;/span> ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="15-dataset">1.5 Dataset&lt;/h2>
&lt;h3 id="151-load-from-hugging-face">1.5.1 load from hugging face&lt;/h3>
&lt;p>hugging face ä¸‹è½½æ–‡ä»¶å­˜å‚¨çš„ä½ç½®ï¼š&lt;code>~/.cache/huggingface&lt;/code>&lt;/p>
&lt;p>æ‰¾åˆ° dataset ä¹‹åå¦‚ä½•ä¸‹è½½ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æœç´¢åˆ°æ•°æ®é›† oscarï¼Œé‡Œé¢æœ‰å¾ˆå¤š subsetï¼Œæ¯”å¦‚ï¼šunshuffled_deduplicated_en, unshuffled_deduplicated_br&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®é›†çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨äºç´¢å¼•å­é›†ï¼Œä¸€èˆ¬è¿˜æœ‰ split å‚æ•°ï¼štrain, test, validation &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datasets &lt;span style="color:#f92672">import&lt;/span> load_dataset
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(path&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;oscar&amp;#34;&lt;/span>, name&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;unshuffled_deduplicated_en&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 420Gï¼Œèµ¶ç´§ä¸­æ–­&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset&lt;span style="color:#f92672">.&lt;/span>save_to_disk(&lt;span style="color:#e6db74">&amp;#34;./glue/&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å°è¯•ä¸‹è½½ wikitext&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(path&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;wikitext&amp;#34;&lt;/span>, name&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;wikitext-103-v1&amp;#34;&lt;/span>, split&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 2022-10-24 14:07:31ï¼Œæ˜¯å¯ä»¥çš„&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(dataset[:&lt;span style="color:#ae81ff">3&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>: [&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39; = Valkyria Chronicles III = &lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>]}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¿å­˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset&lt;span style="color:#f92672">.&lt;/span>save_to_disk(&lt;span style="color:#e6db74">&amp;#34;./&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="152-æ•°æ®é›†æ ¼å¼">1.5.2 æ•°æ®é›†æ ¼å¼&lt;/h3>
&lt;p>1.5.1 çš„ä¾‹å­ä¸­ï¼Œé»˜è®¤ä¿å­˜ä¸º &lt;code>dataset.arrow&lt;/code> åŠ ä¸Š &lt;code>.json&lt;/code> æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬æƒ³å°†å…¶ä¿å­˜ä¸º &lt;code>.csv&lt;/code>&lt;/p>
&lt;h3 id="153-split-ä½œç”¨">1.5.3 split ä½œç”¨&lt;/h3>
&lt;p>ä¸‹é¢æ˜¯å¸¦æœ‰ feature çš„ dataset ä¸€ä¸ªç¤ºä¾‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datasets &lt;span style="color:#f92672">import&lt;/span> load_dataset
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¦‚æœç”¨äº† split &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(&lt;span style="color:#e6db74">&amp;#34;rotten_tomatoes&amp;#34;&lt;/span>, split&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(dataset)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Dataset({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> features: [&lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_rows: &lt;span style="color:#ae81ff">8530&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¦‚æœä¸ç”¨ splitï¼Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(&lt;span style="color:#e6db74">&amp;#34;rotten_tomatoes&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DatasetDict({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train: Dataset({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> features: [&lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_rows: &lt;span style="color:#ae81ff">8530&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> })
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> validation: Dataset({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> features: [&lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_rows: &lt;span style="color:#ae81ff">1066&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> })
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> test: Dataset({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> features: [&lt;span style="color:#e6db74">&amp;#39;text&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;label&amp;#39;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_rows: &lt;span style="color:#ae81ff">1066&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> })
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="16-github-æ–‡æ¡£">1.6 Github æ–‡æ¡£&lt;/h2>
&lt;p>æ‰€æœ‰ä»»åŠ¡çš„ example å­˜æ”¾åœ¨ &lt;a href="https://github.com/huggingface/transformers/tree/main/examples/pytorch">https://github.com/huggingface/transformers/tree/main/examples/pytorch&lt;/a> é‡Œé¢ã€‚&lt;/p>
&lt;h1 id="2-çŸ¥è¯†è¡¥å……">2. çŸ¥è¯†è¡¥å……&lt;/h1>
&lt;p>è¡¥å……ä¸€äº›ç›¸å…³çš„ï¼Œä¹‹å‰ä¸ç†Ÿæ‚‰çš„æ¦‚å¿µã€‚&lt;/p>
&lt;h2 id="22-data-set">2.2 Data Set&lt;/h2>
&lt;h3 id="221-glue">2.2.1 GLUE&lt;/h3>
&lt;p>æ•°æ®é›†æ˜¯ä¹‹å‰å±è”½çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä½†æ˜¯å¦‚æœæƒ³äº†è§£æ¨¡å‹æ˜¯åœ¨åšä»€ä¹ˆï¼Œå¹¶ä¸”è¦åŠ¨æ‰‹åšå®éªŒï¼Œå¿…é¡»äº†è§£æ•°æ®é›†ã€‚&lt;/p>
&lt;p>GLUE æ˜¯å­¦æœ¯ç•Œéå¸¸å¸¸ç”¨çš„æ•°æ®é›†ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ•°æ®é›†&lt;/th>
&lt;th>ç±»å‹&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>MNLI&lt;/td>
&lt;td>å¥å­å¯¹åˆ†ç±»ä»»åŠ¡&lt;/td>
&lt;td>ç»™å®šä¸€ä¸ªå‰æ (Premise) ï¼Œæ ¹æ®è¿™ä¸ªå‰æå»æ¨æ–­å‡è®¾ (Hypothesis) ä¸å‰æçš„å…³ç³»ã€‚è¯¥ä»»åŠ¡çš„å…³ç³»åˆ†ä¸ºä¸‰ç§ï¼Œè•´å«å…³ç³» (Entailment)ã€çŸ›ç›¾å…³ç³» (Contradiction) ä»¥åŠä¸­ç«‹å…³ç³» (Neutral)ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>QQP&lt;/td>
&lt;td>å¥å­å¯¹åˆ†ç±»ä»»åŠ¡&lt;/td>
&lt;td>åˆ¤æ–­ Quora ä¸Šçš„ä¸¤ä¸ªé—®é¢˜å¥æ˜¯å¦è¡¨ç¤ºçš„æ˜¯ä¸€æ ·çš„æ„æ€&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SST-2&lt;/td>
&lt;td>åˆ†ç±»ä»»åŠ¡&lt;/td>
&lt;td>æƒ…æ„Ÿåˆ†æ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CoLA&lt;/td>
&lt;td>å•å¥åˆ†ç±»ä»»åŠ¡&lt;/td>
&lt;td>å¥å­è¯­ä¹‰åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯å¯æ¥å—çš„ï¼ˆAcceptableï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>QNLI&lt;/td>
&lt;td>&lt;/td>
&lt;td>ç”¨äºåˆ¤æ–­æ–‡æœ¬æ˜¯å¦åŒ…å«é—®é¢˜çš„ç­”æ¡ˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>STS-B&lt;/td>
&lt;td>&lt;/td>
&lt;td>é¢„æµ‹ä¸¤ä¸ªå¥å­çš„ç›¸ä¼¼æ€§ï¼ŒåŒ…æ‹¬5ä¸ªçº§åˆ«ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MRPC&lt;/td>
&lt;td>å¥å­å¯¹åˆ†ç±»ä»»åŠ¡&lt;/td>
&lt;td>ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¥å­æ˜¯å¦æ˜¯ç­‰ä»·çš„ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RTE&lt;/td>
&lt;td>åˆ†ç±»&lt;/td>
&lt;td>ç±»ä¼¼äºMNLIï¼Œä½†æ˜¯åªæ˜¯å¯¹è•´å«å…³ç³»çš„äºŒåˆ†ç±»åˆ¤æ–­ï¼Œè€Œä¸”æ•°æ®é›†æ›´å°ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SWAG&lt;/td>
&lt;td>&lt;/td>
&lt;td>ä»å››ä¸ªå¥å­ä¸­é€‰æ‹©ä¸ºå¯èƒ½ä¸ºå‰å¥ä¸‹æ–‡çš„é‚£ä¸ª&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="3-ç¼–ç¨‹å®ä¾‹">3. ç¼–ç¨‹å®ä¾‹&lt;/h1>
&lt;h2 id="31-é€šç”¨çŸ¥è¯†">3.1 é€šç”¨çŸ¥è¯†&lt;/h2>
&lt;h3 id="311-ä¸»è¦çš„ç»„ä»¶">3.1.1 ä¸»è¦çš„ç»„ä»¶&lt;/h3>
&lt;ul>
&lt;li>Configuration: ç¼–ç¨‹æ¨¡å‹ä¸­çš„å‚æ•°æˆ–æ˜¯å˜é‡ã€‚ç”¨äºé…ç½®è¯è¡¨å¤§å°ï¼Œéšè—å±‚ç»´æ•°ï¼ŒDropout rate ç­‰ç­‰ã€‚ç»™å‡ºä¸€ä¸ª BERT_base é…ç½®çš„ç¤ºä¾‹ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;attention_probs_dropout_prob&amp;#34;&lt;/span>: 0.1,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hidden_act&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;gelu&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hidden_dropout_prob&amp;#34;&lt;/span>: 0.1,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hidden_size&amp;#34;&lt;/span>: 768,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;initializer_range&amp;#34;&lt;/span>: 0.02,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;intermediate_size&amp;#34;&lt;/span>: 3072,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;max_position_embeddings&amp;#34;&lt;/span>: 512,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;num_attention_heads&amp;#34;&lt;/span>: 12,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;num_hidden_layers&amp;#34;&lt;/span>: 12,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;type_vocab_size&amp;#34;&lt;/span>: 2,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;vocab_size&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">30522&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Tokenizer: æ¯ä¸ªæ¨¡å‹éƒ½æœ‰å¯¹åº”çš„åˆ†è¯å™¨ã€‚å­˜å‚¨ token åˆ° index çš„æ˜ å°„ã€‚&lt;/li>
&lt;li>Model: å®ç°æ¨¡å‹çš„è®¡ç®—å›¾å’Œç¼–ç è¿‡ç¨‹ï¼Œå®ç°å‰å‘ä¼ æ’­ã€‚å¯¹äº output å±‚ï¼Œä¸åŒçš„æ¨¡å‹æœ‰ä¸ä¸€æ ·çš„å°è£…ã€‚æ¯”å¦‚ä»Šå¤©ï¼ˆ2022-10-23ï¼‰debug è§‚å¯Ÿçš„ &lt;code>BaseModelOutputWithPoolingAndCrossAttentions&lt;/code>ï¼Œ&lt;code>ç±»å‹ï¼šSequenceClassifierOutput&lt;/code> ç­‰ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="312-ä»»åŠ¡åˆ†ç±»">3.1.2 ä»»åŠ¡åˆ†ç±»&lt;/h3>
&lt;p>è¯­è¨€ç”Ÿæˆä»»åŠ¡ï¼Œå¯¹åº”æ¨¡å‹ï¼šGPTï¼ŒGPT-2ï¼ŒXLNet&lt;/p>
&lt;p>è¯­è¨€ç†è§£ä»»åŠ¡ï¼Œå¯¹åº”æ¨¡å‹ï¼šBERTï¼ŒRoBERTaï¼ŒXLM&lt;/p>
&lt;h2 id="32-åœ¨-gpt-2-ä¸Šè¿è¡Œ-wikitext">3.2 åœ¨ GPT-2 ä¸Šè¿è¡Œ wikitext&lt;/h2>
&lt;p>READMEï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pip install transformers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s ../BERT/glue/ ./glue
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="301-å‘1">3.0.1 å‘1&lt;/h3>
&lt;p>&lt;strong>å‘ï¼Œå’Œ BERT åŒºåˆ†&lt;/strong>&lt;/p>
&lt;p>BERT forward å’Œ GPT-2 forward ä¸ä¸€æ ·ã€‚ä¹‹å‰å®ç°çš„ &lt;code>model(inputs_id, token_type_ids, attention_mask)&lt;/code> æŒ‰ä½ç½®ä¼ å‚ï¼Œä½†æ˜¯ GPT-2 forward ç¬¬äºŒä¸ªå‚æ•°æ˜¯ &lt;code>past_key_values&lt;/code>ï¼Œæ‰€ä»¥æŠ¥é”™ï¼ŒæŒ‰å…³é”®å­—ä¼ å‚å³å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>ä»–ä»¬ç»è¿‡å‰å‘ä¹‹åï¼Œoutput ä¹Ÿä¸ä¸€æ ·ã€‚&lt;/p>
&lt;h3 id="302-å¤§å‘2">3.0.2 å¤§å‘2&lt;/h3>
&lt;p>2022-10-26 22:31:46ï¼Œå¤ç° GPT çš„ç»“æœå‡ºäº†å¤§é—®é¢˜ï¼Œå¥½åœ¨ä»Šæ™šè§£å†³äº†ã€‚é—®é¢˜æ¥æºäºæ¡†æ¶ä¸­ä¼šè‡ªåŠ¨å¯åŠ¨åˆ†å¸ƒå¼ train/evalï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆå¥½åœ°æ”¯æŒåˆ†å¸ƒå¼ï¼ˆå• GPU è¿è¡Œ 30sï¼Œ4 GPU è¿è¡Œ 6minï¼‰ï¼Œè€Œä¸” loss çš„å¤„ç†ä¹Ÿæœ‰é—®é¢˜ï¼Œå¯¼è‡´æœ€ç»ˆçš„ metric - PPL å‡ºäº†é—®é¢˜ã€‚ç”¨å• GPU å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;h3 id="303-å‘3">3.0.3 å‘3&lt;/h3>
&lt;p>2022-10-28 16:03:02ï¼Œæ¡†æ¶K æ˜¯ä¸æ”¯æŒåˆ†å¸ƒå¼çš„ï¼Œè¿™å¯¼è‡´äº† local_rank ç´¢å¼•ä¸åˆ°ï¼Œå› æ­¤æ‰§è¡Œ evaluate()ï¼Œè¿›å…¥ quant æ¨¡å—æ—¶æŠ¥é”™ã€‚&lt;/p>
&lt;h3 id="321-prepare-dataset">3.2.1 Prepare Dataset&lt;/h3>
&lt;p>è¯»å– datasets å¹¶ä¿å­˜åˆ°æœ¬åœ°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datasets &lt;span style="color:#f92672">import&lt;/span> load_dataset
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>test_dataset &lt;span style="color:#f92672">=&lt;/span> load_dataset(&lt;span style="color:#e6db74">&amp;#34;json&amp;#34;&lt;/span>, data_files&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;test.json&amp;#34;&lt;/span>, split&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>test_dataset&lt;span style="color:#f92672">.&lt;/span>save_to_disk(&lt;span style="color:#e6db74">&amp;#34;test.hf&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="322-lm-é¢„å¤„ç†">3.2.2 LM é¢„å¤„ç†&lt;/h3>
&lt;p>é’ˆå¯¹ç”Ÿæˆç±»æ¨¡å‹çš„é¢„å¤„ç†ã€‚å¦‚ä½•ä»åŸå§‹çš„æ•°æ®é›†ç”Ÿæˆ tokenizer ä¹‹åçš„æ•°æ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>row_datasets &lt;span style="color:#f92672">=&lt;/span> load_dataset(data_args&lt;span style="color:#f92672">.&lt;/span>dataset_name, data_args&lt;span style="color:#f92672">.&lt;/span>dataset_config_name, cache_dir&lt;span style="color:#f92672">=&lt;/span>model_args&lt;span style="color:#f92672">.&lt;/span>cache_dir)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># tokenizer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tokenized_datasets &lt;span style="color:#f92672">=&lt;/span> raw_datasets&lt;span style="color:#f92672">.&lt;/span>map(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tokenize_function,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> batched&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_proc&lt;span style="color:#f92672">=&lt;/span>data_args&lt;span style="color:#f92672">.&lt;/span>preprocessing_num_workers,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> remove_columns&lt;span style="color:#f92672">=&lt;/span>column_names,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load_from_cache_file&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#f92672">not&lt;/span> data_args&lt;span style="color:#f92672">.&lt;/span>overwrite_cache,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> desc&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Running tokenizer on dataset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> training_args&lt;span style="color:#f92672">.&lt;/span>main_process_first(desc&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;grouping texts together&amp;#34;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lm_datasets &lt;span style="color:#f92672">=&lt;/span> tokenized_datasets&lt;span style="color:#f92672">.&lt;/span>map(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> group_texts,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> batched&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_proc&lt;span style="color:#f92672">=&lt;/span>data_args&lt;span style="color:#f92672">.&lt;/span>preprocessing_num_workers,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load_from_cache_file&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#f92672">not&lt;/span> data_args&lt;span style="color:#f92672">.&lt;/span>overwrite_cache,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> desc&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Grouping texts in chunks of &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>block_size&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è®¡ç®— token é•¿åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> split, data &lt;span style="color:#f92672">in&lt;/span> lm_datasets&lt;span style="color:#f92672">.&lt;/span>items():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total_eval_tokens &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> chunk &lt;span style="color:#f92672">in&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;labels&amp;#39;&lt;/span>]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total_eval_tokens &lt;span style="color:#f92672">+=&lt;/span> len([x &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> chunk[&lt;span style="color:#ae81ff">1&lt;/span>:] &lt;span style="color:#66d9ef">if&lt;/span> x &lt;span style="color:#f92672">!=&lt;/span> padding_index])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>logger&lt;span style="color:#f92672">.&lt;/span>info(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#39;[&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>split&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">] Total eval tokens: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>total_eval_tokens&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¾—åˆ° eval dataset ä»¥åŠ train dataset&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> training_args&lt;span style="color:#f92672">.&lt;/span>do_train:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span> &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#f92672">in&lt;/span> tokenized_datasets:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">raise&lt;/span> &lt;span style="color:#a6e22e">ValueError&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;--do_train requires a train dataset&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train_dataset &lt;span style="color:#f92672">=&lt;/span> lm_datasets[&lt;span style="color:#e6db74">&amp;#34;train&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> data_args&lt;span style="color:#f92672">.&lt;/span>max_train_samples &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> train_dataset &lt;span style="color:#f92672">=&lt;/span> train_dataset&lt;span style="color:#f92672">.&lt;/span>select(range(data_args&lt;span style="color:#f92672">.&lt;/span>max_train_samples))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> training_args&lt;span style="color:#f92672">.&lt;/span>do_eval:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#e6db74">&amp;#34;validation&amp;#34;&lt;/span> &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#f92672">in&lt;/span> tokenized_datasets:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">raise&lt;/span> &lt;span style="color:#a6e22e">ValueError&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;--do_eval requires a validation dataset&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eval_dataset &lt;span style="color:#f92672">=&lt;/span> lm_datasets[data_args&lt;span style="color:#f92672">.&lt;/span>eval_subset]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> data_args&lt;span style="color:#f92672">.&lt;/span>max_eval_samples &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eval_dataset &lt;span style="color:#f92672">=&lt;/span> eval_dataset&lt;span style="color:#f92672">.&lt;/span>select(range(data_args&lt;span style="color:#f92672">.&lt;/span>max_eval_samples))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¿™ä¸ªæ—¶å€™ eval_dataset size (480, 3)ï¼Œ3 ä¸ªç»´åº¦åˆ†åˆ«æ˜¯ input_ids, attention_mask, labels&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="33-åœ¨-t5-ä¸Šè¿è¡Œ-wmt">3.3 åœ¨ T5 ä¸Šè¿è¡Œ WMT&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>MODEL&lt;span style="color:#f92672">=&lt;/span>t5-small
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CUDA_VISIBLE_DEVICES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> python -u run_translation.py &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --model_name_or_path &lt;span style="color:#e6db74">${&lt;/span>MODEL&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --dataset_name wmt16 --dataset_config_name ro-en &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --per_device_eval_batch_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --output_dir checkpoints-translation/&lt;span style="color:#e6db74">${&lt;/span>MODEL&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --source_lang en --target_lang ro &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --do_eval &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --predict_with_generate &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --source_prefix &lt;span style="color:#e6db74">&amp;#34;translate English to Romanian: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="4-ç¼–ç¨‹-flow">4. ç¼–ç¨‹ flow&lt;/h1>
&lt;p>åˆ©ç”¨ debug ä»¥åŠ hugging face æ–‡æ¡£ï¼Œäº†è§£æ•´ä¸ªæµç¨‹ã€‚åœ¨ Section 1 ä»‹ç» hugging face æŒ‡å¯¼æ–‡æ¡£ï¼Œè¿™éƒ¨åˆ†ç»“åˆå®é™…ç¼–ç¨‹æ¥çœ‹ã€‚&lt;/p>
&lt;h2 id="41-æ•°æ®è¯»å–åŠé¢„å¤„ç†">4.1 æ•°æ®è¯»å–åŠé¢„å¤„ç†&lt;/h2>
&lt;h3 id="421-æ•°æ®è¯»å–">4.2.1 æ•°æ®è¯»å–&lt;/h3>
&lt;p>é€šè¿‡å‚æ•° &lt;code>--data_dir&lt;/code>ï¼ŒæŠŠæœ¬åœ°çš„æ•°æ®åŠ è½½è¿›æ¥ï¼Œåº”è¯¥åŒ…å« &lt;code>.tsv&lt;/code> æ–‡ä»¶ã€‚hugging face çš„é¢„è®­ç»ƒæ¨¡å‹å¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°å¹¶ä¿å­˜ï¼Œé‚£ä¹ˆ Dataset åº”è¯¥ä¹Ÿå¯ä»¥ã€‚&lt;/p>
&lt;h3 id="422-dataloader">4.2.2 DataLoader&lt;/h3>
&lt;p>ç»è¿‡å¤„ç†åçš„ &lt;code>train_features&lt;/code>ï¼Œé•¿åº¦æ˜¯ 8551 examplesï¼Œè£…çš„æ˜¯ç»è¿‡ tokenizer åçš„æ•°æ®ã€‚&lt;/p>
&lt;p>åŸå§‹çš„ &lt;code>train_example&lt;/code>ï¼Œä» &lt;code>./glue/CoLA/train.tsv&lt;/code> è¯»å…¥ï¼Œé•¿åº¦æ˜¯ 8551 examplesï¼Œæ¯ä¸ª example è£…çš„æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>guid&lt;/code>:&lt;code>train-1&lt;/code> or &lt;code>train=2&lt;/code>&amp;hellip;&lt;/li>
&lt;li>&lt;code>label&lt;/code>:&lt;code>1&lt;/code> or &lt;code>0&lt;/code>&lt;/li>
&lt;li>&lt;code>text_a&lt;/code>:&lt;code>Our friends won't buy this analysis...&lt;/code>&lt;/li>
&lt;li>&lt;code>text_b&lt;/code>:None&lt;/li>
&lt;/ul>
&lt;p>&lt;code>train_data&lt;/code> å°±æ˜¯é€šè¿‡ &lt;code>gen_tensor_dataset()&lt;/code> æŠŠ &lt;code>train_features&lt;/code> è½¬æ¢ä¸º tensorï¼›ç»è¿‡ &lt;code>DataLoader(train_data, sampler, batch_size)&lt;/code> æ–¹æ³•ä¹‹åï¼Œå¾—åˆ° &lt;code>train_dataloader&lt;/code>ï¼Œ&lt;code>sampler&lt;/code> å°±æ˜¯ 8551ã€‚&lt;/p>
&lt;p>åœ¨ä¸€ä¸ª epoch ä¸­ï¼Œéœ€è¦éå†ä¸€éæ•´ä¸ª train_dataloaderï¼Œä¸€ä¸ª iteration å¤„ç†å…¶ä¸­ä¸€ä¸ª batchï¼Œtrain_loader éå†å®Œå°±æ˜¯ä¸€ä¸ª epochã€‚&lt;/p>
&lt;blockquote>
&lt;p>è®°å¾—æ•°æ®éœ€è¦è½¬ç§»åˆ° device&lt;/p>
&lt;/blockquote>
&lt;h3 id="42x-tokenizer">4.2.X Tokenizer&lt;/h3>
&lt;p>&lt;code>input_ids&lt;/code> å­˜æ”¾çš„å°±æ˜¯ tokenizer åçš„æ•°æ®æœ¬èº«ï¼Œæ˜¯ä¸€ä¸ª (64, 128) çš„ tensorã€‚&lt;code>mask&lt;/code>, &lt;code>segment_id&lt;/code> ä¹Ÿæ˜¯ (64, 128)ï¼Œlabel æ˜¯ (64)ï¼Œè¿™åº”è¯¥å°±æ˜¯æœ€åçš„åˆ†ç±»ï¼Œå› ä¸º batch size æ˜¯ 64ï¼Œæ‰€ä»¥æœ‰ 64 ä¸ªè¾“å‡ºã€‚&lt;/p>
&lt;p>å¯¹äº hugging face BERTï¼Œç»è¿‡ tokenizer æ‰“å°å‡ºæ¥å°±æ˜¯ä¸€æ•´ä¸ª mappingï¼Œä¹Ÿå°±æ˜¯å¯¹åº” &lt;code>run_glue.py&lt;/code> ä¸­éå† &lt;code>train_dataloader&lt;/code> çš„å˜é‡ &lt;code>batch&lt;/code>ã€‚ä¸è¿‡ &lt;code>batch&lt;/code> çš„ç±»å‹æ˜¯ listï¼Œè€Œä¸‹é¢çš„ &lt;code>inputs&lt;/code> æ˜¯ dictã€‚è€Œ hugging face BERT çš„ &lt;code>output&lt;/code> ä¹Ÿæ˜¯ä¸€ä¸ª &lt;code>BaseModelOutputWithPoolingAndCrossAttentions&lt;/code> ç±»å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> BertTokenizer, BertModel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> torch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tokenizer &lt;span style="color:#f92672">=&lt;/span> BertTokenizer&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;bert-base-uncased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> BertModel&lt;span style="color:#f92672">.&lt;/span>from_pretrained(&lt;span style="color:#e6db74">&amp;#34;bert-base-uncased&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>inputs &lt;span style="color:#f92672">=&lt;/span> tokenizer(&lt;span style="color:#e6db74">&amp;#34;Hello, my dog is cute&amp;#34;&lt;/span>, return_tensors&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;pt&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(inputs)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#e6db74">&amp;#39;input_ids&amp;#39;&lt;/span>: tensor([[ &lt;span style="color:#ae81ff">101&lt;/span>, &lt;span style="color:#ae81ff">7592&lt;/span>, &lt;span style="color:#ae81ff">1010&lt;/span>, &lt;span style="color:#ae81ff">2026&lt;/span>, &lt;span style="color:#ae81ff">3899&lt;/span>, &lt;span style="color:#ae81ff">2003&lt;/span>, &lt;span style="color:#ae81ff">10140&lt;/span>, &lt;span style="color:#ae81ff">102&lt;/span>]]), &lt;span style="color:#e6db74">&amp;#39;token_type_ids&amp;#39;&lt;/span>: tensor([[&lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>]]), &lt;span style="color:#e6db74">&amp;#39;attention_mask&amp;#39;&lt;/span>: tensor([[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>]])}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>outputs &lt;span style="color:#f92672">=&lt;/span> model(&lt;span style="color:#f92672">**&lt;/span>inputs)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># output è¾“å‡ºåŒ…å« last_hidden_state, pooler_outputï¼Œå…¶ä»–å±æ€§ hidden_states, past_key_values, attentions, cross_attentions ä¸º None&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äº hugging face BertForSequenceClassificationï¼Œ&lt;/p>
&lt;ul>
&lt;li>&lt;code>output&lt;/code> ç±»å‹ï¼šSequenceClassifierOutput(loss=None, logits=tensor([[-2.2095, 2.5760]]), hidden_states=None, attentions=None)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="43-è®¡ç®—-loss">4.3 è®¡ç®— loss&lt;/h2>
&lt;p>hugging face æœ‰ä¸€ä¸ªæ™®é€š trainer çš„å®ä¾‹ï¼Œå…³äºå¦‚ä½•è®¡ç®— lossã€‚çœ‹ä¸€ä¸‹èƒ½ä¸èƒ½å¥—ç”¨åˆ°åŸå…ˆ BERT çš„æ¡†æ¶ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> torch &lt;span style="color:#f92672">import&lt;/span> nn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> transformers &lt;span style="color:#f92672">import&lt;/span> Trainer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">CustomTrainer&lt;/span>(Trainer):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">compute_loss&lt;/span>(self, model, inputs, return_outputs&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> labels &lt;span style="color:#f92672">=&lt;/span> inputs&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;labels&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># forward pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outputs &lt;span style="color:#f92672">=&lt;/span> model(&lt;span style="color:#f92672">**&lt;/span>inputs)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logits &lt;span style="color:#f92672">=&lt;/span> outputs&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;logits&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># compute custom loss (suppose one has 3 labels with different weights)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loss_fct &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>CrossEntropyLoss(weight&lt;span style="color:#f92672">=&lt;/span>torch&lt;span style="color:#f92672">.&lt;/span>tensor([&lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">2.0&lt;/span>, &lt;span style="color:#ae81ff">3.0&lt;/span>]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loss &lt;span style="color:#f92672">=&lt;/span> loss_fct(logits&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, self&lt;span style="color:#f92672">.&lt;/span>model&lt;span style="color:#f92672">.&lt;/span>config&lt;span style="color:#f92672">.&lt;/span>num_labels), labels&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> (loss, outputs) &lt;span style="color:#66d9ef">if&lt;/span> return_outputs &lt;span style="color:#66d9ef">else&lt;/span> loss
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2022-10-23 18:32:34ï¼Œç›´æ¥ç”¨ forward å‡½æ•°ä¸­è®¡ç®—çš„ loss&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>label_ids &lt;span style="color:#f92672">=&lt;/span> label_ids&lt;span style="color:#f92672">.&lt;/span>to(torch&lt;span style="color:#f92672">.&lt;/span>float)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>outputs &lt;span style="color:#f92672">=&lt;/span> model(input_ids&lt;span style="color:#f92672">=&lt;/span>input_ids, token_type_ids&lt;span style="color:#f92672">=&lt;/span>segment_ids, attention_mask&lt;span style="color:#f92672">=&lt;/span>input_mask, labels&lt;span style="color:#f92672">=&lt;/span>label_ids)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>logits &lt;span style="color:#f92672">=&lt;/span> outputs&lt;span style="color:#f92672">.&lt;/span>logits
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>loss &lt;span style="color:#f92672">=&lt;/span> outputs&lt;span style="color:#f92672">.&lt;/span>loss
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ï¼Œå¯¹äº &lt;code>single_label_classification&lt;/code> åˆ†ç±»ä»»åŠ¡ï¼Œä¸è¦å°† &lt;code>label_ids&lt;/code> è½¬åŒ–æˆ intã€‚&lt;/p>
&lt;h1 id="5-ç†è§£">5. ç†è§£&lt;/h1>
&lt;h2 id="51-æ·±åº¦å­¦ä¹ ç ”ç©¶è€…åœ¨åšä»€ä¹ˆ">5.1 æ·±åº¦å­¦ä¹ ç ”ç©¶è€…åœ¨åšä»€ä¹ˆ&lt;/h2>
&lt;p>è½¬è½½è‡ª &lt;a href="https://www.zhihu.com/question/433274875/answer/2240764095">https://www.zhihu.com/question/433274875/answer/2240764095&lt;/a>&lt;/p>
&lt;p>ä»¥ä¸‹é˜¶æ®µå±‚å±‚é€’è¿›&lt;/p>
&lt;ul>
&lt;li>æŠŠå·²æœ‰çš„å¼€æºæ¨¡å‹ä¸‹è½½ä¸‹æ¥ï¼Œæ¢æˆè‡ªå·±çš„æ•°æ®é›†ã€‚è¿™ä¸ªæ—¶å€™åº”è¯¥æ˜¯åå‘äºåº”ç”¨å‹ç ”ç©¶ï¼ŒæŠŠåŠ¨ç‰©å›¾åƒæ•°æ®é›†æ¢æˆè‡ªå·±é¢†åŸŸçš„ï¼ŒåŒ»å­¦å›¾åƒæ•°æ®é›†ï¼Œå¹¶ä¸”è·‘å‡º SOTA çš„å‡†ç¡®ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>è¿™ä¸ªè¿‡ç¨‹è¦æ±‚çœ‹æ‡‚å¼€æºçš„ä»£ç æ¶æ„ï¼Œloss, optimizer, åŸºæœ¬çš„å‰å‘åå‘ä¼ æ’­åº”è¯¥æ— éœ€ä¿®æ”¹ï¼Œä½†æ˜¯éœ€è¦äº†è§£æ•°æ®çš„é¢„å¤„ç†ï¼Œè¾“å…¥çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå¦‚ä½•è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œæ•°æ®é›†ä»å“ªé‡Œä¸‹è½½ï¼Œç”¨å“ªä¸ªå‡½æ•° load dataã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ä»ç†è®ºä¸Šç†è§£æ¨¡å‹çš„ä¸€äº›ç®—æ³•å’Œæ€æƒ³ï¼ŒçŸ¥é“ä¸€äº›é‡è¦çš„è¶…å‚æ•°èƒŒåçš„æ€æƒ³ã€‚æœ‰ä¿¡å¿ƒè°ƒæ•´å®ƒï¼Œå¹¶ç¬¦åˆè‡ªå·±é¢„æœŸçš„æ•ˆæœ&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æœ€æ˜¾ç„¶çš„ï¼Œlearning rate, batch sizeï¼Œåˆæ¯”å¦‚é‡åŒ–æ—¶çš„ scale factor æœç´¢èŒƒå›´&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>æ·±å…¥äº†è§£æ¨¡å‹çš„ä»£ç å®ç°å’Œç»†èŠ‚ï¼Œèƒ½å¤Ÿä¸ºæ¨¡å‹æ·»åŠ ä¸€äº›ä¸»æµçš„ï¼Œæå‡æ€§èƒ½çš„ module æˆ–è€… trickï¼›èƒ½å¤Ÿåˆ†æä¿®æ”¹å‰åï¼Œæ¨¡å‹çš„å·®å¼‚ï¼›å¯¹æ¨¡å‹çš„æ¨ç†å’Œè®­ç»ƒè¿‡ç¨‹äº†å¦‚æŒ‡æŒ&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ¯”å¦‚åˆ†ææ¨ç†æ—¶æŸä¸ª epoch çš„æ¿€æ´»åˆ†å¸ƒæƒ…å†µï¼Œåˆ†å¸ƒå‡ºç°äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Œloss å˜åŒ–æœ‰ä»€ä¹ˆé—®é¢˜ç­‰ç­‰&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>èƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ‹“å±•æ¨¡å‹çš„åŠŸèƒ½ï¼Œè®©æ¨¡å‹èƒ½åšæ›´å¤šçš„äº‹æƒ…&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>è¿™ä¸ªå¯èƒ½æ›´å¤šä½“ç°åœ¨ä¸šåŠ¡éœ€æ±‚å±‚é¢ï¼Œå¦‚ä½•å»éƒ¨ç½²å…¬å¸éœ€è¦çš„æ¨¡å‹ã€‚ä¸è¿‡æˆ‘è®¤ä¸ºåšäº†é‡åŒ–æ¡†æ¶çš„æ‹“å±•ï¼Œä¹Ÿè¾¾åˆ°è¿™ä¸ªæ°´å¹³äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/120315111">https://zhuanlan.zhihu.com/p/120315111&lt;/a>&lt;/p></description></item><item><title>ï¼ˆè½¬è½½ï¼‰Having Effective Meetings Between Advisors and Students</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_having-effective-meetings-between-advisors-and-students/</link><pubDate>Mon, 26 Sep 2022 02:42:41 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_having-effective-meetings-between-advisors-and-students/</guid><description>&lt;blockquote>
&lt;p>Title: Having Effective Meetings Between Advisors and Students
by Mingyu Gao on Nov 2, 2020 | Tags: Academia, Advice, Students&lt;/p>
&lt;/blockquote>
&lt;p>åŸæ–‡é“¾æ¥ï¼šhttps://www.sigarch.org/having-effective-meetings-between-advisors-and-students/#undefined&lt;/p>
&lt;p>æ¥è‡ªé«˜é¸£å®‡è€å¸ˆåœ¨ sigarch ä¸Šå‘è¡¨çš„åšå®¢ï¼Œä»¥ä¸‹æ˜¯ç¿»è¯‘ï¼š&lt;/p>
&lt;p>å¯¼å¸ˆå’Œå­¦ç”Ÿä¹‹é—´çš„æœ‰æ•ˆåˆä½œå’Œäº¤æµæ˜¯å­¦æœ¯æˆåŠŸçš„å…³é”®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¼å¸ˆåªèƒ½æä¾›ä¸€å‘¨ä¸€æ¬¡æˆ–è€…ä¸¤å‘¨ä¸€æ¬¡ï¼Œè€Œéæ—¥å¸¸çš„ä¸€å¯¹ä¸€ meetingã€‚è¿™æ„å‘³ç€å­¦ç”Ÿä¸€ä¸ªæœˆä¹Ÿæ— æ³•å’Œå¯¼å¸ˆäº¤æµå‡ æ¬¡ã€‚å› æ­¤å¦‚ä½•ä¼˜åŒ–ä¼šè®®ï¼Œå®ç°å­¦ç”Ÿå’Œå¯¼å¸ˆä¹‹é—´çš„æœ‰æ•ˆäº¤æµå°±å¾ˆå€¼å¾—æ€è€ƒã€‚&lt;/p>
&lt;p>å®é™…ä¸Šï¼Œå¯¹æˆ‘æ¥è¯´ç°åœ¨æœ‰å¾ˆå¤šé‡è¦çš„è¯¾é¢˜ã€‚è¿‡å»ä¸€å¹´åŠå†…ï¼Œæˆ‘ä»¬ç»„æ‰©å¼ åˆ°äº† 8 ä½ç ”ç©¶ç”Ÿï¼ˆåŒ…æ‹¬ä¸‹ä¸€å¹´å³å°†å…¥å­¦çš„å­¦ç”Ÿï¼‰å’Œä¸€äº›æœ¬ç§‘ç”Ÿï¼Œä»¥åŠ gap-year å®ä¹ ç”Ÿã€‚å‡ ä¹æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹è¯¾é¢˜ï¼Œéœ€è¦æ—¶é—´å¼€ä¼šå’Œè®¨è®ºã€‚æ¯å‘¨éƒ½ä¼šæœ‰è¿™æ ·çš„ä¸€æ¬¡ä¼šè®®ï¼Œæ¯æ¬¡ä¼šè®®çš„æ—¶é—´é™åˆ¶åœ¨ 30-45 åˆ†é’Ÿã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº¤æµçš„æœ‰æ•ˆæ€§ååˆ†é‡è¦ã€‚&lt;/p>
&lt;p>æˆ‘ç«™åœ¨å¯¼å¸ˆå’Œå­¦ç”Ÿè¿™ä¸¤ä¸ªè§’è‰²çš„è§†è§’æ€è€ƒäº†è¿™ä»¶äº‹ï¼Œæˆ‘ä¼šåŸºäºæœ€è¿‘çš„ç»éªŒåˆ†äº«ä¸€äº›å»ºè®®ï¼Œå¸Œæœ›è¿™ä¸ªä¸€æ‰‹çš„å»ºè®®å¯¹äºæ–°çš„ç ”ç©¶ç”Ÿå’Œå¯¼å¸ˆæœ‰ç”¨ã€‚&lt;/p>
&lt;h1 id="1-åœ¨å¼€å§‹çš„æ—¶å€™å»ºç«‹åˆé€‚çš„é£æ ¼">1. åœ¨å¼€å§‹çš„æ—¶å€™å»ºç«‹åˆé€‚çš„é£æ ¼&lt;/h1>
&lt;p>åœ¨ç»™å‡ºå…·ä½“çš„å»ºè®®ä¹‹å‰ï¼Œæˆ‘æƒ³å¼ºè°ƒæ¯ä¸ªäººæœ‰ä¸åŒçš„åå¥½å’Œå·¥ä½œé£æ ¼ã€‚ä¸‹é¢çš„å»ºè®®ä¸é€‚ç”¨äºæ‰€æœ‰äººã€‚å› æ­¤äº†è§£å½¼æ­¤æ˜¯å¾ˆé‡è¦çš„ï¼Œåœ¨å¸ˆç”Ÿå…³ç³»å¼€å§‹çš„æ—¶å€™è®¾ç½®å¥½æ¸…æ™°çš„æœŸæœ›ã€‚æ¯”å¦‚ï¼Œå­¦ç”Ÿå¯èƒ½ä¼šæƒ³çŸ¥é“å¯¼å¸ˆçš„é£æ ¼æ˜¯æ€æ ·çš„ï¼Œé¡¹ç›®çš„é‡Œç¨‹ç¢‘å’Œè®ºæ–‡ deadline å¯ä»¥é¢„è§ä¸€å¹´å†…çš„èŠ‚å¥ã€‚å¯¼å¸ˆä¹Ÿéœ€è¦è®¤çŸ¥åˆ°å­¦ç”Ÿæœ‰å¤šç‹¬ç«‹ï¼Œå­¦ç”Ÿä¸€å‘¨ä¼šåœ¨å“ªäº›æ—¶å€™å·¥ä½œï¼Œä¼šå·¥ä½œå¤šä¹…ã€‚ç›´æ¥å¯¹è¯å¹¶ä¸æ˜¯ä¸€ä¸ªåä¸»æ„ï¼Œè€Œä¸æ˜¯ä¸€ç›´è§‚å¯Ÿå¹¶ä¸”æ…¢æ…¢é€‚åº”ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªå¯ä»¥ç†è§£ä¸ºå‰æœŸçš„æ²Ÿé€šï¼Œè¿™ä¹Ÿååˆ†é‡è¦ã€‚é€‚åº”å½¼æ­¤çš„èŠ‚å¥ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="2-ä¸“æ³¨äºé•¿æœŸè·¯çº¿å›¾å’Œè„šä¸‹çš„è·¯">2. ä¸“æ³¨äºé•¿æœŸè·¯çº¿å›¾å’Œè„šä¸‹çš„è·¯&lt;/h1>
&lt;p>å¾ˆå¤šä½å¹´çº§å­¦ç”Ÿå–œæ¬¢å‡†å¤‡å¾ˆé•¿å¾ˆç»†èŠ‚çš„è¿›å±•æŠ¥å‘Šï¼Œæè¿°ä»–ä»¬ä¸Šå‘¨åšè¿‡çš„æ‰€æœ‰äº‹æƒ…ã€‚å› ä¸ºä»–ä»¬æ‹…å¿ƒåˆ°æ—¶ä¼šè§‰å¾—ä»–ä»¬åšçš„å¤ªå°‘äº†ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸å¤Ÿçš„ã€‚ä¸ºäº†ä»å®è´µçš„æ—¶é—´ä¸­è·å¾—æ›´å¤šçš„ä¿¡æ¯ï¼Œå­¦ç”Ÿåº”è¯¥ &lt;strong>èŠ±æ›´å¤šçš„æ—¶é—´æ¥å¯»æ±‚ä»–ä»¬ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆçš„å»ºè®®&lt;/strong>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æˆ‘å®Œå…¨åŒæ„è¿™ä¸€ç‚¹ï¼Œå®é™…ä¸Šæˆ‘åœ¨ meeting çš„æ—©æœŸä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚æè¿°äº†ä¸€äº›å·¥ä½œï¼Œè¯¢é—®ä¸‹ä¸€æ­¥åº”è¯¥åš A å¥½ä¸€ç‚¹è¿˜æ˜¯åš B å¥½ä¸€ç‚¹ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™æŠ•å…¥çš„æ—¶é—´ä¸è¶³ï¼Œè‡ªå·±éƒ½æ²¡æ€ä¹ˆæ€è€ƒï¼Œä¹Ÿæ²¡ä»€ä¹ˆè¿›åº¦ï¼Œé‚£è‚¯å®šä¹Ÿå°±æ²¡æœ‰ &lt;strong>å¸¦ç€é—®é¢˜&lt;/strong> å»å¼€ä¼šã€‚è¿™æ ·çš„è¯å¯èƒ½åªä¼šè§‰å¾—æ°´è¿‡å»å°±å¥½äº†ï¼Œæµªè´¹äº†å®è´µçš„å¼€ä¼šæ—¶é—´ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ˜¯ä»å¯¼å¸ˆé‚£é‡Œå­¦ä¹ å¦‚ä½•æ€è€ƒç ”ç©¶é—®é¢˜ï¼Œä»¥åŠåœ¨ high level å®¡è§†é¡¹ç›®çš„æ—¶é—´ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯å­¦ç”Ÿç®€å•åœ°æ€»ç»“ &lt;strong>where they are now in the overall plan&lt;/strong>ï¼Œä»¥åŠ &lt;strong>æ¥ä¸‹æ¥çš„è®¡åˆ’æ˜¯ä»€ä¹ˆ&lt;/strong>ã€‚ä¹‹åå¯¼å¸ˆå¯ä»¥å¼€å§‹æä¾›è¯„è®ºå’Œå»ºè®®ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æˆ‘è®¤ä¸ºä¹‹å‰æœ‰è¿‡ç®€å•çš„æ€»ç»“ï¼Œä½†æ˜¯ç¼ºå°‘ä¸€ä¸ª overall çš„æ•´ç†ï¼Œç¡®å®ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ€»ç»“ä¹‹å‰å·¥ä½œçš„ç»“è®ºï¼Œç„¶åæ€»ç»“ç›®å‰æ¨è¿›åˆ°äº†å“ªä¸€æ­¥ï¼Œå¯¹äºæ•´ä½“è¿›åº¦åˆ°äº†å“ªä¸€æ­¥ï¼Œç„¶åå†é˜è¿°æ¥ä¸‹æ¥çš„è®¡åˆ’ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æœ‰ä¸¤ç§å½¢å¼çš„è®¨è®ºæ¯”è¾ƒé€šç”¨ã€‚åœ¨é¡¹ç›®æ—©æœŸï¼Œå¿«é€Ÿåœ°æ ¹æ®ç²¾ç‚¼çš„æ€»ç»“ï¼Œå’Œ high level çš„é¢„æœŸæ¥å»ºç«‹ &lt;strong>overall research roadmap&lt;/strong> æ˜¯éå¸¸é‡è¦çš„ã€‚ä½å¹´çº§å­¦ç”Ÿå¯èƒ½ä¼šæå‡ºä¸€ä¸ªæœ‰å‰é€”çš„æƒ³æ³•ï¼Œä½†æ˜¯é€šå¸¸ä¸ä¼šé¢„è§æ‰€æœ‰çš„è®¾è®¡é—®é¢˜å’Œå…¨éƒ¨æ½œåŠ›ã€‚å¯¼å¸ˆæœ‰åŠ©äºå½»åº•åœ°åˆ†ææŒ‘æˆ˜å’Œæœºä¼šï¼Œæ›´å¥½åœ°æ‰¾åˆ°æœŸæœ›çš„å…³é”®è´¡çŒ®ã€‚åœ¨æŠ•å…¥é˜¶æ®µï¼Œåº”è¯¥æŠŠæ›´å¤šçš„æ—¶é—´èŠ±åœ¨ &lt;strong>immediate next steps&lt;/strong>ï¼Œä¹Ÿå°±æ˜¯ä¸‹å‘¨åº”è¯¥å…³æ³¨ä»€ä¹ˆã€‚æ¯”å¦‚è¯¸å¤šäº‹æƒ…é‡Œé¢ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œå¦‚ä½•è°ƒæ•´ä»¥å¤„ç†å®éªŒä¸­ä¸å¥½çš„ç»“æœï¼Œä¸ºäº†è®©è¿™ä¸ªå·¥ä½œæ›´å®Œæ•´è¿˜éœ€è¦è¡¥å……ä»€ä¹ˆæ¢ç´¢ã€‚&lt;/p>
&lt;p>åœ¨è¿™æ ·çš„ä¼šè®®ä¹‹åï¼Œå­¦ç”Ÿå¯¹äºæ¥ä¸‹æ¥åšä»€ä¹ˆåº”è¯¥æœ‰æ¸…æ™°çš„è“å›¾ï¼Œä¸ç®¡æ˜¯å¯¹äºæœ€ç»ˆçš„æ–‡ç« ï¼Œè¿˜æ˜¯å¯¹äºä¸‹æ¬¡ä¼šè®®å‰çš„å·¥ä½œã€‚åœ¨ä¼šè®®ä¹‹åæ€»ç»“ä¸€ä¸ª to do list æ€»æ˜¯æœ‰æ‰€å¸®åŠ©çš„ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¾¿äºæŸ¥è¯¢çš„ä¸€æ¬¡è®°å½•ï¼Œä¸‹æ¬¡ä¼šè®®ä¹‹å‰ä¹Ÿå¯ä»¥æ£€æŸ¥è¿›åº¦ã€‚&lt;/p>
&lt;h1 id="3-åœ¨çº¿ä¸‹å†™ä½œä¸­ä¿å­˜ç»†èŠ‚">3. åœ¨çº¿ä¸‹å†™ä½œä¸­ä¿å­˜ç»†èŠ‚&lt;/h1>
&lt;p>å¦‚æœä¼šè®®éƒ½æ˜¯å…³äº high level çš„æƒ³æ³•ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥è®¨è®ºåŒæ ·é‡è¦çš„åº•å±‚ç»†èŠ‚ï¼Œä¾‹å¦‚å®šç†è¯æ˜ã€æ¨¡å‹ç»†èŠ‚ã€å·¥ä½œè¿›å±•æè¿°å’Œå…·ä½“æ¡ˆä¾‹ç ”ç©¶ï¼Ÿæˆ‘çš„å»ºè®®æ˜¯æŠŠä»–ä»¬å…¨éƒ¨ä¿å­˜ä¸‹æ¥ã€‚æ¢å¥è¯è¯´ï¼Œå­¦ç”Ÿåº”è¯¥ &lt;strong>write detailed and comprehensive documents&lt;/strong>ï¼ŒåŒ…æ‹¬è¿™æ¬¡ä¼šè®®ä¸­æ‰€æœ‰é‡è¦çš„ï¼Œæ”¯æ’‘ high level è§‚ç‚¹çš„ç»†èŠ‚ã€‚å¯¼å¸ˆå¯ä»¥åœ¨ä¼šè®®å‰åæŸ¥é˜…è¿™ä»½æ–‡æ¡£ã€‚&lt;/p>
&lt;p>æˆ‘æƒ³å¼ºè°ƒçš„æ˜¯è¿™ä»½æ–‡ç« éœ€è¦ &lt;strong>å°½å¯èƒ½åœ°è¯¦ç»†&lt;/strong>ï¼Œè¿™ä¸ªå’Œä»…ä»…æ€»ç»“è¦ç‚¹çš„ï¼Œç®€æ˜çš„ä¼šè®® slide ä¸åŒã€‚ä¸€çœ¼çœ‹ä¸Šå»ï¼Œè¿™ä¼¼ä¹éå¸¸ä½æ•ˆï¼Œå› ä¸ºå†™ä½œæ˜¯éå¸¸è€—æ—¶çš„ã€‚ä½†æ˜¯ç›¸æ¯”å…¶ä¼˜ç‚¹ï¼Œè¿™éƒ½æ˜¯å€¼å¾—çš„ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ç›®å‰å‚ä¸äº†æ¥è¿‘ 3 ä¸ªæœˆ internï¼Œåœ¨å…¶ä¸­å‡ æ¬¡ä¼šè®®æ—¶ä¼šè®°ä¸‹å¾ˆå¤šä¸œè¥¿å’Œç»†èŠ‚ï¼Œä½†æ˜¯åœ¨è¿‡å»ä¸€ä¸¤ä¸ªæœˆä¹‹åï¼Œå¾ˆå¤šä¸œè¥¿å·²ç»å¿˜è®°äº†ã€‚ä¸€ä¸ªç ”ç©¶é¡¹ç›®çš„å‘¨æœŸæ˜¯å¾ˆé•¿çš„ï¼Œå› æ­¤è¿™ä»¶äº‹æƒ…ç¡®å®ä¹Ÿæ˜¯æœ‰å¿…è¦åšçš„ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é¦–å…ˆï¼Œå½“ä½ å¼€å§‹å†™ä¸‹è¿™ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œä½œä¸ºå­¦ç”Ÿï¼Œæœ‰æœºä¼šç»„ç»‡æ•´ä¸ª ideaï¼Œå›é¡¾æ•´ä¸ªè®¾è®¡ã€‚æœ‰äº›æ—¶å€™æ€»æ˜¯ä¼šå¿˜è®°ä¸€äº›äº‹æƒ…ï¼Œé™¤éæŠŠä»–ä»¬éƒ½å†™ä¸‹æ¥ï¼Œå¹¶ä¸”è¯¦å°½åœ°æ£€æŸ¥ã€‚å…¶æ¬¡ï¼Œå¯¹è€å¸ˆæ¥è¯´ï¼Œå¯ä»¥ç”¨å……è¶³çš„ï¼Œçº¿ä¸‹çš„æ—¶é—´æ¥ä»”ç»†åœ°æµè§ˆæ‰€æœ‰ç»†èŠ‚ï¼Œè€Œä¸æ˜¯åœ¨èƒŒé èƒŒçš„ä¼šè®®ä¸Šï¼Œé¡¶ç€ç´§å‡‘çš„æ—¶é—´å‹åŠ›æ¥åšè¿™äº›äº‹æƒ…ã€‚ç¬¬ä¸‰ç‚¹ï¼Œå¯¹å­¦ç”Ÿæ¥è¯´ä¹Ÿæ˜¯ç»ƒä¹ å†™ä½œçš„å¥½æœºä¼šã€‚å¦‚æœä½ å‘ç°éš¾ä»¥ç”¨æ–‡å­—æ¸…æ™°åœ°è§£é‡Šå®Œæ•´çš„è®¾è®¡ç»†èŠ‚ï¼Œæ€»æ˜¯å°†é€šè¿‡ç›´æ¥äº¤è°ˆæ¥è¡¨è¾¾ï¼Œé‚£ä½ åº”è¯¥è®°ä½ï¼Œä½ æ˜¯æ²¡æœ‰æœºä¼šå’Œæ–‡ç« å®¡ç¨¿äººäº¤è°ˆçš„ã€‚æœ€åï¼Œè¿™äº›å†…éƒ¨æ–‡æ¡£çš„æ®µè½å’Œå›¾ç‰‡å¾ˆå¯èƒ½è¢«é‡å¤ä½¿ç”¨ï¼Œæˆ–è€…ç›´æ¥æ‹·è´åˆ°æœ€ç»ˆçš„æ–‡ç« ä¸­ã€‚æ€»ä¹‹ï¼Œä½ çš„æ—¶é—´æ²¡æœ‰è¢«æµªè´¹ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¸çŸ¥é“æœ‰å“ªç§å·¥å…·é€‚äºè¿™ç§ &lt;strong>å†…éƒ¨æ–‡æ¡£&lt;/strong>ï¼Œè¿™ä¸ªå¬èµ·æ¥æ˜¯ä¸€ä¸ªå¤§å®¶éƒ½èƒ½çœ‹åˆ°çš„ï¼Œå‰æœŸçš„ paper manuscriptï¼Œåº”è¯¥æœ‰è¯¦ç»†çš„å›¾ç‰‡å’Œé˜è¿°ã€‚æ ¼å¼å¯èƒ½éƒ½æ¥è¿‘äº paper äº†ï¼Œè¿™ä¸ªå€’æ˜¯å¯ä»¥è¯·æ•™ä¸€ä¸‹è€å¸ˆä»¬ã€‚
2023-03-21 11:15:15ï¼Œè°·æ­Œæ–‡æ¡£å’Œè…¾è®¯æ–‡æ¡£åº”è¯¥éƒ½èƒ½åš&lt;/p>
&lt;/blockquote>
&lt;h1 id="4-å­¦ä¼šåšæ·±åº¦çš„åˆ†æ">4. å­¦ä¼šåšæ·±åº¦çš„åˆ†æ&lt;/h1>
&lt;p>å­¦ç”Ÿåº”è¯¥æŒæ¡çš„å¦ä¸€ä¸ªæŠ€èƒ½æ˜¯è‡ªå·±å¤„ç†ç®€å•çš„é—®é¢˜ï¼ŒèŠ‚çº¦ä¼šè®®çš„æ—¶é—´ï¼Œç”¨è¿™ä¸ªæ—¶é—´æ¥è§£å†³æ›´é‡è¦å’Œæ›´å›°éš¾çš„é—®é¢˜ã€‚è¿™æ„å‘³ç€å­¦ç”Ÿåº”è¯¥å­¦ä¹ å¦‚ä½•ç‹¬ç«‹åœ°è¿›è¡Œæ·±åº¦åˆ†æï¼Œä»¥è§£å†³é‡åˆ°çš„é—®é¢˜ï¼Œæˆ–è€…è‡³å°‘æ”¶é›†è¶³å¤Ÿçš„æ•°æ®ç»†èŠ‚å’Œè¯æ®ï¼Œç”¨äºä¸‹ä¸€æ¬¡ä¼šè®®çš„è®¨è®ºã€‚&lt;/p>
&lt;p>ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå½“å®éªŒç»“æœå’Œåˆè¯•æœŸæœ›ä¸ç¬¦æ—¶ã€‚ä¸å…¶ç­‰åˆ°ä¸‹ä¸€æ¬¡ä¼šè®®æ‰æŠ¥å‘Šç»™å¯¼å¸ˆï¼Œä¸å¦‚é€šè¿‡åˆ†ææ•°æ®ä¸»åŠ¨æ‰¾å‡ºåˆç†çš„åŸå› ã€‚ä¸€ä¸ªæŠ€å·§æ˜¯ &lt;strong>zoom in to the next level of details&lt;/strong>ï¼Œæˆ–è€… &lt;strong>always measure one level deeper&lt;/strong>ã€‚ä¾‹å¦‚ï¼Œå½“ç½‘ç»œæ•°æ®åŒ…çš„æ—¶å»¶å‘ˆç°é•¿å°¾ï¼ˆlong tailï¼‰æ—¶ï¼Œå¯ä»¥åœ¨ tail ä¸­é€‰æ‹©å‡ ä¸ªæœ‰ä»£è¡¨æ€§çš„æ•°æ®åŒ…ï¼Œæ£€æŸ¥å®ƒä»¬çš„è·¯ç”±æ˜¯å¦è§„å¾‹ï¼ˆä»æ‰€æœ‰æ•°æ®åŒ…è¿›å…¥åˆ°å•ä¸ªæ•°æ®åŒ…ï¼‰ï¼Œæˆ–è€…æ£€æŸ¥å®ƒä»¬æ˜¯å¦å­˜åœ¨æ²¿è¿™äº›è·¯å¾„çš„å¸¸è§çƒ­ç‚¹ï¼ˆhotspotï¼‰ï¼ˆä»æ•´ä¸ªè·¯å¾„ï¼ˆroutesï¼‰è¿›å…¥åˆ°å•ä¸ªé“¾æ¥ï¼ˆlinkï¼‰ï¼‰ã€‚&lt;/p>
&lt;blockquote>
&lt;p>é¦–å…ˆï¼Œé“ç†å°±æ˜¯å¾ˆç®€å•çš„è¦è‡ªå·±ä¸»åŠ¨ã€‚ä½†æ˜¯è¡ŒåŠ¨èµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚å¹¶ä¸”ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œâ€œè¡ŒåŠ¨â€æˆ–è€…â€œä¸è¡ŒåŠ¨â€ï¼Œé€šå¸¸ï¼Œäººä¼šåœ¨å‡ ç§çŠ¶æ€ä¸­åˆ‡æ¢ã€‚æœ‰çš„æ—¶å€™æ˜¯ä¸æƒ³å»æ¨è¿›è¿™ä¸ªè¯¾é¢˜ï¼Œç”±äºé‡åˆ°äº†ä¸€äº›é˜»åŠ›ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰æ‰¾åˆ°å……è¶³çš„è®ºæ–‡æ”¯æ’‘ï¼Œå¯èƒ½æ˜¯å—åˆ°äº†å¯¼å¸ˆçš„æ‰¹è¯„ï¼Œå¯èƒ½æ˜¯ peer pressureï¼Œå¯èƒ½æ˜¯å®¡ç¨¿äººçš„è´¨ç–‘ï¼Œå¯èƒ½æ˜¯ç¨‹åºçš„ bugã€‚è¿™æ˜¯ä¸€ä¸ªèºæ—‹æ¨è¿›çš„è¿‡ç¨‹ï¼Œè¦ä¸æ–­åœ°è°ƒæ•´è‡ªå·±çš„çŠ¶æ€ï¼Œå‘¨æœŸæ€§åœ°å®¡è§†ã€‚&lt;/p>
&lt;p>æ ¹æ®é«˜è€å¸ˆä¸¾çš„ä¾‹å­ï¼Œç†è§£ä¸ºåšæ›´åŠ åº•å±‚/ç»†ç²’åº¦çš„åˆ†æã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="5-å¯»æ±‚å¸®åŠ©">5. å¯»æ±‚å¸®åŠ©&lt;/h1>
&lt;p>reach out for help&lt;/p>
&lt;p>æœ€åçš„å»ºè®®ï¼ŒåŒæ ·ä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œå°±æ˜¯ &lt;strong>actively seek help when needed&lt;/strong>ã€‚ä»æ¥æ²¡æœ‰äººèƒ½å¤Ÿç‹¬è‡ªåšæ‰€æœ‰äº‹æƒ…ã€‚åœ¨ä½ å°è¯•äº†ä½ èƒ½æƒ³åˆ°çš„ä¸€åˆ‡æ–¹æ³•åï¼ˆæ¯”å¦‚é‚£äº›å‰äººçš„å»ºè®®ï¼‰ï¼Œæ˜¯æ—¶å€™å’Œä½ çš„åŒé—¨äº¤æµï¼Œæˆ–è€…ç›´æ¥å‘å¯¼å¸ˆå¯»æ±‚å¸®åŠ©ã€‚æ‰¿è®¤ä½ é‡åˆ°äº†é—®é¢˜ï¼Œè¿™ä¸ªåœºæ™¯å¹¶ä¸ä¼šç¾è€»æˆ–è€…å°´å°¬ã€‚&lt;strong>ä½ ä¸å¿…ç­‰åˆ°ä¸‹ä¸€æ¬¡ä¼šè®®&lt;/strong>ã€‚å‘é€ä¸€å°çŸ­é‚®ä»¶ï¼Œæˆ–è€…ç›´æ¥å»å¯¼å¸ˆçš„åŠå…¬å®¤ï¼Œç®€å•äº¤è°ˆ 5 åˆ†é’Ÿã€‚æˆ–è®¸å¯¼å¸ˆçš„ä¸€ä¸¤ä¸ªè¯å°±æ˜¯ä¸€ç›æ˜ç¯ï¼Œè®©ä½ æœ‰æ›´å¤šè¿›å±•ï¼Œè€Œä¸æ˜¯è¢«å¡åœ¨åŸåœ°ã€‚ç”Ÿæ´»å’Œç ”ç©¶æ€»æ˜¯æœ‰èµ·æœ‰è½ã€‚è¯·è®°ä½ï¼Œä½ å¹¶ä¸å­¤å•ï¼Œå¯¼å¸ˆåœ¨è¿™é‡Œæä¾›å¸®åŠ©å’Œæ”¯æŒã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ä¸å¿…ç­‰åˆ°ä¸‹ä¸€æ¬¡ä¼šè®®&lt;/strong>ï¼Œä¸€å®šè¦ä¸»åŠ¨ï¼Œç§¯æã€‚&lt;/p>
&lt;p>&lt;strong>è¯·è®°ä½ï¼Œä½ å¹¶ä¸å­¤å•ï¼Œå¯¼å¸ˆåœ¨è¿™é‡Œæä¾›å¸®åŠ©å’Œæ”¯æŒ&lt;/strong>ï¼Œå½“ä½ æ‰¾åˆ°äº†ä¸€èµ·åŒè¡Œçš„äººï¼Œä¸€èµ·è®¨è®ºçš„äººï¼Œä¸€å®šè¦çæƒœã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>ä½œä¸ºæ€»ç»“&lt;/strong>ï¼Œæœ‰æ•ˆçš„ä¼šè®®æ˜¯ &lt;strong>make a good plan for time and content&lt;/strong>ã€‚æˆ‘çš„ç»éªŒæ˜¯æŒ‰ä»¥ä¸‹å†…å®¹æ¥ç»„ç»‡ã€‚å¿«é€ŸæŸ¥çœ‹å½“å‰è¿›åº¦ã€‚ä¸»è¦èŠ±æ—¶é—´åœ¨æ”¹è¿›å»ºè®®å’Œä¸‹ä¸€æ­¥çš„è®¡åˆ’ä¸Šã€‚ä»¥å¾…åŠäº‹é¡¹æ‘˜è¦æ¥ç»“æŸä¼šè®®ã€‚å°†ç®€å•å’Œæ¬¡è¦çš„é—®é¢˜ï¼Œä»¥åŠè¯¦ç»†çš„å®¡è§†ä½œä¸ºç¦»çº¿ä»»åŠ¡ã€‚å­¦ä¹ å¦‚ä½•ç‹¬ç«‹å’Œå…¨é¢åœ°åˆ†æé—®é¢˜ã€‚åœ¨éœ€è¦æ—¶ç§¯æå¯»æ±‚å¸®åŠ©ã€‚&lt;/p></description></item><item><title>è®ºæ–‡é˜…è¯»çš„ç¬”è®°æ¨¡æ¿</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%9A%84%E7%AC%94%E8%AE%B0%E6%A8%A1%E6%9D%BF/</link><pubDate>Fri, 23 Sep 2022 11:15:41 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%9A%84%E7%AC%94%E8%AE%B0%E6%A8%A1%E6%9D%BF/</guid><description>&lt;h1 id="è®ºæ–‡æ ‡é¢˜-title">è®ºæ–‡æ ‡é¢˜ Title&lt;/h1>
&lt;p>ä¼šè®®/æœŸåˆŠçš„ä¿¡æ¯ï¼Œä¾‹ï¼š&lt;strong>MICRO'21&lt;/strong>&lt;/p>
&lt;p>&lt;strong>ä½œè€…ä¿¡æ¯ï¼š&lt;/strong> å¤§æ¦‚æ€»ç»“ä¸€ä¸‹ä¸€ä½œå’Œå…¶å¯¼å¸ˆç›®å‰çš„æƒ…å†µï¼Œä¹‹å‰çš„ä¸€äº›å·¥ä½œï¼Œç›®å‰çš„æœºæ„ç­‰ç­‰ã€‚&lt;/p>
&lt;h2 id="abs">Abs&lt;/h2>
&lt;p>æ€»ç»“ä¸€ä¸‹æ‘˜è¦ã€‚&lt;/p>
&lt;p>æµè§ˆæ–‡ç« çš„å›¾ç‰‡ï¼Œå¯ä»¥ç¨å¾®æ€»ç»“ä¸€ä¸‹å›¾ç‰‡ä¼ é€’çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="1-intro-æ€»ä½“ä»‹ç»">1. Intro æ€»ä½“ä»‹ç»&lt;/h2>
&lt;p>çœ‹æ‡‚åŸæ–‡å†…å®¹åï¼Œç¿»è¯‘æˆ–è€…ç”¨è‡ªå·±çš„è¯é˜è¿°ï¼Œè¿™éƒ¨åˆ†è¦æŠŠå‡ ä¸ªé—®é¢˜è¯´æ¸…æ¥šï¼Œå¹¶ä¸”è¦æœ‰é€»è¾‘ã€‚&lt;/p>
&lt;ul>
&lt;li>æ–‡ç« å¤§æ¦‚çš„èƒŒæ™¯ï¼Œä¹‹åä¼šå¼•ç”³å‡ºï¼Œç›®å‰çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li>
&lt;li>ç›®å‰æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Œæœ‰å“ªäº›å·¥ä½œï¼Œä¹‹åä¼šé˜è¿°ç›®å‰çš„å·¥ä½œçš„é—®é¢˜&lt;/li>
&lt;li>ä»‹ç»ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆï¼ˆä»–ä»¬çš„ paper åšäº†ä»€ä¹ˆï¼Œcontribution æ˜¯ä»€ä¹ˆï¼‰&lt;/li>
&lt;/ul>
&lt;h2 id="2-èƒŒæ™¯çŸ¥è¯†çš„ç›¸å…³å·¥ä½œ">2. èƒŒæ™¯çŸ¥è¯†çš„ç›¸å…³å·¥ä½œ&lt;/h2>
&lt;p>è¿™éƒ¨åˆ†ä¼šæ ¹æ®æ–‡ç« èƒŒæ™¯ï¼ŒæŠŠä¸€äº›éœ€è¦äº†è§£çš„æ¦‚å¿µç¨å¾®å±•å¼€è®²ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>å¯èƒ½ä¼šæŠŠç›¸å…³å·¥ä½œå½’ç±»ä¹‹åå†è®²ä¸€éï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¯»è¿™ä¸ªå­é¢†åŸŸçš„é¡¶ä¼šï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†å†…å®¹æ¶‰åŠåˆ°çš„å·¥ä½œå¯ä»¥éƒ½æµè§ˆä¸€ä¸‹ï¼Œäº†è§£å¤§æ¦‚çš„ç ”ç©¶æƒ…å†µã€‚&lt;/p>
&lt;h2 id="3-method">3. Method&lt;/h2>
&lt;p>è¿™éƒ¨åˆ†å æ®äº†ä¸»è¦çš„ç¯‡å¹…ï¼Œä¸€ç¯‡ 12 é¡µçš„æ–‡ç« å¯èƒ½æœ‰ä¸€åŠç¯‡å¹…ã€‚æˆ‘è®¤ä¸ºæ ¸å¿ƒçš„åœ°æ–¹æ˜¯çœ‹æ‡‚æ¯ä¸€å¼ å›¾ç‰‡ï¼Œæš‚æ—¶å…ˆä¸è¦è¿‡åˆ†æ²‰æµ¸äºç»†èŠ‚ï¼ˆæ¯”å¦‚å„ç§å‚æ•°æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Œé™¤éå›¾ç‰‡æœ‰æ¸…æ™°çš„è¯´æ˜ï¼Œå¦åˆ™è¿™ä¸ªéœ€æ±‚åº”è¯¥æ˜¯ä¸ºå¤ç°æœåŠ¡çš„ï¼‰ã€‚&lt;/p>
&lt;p>æ€»ç»“ä¸€ä¸‹ï¼Œå¯èƒ½ä¼šæœ‰ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ã€‚&lt;/p>
&lt;ul>
&lt;li>å±•ç¤ºä¸€äº›å®éªŒç»“æœï¼Œä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜ï¼š XX å‚æ•°æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸º YYï¼›æ ¹æ®è¿™ä¸ªè§‚å¯Ÿï¼ˆä¾‹ï¼šå‰å‡ å±‚ layer ä¸éœ€è¦é«˜ç²¾åº¦ï¼‰æ‰€ä»¥æˆ‘ä»¬æœ‰äº† XX insightï¼›ä¸»è¦æ˜¯é˜è¿°ä¸ºä»€ä¹ˆè¿™ä¸ªç³»ç»Ÿ/æ¶æ„ä¸­çš„ä¸€äº›å‚æ•°/æ¨¡å—ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ã€‚&lt;/li>
&lt;li>æ¶æ„/ç³»ç»Ÿçš„è®¾è®¡ç»†èŠ‚ï¼Œèƒ½å¤Ÿå®Œæ•´åœ°ä»‹ç»å·¥ä½œçš„ flow&lt;/li>
&lt;/ul>
&lt;h2 id="4-å®éªŒè¯„ä¼°ç»“æœ">4. å®éªŒ/è¯„ä¼°/ç»“æœ&lt;/h2>
&lt;p>ä»‹ç»å®éªŒæ˜¯æ€ä¹ˆåšçš„ï¼Œç”¨çš„ä»€ä¹ˆæ¨¡å‹/benchmarkï¼Œåœ¨ä»€ä¹ˆæ¡†æ¶/ç³»ç»Ÿ/æ¨¡æ‹Ÿå™¨ä¸Šå®ç°çš„ã€‚&lt;/p>
&lt;p>ç»“æœæ€ä¹ˆæ ·ã€‚ä¸€èˆ¬å¾ˆå¤šäººæµè§ˆæ—¶ä¼šåœ¨çœ‹å®Œ intro ä¹‹åç›´æ¥çœ‹ç»“æœå¦‚ä½•ã€‚æ‰€ä»¥ç»“æœä¸€å®šæ˜¯ç›´è§‚çš„ï¼Œä¸€ç›®äº†ç„¶çš„ã€‚&lt;/p>
&lt;h2 id="5-ç»“è®º">5. ç»“è®º&lt;/h2>
&lt;p>æ€»ç»“ä¸€ä¸‹ä½œè€…ç»“è®ºéƒ¨åˆ†çš„å†…å®¹ã€‚&lt;/p>
&lt;h2 id="6-æ€»ç»“">6. æ€»ç»“&lt;/h2>
&lt;p>â­ è¿™éƒ¨åˆ†æ˜¯ç”¨è‡ªå·±çš„è¯æ€»ç»“ï¼Œä¹Ÿæ˜¯å¯¹è‡ªå·±çš„é”»ç‚¼ã€‚é˜è¿°è¿™ç¯‡æ–‡ç« è§£å†³çš„é—®é¢˜ï¼Œä»–ä»¬çš„æ•ˆæœå¦‚ä½•ï¼Œä»–ä»¬å’Œä¹‹å‰çœ‹çš„ä¸€äº› &lt;strong>æ–‡ç« /æ–¹æ³•/è§£å†³æ–¹æ¡ˆ&lt;/strong> ç›¸æ¯”å¦‚ä½•ã€‚å¦‚æœå¯¹å°é¢†åŸŸæœ‰äº†ä¸€äº›äº†è§£ï¼Œè¿˜å¯ä»¥å†™ä¸‹è‡ªå·±çš„ â€œä¸»è§‚â€ è¯„ä»·ï¼Œä»–ä»¬å¯¹äºå®é™…çš„ æ¨¡å‹/ç¡¬ä»¶/æ¡†æ¶ æ˜¯å¦æœ‰ä½œç”¨ï¼Œæ–‡ç« å›¾ç‰‡ç”»çš„å¦‚ä½•ï¼Œæ–‡ç« ç»“æ„å¦‚ä½•ï¼Œå†™ä½œæ€ä¹ˆæ ·ï¼Œæœ‰å“ªäº›å¯ä»¥å­¦ä¹ çš„åœ°æ–¹ï¼Œå·¥ä½œé‡æ€ä¹ˆæ ·ï¼Œæœ‰å“ªäº›åœ°æ–¹æ¯”è¾ƒ confuseï¼Œæœ‰å“ªäº›å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹ï¼Œå¦‚æœæ˜¯ä½ åœ¨è®¾è®¡å®éªŒï¼Œä½ ä¼šæ€ä¹ˆåšã€‚&lt;/p></description></item><item><title>Python è¯­æ³•å­¦ä¹ </title><link>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_python%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</link><pubDate>Wed, 14 Sep 2022 11:15:41 +0800</pubDate><guid>https://huweim.github.io/post/%E7%BC%96%E7%A8%8B_python%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</guid><description>&lt;h1 id="1-attribute">1. Attribute&lt;/h1>
&lt;h2 id="11-string">1.1 string&lt;/h2>
&lt;p>ç”¨ for å¾ªç¯å®ç°äº† list ä¸­çš„å…ƒç´ è½¬ä¸º stringï¼Œç›®çš„æ˜¯ç”¨æ¥ç´¢å¼•ã€‚for æ„Ÿè§‰æ¯”è¾ƒéº»çƒ¦ï¼Œä¸æ˜“è¯»ä¹Ÿä¸ä¼˜é›…ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Ÿ&lt;/p>
&lt;h3 id="111-operation">1.1.1 Operation&lt;/h3>
&lt;h4 id="1111-slice">1.1.1.1 slice&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>b &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Hello, World!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(b[&lt;span style="color:#ae81ff">2&lt;/span>:&lt;span style="color:#ae81ff">5&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># llo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(b[&lt;span style="color:#ae81ff">2&lt;/span>:])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># llo, World! &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1112-replace">1.1.1.2 replace&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>string&lt;span style="color:#f92672">.&lt;/span>replace(oldvalue, newvalue, count)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># replaces a specified phrase with another specified phrase.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1113-split">1.1.1.3 Split&lt;/h4>
&lt;p>The split() method splits a string into a list&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>string&lt;span style="color:#f92672">.&lt;/span>split(separator, maxsplit)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> file &lt;span style="color:#f92672">in&lt;/span> files:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file -&amp;gt; &amp;#39;64_768_192.log&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str_tmp &lt;span style="color:#f92672">=&lt;/span> file&lt;span style="color:#f92672">.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;.&amp;#39;&lt;/span>)[&lt;span style="color:#ae81ff">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file.split(&amp;#39;.&amp;#39;) -&amp;gt; [&amp;#39;64_768_192&amp;#39;, &amp;#39;log&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file.split(&amp;#39;.&amp;#39;)[0] -&amp;gt; &amp;#39;64_768_192&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gemm_data[str_tmp] &lt;span style="color:#f92672">=&lt;/span> process_result(&lt;span style="color:#e6db74">&amp;#34;ant&amp;#34;&lt;/span>, file)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1114-format">1.1.1.4 Format&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>txt1 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;My name is &lt;/span>&lt;span style="color:#e6db74">{fname}&lt;/span>&lt;span style="color:#e6db74">, I&amp;#39;m &lt;/span>&lt;span style="color:#e6db74">{age}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(fname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span>, age &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">36&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>txt2 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;My name is &lt;/span>&lt;span style="color:#e6db74">{0}&lt;/span>&lt;span style="color:#e6db74">, I&amp;#39;m &lt;/span>&lt;span style="color:#e6db74">{1}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(&lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span>,&lt;span style="color:#ae81ff">36&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>txt3 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;My name is &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">, I&amp;#39;m &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(&lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span>,&lt;span style="color:#ae81ff">36&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(txt1)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># My name is John, I&amp;#39;m 36&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(txt2)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># My name is John, I&amp;#39;m 36&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(txt3)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># My name is John, I&amp;#39;m 36&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2022-11-24 16:58:29ï¼Œè¿™ä¸ªåœ¨è¾“å‡ºå¤„ç† log ä¿¡æ¯æ—¶ä¼šç»å¸¸ç”¨è¿‡ã€‚ä¹‹å‰ä¸€ç›´ç”¨çš„æ˜¯ +ï¼Œå­¦ä¹ ä¸€ä¸‹ f stringã€‚ä¸Šé¢çš„ format ç»„åˆå¯ä»¥ç­‰ä»·äºä¸‹é¢çš„å†™æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>fname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>age &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">36&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>txt1 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;My name is &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>fname&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, I&amp;#39;m &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>age&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># or&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>txt1 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">F&lt;/span>&lt;span style="color:#e6db74">&amp;#34;My name is &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>fname&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, I&amp;#39;m &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>age&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”šè‡³æ— éœ€ä½¿ç”¨ &lt;code>str(index)&lt;/code> è¿™ç§å†™æ³•äº†ã€‚&lt;/p>
&lt;h3 id="112-å®é™…ä½¿ç”¨æ—¶çš„ä¸€äº›éœ€æ±‚">1.1.2 å®é™…ä½¿ç”¨æ—¶çš„ä¸€äº›éœ€æ±‚&lt;/h3>
&lt;h4 id="1121-list-è½¬-string">1.1.2.1 list è½¬ string&lt;/h4>
&lt;p>&lt;strong>list item æ˜¯ string ç±»å‹ï¼Œjoin&lt;/strong>&lt;/p>
&lt;p>join, return values are strings&lt;/p>
&lt;p>æ³¨æ„ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œlist ä¸­çš„å…ƒç´ ä¹Ÿéœ€è¦æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯¹äº list item ä¸æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¹Ÿè®¸è¿˜æ˜¯å¾—ç”¨ for loopã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># list = [1, 2, 3, 4, 5]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>list &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;2&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;3&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;4&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;5&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(list) &lt;span style="color:#75715e"># get &amp;#34;12345&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;,&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(list) &lt;span style="color:#75715e"># get &amp;#34;1,2,3,4,5&amp;#34; &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>list item ä¸æ˜¯ string ç±»å‹&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> it &lt;span style="color:#f92672">in&lt;/span> list:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> conv_list &lt;span style="color:#f92672">+=&lt;/span> str(it) &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39; &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1122-string-è½¬-list">1.1.2.2 string è½¬ list&lt;/h4>
&lt;p>&lt;strong>ä½¿ç”¨ list å‡½æ•°&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> string
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>str_ &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;abcde&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>list1 &lt;span style="color:#f92672">=&lt;/span> list(str_)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(list1)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># [&amp;#39;a&amp;#39;, &amp;#39;b&amp;#39;, &amp;#39;c&amp;#39;, &amp;#39;d&amp;#39;, &amp;#39;e&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>ä½¿ç”¨ split() å‡½æ•°&lt;/strong>ï¼Œæ ¹æ® string ä¸­çš„æŸä¸ªåˆ†éš”ç¬¦æ¥åˆ’åˆ† element&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> file &lt;span style="color:#f92672">in&lt;/span> files:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file -&amp;gt; &amp;#39;64_768_192.log&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str_tmp &lt;span style="color:#f92672">=&lt;/span> file&lt;span style="color:#f92672">.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;.&amp;#39;&lt;/span>)[&lt;span style="color:#ae81ff">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file.split(&amp;#39;.&amp;#39;) -&amp;gt; [&amp;#39;64_768_192&amp;#39;, &amp;#39;log&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># file.split(&amp;#39;.&amp;#39;)[0] -&amp;gt; &amp;#39;64_768_192&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gemm_data[str_tmp] &lt;span style="color:#f92672">=&lt;/span> process_result(&lt;span style="color:#e6db74">&amp;#34;ant&amp;#34;&lt;/span>, file)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="12-list">1.2 list&lt;/h1>
&lt;h3 id="121-ä¸€äº›æ€§è´¨">1.2.1 ä¸€äº›æ€§è´¨&lt;/h3>
&lt;ul>
&lt;li>&lt;code>m_list[-1]&lt;/code> ç›´æ¥ç´¢å¼•åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼›&lt;code>m_list[-2]&lt;/code> ç´¢å¼•å€’æ•°ç¬¬äºŒä¸ª&lt;/li>
&lt;/ul>
&lt;h3 id="122-å®é™…ä½¿ç”¨æ—¶çš„éœ€è¦">1.2.2 å®é™…ä½¿ç”¨æ—¶çš„éœ€è¦&lt;/h3>
&lt;h4 id="1221-multi-dimension-to-one-dimension">1.2.2.1 multi-dimension to one-dimension&lt;/h4>
&lt;p>ä¹Ÿå°±æ˜¯å¤šç»´åˆ—è¡¨è½¬ä¸€ç»´åˆ—è¡¨ï¼Œæœ‰äº›æ—¶å€™åªæ˜¯æƒ³æ‹¿åˆ°æ‰€æœ‰æ•°æ®å¹¶ç»˜å›¾æˆ–è€…åšå…¶ä»–å¤„ç†ï¼Œä¸éœ€è¦å…¶ shape&lt;/p>
&lt;p>å¯¹äºäºŒç»´åˆ—è¡¨ï¼Œæ–¹æ³•æ¯”è¾ƒå¤šï¼Œå¯¹äºå¤šç»´ï¼Œç›®å‰æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¹¶ä¸”å¿…é¡»çŸ¥é“å…·ä½“ç»´åº¦ï¼Œå†™å¯¹åº”æ•°é‡çš„ for å¾ªç¯å¤„ç†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># from_iterable æ–¹æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> itertools &lt;span style="color:#f92672">import&lt;/span> chain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list &lt;span style="color:#f92672">=&lt;/span> list(chain&lt;span style="color:#f92672">.&lt;/span>from_iterable(grad_output[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>tolist()))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># grad_output[0].tolist() æ˜¯ä¸€ä¸ªäºŒç»´ list&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä½¿ç”¨ for å¾ªç¯éå†ï¼Œå¯¹äº å››ç»´ list&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list &lt;span style="color:#f92672">=&lt;/span> [element &lt;span style="color:#66d9ef">for&lt;/span> batch &lt;span style="color:#f92672">in&lt;/span> grad_output[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>tolist() &lt;span style="color:#66d9ef">for&lt;/span> channel &lt;span style="color:#f92672">in&lt;/span> batch &lt;span style="color:#66d9ef">for&lt;/span> height &lt;span style="color:#f92672">in&lt;/span> channel &lt;span style="color:#66d9ef">for&lt;/span> element &lt;span style="color:#f92672">in&lt;/span> height]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1222-åˆ‡ç‰‡">1.2.2.2 åˆ‡ç‰‡&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>tmp_list &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#e6db74">&amp;#39;CS&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;EE&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;EECS&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å–å‰ä¸¤ä¸ªå…ƒç´ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list[:&lt;span style="color:#ae81ff">2&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä» index = 1 å¼€å§‹ï¼Œå–ä¸¤ä¸ªå…ƒç´ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list[&lt;span style="color:#ae81ff">1&lt;/span>:&lt;span style="color:#ae81ff">3&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å‰ 10 ä¸ªæ•°ï¼Œæ¯ 2 ä¸ªæ•°å–ä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list[:&lt;span style="color:#ae81ff">10&lt;/span>:&lt;span style="color:#ae81ff">2&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ‰€æœ‰æ•°ï¼Œæ¯ 5 ä¸ªå–ä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tmp_list[::&lt;span style="color:#ae81ff">5&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1223-è¿­ä»£">1.2.2.3 è¿­ä»£&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åˆ¤æ–­æ˜¯å¦å¯ä»¥è¿­ä»£&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#f92672">from&lt;/span> collections.abc &lt;span style="color:#f92672">import&lt;/span> Iterable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> isinstance(&lt;span style="color:#e6db74">&amp;#39;abc&amp;#39;&lt;/span>, Iterable) &lt;span style="color:#75715e"># stræ˜¯å¦å¯è¿­ä»£&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> isinstance(&lt;span style="color:#ae81ff">123&lt;/span>, Iterable) &lt;span style="color:#75715e"># æ•´æ•°æ˜¯å¦å¯è¿­ä»£&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¸‹æ ‡å¾ªç¯ï¼Œç”¨ enumerate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> i, value &lt;span style="color:#f92672">in&lt;/span> enumerate([&lt;span style="color:#e6db74">&amp;#39;A&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;B&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;C&amp;#39;&lt;/span>]):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span> print(i, value)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">0&lt;/span> A
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">1&lt;/span> B
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span> C
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># äºŒç»´ list éå†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">for&lt;/span> x, y &lt;span style="color:#f92672">in&lt;/span> [(&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>), (&lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>), (&lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">9&lt;/span>)]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span> print(x, y)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#ae81ff">9&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="1224-åˆ—è¡¨ç”Ÿæˆ">1.2.2.4 åˆ—è¡¨ç”Ÿæˆ&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æœ€åŸºæœ¬çš„ç”¨ range&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> list(range(&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">11&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>, &lt;span style="color:#ae81ff">7&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>, &lt;span style="color:#ae81ff">9&lt;/span>, &lt;span style="color:#ae81ff">10&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç”¨ for å¾ªç¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> [x &lt;span style="color:#f92672">*&lt;/span> x &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> range(&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">11&lt;/span>)]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">9&lt;/span>, &lt;span style="color:#ae81ff">16&lt;/span>, &lt;span style="color:#ae81ff">25&lt;/span>, &lt;span style="color:#ae81ff">36&lt;/span>, &lt;span style="color:#ae81ff">49&lt;/span>, &lt;span style="color:#ae81ff">64&lt;/span>, &lt;span style="color:#ae81ff">81&lt;/span>, &lt;span style="color:#ae81ff">100&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ¯”å¦‚åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> [d &lt;span style="color:#66d9ef">for&lt;/span> d &lt;span style="color:#f92672">in&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>listdir(&lt;span style="color:#e6db74">&amp;#39;.&amp;#39;&lt;/span>)] &lt;span style="color:#75715e"># os.listdirå¯ä»¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#e6db74">&amp;#39;.emacs.d&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;.ssh&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;.Trash&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Adlm&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Applications&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Desktop&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Documents&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Downloads&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Library&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Movies&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Music&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Pictures&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Public&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;VirtualBox VMs&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;Workspace&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;XCode&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="13-tuple">1.3 tuple&lt;/h2>
&lt;h3 id="131-åŸºæœ¬æ€§è´¨">1.3.1 åŸºæœ¬æ€§è´¨&lt;/h3>
&lt;p>&lt;code>m_tuple = ('CS', 'EE', 'EECS')&lt;/code>&lt;/p>
&lt;p>å’Œ list æ¯”è¾ƒç±»ä¼¼ï¼Œä¸è¿‡ tuple ä¸èƒ½ä¿®æ”¹ï¼Œåªè¯»ï¼›ä¸è¿‡çœ‹äº†ä¸€äº›æ‹“å±•ï¼Œè¿™ä¸ªä¸å¯å˜ä¼¼ä¹åªæ˜¯æŒ‡é’ˆçš„æŒ‡å‘ä¸å˜ï¼Œè€ŒæŒ‡é’ˆå¯¹è±¡æœ¬èº«æ˜¯å¦æ”¹å˜å°±ä¸çŸ¥é“äº†ã€‚&lt;/p>
&lt;p>&lt;strong>åªæœ‰ä¸€ä¸ªå…ƒç´ çš„ tuple ä¸ºäº†æ¶ˆé™¤æ­§ä¹‰&lt;/strong>ï¼Œä¼šè¡¨ç¤ºä¸º &lt;code>t = (1, )&lt;/code>ï¼›è¿™ä¸€ç‚¹å’Œæˆ‘æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä¸€å¼€å§‹è¿˜å›°æƒ‘ä¸ºä»€ä¹ˆæœ‰ä¸ª &lt;code>,&lt;/code>&lt;/p>
&lt;h3 id="132-æ“ä½œ">1.3.2 æ“ä½œ&lt;/h3>
&lt;p>&lt;strong>åˆ‡ç‰‡&lt;/strong>ï¼Œå’Œ list ç±»ä¼¼&lt;/p>
&lt;h3 id="14-è½¬-list">1.4 è½¬ list&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¯¹äº dictï¼Œç›´æ¥æ”¾å…¥ list function å°±æ˜¯å°†å…¶ key è½¬ä¸º list&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x &lt;span style="color:#f92672">=&lt;/span> list({&lt;span style="color:#e6db74">&amp;#39;apple&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;123&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;banana&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;1233&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;cherry&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;1231243&amp;#39;&lt;/span>})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y &lt;span style="color:#f92672">=&lt;/span> list({&lt;span style="color:#e6db74">&amp;#39;apple&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;123&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;banana&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;1233&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;cherry&amp;#39;&lt;/span>:&lt;span style="color:#e6db74">&amp;#39;1231243&amp;#39;&lt;/span>}&lt;span style="color:#f92672">.&lt;/span>keys())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(y)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># output&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#e6db74">&amp;#39;apple&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;banana&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;cherry&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#e6db74">&amp;#39;apple&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;banana&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;cherry&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="14-dict">1.4 dict&lt;/h2>
&lt;h3 id="141-åˆ¤æ–­-keyvalue-æ˜¯å¦å­˜åœ¨">1.4.1 åˆ¤æ–­ key/value æ˜¯å¦å­˜åœ¨&lt;/h3>
&lt;p>&lt;strong>key&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>dict_tmp&lt;span style="color:#f92672">.&lt;/span>has_key()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>value&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;CS&amp;#39;&lt;/span> &lt;span style="color:#f92672">in&lt;/span> Major
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¸å­˜åœ¨åˆ™è¿”å› None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Major&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;CS&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¸å­˜åœ¨åˆ™è¿”å› -1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Major&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;CS&amp;#39;&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="142-å­˜æ”¾">1.4.2 å­˜æ”¾&lt;/h3>
&lt;p>dict å†…éƒ¨å­˜æ”¾çš„é¡ºåºå’Œ key æ”¾å…¥çš„é¡ºåºæ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚&lt;/p>
&lt;p>key å¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ¯”å¦‚ string, æ•´æ•°å¯ä»¥ä½œä¸º keyï¼Œä½†æ˜¯ list ä¸èƒ½ä½œä¸º keyï¼Œå› ä¸º list å¯å˜&lt;/p>
&lt;h3 id="143-è¿­ä»£">1.4.3 è¿­ä»£&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é»˜è®¤è¿­ä»£ key&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>d &lt;span style="color:#f92672">=&lt;/span> {&lt;span style="color:#e6db74">&amp;#39;a&amp;#39;&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;b&amp;#39;&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;c&amp;#39;&lt;/span>: &lt;span style="color:#ae81ff">3&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> key &lt;span style="color:#f92672">in&lt;/span> d:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¿­ä»£ value&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> value &lt;span style="color:#f92672">in&lt;/span> d&lt;span style="color:#f92672">.&lt;/span>values():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åŒæ—¶è¿­ä»£&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> k, v &lt;span style="color:#f92672">in&lt;/span> d&lt;span style="color:#f92672">.&lt;/span>items():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="15-set">1.5 set&lt;/h2>
&lt;p>çœ‹èµ·æ¥å°±æ˜¯å»é‡çš„æ•°ç»„&lt;/p>
&lt;h2 id="16-array">1.6 array&lt;/h2>
&lt;h3 id="161-ä»€ä¹ˆæ˜¯-array-like">1.6.1 ä»€ä¹ˆæ˜¯ array like&lt;/h3>
&lt;p>&lt;a href="https://stackoverflow.com/questions/40378427/numpy-formal-definition-of-array-like-objects">https://stackoverflow.com/questions/40378427/numpy-formal-definition-of-array-like-objects&lt;/a> å›ç­” in stackoverflow&lt;/p>
&lt;blockquote>
&lt;p>It turns out almost anything is technically an array-like. &amp;ldquo;Array-like&amp;rdquo; is more of a statement of how the input will be interpreted than a restriction on what the input can be; if a parameter is documented as array-like, NumPy will try to interpret it as an array.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸€ä¸ªé™ˆè¿°ï¼Œå¦‚ä½•å»ç†è§£ inputï¼Œè€Œéä¸€ä¸ªé™åˆ¶ã€‚&lt;/p>
&lt;blockquote>
&lt;p>The term &amp;ldquo;array-like&amp;rdquo; is used in NumPy, referring to anything that can be passed as first parameter to &lt;code>numpy.array()&lt;/code> to create an array ().&lt;/p>
&lt;/blockquote>
&lt;p>ç›´æ¥çš„å®šä¹‰ï¼Œå¯ä»¥ä½œä¸º &lt;code>numpy.array()&lt;/code> çš„ç¬¬ä¸€ä¸ªå‚æ•°&lt;/p>
&lt;p>&lt;a href="https://thecleverprogrammer.com/2021/03/19/difference-between-tensors-and-arrays/">https://thecleverprogrammer.com/2021/03/19/difference-between-tensors-and-arrays/&lt;/a>&lt;/p>
&lt;p>The difference between a NumPy array and a tensor is that the tensors are backed by the accelerator memory like GPU and they are immutable, unlike NumPy arrays.&lt;/p>
&lt;p>æ€»çš„æ¥è¯´ï¼Œ&lt;strong>Tensors are like arrays&lt;/strong>, both are data structures that are used to store data that can be indexed individually.&lt;/p>
&lt;p>&lt;strong>ç»¼ä¸Šï¼Œtensor æ˜¯å¦æ˜¯ array-like?&lt;/strong>&lt;/p>
&lt;p>&lt;strong>æ˜¯çš„&lt;/strong>&lt;/p>
&lt;h3 id="162-operation--æ“ä½œ">1.6.2 operation / æ“ä½œ&lt;/h3>
&lt;h4 id="1621-æ’å…¥-append--insert">1.6.2.1 æ’å…¥ append / insert&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>bins &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2.0&lt;/span> &lt;span style="color:#f92672">**&lt;/span> (np&lt;span style="color:#f92672">.&lt;/span>arange(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ’å…¥åˆ°æ•°ç»„æœ«ç«¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ’å…¥åˆ°æ•°ç»„å¼€å¤´ï¼Œæˆ–è€…ä»»æ„ index&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>index &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>element &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bins &lt;span style="color:#f92672">=&lt;/span> np&lt;span style="color:#f92672">.&lt;/span>insert(bins, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="1x-å…¶ä»–ç‰¹æ€§">1.X å…¶ä»–ç‰¹æ€§&lt;/h2>
&lt;h3 id="1x1-generator">1.X.1 generator&lt;/h3>
&lt;p>æš‚æ—¶æ²¡æœ‰ç”¨è¿‡ï¼Œå…ˆæŒ–ä¸ªå‘&lt;/p>
&lt;h1 id="2-æ•°æ®ç±»å‹å˜é‡è¯­æ³•">2. æ•°æ®ç±»å‹ï¼Œå˜é‡ï¼Œè¯­æ³•&lt;/h1>
&lt;h2 id="21-data-type">2.1 data type&lt;/h2>
&lt;p>python æ”¯æŒçš„ data type åº”è¯¥è¶³å¤Ÿæ»¡è¶³æ—¥å¸¸ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>complex åœ¨ cutlass é‡Œé¢ä¹Ÿæœ‰æ”¯æŒï¼Œä¸è¿‡å¹³æ—¶æ²¡æœ‰ä½¿ç”¨è¿‡ã€‚tuple ä½¿ç”¨ä¹Ÿæ¯”è¾ƒå°‘&lt;/p>
&lt;h3 id="211-float">2.1.1 float&lt;/h3>
&lt;p>å¯ä»¥å†™æˆ &lt;code>1.23e9&lt;/code>&lt;/p>
&lt;h3 id="212-string">2.1.2 string&lt;/h3>
&lt;p>python ä¸­ï¼Œç”¨ &lt;code>''&lt;/code> å’Œ &lt;code>&amp;quot;&amp;quot;&lt;/code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/p>
&lt;p>ä» stackoverflow å›ç­”æ¥çœ‹æ˜¯å®Œå…¨ä¸€æ ·çš„&lt;/p>
&lt;h2 id="22-ç±»å‹è½¬æ¢">2.2 ç±»å‹è½¬æ¢&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>x &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">25&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>str_ &lt;span style="color:#f92672">=&lt;/span> str(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>int_ &lt;span style="color:#f92672">=&lt;/span> int(str_)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="23-ç¼–ç ">2.3 ç¼–ç &lt;/h2>
&lt;blockquote>
&lt;p>UTF-8 ç¼–ç ï¼ŒæŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>çœ‹æ¥è¿™é‡Œä¹Ÿæœ‰å“ˆå¤«æ›¼çš„æ€æƒ³&lt;/p>
&lt;h2 id="24-global-variables">2.4 Global Variables&lt;/h2>
&lt;p>åœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºå˜é‡æ—¶ï¼Œé»˜è®¤æ˜¯å±€éƒ¨çš„&lt;/p>
&lt;p>åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰å˜é‡æ—¶ï¼Œé»˜è®¤æ˜¯å…¨å±€çš„ï¼Œæ­¤æ—¶æ— éœ€ä½¿ç”¨ global å…³é”®å­—ï¼›åœ¨å‡½æ•°å¤–ä½¿ç”¨ global æ²¡æœ‰ä½œç”¨ã€‚&lt;/p>
&lt;p>åœ¨å‡½æ•°å†…è¯»å†™å…¨å±€å˜é‡æ—¶ï¼Œéœ€è¦ä½¿ç”¨ global å…³é”®å­—&lt;/p>
&lt;h2 id="25-ä¸‹åˆ’çº¿-_-çš„ä½¿ç”¨">2.5 ä¸‹åˆ’çº¿ _ çš„ä½¿ç”¨&lt;/h2>
&lt;p>3.9 16:21&lt;/p>
&lt;ul>
&lt;li>&lt;code>_var&lt;/code> prefix single ä¸‹åˆ’çº¿. è¡¨ç¤ºå˜é‡ &lt;code>_var&lt;/code> ä»…ä¾›å†…éƒ¨ä½¿ç”¨ã€‚python å¹¶æ²¡æœ‰å¼ºåˆ¶çš„ private å±æ€§ï¼Œè€Œæ˜¯ç”¨è¿™æ ·ä¸€ç§ç¤¾åŒºè§„å®šï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡å¹¶ä¸æ˜¯å…¬å…±æ¥å£ï¼Œä½†æ˜¯å¤–éƒ¨ä»ç„¶å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå˜é‡
&lt;ul>
&lt;li>åŒæ ·ï¼Œå¦‚æœæ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>var_&lt;/code> suffix single ä¸‹åˆ’çº¿. å˜é‡åå­—è¢«å…³é”®å­—å ç”¨ï¼Œç”¨ä¸€ä¸ªä¸‹åˆ’çº¿æ¥è§£å†³å‘½åå†²çªï¼Œæ¯”å¦‚&lt;code>class_&lt;/code>&lt;/li>
&lt;li>&lt;code>__var&lt;/code> prefix double. è¿™ä¸ªæœ‰ç‚¹æŠ½è±¡ï¼Œæ²¡å¤ªç†è§£&lt;/li>
&lt;li>&lt;code>__var__&lt;/code> prefix and suffix double. è¡¨ç¤ºç±»ä¸­çš„ç§æœ‰å˜é‡ï¼Œå¹¶ä¸”ä¸ä¼šè¢«è§£é‡Šå™¨æ‰€ä¿®æ”¹&lt;/li>
&lt;/ul>
&lt;h1 id="3-file-æ“ä½œ">3. File æ“ä½œ&lt;/h1>
&lt;h2 id="31-æ–‡ä»¶è¯»å†™">3.1 æ–‡ä»¶è¯»å†™&lt;/h2>
&lt;p>read, open, write&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>f &lt;span style="color:#f92672">=&lt;/span> open(&lt;span style="color:#e6db74">&amp;#34;demofile.txt&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;r&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(f&lt;span style="color:#f92672">.&lt;/span>read())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>f &lt;span style="color:#f92672">=&lt;/span> open(&lt;span style="color:#e6db74">&amp;#34;demofile2.txt&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># a, append; w, overwrite&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>f&lt;span style="color:#f92672">.&lt;/span>write(&lt;span style="color:#e6db74">&amp;#34;Now the file has more content!&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>f&lt;span style="color:#f92672">.&lt;/span>close()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®é™…ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> i, line &lt;span style="color:#f92672">in&lt;/span> enumerate(open(get_file_path() &lt;span style="color:#f92672">+&lt;/span> file)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> &lt;span style="color:#66d9ef">match&lt;/span> &lt;span style="color:#f92672">in&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>finditer(pattern_cycle, line):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tmp &lt;span style="color:#f92672">=&lt;/span> list(&lt;span style="color:#66d9ef">match&lt;/span>&lt;span style="color:#f92672">.&lt;/span>group(&lt;span style="color:#ae81ff">1&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tmp &lt;span style="color:#f92672">=&lt;/span> float(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(tmp))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> res_data[&lt;span style="color:#e6db74">&amp;#34;cycle&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="32-æ–‡ä»¶ç›®å½•æ“ä½œ">3.2 æ–‡ä»¶ç›®å½•æ“ä½œ&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>torch&lt;span style="color:#f92672">)&lt;/span> zdli@GPU74:/nvme/wmhu$ &lt;span style="color:#75715e"># å·¥ä½œç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/nvme/wmhu/shader_docker/cutlass-gpgpu-sim &lt;span style="color:#75715e"># python æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸€äº›å¸¸ç”¨çš„è·¯å¾„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>path_ &lt;span style="color:#f92672">=&lt;/span> os.getcwd&lt;span style="color:#f92672">()&lt;/span> &lt;span style="color:#75715e"># è·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„, /nvme/wmhu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>path_ &lt;span style="color:#f92672">=&lt;/span> os.path.abspath&lt;span style="color:#f92672">(&lt;/span>__ file __&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#75715e"># è·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„, /nvme/wmhu/shader_docker/cutlass-gpgpu-sim/data_analyze.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>path_ &lt;span style="color:#f92672">=&lt;/span> os.path.dirname&lt;span style="color:#f92672">(&lt;/span>__file__&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#75715e"># è·å¾—å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„, /nvme/wmhu/shader_docker/cutlass-gpgpu-sim&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="4-å‡½æ•°">4. å‡½æ•°&lt;/h1>
&lt;h2 id="41-ç‰¹æ€§">4.1 ç‰¹æ€§&lt;/h2>
&lt;p>&lt;code>def forward(self, x: torch.Tensor) -&amp;gt; torch.Tensor:&lt;/code>ï¼Œç®­å¤´ &lt;code>-&amp;gt;&lt;/code> åé¢è¡¨ç¤ºè¿”å›å€¼&lt;/p>
&lt;p>å°è¯•åœ¨ class å†…éƒ¨è°ƒç”¨æˆå‘˜å‡½æ•°ï¼ŒæŠ¥äº†é”™ã€‚è°ƒç”¨ class å†…éƒ¨æˆå‘˜å‡½æ•°è¦åŠ ä¸Šå‰ç¼€ &lt;code>self.&lt;/code>ï¼Œå¦åˆ™ä¼šè¢«å½“æˆå¤–éƒ¨å‡½æ•°&lt;/p>
&lt;p>&lt;strong>Python ä¸æ”¯æŒå‡½æ•°é‡è½½&lt;/strong>&lt;/p>
&lt;h3 id="411-åˆ«åå’Œå¼•ç”¨">4.1.1 åˆ«åå’Œå¼•ç”¨&lt;/h3>
&lt;p>Python ä¸­å¯ä»¥æŠŠå‡½æ•°åèµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> a &lt;span style="color:#f92672">=&lt;/span> abs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> a(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="412-pass-å ä½ç¬¦">4.1.2 pass å ä½ç¬¦&lt;/h3>
&lt;p>è¿˜æ²¡æƒ³å¥½å‡½æ•°æˆ–è€…æ¡ä»¶è¯­å¥çš„å†…å®¹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ª passï¼Œè®©ä»£ç å¯ä»¥å…ˆè¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">nop&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> agr &lt;span style="color:#f92672">&amp;gt;=&lt;/span> &lt;span style="color:#ae81ff">18&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="413-å‚æ•°æ£€æŸ¥">4.1.3 å‚æ•°æ£€æŸ¥&lt;/h3>
&lt;p>å‚æ•°æ•°é‡ä¸å¯¹æ—¶ï¼ŒPython è§£é‡Šå™¨å¯ä»¥æ£€æŸ¥ï¼›å¦‚æœæ˜¯å‚æ•° type é”™è¯¯ï¼ŒPython è§£é‡Šå™¨å¯èƒ½çœ‹ä¸å‡ºæ¥ã€‚å¯ä»¥ç”¨å‡½æ•° &lt;code>isinstance()&lt;/code> æ¥æ£€æŸ¥ï¼Œè¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹åƒ assert()ï¼Œä¸€ä¸ªå…¸å‹çš„é”™è¯¯å’Œå¼‚å¸¸å¤„ç†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">my_abs&lt;/span>(x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">not&lt;/span> isinstance(x, (int, float)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">raise&lt;/span> &lt;span style="color:#a6e22e">TypeError&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;bad operand type&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> x &lt;span style="color:#f92672">&amp;gt;=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#f92672">-&lt;/span>x
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="42-__init__-and-forward">4.2 &lt;strong>init&lt;/strong> and forward()&lt;/h2>
&lt;p>äº†è§£å‡½æ•°çš„å®šä¹‰ï¼Œä»¥åŠè°ƒç”¨ï¼Œæ¯”å¦‚ &lt;strong>init&lt;/strong>&lt;/p>
&lt;h3 id="421-__init__">4.2.1 &lt;strong>init&lt;/strong>&lt;/h3>
&lt;blockquote>
&lt;p>ä¸ªäººå°†å…¶ç†è§£ä¸º C ä¸­çš„æ„é€ å‡½æ•°&lt;/p>
&lt;/blockquote>
&lt;p>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œpython è§£é‡Šå™¨ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒã€‚&lt;/p>
&lt;h3 id="422-forward">4.2.2 forward()&lt;/h3>
&lt;p>ä½¿ç”¨ pytorch çš„è®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œä¸éœ€è¦è°ƒç”¨ forward å‡½æ•°ï¼Œåªéœ€è¦åœ¨å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ä¸­ï¼ˆ&lt;code>model = ViT(model_name, pretrained=True)&lt;/code>ï¼‰ä¼ å…¥å¯¹åº”çš„å‚æ•°ï¼Œå°±å¯ä»¥è‡ªåŠ¨è°ƒç”¨ forward å‡½æ•°ï¼Œä¸‹é¢å±•ç¤ºä¸€ä¸ªä¾‹å­ã€‚æ¥è‡ª &lt;a href="https://zhuanlan.zhihu.com/p/357021687">https://zhuanlan.zhihu.com/p/357021687&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Module&lt;/span>(nn&lt;span style="color:#f92672">.&lt;/span>Module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> super()&lt;span style="color:#f92672">.&lt;/span>__init__()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ......&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">forward&lt;/span>(self, x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ......&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">......&lt;/span> &lt;span style="color:#75715e"># è¾“å…¥æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> Module()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å‰å‘ä¼ æ’­&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model(data)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è€Œä¸æ˜¯ä½¿ç”¨ä¸‹é¢çš„&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># model.forward(data) &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="422-why">4.2.2 Why?&lt;/h3>
&lt;p>ä¸ºä»€ä¹ˆæœ‰è¿™ç§ç­‰ä»·å…³ç³»ï¼Ÿ&lt;code>model(data)&lt;/code> ç­‰ä»·äº &lt;code>model.forward(data)&lt;/code>ï¼Œå› ä¸ºåœ¨ class ä¸­ä½¿ç”¨äº† &lt;strong>call&lt;/strong> å‡½æ•°ã€‚æ›´æ·±çš„å°±ä¸ç»§ç»­å±•å¼€äº†ã€‚&lt;/p>
&lt;h2 id="43-unittest">4.3 unittest&lt;/h2>
&lt;p>2022-08-01 14:38:19ï¼Œä»Šå¤©æ¥è§¦åˆ°è¿™ç©æ„å„¿ã€‚å› ä¸ºç»„é‡Œé¢è¿™è¾¹åœ¨åšå’Œ ngp ç›¸å…³çš„ä¸œè¥¿ã€‚æœ‰åŒå­¦ç”¨ jax å†™äº†ä¸€ç‰ˆä»£ç ï¼Œtest.py æ–‡ä»¶çœ‹èµ·æ¥æ²¡æœ‰å…¥å£ï¼Œæ‰€æœ‰å‡½æ•°éƒ½åœ¨ class é‡Œé¢ã€‚è°ƒè¯•çš„æ–¹å¼å°±æ˜¯ &lt;code>python -m unittest test.py&lt;/code>ã€‚æ‰€ä»¥ç®—æ˜¯æ¥è§¦åˆ°äº†ä¸€ä¸ªæ–°çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œä»unittest.TestCaseç»§æ‰¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¦‚ä¸‹ï¼Œç»§æ‰¿è‡ª unittest.TestCase&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">TestFoward&lt;/span>(unittest&lt;span style="color:#f92672">.&lt;/span>TestCase):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="44-pytest">4.4 pytest&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pip install pytest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="441-å‘½åè§„åˆ™">4.4.1 å‘½åè§„åˆ™&lt;/h3>
&lt;ul>
&lt;li>æµ‹è¯•æ–‡ä»¶åå¿…é¡»ä»¥â€œtest_â€å¼€å¤´&lt;/li>
&lt;li>æµ‹è¯•ç±»ä»¥Testå¼€å¤´ï¼Œå¹¶ä¸”ä¸èƒ½å¸¦æœ‰ init æ–¹æ³•&lt;/li>
&lt;li>æµ‹è¯•å‡½æ•°å¿…é¡»ä»¥â€œtest_â€å¼€å¤´&lt;/li>
&lt;li>é™¤äº†æœ‰setup/teardownï¼Œè¿˜èƒ½æ›´è‡ªç”±çš„å®šä¹‰fixtureè£…è½½æµ‹è¯•ç”¨ä¾‹&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;h3 id="442-case">4.4.2 case&lt;/h3>
&lt;p>æ¥è‡ª &lt;a href="https://www.jianshu.com/p/75c27fe23b4e">https://www.jianshu.com/p/75c27fe23b4e&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test_class.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">TestClass&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">test_one&lt;/span>(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">assert&lt;/span> &lt;span style="color:#e6db74">&amp;#39;h&amp;#39;&lt;/span> &lt;span style="color:#f92672">in&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">test_two&lt;/span>(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">assert&lt;/span> hasattr(x, &lt;span style="color:#e6db74">&amp;#39;check&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ pytest -v test_
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="45-å‚æ•°">4.5 å‚æ•°&lt;/h2>
&lt;p>å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼š&lt;/p>
&lt;h3 id="451-è¿”å›å¤šä¸ªå‚æ•°">4.5.1 è¿”å›å¤šä¸ªå‚æ•°&lt;/h3>
&lt;p>å…¶å®å°±æ˜¯è¿”å›ä¸€ä¸ª tupleï¼Œä½†æ˜¯åœ¨è¯­æ³•ä¸Šï¼Œæ¥æ”¶æ—¶ä¸éœ€è¦ç”¨æ‹¬å·&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> math
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">move&lt;/span>(x, y, step, angle&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nx &lt;span style="color:#f92672">=&lt;/span> x &lt;span style="color:#f92672">+&lt;/span> step &lt;span style="color:#f92672">*&lt;/span> math&lt;span style="color:#f92672">.&lt;/span>cos(angle)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ny &lt;span style="color:#f92672">=&lt;/span> y &lt;span style="color:#f92672">-&lt;/span> step &lt;span style="color:#f92672">*&lt;/span> math&lt;span style="color:#f92672">.&lt;/span>sin(angle)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> nx, ny
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x, y &lt;span style="color:#f92672">=&lt;/span> move(&lt;span style="color:#ae81ff">100&lt;/span>, &lt;span style="color:#ae81ff">100&lt;/span>, &lt;span style="color:#ae81ff">60&lt;/span>, math&lt;span style="color:#f92672">.&lt;/span>pi &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#ae81ff">6&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="452-é»˜è®¤å‚æ•°">4.5.2 é»˜è®¤å‚æ•°&lt;/h3>
&lt;p>Python åº”è¯¥ä¸åƒ C è¯­è¨€é‚£æ ·æœ‰å‡½æ•°çš„é‡æ„ï¼Œå¯ä»¥ç”¨é»˜è®¤å‚æ•°ï¼›å¿…é€‰å‚æ•°å¿…é¡»å…¨éƒ¨æ”¾åœ¨å‰é¢ï¼Œè€Œå…¨éƒ¨å¯é€‰å‚æ•°/é»˜è®¤å‚æ•°æ”¾åœ¨åé¢&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">power&lt;/span>(x, n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> s &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> n &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> n &lt;span style="color:#f92672">=&lt;/span> n &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> s &lt;span style="color:#f92672">=&lt;/span> s &lt;span style="color:#f92672">*&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> power(&lt;span style="color:#ae81ff">5&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">25&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> power(&lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">25&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="453-å¯å˜å‚æ•°">4.5.3 å¯å˜å‚æ•°&lt;/h3>
&lt;p>å’Œè¿”å›çš„æƒ…å†µç±»ä¼¼ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ª tupleï¼Œä¸‹é¢ç»™å‡ºè¯­æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åŠ ä¸Š * ä»£è¡¨ä¼ å…¥å¯å˜å‚æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">calc&lt;/span>(&lt;span style="color:#f92672">*&lt;/span>numbers):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sum &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> n &lt;span style="color:#f92672">in&lt;/span> numbers:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sum &lt;span style="color:#f92672">=&lt;/span> sum &lt;span style="color:#f92672">+&lt;/span> n &lt;span style="color:#f92672">*&lt;/span> n
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> sum
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nums &lt;span style="color:#f92672">=&lt;/span> [&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¼ å¯å˜å‚æ•°ï¼Œè¿‡äºç¹ç&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>calc(nums[&lt;span style="color:#ae81ff">0&lt;/span>], nums[&lt;span style="color:#ae81ff">1&lt;/span>], nums[&lt;span style="color:#ae81ff">2&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç±»ä¼¼äºè¿”å›å¤šå‚æ•°çš„å†™æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>calc(&lt;span style="color:#f92672">*&lt;/span>nums)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="454-å…³é”®å­—å‚æ•°">4.5.4 å…³é”®å­—å‚æ•°&lt;/h3>
&lt;p>2022-08-11 15:28:10ï¼Œè¿™ä¸€å—å°±æ˜¯åœ¨ç†è®ºä¸Šæ¯”è¾ƒè–„å¼±çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¹‹å‰é˜…è¯» Python ä»£ç å­˜åœ¨ä¸€äº›é˜»ç¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é™¤äº†å¿…é€‰å‚æ•° name, ageï¼Œè¿˜å¯ä»¥ä¼ å…¥ä»»æ„ä¸ªå…³é”®å­—å‚æ•° kw&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>def person&lt;span style="color:#f92672">(&lt;/span>name, age, **kw&lt;span style="color:#f92672">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#e6db74">&amp;#39;name:&amp;#39;&lt;/span>, name, &lt;span style="color:#e6db74">&amp;#39;age:&amp;#39;&lt;/span>, age, &lt;span style="color:#e6db74">&amp;#39;other:&amp;#39;&lt;/span>, kw&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="455-å‘½åå…³é”®å­—å‚æ•°">4.5.5 å‘½åå…³é”®å­—å‚æ•°&lt;/h3>
&lt;p>è¿™ä¸ªæ„Ÿè§‰åœ¨å¾ˆå¤š Python å†…ç½®åº“ä¸­å¸¸ç”¨ï¼Œé™åˆ¶å…³é”®å­—å‚æ•°çš„åå­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># * ä½œä¸ºåˆ†éš”ç¬¦ï¼Œ* ä¹‹åçš„å‚æ•°è¢«è§†ä¸ºå‘½åå…³é”®å­—å‚æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">person&lt;/span>(name, age, &lt;span style="color:#f92672">*&lt;/span>, city, job):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(name, age, city, job)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¹Ÿå¯ä»¥ç”±ä¸€ä¸ªå¯å˜å‚æ•°æ¥åˆ†éš”&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">person&lt;/span>(name, age, &lt;span style="color:#f92672">*&lt;/span>args, city, job):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(name, age, args, city, job)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> person(&lt;span style="color:#e6db74">&amp;#39;Jack&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">24&lt;/span>, city&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;Beijing&amp;#39;&lt;/span>, job&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;Engineer&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Jack &lt;span style="color:#ae81ff">24&lt;/span> Beijing Engineer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºä»»æ„å‡½æ•°ï¼Œéƒ½å¯ä»¥é€šè¿‡ç±»ä¼¼func(*args, **kw)çš„å½¢å¼è°ƒç”¨å®ƒï¼Œæ— è®ºå®ƒçš„å‚æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚&lt;/p>
&lt;h2 id="45-é«˜é˜¶å‡½æ•°">4.5 é«˜é˜¶å‡½æ•°&lt;/h2>
&lt;p>2022-08-11 16:02:01ï¼Œä¹‹å‰ç–‘æƒ‘çš„ä¸€ä¸ªåœ°æ–¹ï¼Œå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚è¿™ä¸ªå°±æ˜¯é«˜é˜¶å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é«˜é˜¶å‡½æ•°çš„ä¾‹å­&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">add&lt;/span>(x, y, f):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> f(x) &lt;span style="color:#f92672">+&lt;/span> f(y)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="451-map-reduce">4.5.1 map, reduce&lt;/h3>
&lt;p>&lt;code>map()&lt;/code> çš„å‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯å¯è¿­ä»£åºåˆ—ï¼Œ&lt;code>map()&lt;/code> ä¼šæŠŠä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åæŠŠç»“æœè¿”å›åˆ°åºåˆ—ä¸­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">f&lt;/span>(x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span> &lt;span style="color:#66d9ef">return&lt;/span> x &lt;span style="color:#f92672">*&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> r &lt;span style="color:#f92672">=&lt;/span> map(f, [&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>, &lt;span style="color:#ae81ff">7&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>, &lt;span style="color:#ae81ff">9&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> list(r)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">9&lt;/span>, &lt;span style="color:#ae81ff">16&lt;/span>, &lt;span style="color:#ae81ff">25&lt;/span>, &lt;span style="color:#ae81ff">36&lt;/span>, &lt;span style="color:#ae81ff">49&lt;/span>, &lt;span style="color:#ae81ff">64&lt;/span>, &lt;span style="color:#ae81ff">81&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>reduce()&lt;/code> ä¹Ÿå°±æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»–ä¼šæŠŠå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªåºåˆ—ä¸Šï¼Œå¹¶æŠŠç»“æœå’Œåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯è®¡è®¡ç®—&lt;/p>
&lt;p>&lt;code>reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)&lt;/code>&lt;/p>
&lt;h3 id="452-lambda">4.5.2 lambda&lt;/h3>
&lt;p>åŒ¿åå‡½æ•°ï¼Œç®€åŒ–ä»£ç çš„ä¸€ç§æ–¹å¼&lt;/p>
&lt;h1 id="5-class">5. Class&lt;/h1>
&lt;h2 id="51-æ„é€ å‡½æ•°">5.1 æ„é€ å‡½æ•°&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Student&lt;/span>(object):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self, name, score):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>name &lt;span style="color:#f92672">=&lt;/span> name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>score &lt;span style="color:#f92672">=&lt;/span> score
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># å¦‚æœè¦å®šä¹‰ä¸º ç§æœ‰æˆå‘˜ï¼ŒåŠ ä¸¤ä¸ªä¸‹åˆ’çº¿&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>__name &lt;span style="color:#f92672">=&lt;/span> name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>__score &lt;span style="color:#f92672">=&lt;/span> score
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> bart &lt;span style="color:#f92672">=&lt;/span> Student(&lt;span style="color:#e6db74">&amp;#39;Bart Simpson&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">59&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> bart&lt;span style="color:#f92672">.&lt;/span>name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;Bart Simpson&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> bart&lt;span style="color:#f92672">.&lt;/span>score
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">59&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="52-ç»§æ‰¿">5.2 ç»§æ‰¿&lt;/h2>
&lt;p>ç»§æ‰¿çš„è¯­æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Animal&lt;/span>(object):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">run&lt;/span>(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;Animal is running...&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŠŠè¿™ä¸ª object æ¢æˆéœ€è¦ç»§æ‰¿çš„ class å³å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Dog&lt;/span>(Animal):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Cat&lt;/span>(Animal):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="6-module--æ¨¡å—">6. module / æ¨¡å—&lt;/h1>
&lt;h2 id="61-è·å–æ¨¡å—ä¸­çš„å…ƒç´ ">6.1 è·å–æ¨¡å—ä¸­çš„å…ƒç´ &lt;/h2>
&lt;p>å®šä¹‰äº†ä¸€ä¸ªæ¨¡å— &lt;code>coda_int.py&lt;/code> ç”¨æ¥è£…éœ€è¦ç»˜å›¾çš„æ‰€æœ‰ listï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªè¾“å…¥åå­—è¿‡äºç¹çï¼Œå°è¯•è·å–æ¨¡å—çš„ä¸­å¯¹è±¡æ¥è‡ªåŠ¨éå†ã€‚&lt;/p>
&lt;h3 id="611-éå†æ¨¡å—">6.1.1 éå†æ¨¡å—&lt;/h3>
&lt;p>2022-09-14 11:13:48 æå®šã€‚ç”¨ &lt;code>if not key.startswith('__')&lt;/code> æ¥è¿‡æ»¤æ‰ä¸€äº›è‡ªå¸¦çš„æ–¹æ³•ï¼Œå‰©ä¸‹çš„å°±æ˜¯ &lt;code>cola_int&lt;/code> è¿™ä¸ª module ä¸­çš„ listã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> key, value &lt;span style="color:#f92672">in&lt;/span> cola_int&lt;span style="color:#f92672">.&lt;/span>__dict__&lt;span style="color:#f92672">.&lt;/span>items():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">not&lt;/span> key&lt;span style="color:#f92672">.&lt;/span>startswith(&lt;span style="color:#e6db74">&amp;#39;__&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(value[&lt;span style="color:#e6db74">&amp;#39;max&amp;#39;&lt;/span>])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="7-os">7. os&lt;/h1>
&lt;h4 id="æŒ‡å®š-gpu-è¿è¡Œ">æŒ‡å®š GPU è¿è¡Œ&lt;/h4>
&lt;p>å‘½ä»¤è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>CUDA_VISIBLE_DEVICES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> python &lt;span style="color:#f92672">-&lt;/span>u &lt;span style="color:#f92672">-&lt;/span>m torch&lt;span style="color:#f92672">.&lt;/span>distributed&lt;span style="color:#f92672">.&lt;/span>launch &lt;span style="color:#f92672">--&lt;/span>nproc_per_node&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">--&lt;/span>master_port &lt;span style="color:#ae81ff">46666&lt;/span> main&lt;span style="color:#f92672">.&lt;/span>py &lt;span style="color:#f92672">--&lt;/span>dataset&lt;span style="color:#f92672">=&lt;/span>imagenet &lt;span style="color:#f92672">--&lt;/span>model&lt;span style="color:#f92672">=&lt;/span>inception_v3 &lt;span style="color:#f92672">--&lt;/span>epoch&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#f92672">--&lt;/span>mode&lt;span style="color:#f92672">=&lt;/span>int &lt;span style="color:#f92672">--&lt;/span>wbit&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span> &lt;span style="color:#f92672">--&lt;/span>abit&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span> &lt;span style="color:#f92672">--&lt;/span>batch_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">160&lt;/span> &lt;span style="color:#f92672">--&lt;/span>lr&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">5e-05&lt;/span> &lt;span style="color:#f92672">--&lt;/span>train &lt;span style="color:#f92672">--&lt;/span>dataset_path&lt;span style="color:#f92672">=/&lt;/span>home&lt;span style="color:#f92672">/&lt;/span>cguo&lt;span style="color:#f92672">/&lt;/span>imagenet&lt;span style="color:#f92672">-&lt;/span>raw&lt;span style="color:#f92672">-&lt;/span>data&lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#f92672">./&lt;/span>log&lt;span style="color:#f92672">/&lt;/span>inception_v3_Int&lt;span style="color:#f92672">.&lt;/span>log &lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#f92672">&amp;gt;&amp;amp;&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>python æ–‡ä»¶&lt;/p>
&lt;pre tabindex="0">&lt;code>import os
os.environ[&amp;#34;CUDA_VISIBLE_DEVICES&amp;#34;] = &amp;#34;2&amp;#34;
&lt;/code>&lt;/pre>&lt;h1 id="debug">Debug&lt;/h1>
&lt;blockquote>
&lt;p>ç”¨Pythonå¼€å‘ç¨‹åºï¼Œå®Œå…¨å¯ä»¥ä¸€è¾¹åœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œå†™ä»£ç ï¼Œä¸€è¾¹å¼€ä¸€ä¸ªäº¤äº’å¼å‘½ä»¤çª—å£ï¼Œåœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠéƒ¨åˆ†ä»£ç ç²˜åˆ°å‘½ä»¤è¡Œå»éªŒè¯ï¼Œäº‹åŠåŠŸå€ï¼å‰ææ˜¯å¾—æœ‰ä¸ª27&amp;rsquo;çš„è¶…å¤§æ˜¾ç¤ºå™¨ï¼&lt;/p>
&lt;/blockquote>
&lt;p>è¿™å€’æ˜¯è¿™ç±»è¯­è¨€çš„ä¸€ä¸ªdebug æ–¹æ³•&lt;/p>
&lt;h1 id="bug">BUG&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;dict_values&amp;#39;&lt;/span> object &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#f92672">not&lt;/span> subscriptable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tot_stat[model_name &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#34;_&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> mode] &lt;span style="color:#f92672">=&lt;/span> sum_stat&lt;span style="color:#f92672">.&lt;/span>values()[len_ &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>:]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ sum_stat.values() è¿”å›çš„æ˜¯ dict_keys å¯¹è±¡è€Œä¸æ˜¯ listï¼Œä¸æ”¯æŒ index ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>tot_stat[model_name &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#34;_&amp;#34;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> mode] &lt;span style="color:#f92672">=&lt;/span> list(sum_stat&lt;span style="color:#f92672">.&lt;/span>values())[len_ &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>:]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017024645952992">https://www.liaoxuefeng.com/wiki/1016959663602400/1017024645952992&lt;/a>&lt;/p></description></item><item><title>Tips to Become a Better (Computer Science) Ph.D. Student (By Ziyang Xu)</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_tips-to-become-a-better-computer-science-ph.d.-student/</link><pubDate>Sun, 28 Aug 2022 00:04:17 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_tips-to-become-a-better-computer-science-ph.d.-student/</guid><description>&lt;blockquote>
&lt;p>&lt;a href="https://www.cs.princeton.edu/~ziyangx/graduate-advice/">https://www.cs.princeton.edu/~ziyangx/graduate-advice/&lt;/a>
&lt;strong>ä½œè€…ä¿¡æ¯&lt;/strong>ï¼š è½¬è½½è‡ªåŒ—å¤§æœ¬ç§‘ç”Ÿ Ziyang Xuï¼Œæœ¬ç§‘åœ¨æ¢äº‘é‚£é‡Œå®ä¹ ï¼Œç°åœ¨æ˜¯ princeton 4th year phdï¼Œå¯¼å¸ˆæ˜¯ Greg Chan&lt;/p>
&lt;/blockquote>
&lt;h1 id="1-5-topics">1. 5 Topics&lt;/h1>
&lt;h1 id="11-research--course">1.1 Research &amp;gt; Course&lt;/h1>
&lt;p>Young Ph.D. students tend to spend too much time on courses. However, research outweighs courses.&lt;/p>
&lt;p>&lt;strong>Take courses with a grain of salt&lt;/strong>&lt;/p>
&lt;p>Courses are not as important as they seem to be. The priority of a Ph.D. student is to do research â€“ the earlier you start your research, the better off youâ€™ll be in the long run.&lt;/p>
&lt;p>However, &lt;strong>donâ€™t go to extremes&lt;/strong>! A poor grade can also be a huge problem. You should always be familiar with the requirement of qualification exams or generals and meet all the standards about the courses.&lt;/p>
&lt;p>&lt;strong>Remember the main ideas of courses&lt;/strong>&lt;/p>
&lt;p>Trapping ourselves in trivial details of a course is easy. However, most of the specifics are not important to our research even if the topic is related to our area.&lt;/p>
&lt;p>A good approach is to use what youâ€™ve learned from one course and apply it to a different field (e.g., taking an analysis tool from a compiler course and applying it in computer networks).&lt;/p>
&lt;blockquote>
&lt;p>ä½å¹´çº§çš„ phd å®¹æ˜“è¿·å¤±åœ¨è¯¾ç¨‹ä¸­ï¼Œä½†æ˜¯è¿™ä¹Ÿå®Œå…¨å¯ä»¥ç†è§£ã€‚æˆ‘è‡ªå·±ç ”ä¸€çš„æ—¶å€™ç”±äºä¸é€‚åº”èŠ‚å¥ï¼Œæ„Ÿè§‰å‡ ä¹æ‰€æœ‰æ—¶é—´éƒ½æ˜¯èŠ±åœ¨è¯¾ç¨‹ä¸Šçš„ã€‚ç§‘ç ”æ¯”è¯¾ç¨‹é‡è¦ï¼Œæˆ‘ç›¸ä¿¡å¤§å¤šæ•°äººéƒ½çŸ¥é“ï¼Œåªæ˜¯å»è°ƒæ•´ï¼Œå»é€‚åº”è¿˜éœ€è¦èŠ±è´¹ä¸€ç‚¹æ—¶é—´ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="12-be-professional">1.2 Be professional&lt;/h2>
&lt;p>Treat your Ph.D. as a job. You get paid (albeit not much) for being a Ph.D. candidate, so make your work worth the money. This professional mindset should also be apparent to your advisor. Some advisors take on a more hands-off approach, for instance letting you work from home, but this is no reason for slacking; you should be responsible for your research schedule, such as reminding your advisor of plans from previous group meetings. Your status is not that of a student but rather that of a peer in the research community.&lt;/p>
&lt;blockquote>
&lt;p>ä¸ªäººç†è§£ä¸¾å‡ ä¸ªå…·ä½“ä¸€ç‚¹çš„ä¾‹å­å§ï¼Œæ¯”å¦‚ meeting ä¹‹ç±»çš„åšå¥½ PPTï¼Œæœ‰ä»€ä¹ˆäº‹æƒ…å¿«é€Ÿå›å¤å’Œç¡®è®¤ï¼Œä¸è¦çœ‹åˆ°äº†ä¹‹åæƒ³ç€åšå®Œäº†å†å›å¤ï¼›åšä¸å‡ºæ¥çš„ä¸œè¥¿ä¹Ÿè¦åŠæ—¶åé¦ˆï¼›æœ‰æ—¶é—´è§‚å¿µ&lt;/p>
&lt;/blockquote>
&lt;h2 id="13-read-a-lot-and-read-broadly">1.3 Read a lot and read broadly&lt;/h2>
&lt;p>Though it can be very daunting starting out, reading papers is an essential part of the Ph.D. life. Previously, you may have read papers when it was necessary for a class or a project. However, you should put reading papers in your daily routine. Doing so allows you to draw inspiration from a sea of knowledge and prevents yourself from reinventing the wheel. Besides, itâ€™s a great way to be productive on a slow day.&lt;/p>
&lt;p>&lt;strong>Make a plan to read&lt;/strong>&lt;/p>
&lt;p>When scheduling your day, assign one period just for reading papers. You can read one paper in depth or compare several papers; regardless of your choice, allotting time to this task is the key.&lt;/p>
&lt;p>&lt;strong>Read broadly&lt;/strong>&lt;/p>
&lt;p>Reading papers from different subfields of computer science is a great way to learn the jargon, the method, and the mindset of researchers in each field. This can be the first step towards discovering opportunities for collaboration.&lt;/p>
&lt;blockquote>
&lt;p>å¾ˆæƒ­æ„§è¿˜æ²¡æœ‰å…»æˆæ¯å¤©å›ºå®šé˜…è¯»çš„ä¹ æƒ¯ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªå¿…é¡»åœ¨å…¥å­¦å‰åšå¥½ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="14-fail-fast">1.4 Fail fast&lt;/h2>
&lt;p>It is not uncommon for a Ph.D. student to spend several years building a system that turns out to be fundamentally flawed or not as applicable as expected. Donâ€™t worry! There is nothing wrong with failing, and perhaps we should even expect failure to be part of the journey. But we should aim to fail early in order to have time to work on another project (and graduate!).&lt;/p>
&lt;p>&lt;strong>Perform a limit study&lt;/strong>&lt;/p>
&lt;p>Perform a quick limit study before sticking with a project. A limit study includes in-depth analyses of implicit assumptions we make when coming up with an idea, a related works search, and the potential of the work if everything goes well. A great limit study can itself be a publishable paper. An example can be found &lt;a href="https://homes.cs.washington.edu/~luisceze/publications/fortuna-iiswc2010.pdf">&lt;strong>here&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>&lt;strong>Hacky implementation can be useful&lt;/strong>&lt;/p>
&lt;p>Being a researcher, your work is to develop proof-of-concepts. Nevertheless, you need to demonstrate that your concept is sound for the simplest of cases before continuing to the full-blown system. Hack in the minimum set to show that your idea is possible while resisting the temptation to build a robust infrastructure â€“ if your idea fails, you will know to stop earlier.&lt;/p>
&lt;h2 id="15-impact-humankind">1.5 Impact humankind&lt;/h2>
&lt;p>Impacting humankind may sound too ambitious, but it should be the ultimate reason why we embark on this journey.&lt;/p>
&lt;p>&lt;strong>Choose an impactful research topic&lt;/strong>&lt;/p>
&lt;p>In terms of how our Ph.D. research could impact human knowledge, I would like to refer to &lt;a href="http://matt.might.net/articles/phd-school-in-pictures/">&lt;strong>The Illustrated Guide to a Ph.D.&lt;/strong>&lt;/a> by Matt Might. All we will do in five years is pushing the boundary of human knowledge by a minute margin. Choose a topic that you are able to contribute to, feel passionate about, and can explain the importance of to a layman in a 3-min talk.&lt;/p>
&lt;p>Check out why &lt;a href="http://matt.might.net/">&lt;strong>Matt Might&lt;/strong>&lt;/a> changed his research focus from programming languages to precise medicine.&lt;/p>
&lt;p>&lt;strong>How can our research actually impact people from other fields?&lt;/strong>&lt;/p>
&lt;p>&lt;a href="https://liberty.princeton.edu/Publications/sc11_survey.pdf">&lt;strong>A survey paper&lt;/strong>&lt;/a> by the Liberty Research Group sheds light on how the improvement of programming tools impacts (&lt;del>computational scientists&lt;/del>) all scientists. Thinking about how your research affects people from other fields can help you define the scope of your contribution.&lt;/p>
&lt;blockquote>
&lt;p>åšæœ‰å½±å“åŠ›çš„è¯¾é¢˜&lt;/p>
&lt;/blockquote>
&lt;h1 id="2-5-tips">2. 5 Tips&lt;/h1>
&lt;h2 id="21-dont-give-up-on-your-research-topic-easily">2.1 Donâ€™t give up on your research topic easily&lt;/h2>
&lt;p>At some point, we will get bored with our research topic and find something else interesting. Think twice before switching topics. You must differentiate between your project heading nowhere and you getting tired of being stuck.&lt;/p>
&lt;blockquote>
&lt;p>è¿™æ˜¯æ˜¾ç„¶çš„ï¼Œä¸è¿‡å¦‚ä½•é€‰è¯¾é¢˜ä¹Ÿè¦æ…é‡ã€‚ç›®å‰è‡ªå·±è¿˜æš‚æ—¶æ²¡æœ‰å»è‡ªä¸»é€‰æ‹©ä¸€ä¸ªè¯¾é¢˜ï¼Œä½†æ˜¯æ¯«æ— ç–‘é—®ï¼Œå½“ä½ çœŸæ­£å¼€å§‹åšè¿™ä¸ªäº‹çš„æ—¶å€™ï¼Œå¯èƒ½æ˜¯éœ€è¦æŠ•å…¥æ—¶é—´æœ€å¤šçš„æ—¶å€™ã€‚è¿™æå¤§å¯èƒ½å†³å®šäº†ä¹‹å6-9ä¸ªæœˆçš„åŠªåŠ›æ˜¯å¦æœ‰æ•ˆã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="22-aim-for-top-tier-conferences">2.2 Aim for top-tier conferences&lt;/h2>
&lt;p>You should focus on publishing at only top-tier conferences. Donâ€™t consider second-tier venues unless the work has been rejected several times by top-tier conferences. This can prevent you from doing incremental work to make your publication list look better.&lt;/p>
&lt;blockquote>
&lt;p>å½“ä½ åšå¥½å‡†å¤‡ï¼Œå¹¶ä¸”æœ‰åˆé€‚çš„è€å¸ˆæŒ‡å¯¼çš„æ—¶å€™ï¼Œç¡®å®å¯ä»¥æŠŠè¿™ä¸ªå½“åšç ”ç©¶çš„åŠ¨æœºï¼Œåªç„å‡†é¡¶çº§ä¼šè®®ï¼ŒåŠ æ²¹ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="23-use-existing-resources-in-your-group">2.3 Use existing resources in your group&lt;/h2>
&lt;p>For many fields in computer science, a mature infrastructure requires several years of development by multiple graduate students. Think about how to make use of the infrastructure and resources in the group to boost your research progress.&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªå…¶å®å°±å¾ˆå¥½ç†è§£ï¼Œç»„é‡Œé¢åšç¡¬ä»¶å¾ˆå¼ºçš„å­¦é•¿ï¼Œä»¥åŠå‘è¿‡é¡¶ä¼šçš„å­¦é•¿ï¼Œå„ä¸ªæ–¹å‘çš„ï¼Œéƒ½æ˜¯éå¸¸å®è´µèµ„æºã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="24-you-are-powerful">2.4 You are powerful&lt;/h2>
&lt;p>Even though we are just junior graduate students, we can have a massive impact on ourselves, our group, and even our department. For example, if there is no reading group for your field in your department, start one!&lt;/p>
&lt;blockquote>
&lt;p>å¿ƒæ€è°ƒæ•´å¥½&lt;/p>
&lt;/blockquote>
&lt;h2 id="25-focus-on-publishing">2.5 Focus on publishing&lt;/h2>
&lt;p>Needless to say, publications are essential since those are what people look at once we graduate.&lt;/p>
&lt;blockquote>
&lt;p>pub æ˜¯ä¸€å phd å”¯ä¸€è¦åšçš„äº‹æƒ…&lt;/p>
&lt;/blockquote>
&lt;h1 id="3-other-amazing-blogs-out-there">3. Other amazing blogs out there:&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="http://www.pgbovine.net/PhD-memoir.htm">The Ph.D. Grind&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.ifs.tuwien.ac.at/~silvia/research-tips/">Tips: How to Do Research&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.cs.unc.edu/~azuma/hitch4.html">So long, and thanks for the Ph.D.!&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.math.waikato.ac.nz/~seano/grad-school-advice.html">Graduate School Survival Guide&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.sigarch.org/tips-for-a-new-computer-architecture-phd-student/">Tips for a New Computer Architecture PhD Student&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Tips for a New Computer Architecture PhD Student (By Swapnil Haria)</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_tips-for-a-new-computer-architecture-phd-student/</link><pubDate>Sat, 27 Aug 2022 23:57:17 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_tips-for-a-new-computer-architecture-phd-student/</guid><description>&lt;p>åŸæ–‡ç½‘å€ï¼šhttps://www.sigarch.org/tips-for-a-new-computer-architecture-phd-student/&lt;/p>
&lt;p>ä½œè€…åœ¨ 2019 å¹´æ˜¯ UWM 5 å¹´çº§ phdï¼Œå¯¼å¸ˆæ˜¯ Mark Hillï¼Œæ¯•ä¸šåå»äº† Google åšä¸€åè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆã€‚&lt;/p>
&lt;p>åŸæ–‡&lt;/p>
&lt;p>I have been fortunate enough to have many helpful senior students and two wonderful advisors to learn from throughout my PhD. Now as a senior PhD student myself, I have identified some lessons that proved most valuable as well as common mistakes made by younger graduate students. While these may be common knowledge, I am documenting these tips here to pass on some of our collectively learned lessons to future graduate students.&lt;/p>
&lt;p>&lt;strong>1. Learn to read a paper efficiently.&lt;/strong>
Fifty years of architecture research has produced a venerable but sizeable collection of research literature, growing by almost 200+ papers a year just from the top four conferences. To make good progress as we wade through the ocean of related work, it is important to read papers efficiently. &lt;a href="http://ccr.sigcomm.org/online/files/p83-keshavA.pdf">Here&lt;/a> is a useful three-pass technique for reading papers efficiently. For me, reading a paper involves finding an answer to these questions (inspired by &lt;a href="http://pages.cs.wisc.edu/~markhill/grant-tips.html">grant writing tips&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>What is the problem that the paper is trying to solve?&lt;/li>
&lt;li>Why is the problem relevant?&lt;/li>
&lt;li>What is the insight that drives the solution proposed by the paper?&lt;/li>
&lt;li>What are the trade-offs of the proposed solution?&lt;/li>
&lt;li>How have the authors evaluated the solution?&lt;/li>
&lt;li>What is one good trait in the paper (problem, solution, evaluation, presentation)?&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ç”šè‡³å¯ä»¥æŠŠè¿™äº›é—®é¢˜è´´åœ¨å¢™è¾¹ï¼Œè¯»è®ºæ–‡çš„æ—¶å€™æ‰èƒ½åå¤åœ°å»æ€è€ƒé—®é¢˜çš„ç­”æ¡ˆï¼Œæå‡æ•ˆç‡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>2. Know when to stop reading papers.&lt;/strong>
Whenever one begins a new project, it is easy to fall into the trap of endlessly reading paper after paper of related work. While surveying related literature is essential, it tends to yield diminishing returns after a certain point. it is equally important to get oneâ€™s feet wet and actually start working on a project. There will be gaps in oneâ€™s knowledge but any critical gaps can be filled when that information is actually needed. After all, a graduate student is expected to be an information producer and not just a consumer.&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªå…¶å®å¾ˆéš¾ã€‚å¯¹æˆ‘è‡ªå·±æ¥è¯´ï¼Œè¯»äº†ä¸€æ®µæ—¶é—´æˆ‘å°±ä¼šæƒ³å»åšä¸€äº›å®éªŒï¼Œä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸€äº›è°ƒå‰‚ï¼Œä¸€ç§åšåŒä¸€ä»¶äº‹æƒ…æ€»ä¼šè§‰å¾—ç–²åŠ³ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>3. Join or start a reading group.&lt;/strong>
One way of being social is to participate in a reading group, which is a group of students that meet regularly to discuss an interesting paper (old or new) related to a particular area (e.g., architecture). In each meeting, one of the members is responsible for leading the discussion while the others are expected to have read the paper so as to contribute to the discussion. Through reading groups, one is forced to read papers outside of oneâ€™s particular niche. Ph.D. graduates often end up working in an area outside of the focus of their thesis. Thus, being exposed to a wide variety of topics is extremely useful. Group discussions also help bring out multiple perspectives into the same paper.&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å»ºè®®ï¼Œä¸è¿‡æ¨åŠ¨è¿™ä»¶äº‹æƒ…é€šå¸¸éœ€è¦ä¸€äº›æœ‰å½±å“åŠ›çš„ hostï¼Œæˆ–è€…æ˜¯å¯¼å¸ˆç»„ç»‡çš„ï¼Œä¸çŸ¥é“ç¾å›½æ˜¯å¦ä¼šæœ‰æ¯”è¾ƒå¤šçš„è‡ªå‘ç»„ç»‡çš„ reading group&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>4. Use appropriate evaluation methodologies.&lt;/strong>
There is no one size fits all when it comes to &lt;a href="https://www.morganclaypool.com/doi/abs/10.2200/S00273ED1V01Y201006CAC010">evaluation methodologies&lt;/a>. Always select an appropriate methodology by taking into account development time, simulation speed and accuracy of results. There are three broad types of evaluation methodologies. Analytical modelling involves building mathematical models of the area of interest. At early stages of a project, it may be more useful to build simple mathematical models to get a broad sense of the efficacy of a research idea. Popular analytical models include the Roofline Model, Littleâ€™s law, Bottleneck analysis and others. Trace-based simulation involves using simulators that read in instruction or memory accesses sequences (traces) to provide reasonable estimates of runtime. Finally, execution-based simulators model hardware behavior at a cycle granularity. While such simulators offer the most accurate results, they also require the most development time as well as simulation time. As such, they may be overkill for simpler experiments. Hence, it is good to be familiar with different evaluation methodologies and use the right one at the right time.&lt;/p>
&lt;blockquote>
&lt;p>paper çœ‹å¤šäº†ä¹‹åï¼ŒåŸºæœ¬èƒ½çŸ¥é“ä¸€äº›å¸¸ç”¨çš„åˆ†ææ–¹æ³•&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>5. Work on real systems.&lt;/strong>
Although simulators are becoming more sophisticated, there is no substitute for working on real systems. This involves prototyping ideas in the linux kernel, modifying device drivers, building &lt;a href="https://rise.cs.berkeley.edu/projects/firesim/">FPGA-based systems&lt;/a> or &lt;a href="https://mshahrad.github.io/openpiton-asplos16.html">taping out chips&lt;/a>. Looking at real systems gives us an idea of the complexity and robustness of industrial-strength solutions. This also forces us to confront the practical limitations of our ideas. The rise of open-source hardware along with existing open-source software has made it easy to work on real-world &lt;a href="https://www.linux.org/">operating systems&lt;/a>, &lt;a href="https://llvm.org/">compilers&lt;/a>, &lt;a href="https://riscv.org/">CPUs&lt;/a> and &lt;a href="http://miaowgpu.org/">GPUs&lt;/a>.&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸€ç‚¹æ˜¯æˆ‘éå¸¸èµåŒçš„ï¼Œsimulation work æ˜¯ä¸€ä»¶éå¸¸å±é™©çš„äº‹æƒ…ï¼Œæœ‰æ¡ä»¶çš„è¯ä¸€å®šè¦è½¬å‘çœŸå®çš„ç³»ç»Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>6. Spend time improving your programming skills.&lt;/strong>
New computer architecture graduates may not already be good software engineers as computer architecture attracts students with backgrounds in hardware as well. However, PhD-level architecture research typically involves writing a lot of code as part of simulators, operating systems or benchmarks. Hence, it is worth spending some time early in the graduate lifecycle to improve oneâ€™s programming skills. Here are some handy resources:
&lt;a href="http://cs-www.cs.yale.edu/homes/aspnes/classes/223/notes.pdf">Data Structures&lt;/a>, &lt;a href="http://bigocheatsheet.com/">Complexity Theory&lt;/a>, &lt;a href="http://pages.cs.wisc.edu/~swapnilh/resources/design-pattern-scard.pdf">Design Patterns&lt;/a>, &lt;a href="http://google.github.io/styleguide/">Code Style&lt;/a>, &lt;a href="http://rogerdudler.github.io/git-guide/">Git/Mercurial&lt;/a>, &lt;a href="http://cslibrary.stanford.edu/102/PointersAndMemory.pdf">Pointers&lt;/a>.&lt;/p>
&lt;blockquote>
&lt;p>ä½“ç³»ç»“æ„çš„å­¦ç”Ÿéœ€è¦åŒæ—¶å…·å¤‡ç¡¬ä»¶å’Œè½¯ä»¶èƒŒæ™¯ï¼Œè‡³å°‘ä»–ä»¬å¿…é¡»ä¼šä½¿ç”¨æ¨¡æ‹Ÿå™¨ï¼Œç†Ÿæ‚‰æ“ä½œç³»ç»Ÿï¼Œå„ç§ benchmark&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>7. Use microbenchmarks wisely.&lt;/strong>
Microbenchmarks are simple and self-contained programs written to achieve a specific outcome. Microbenchmarks are immensely useful for preliminary exploration as well as sanity checking. An example is a program that can deterministically generate ~100K TLB misses on every execution. Our example microbenchmark can validate a TLB simulator by comparing simulator-reported misses with microbenchmark-generated misses. Being simpler and more easily understood than full-fledged benchmarks, they can be used for initial evaluation to get results that demonstrate general trends. However, microbenchmarks should not be relied upon for any meaningful evaluation, particularly they should not be used as a proxy for real applications.&lt;/p>
&lt;blockquote>
&lt;p>ç›®å‰è‡ªå·±ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä½†è¿™ä¸ªç»å¯¹æ˜¯ä½“ç³»ç»“æ„é¢†åŸŸéå¸¸é‡è¦çš„ä¸œè¥¿&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>8. Create talks/posters/paper drafts to get early feedback.&lt;/strong>
Once we start plugging away at implementation work, we sometimes lose track of the big research picture and instead simply generate a lot of experimental results. It is important to analyze these results in the context of the overall project. Then, crafting a talk or poster even with little to no results forces us to present our ideas in actual words and images. Different presentation media make us think about our research differently and thus refine our story. By presenting our posters and talks to other researchers, we get timely feedback that can help set the direction of our project.&lt;/p>
&lt;blockquote>
&lt;p>2022-08-27 09:53:50ï¼Œä»Šå¤©å°±æ˜¯ poster talk çš„ DDLï¼Œåªèƒ½è¯´è‡ªå·±ç¡®å®æ¯”è¾ƒæ‹–å»¶ï¼Œæ­£å¸¸æ¥è¯´å¯èƒ½åº”è¯¥æ‰¾åˆ«äººè®¨è®ºä¸€ä¸‹ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ã€‚ç¡®å®ï¼Œæ²‰æµ¸åœ¨å®éªŒä¸­æ—¶ï¼Œå®¹æ˜“ä¸¢å¤± high level çš„è§†é‡ï¼Œåªèƒ½ä¸æ–­æé†’è‡ªå·±ä¸è¦å¿˜è®°æœ€åˆçš„ motivation å’Œæ•…äº‹çš„æ¡†æ¶&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>9. Care for your mental and physical well-being and maintain a support system.&lt;/strong>
The typical &lt;a href="http://phdcomics.com/comics/archive.php?comicid=125">PhD lifetime&lt;/a> is long years of hard work with a few triumphant occasions such as paper acceptances mixed in. Remember that graduate school is a marathon and not a sprint. Hence, it is important to care for oneâ€™s overall health by getting enough sleep, having a healthy diet and spending time on exercise and hobbies. More importantly, graduate school is the first time many of us struggle academically or feel unproductive which may lead to &lt;a href="https://www.theatlantic.com/education/archive/2018/11/anxiety-depression-mental-health-graduate-school/576769/">mental health issues&lt;/a>. Just remember that you are not alone in facing these issues and it is okay to ask for help. Most schools offer free or subsidized &lt;a href="https://www.uhs.wisc.edu/mental-health/">mental health resources&lt;/a>. Furthermore, try to build and subsequently maintain a strong support structure for yourself by nurturing personal relationships with family and friends. Be social with your peers and almost never say no to going out for lunch, attending practice talks and other such activities.&lt;/p>
&lt;blockquote>
&lt;p>æ¯«æ— ç–‘é—®ï¼Œä¿æŒèº«ä½“å¥åº·å’Œå¿ƒç†å¥åº·éå¸¸é‡è¦&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>Acknowledgements&lt;/strong>
I thank Prof. Mark Hill, Lena Olson and Prof. Jason Lowe-Power for help improving this document. For teaching me these lessons in the first place, I am grateful to Prof. Mark Hill, Prof. Michael Swift, Prof. David Wood, Lena Olson, Jason Lowe-Power, Nilay Vaish, Jayneel Gandhi, Hongil Yoon, Rathijit Sen, Gokul Ravi, Marc Orr, Muhammad Shoaib, Joel Hestness, Prof. Tony Nowatzki, Newsha Ardalani, Vijay Thiruvengadam, Vinay Gangadhar and many others whom I encountered in graduate school.&lt;/p>
&lt;p>&lt;strong>About the author:&lt;/strong> &lt;a href="http://pages.cs.wisc.edu/~swapnilh/">Swapnil Haria&lt;/a> is a 5th-year PhD Candidate at the University of Wisconsin-Madison, advised by Mark Hill and Michael Swift. His research is focused on hardware and software support for persistent memory.&lt;/p>
&lt;p>&lt;strong>Disclaimer:&lt;/strong> &lt;em>These posts are written by individual contributors to share their thoughts on the Computer Architecture Today blog for the benefit of the community. Any views or opinions represented in this blog are per&lt;/em>&lt;/p></description></item><item><title>What My Mentors Taught Me (By Shan Lu)</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_what-my-mentors-taught-me-by-shan-lu/</link><pubDate>Sat, 27 Aug 2022 23:57:17 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_what-my-mentors-taught-me-by-shan-lu/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>è§†é¢‘åœ°å€ï¼šhttps://www.youtube.com/watch?v=lOOBJix9-Dw&amp;amp;t=5s&lt;/p>
&lt;p>è¿™æ˜¯æ¥è‡ªå¢å±±è€å¸ˆçš„ talk&lt;/p>
&lt;p>shan lu è€å¸ˆç›®å‰æ˜¯èŠåŠ å“¥å¤§å­¦çš„æ•™æˆï¼Œè®¡ç®—æœºç³»ç»Ÿé¢†åŸŸçš„å¤§ç‰›ã€‚&lt;/p>
&lt;p>&lt;strong>ä¸€å®šè¦ open to helpï¼Œåƒä¸‡ä¸è¦å®³ç¾ï¼Œåƒä¸‡ä¸è¦å®³æ€•å‘åˆ«äººå¯»æ±‚å¸®åŠ©&lt;/strong>&lt;/p>
&lt;p>å¤§ç‰›ç¬¬ä¸€ç¯‡ paper è¢«æ‹’äº† 5 æ¬¡ï¼Œç¬¬ä¸‰å¹´è¿˜æ²¡æœ‰ä¸€ä½œ paperã€‚&lt;/p>
&lt;p>&lt;strong>Why did you want to be a phd student&lt;/strong>&lt;/p>
&lt;p>ç¬¬ä¸‰å¹´æ¢äº†ä¸€ä¸ª topicï¼ŒæŠ•åˆ°äº† ISCAï¼Œä¹Ÿè¢«æ‹’ç»äº†ã€‚å½“æ—¶è€å¸ˆè§‰å¾—æ˜¯ä»–çš„ phd æœ€ä½è°·çš„æ—¶å€™äº†ã€‚&lt;/p>
&lt;p>ä»–çš„ phd å¯¼å¸ˆä¸€ç›´é¼“åŠ±ç€ä»–ï¼Œåœ¨ä½ä¼°çš„æ—¶å€™ç»™äºˆæŒ‡å¼•ï¼Œåœ¨ä½ä¼°çš„æ—¶å€™ç»™äºˆ supportï¼ŒçœŸçš„æ˜¯ä¸€ä¸ªéå¸¸ nice çš„äº‹æƒ…ã€‚&lt;/p>
&lt;p>ISCA è¢«æ‹’ä¹‹åä¸­äº† ASPLOSï¼Œæœ‰æ—¶å€™çœŸçš„å¾ˆéš¾è¯´ã€‚ä¹‹åå‡ å¹´çš„ research éƒ½éå¸¸é¡ºåˆ©ã€‚YY å‘Šè¯‰å¥¹ä¸€å®šè¦æ³¨æ„è‹±è¯­ã€‚åŒå­¦å†™ä¿¡å»ºè®®å¥¹å¤š read English bookï¼Œå¥¹èŠ±äº†ä¸€å¹´å¤šçœ‹å®Œäº†ä¸¤æœ¬éš¾å•ƒçš„ä¹¦ã€‚é‚£ä¹‹åä»–çœ‹è‹±æ–‡ä¹¦å˜å¾—å¾ˆå¿«å¾ˆå¿«ã€‚æœ‰çš„æ—¶å€™æ˜¯ advice æ¥è‡ªä¸åŒçš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>ç¬¬å››å¹´å¼€å§‹ conference presentation. ä¸€å®šè¦å»æ‰¾åˆ«çš„è€å¸ˆï¼Œè¦æ•¢äºå»æ‰¾ senior çš„è€å¸ˆã€‚ä¸€å®šè¦å‘Šè¯‰åˆ«äººä½ åœ¨ job market ä¸Šé¢ã€‚ä»–è¯´äº†ä¹‹åï¼ŒCMU è€å¸ˆè¯´ä»–ä»¬æ²¡æœ‰ positionï¼Œä½†æ˜¯å¯ä»¥ç»™å¥¹ä¸€ä¸ª mock interviewã€‚&lt;/p>
&lt;p>&lt;strong>åªè¦è‡ªå·±é¼“èµ·å‹‡æ°”ï¼Œå¾ˆå¤š senior çš„è€å¸ˆä¼šç»™å‡ºå¾ˆå¤šå¥½çš„å»ºè®®&lt;/strong>&lt;/p>
&lt;p>&lt;strong>ç¬¬ä¸€æ¬¡å»è¦ external letter&lt;/strong>&lt;/p>
&lt;p>åˆ«äººçš„å›å¤æ˜¯ &amp;ldquo;No. I don&amp;rsquo;t know your work well enough.&amp;rdquo; ä½œè€…è¯´ä»–å·²ç»å‡ºæ±—äº†ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™æœ¬èº«å·²ç»æ˜¯å¾ˆå¤§çš„å‹‡æ°”äº†ã€‚&lt;/p>
&lt;p>ä»–å’¨è¯¢çš„æ•™æˆéå¸¸ straight forward&lt;/p>
&lt;p>&lt;strong>My interview trip&lt;/strong>&lt;/p>
&lt;p>&amp;ldquo;I am surprised how much you have improved&amp;rdquo;&lt;/p>
&lt;p>å» UWMï¼Œmark ç»™äº†ä»–å¾ˆå¤š adviceã€‚æ‰€ä»¥è¿˜æ˜¯ä¸€å®šè¦ openã€‚&lt;/p>
&lt;p>&lt;strong>Say bye to YY&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Do what you believe in. Be yourself&lt;/li>
&lt;li>Family and Health are two glass balls; career is plastic ball&lt;/li>
&lt;li>Integrity is the most important&lt;/li>
&lt;li>Faculty life is a marathon; Ph.D. life is a sprint&lt;/li>
&lt;li>It is a learning experience&lt;/li>
&lt;/ul>
&lt;p>åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä¹Ÿè¦åƒä¸åŒçš„äººå­¦ä¹ &lt;/p>
&lt;p>&lt;strong>My first ASPLOS paper as a faculty&lt;/strong>&lt;/p>
&lt;p>Mark ä½œä¸ºåŒäº‹ä»ç„¶åœ¨å¸®åŠ©ä»–ä¿®æ”¹ paperã€‚Mark ä» introduction ä¸­æ²¡æœ‰è¯»åˆ°ä»–çš„ passionï¼Œå¸Œæœ›ä»–é‡æ–°æƒ³ä¸€ä¸‹ï¼Œé‡æ–°æ„æ€è¿™ä¸ª storyã€‚&lt;/p>
&lt;p>Mark è¯´ä»–ç¡®å®æœ‰ä¸é”™çš„ ideaï¼Œä½†æ˜¯å†™çš„ä¸è¡Œã€‚&lt;/p>
&lt;p>â­ Mark æäº†ä¸€ä¸ªå»ºè®®ã€‚ç”»ä¸€ä¸ª 2-dimension å›¾ç‰‡ï¼Œä»¥å‰çš„ paper æ˜¯ä¸“æ³¨äº Effects è¿™ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬çš„å·¥ä½œå’Œä»–ä»¬ä¸ä¸€æ ·åœ¨å“ªï¼ŸThis paper ä¸“æ³¨äº Causes è¿™ä¸ªç»´åº¦ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Mark è¯´æˆ‘æ¥å‘Šè¯‰ä½ ä½ çš„ introduction æ¯ä¸ª paragraph åº”è¯¥å†™ä»€ä¹ˆï¼Œåº”è¯¥æ€ä¹ˆå†™ã€‚è€Œä¸”ä¸èƒ½æ˜¯å¤§æ¦‚ï¼Œæ¯ä¸€ä¸ªè¯éƒ½å¿…é¡»è¦æƒ³æ¸…æ¥šã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸€ç‚¹ä¹Ÿå¾—è¯´ä¸€ä¸‹ï¼Œæœ‰äº›æ—¶å€™è‡ªå·±ä¹Ÿä¼šè§‰å¾—å¤§æ¦‚çŸ¥é“äº†è¦è®²ä»€ä¹ˆï¼Œä½†å®é™…åˆ°äº†çœŸæ­£çš„ç»†èŠ‚é‚£é‡Œè¿˜æ˜¯ä¸€ç‰‡æ¨¡ç³Šï¼Œè¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>My first undergrad. teaching&lt;/strong>&lt;/p>
&lt;p>don&amp;rsquo;t give back, give forwardï¼›å›é¦ˆç»™ä¸‹ä¸€ä»£&lt;/p>
&lt;p>&lt;strong>My first NSF proposal&lt;/strong>&lt;/p>
&lt;p>&amp;ldquo;You are not a Turing Award Winner, why worrying about rejection&amp;rdquo;&lt;/p>
&lt;p>Mark ä»ç„¶åœ¨å¸®åŠ©ä»–ä¿®æ”¹ proposalã€‚&lt;/p>
&lt;p>å¦‚æœä»å¤´å†æ¥ï¼Œä»–ä¼šä¸»åŠ¨åœ°å»æ‰¾ Mark å¸®å¿™ã€‚&lt;/p>
&lt;p>&lt;strong>My student first conference presentation&lt;/strong>&lt;/p>
&lt;p>ä¸€å®šè¦ seek advice&lt;/p>
&lt;p>å†™ä¸€ç¯‡ paper ä¸€å®šæ˜¯æœ‰ 6 months delayï¼Œå½“ä½  feel goodï¼Œæ˜¯å› ä¸ºåŠå¹´å‰åšå¾—å¥½ï¼Œè€Œä¸æ˜¯ç°åœ¨åšå¾—å¥½ã€‚å½“ä½  feel badï¼Œä¹Ÿä¸è¦å¤ª badï¼Œå› ä¸ºæ”¶ç›Šä¹Ÿæ˜¯å»¶åçš„&lt;/p>
&lt;p>ä»–çš„ co-author ç»™ä»–åé¦ˆäº† comment&lt;/p>
&lt;p>&lt;strong>My depression&lt;/strong>&lt;/p>
&lt;p>2011 å¹´æœ‰æ®µæ—¶é—´ï¼Œçœ‹èµ·æ¥å¾ˆç´¯ï¼Œæ™šä¸Šæ²¡æ³•å…¥ç¡ã€‚Andrea ä¸»åŠ¨é‚€è¯·ä»–ä¸€èµ·ä¸Šç”»ç”»è¯¾ï¼Œèµ°å‡ºæ²®ä¸§çš„æƒ…ç»ªã€‚&lt;/p>
&lt;p>&lt;strong>Is my research too incremental&lt;/strong>&lt;/p>
&lt;p>ä»–æ‹…å¿ƒè‡ªå·±çš„å·¥ä½œè¿‡äº incrementalã€‚åŒè¡Œå‘Šè¯‰ä¸ç”¨å¤ªæ‹…å¿ƒï¼Œè¿˜æ˜¯è¦ä¸æ–­åœ°å»åšæ¢ç´¢ï¼Œæ‰èƒ½å¤Ÿå‘æ˜å‡ºæ–°çš„å·¥ä½œã€‚&lt;/p>
&lt;p>&lt;strong>My first leaving student&lt;/strong>&lt;/p>
&lt;p>ä»–çš„æœ‰ä¸€ä¸ªå­¦ç”Ÿæƒ³è½¬å­¦å» CMUã€‚Mark çš„å»ºè®®æ˜¯è¦ç»™å­¦ç”Ÿå†™å¥½çš„æ¨èä¿¡&lt;/p>
&lt;p>&lt;strong>Service, Service&lt;/strong>&lt;/p>
&lt;p>æŒ‡çš„æ˜¯ä¸€äº›ä¼šè®®çš„ serviceï¼Œè¿™äº›ä¸œè¥¿å…¶å®éœ€è¦å»å¹³è¡¡ã€‚å› ä¸ºå¾ˆå®¹æ˜“å°±èŠ±è´¹å¤ªå¤šæ—¶é—´åœ¨ä¸Šé¢ã€‚&lt;/p>
&lt;p>&lt;strong>æé—®ç¯å¢ƒ&lt;/strong>&lt;/p>
&lt;p>å¢å±±è€å¸ˆèµ·ç‚¹å¾ˆé«˜ï¼Œæ€ä¹ˆå»çœ‹ 2 æµä¼šè®®ï¼Œæˆ–è€…é top ä¼šè®®ï¼Ÿ&lt;/p>
&lt;ul>
&lt;li>å…ˆä»æœ€å¥½çš„ conference ä¸Šå‘è¡¨&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœä¸€ç¯‡ paper è¢«é¢†åŸŸå†…çš„ä¼šè®®æ‹’ç¨¿å¤ªå¤šæ¬¡åªæœ‰ï¼Œä¼šåšä»€ä¹ˆ&lt;/p>
&lt;ul>
&lt;li>ä»–è·Ÿç€ YY åšçš„æ—¶å€™ï¼ŒåŸºæœ¬è§‰å¾—æƒ³å‡ºä¸€ä¸ª idea éƒ½èƒ½æŠ•åˆ° top ä¼šè®®ã€‚å»äº† UW ä¹‹åï¼Œè§‰å¾—ä¸è¦æœ‰ä¸€ä¸ªç‰¹åˆ«ç‰›çš„ idea æ‰å¼€å§‹åšã€‚åªè¦è§£å†³äº†é—®é¢˜ï¼Œå°±å¯ä»¥å»åšä¸€äº›ï¼Œå› ä¸ºå­¦ç”Ÿä¹Ÿéœ€è¦ trainingï¼Œä¸èƒ½æ€»æŠ• top ä¼šè®®ã€‚&lt;/li>
&lt;li>ä»–ä¸€å¼€å§‹çš„æ—¶å€™æƒ³äº† ASPLOS çš„ä¸€ä¸ªç‚¹ï¼Œåšç€åšç€å°±å¼€å§‹æ‹“å±•äº†ã€‚åšå®Œä¹‹åè§‰å¾—å¥½åƒä¹Ÿæˆäº† top ä¼šè®®äº†&lt;/li>
&lt;/ul></description></item><item><title>Hugo æ–‡ç« é¡µé¢æ·»åŠ å›ºå®šç›®å½•æ </title><link>https://huweim.github.io/post/blog_hugo_%E6%96%87%E7%AB%A0%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%9B%BA%E5%AE%9A%E7%9B%AE%E5%BD%95/</link><pubDate>Sun, 14 Aug 2022 19:33:17 +0800</pubDate><guid>https://huweim.github.io/post/blog_hugo_%E6%96%87%E7%AB%A0%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%9B%BA%E5%AE%9A%E7%9B%AE%E5%BD%95/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>é˜…è¯»åšå®¢æ–‡ç« æ—¶æœ‰ä¸€ä¸ªå›ºå®šçš„ç›®å½•ä¼šèˆ’æœå¾ˆå¤šï¼Œç°åœ¨å°±æ¥æ¢ç´¢ä¸€ä¸‹æ€ä¹ˆæ·»åŠ è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/p>
&lt;h1 id="1-å›ºå®šç›®å½•">1. å›ºå®šç›®å½•&lt;/h1>
&lt;p>ä»¥ä¸»é¢˜ &lt;code>jane&lt;/code> ä¸ºä¾‹ï¼Œåœ¨æ–‡ä»¶ &lt;code>theme/jane/layouts/post/single.html&lt;/code> ä¸­å­˜æ”¾ç€å¦‚ä½•æ˜¾ç¤º postã€‚æ ¹æ®æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œå…³äº table of content çš„è®¾å®šå­˜æ”¾åœ¨ &lt;code>theme/jane/layouts/partials/post/toc.html&lt;/code>&lt;/p>
&lt;p>ä¹‹åæŠŠåŸæ¥çš„ tableofcontent é‚£éƒ¨åˆ†ä»£ç æ”¾åˆ° nav ä¸­å³å¯ï¼Œå¦‚ä¸‹ï¼Œæ³¨é‡Šæ‰åŸæ¥çš„ä»£ç ï¼ˆ15-17 è¡Œï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>{{ if or .Params.toc (and .Site.Params.toc (ne .Params.toc false)) }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">div&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;post-toc&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">id&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;post-toc&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#f92672">h2&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;post-toc-title&amp;#34;&lt;/span>&amp;gt;{{ i18n &amp;#34;toc&amp;#34; }}&amp;lt;/&lt;span style="color:#f92672">h2&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">&amp;lt;!-- &amp;lt;div class=&amp;#34;post-toc-content&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> {{.TableOfContents}}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> &amp;lt;/div&amp;gt; --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#f92672">nav&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;hide-on-mobile section-nav&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#f92672">h3&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;ml-1&amp;#34;&lt;/span>&amp;gt;Table of contents&amp;lt;/&lt;span style="color:#f92672">h3&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ .TableOfContents }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#f92672">nav&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/&lt;span style="color:#f92672">div&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{- end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>PyTorch å­¦ä¹ </title><link>https://huweim.github.io/post/%E6%96%87%E6%A1%A3_pytorch%E5%AD%A6%E4%B9%A0/</link><pubDate>Thu, 28 Jul 2022 16:05:35 +0800</pubDate><guid>https://huweim.github.io/post/%E6%96%87%E6%A1%A3_pytorch%E5%AD%A6%E4%B9%A0/</guid><description>&lt;h1 id="1-python-æ¨¡å—">1. Python æ¨¡å—&lt;/h1>
&lt;h2 id="11-parser-æ¨¡å—">1.1 parser æ¨¡å—&lt;/h2>
&lt;h3 id="111-parseradd_argument">1.1.1 parser.add_argument()&lt;/h3>
&lt;p>åœ¨å‘½ä»¤è¡Œç»™ä»£ç èµ‹å€¼ï¼Œä¸éœ€è¦åå¤åœ¨ python ä¸­ä¿®æ”¹ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#39;--file-dir&amp;#39;&lt;/span>,type&lt;span style="color:#f92672">=&lt;/span>str, required&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>,help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Input file directory&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## å®ä¾‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#39;--dataset&amp;#39;&lt;/span>, default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;cifar10&amp;#39;&lt;/span>, type&lt;span style="color:#f92672">=&lt;/span>str,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;dataset name&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#39;--dataset_path&amp;#39;&lt;/span>, default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;/state/partition/imagenet-raw-data&amp;#39;&lt;/span>, type&lt;span style="color:#f92672">=&lt;/span>str,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;dataset path&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#39;--model&amp;#39;&lt;/span>, default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;resnet18&amp;#39;&lt;/span>, type&lt;span style="color:#f92672">=&lt;/span>str,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;model name&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#39;--train&amp;#39;&lt;/span>, default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>, action&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;store_true&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;train&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>action&lt;/code>: &lt;code>-train&lt;/code> è®¾ç½®æˆä¸€ä¸ªå¼€å…³ï¼Œ&lt;/p>
&lt;ul>
&lt;li>å¦‚æœä½¿ç”¨äº† &lt;code>python -u -m --train ...&lt;/code>ï¼Œå°±ä¼šæŠŠå‚æ•° &lt;code>--train&lt;/code> è®¾ç½®ä¸º True&lt;/li>
&lt;li>&lt;code>python -u -m ...&lt;/code>ï¼Œæ²¡æœ‰è¿™ä¸ªå¼€å…³ï¼Œåˆ™å‚æ•°å­˜å‚¨ä¸º False&lt;/li>
&lt;/ul>
&lt;h3 id="112-parserparse_args">1.1.2 parser.parse_args()&lt;/h3>
&lt;h2 id="12-tensor">1.2 Tensor&lt;/h2>
&lt;p>å¼ é‡ï¼Œå¤šç»´æ•°ç»„ã€‚&lt;/p>
&lt;p>æ•°æ®ç±»å‹éœ€è¦æ³¨æ„ä¸€ä¸‹&lt;/p>
&lt;blockquote>
&lt;p>å…³äº dtypeï¼ŒPyTorch æä¾›äº† 9 ç§æ•°æ®ç±»å‹ï¼Œå…±åˆ†ä¸º 3 å¤§ç±»ï¼šfloat (16-bit, 32-bit, 64-bit)ã€integer (unsigned-8-bit ,8-bit, 16-bit, 32-bit, 64-bit)ã€Booleanã€‚æ¨¡å‹å‚æ•°å’Œæ•°æ®ç”¨çš„æœ€å¤šçš„ç±»å‹æ˜¯ float-32-bitã€‚label å¸¸ç”¨çš„ç±»å‹æ˜¯ integer-64-bitã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="2-torch">2. torch&lt;/h1>
&lt;p>æœ‰å¾ˆå¤šæ–¹ä¾¿çš„æ•°å­¦æ“ä½œï¼ŒåŒç†ï¼Œå…ˆäº†è§£æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œéœ€è¦ç”¨åˆ°æ—¶çœ‹å…·ä½“çš„ç”¨æ³•ã€‚åŒ…æ‹¬ torch.rand(), torch.range(), torch.chunk(), torch.normal(), torch.add()&lt;/p>
&lt;p>pytorch ä¸»è¦åˆ†ä¸ºäº”å¤§æ¨¡å—&lt;/p>
&lt;ul>
&lt;li>dataset&lt;/li>
&lt;li>model&lt;/li>
&lt;li>loss funtion&lt;/li>
&lt;li>optimizer&lt;/li>
&lt;li>è¿­ä»£è®­ç»ƒ&lt;/li>
&lt;/ul>
&lt;h2 id="21-nn">2.1 nn&lt;/h2>
&lt;p>&lt;code>torch.nn&lt;/code> ä¸»è¦åŒ…å« 4 ä¸ªæ¨¡å—&lt;/p>
&lt;ul>
&lt;li>nn.Parameter, Tensor å­ç±»ï¼Œè¡¨ç¤ºå¯å­¦ä¹ çš„å‚æ•°ï¼Œå¦‚ weights, bias&lt;/li>
&lt;li>nn.Modules, æ‰€æœ‰æ¨¡å‹çš„åŸºç±»ï¼Œç”¨äºç®¡ç†ç½‘ç»œçš„å±æ€§&lt;/li>
&lt;li>nn.functional, å‡½æ•°å…·ä½“å®ç°ï¼Œå¦‚ conv, pool, æ¿€æ´»å‡½æ•°&lt;/li>
&lt;li>nn,init, ç½‘ç»œå‚æ•°åˆå§‹åŒ–æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;h3 id="211-nnmodule">2.1.1 nn.Module&lt;/h3>
&lt;p>class torch.nn.Module æ˜¯æ‰€æœ‰ç½‘ç»œçš„åŸºç±»ï¼ˆBase class for all neural network modulesï¼‰ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½åº”è¯¥ç»§æ‰¿è¿™ä¸ªç±»ï¼Œå‚è€ƒlab1çš„ç½‘ç»œæ¨¡å‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Net&lt;/span>(nn&lt;span style="color:#f92672">.&lt;/span>Module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> super(Net, self)&lt;span style="color:#f92672">.&lt;/span>__init__()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>conv1 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Conv2d(&lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, bias&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>pool &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>MaxPool2d(&lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>) &lt;span style="color:#75715e"># run after each conv (hence the 5x5 FC layer)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>conv2 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Conv2d(&lt;span style="color:#ae81ff">6&lt;/span>, &lt;span style="color:#ae81ff">16&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, bias&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc1 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Linear(&lt;span style="color:#ae81ff">16&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">120&lt;/span>, bias&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc2 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Linear(&lt;span style="color:#ae81ff">120&lt;/span>, &lt;span style="color:#ae81ff">84&lt;/span>, bias&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc3 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Linear(&lt;span style="color:#ae81ff">84&lt;/span>, &lt;span style="color:#ae81ff">10&lt;/span>, bias&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">forward&lt;/span>(self, x: torch&lt;span style="color:#f92672">.&lt;/span>Tensor) &lt;span style="color:#f92672">-&amp;gt;&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>pool(F&lt;span style="color:#f92672">.&lt;/span>relu(self&lt;span style="color:#f92672">.&lt;/span>conv1(x)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>pool(F&lt;span style="color:#f92672">.&lt;/span>relu(self&lt;span style="color:#f92672">.&lt;/span>conv2(x)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> x&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">16&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> F&lt;span style="color:#f92672">.&lt;/span>relu(self&lt;span style="color:#f92672">.&lt;/span>fc1(x)) &lt;span style="color:#75715e">#è¾“å…¥æ˜¯åˆ—å‘é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> F&lt;span style="color:#f92672">.&lt;/span>relu(self&lt;span style="color:#f92672">.&lt;/span>fc2(x))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>fc3(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>net &lt;span style="color:#f92672">=&lt;/span> Net()&lt;span style="color:#f92672">.&lt;/span>to(device)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸€èˆ¬åœ¨ model.py æ–‡ä»¶ä¸­å®šä¹‰ NN modelï¼Œå†ä¸¾ä¸€ä¸ª ViT çš„ä¾‹å­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">ViT&lt;/span>(nn&lt;span style="color:#f92672">.&lt;/span>Module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name (str): Model name, e.g. &amp;#39;B_16&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> pretrained (bool): Load pretrained weights
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> in_channels (int): Number of channels in input data
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> num_classes (int): Number of classes, default 1000
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> References:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> [1] https://openreview.net/forum?id=YicbFdNTTy
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: Optional[str] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pretrained: bool &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> patches: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">16&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dim: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">768&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ff_dim: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">3072&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_heads: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">12&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_layers: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">12&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> attention_dropout_rate: float &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0.0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dropout_rate: float &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0.1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> representation_size: Optional[int] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load_repr_layer: bool &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> classifier: str &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;token&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> positional_embedding: str &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;1d&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> in_channels: int &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> image_size: Optional[int] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_classes: Optional[int] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> super()&lt;span style="color:#f92672">.&lt;/span>__init__()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">forward&lt;/span>(self, x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2111-ä¸€äº›å­å‡½æ•°">2.1.1.1 ä¸€äº›å­å‡½æ•°&lt;/h4>
&lt;p>2022-08-06 22:31:40&lt;/p>
&lt;p>named_ ç³»åˆ—&lt;/p>
&lt;p>&lt;strong>model.named_parameters()&lt;/strong>ï¼Œè¿”å›ä¸¤ä¸ªå˜é‡ï¼Œæ¯”å¦‚èµ‹å€¼ç»™ name(e.g. &lt;code>name&lt;/code> -&amp;gt; &lt;code>stage_1.0.conv_b.weight&lt;/code>) å’Œ param (e.g. &lt;code>param.requires_grad&lt;/code> -&amp;gt; &lt;code>False&lt;/code>)&lt;/p>
&lt;h3 id="212-nnlayer">2.1.2 nn.Layer&lt;/h3>
&lt;p>&lt;strong>model.named_modules()&lt;/strong>ï¼Œè¿”å›æ‰€æœ‰æ¨¡å—çš„è¿­ä»£å™¨ã€‚æ‰“å°çš„è¯ä¼šè¾“å‡ºæ¨¡å‹çš„ç»“æ„ï¼Œå¦‚åŒ &lt;code>print(model)&lt;/code>&lt;/p>
&lt;p>&lt;strong>model.named_children&lt;/strong>ï¼Œnamed_modules çš„å­é›†ï¼Œè¿”å›å­æ¨¡å—çš„è¿­ä»£å™¨&lt;/p>
&lt;p>&lt;strong>model.children()&lt;/strong>ï¼Œè¿”å›ä¸‹ä¸€çº§æ¨¡å—çš„è¿­ä»£å™¨&lt;/p>
&lt;blockquote>
&lt;p>æ‰€ä»¥è¿™ä¸ªåªæ˜¯è®¿é—®åˆ°ä¸€çº§ï¼Œå¦‚æœä¸‹ä¸€çº§æ˜¯ä¸€ä¸ª Sequentialï¼Œé‚£ä¹ˆå°±è¿˜å¾—ç»§ç»­è¿­ä»£ï¼Œè¿™ä¸ªæ—¶å€™ç”¨ .modules() å¯èƒ½ä¼šæ›´å¥½&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>model.modules()&lt;/strong>ï¼ŒReturns an iterator over all modules in the network&lt;/p>
&lt;p>model.named_modules() ä¼šæœ‰å†—ä½™çš„è¿”å›ï¼Œè¿™ç§æƒ…å†µä¸‹éœ€è¦ç»“åˆä¸€äº›å‡½æ•°æ¥è¿‡æ»¤ã€‚&lt;/p>
&lt;p>nn è¿˜åŒ…å«äº†å¾ˆå¤š layerï¼Œæ¯”å¦‚ &lt;code>nn.Conv2d&lt;/code>, &lt;code>nn.MaxPool1d&lt;/code>, &lt;code>nn.ReLU&lt;/code>&lt;/p>
&lt;h3 id="213-model-çš„åˆ›å»º">2.1.3 model çš„åˆ›å»º&lt;/h3>
&lt;p>ä¸»è¦æ˜¯ 2 ä¸ªè¦ç´ ï¼Œæ„å»ºå­æ¨¡å—å’Œæ‹¼æ¥å­æ¨¡å—ï¼ŒæŠŠå­æ¨¡å—ç†è§£ä¸º layerï¼Œæ„å»ºå­æ¨¡å—å°±æ˜¯ &lt;code>__init__&lt;/code>ï¼Œæ‹¼æ¥å­æ¨¡å—å°±æ˜¯ &lt;code>forward()&lt;/code>&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨ &lt;code>model = ViT(model_name, pretrained=True)&lt;/code> åˆ›å»ºæ¨¡å‹æ—¶ï¼Œä¼šè°ƒç”¨ &lt;code>__init__()&lt;/code> æ–¹æ³•åˆ›å»ºæ¨¡å‹çš„å­æ¨¡å—&lt;/li>
&lt;li>è®­ç»ƒæ—¶è°ƒç”¨ &lt;code>outputs = net(inputs)&lt;/code> æ—¶ï¼Œä¼šè¿›å…¥ &lt;code>module.py&lt;/code> çš„ &lt;code>call()&lt;/code> å‡½æ•°ä¸­&lt;/li>
&lt;li>åœ¨ &lt;code>__call__&lt;/code> ä¸­è°ƒç”¨ &lt;code>result = self.forward(*input, **kwargs)&lt;/code> å‡½æ•°ï¼Œè¿›å…¥åˆ°æ¨¡å‹çš„ &lt;code>forward()&lt;/code> å‡½æ•°ä¸­ï¼Œè¿›è¡Œå‰å‘ä¼ æ’­&lt;/li>
&lt;/ul>
&lt;h4 id="2131-model-å®ä¾‹">2.1.3.1 model() å®ä¾‹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> quantize_model(model)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>outputs &lt;span style="color:#f92672">=&lt;/span> model(inputs)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>loss &lt;span style="color:#f92672">=&lt;/span> criterion(outputs, targets)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ &lt;code>outputs = model(inputs)&lt;/code> è¯­å¥ä¸­ä¼šè¿›å…¥åˆ° &lt;code>class Conv2dQuantizer(nn.Module)&lt;/code> çš„ forward å‡½æ•°ï¼Œ&lt;code>super(Conv2dQuantizer, self).__init__()&lt;/code> æ˜¯ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å‡½æ•° &lt;code>__init__()&lt;/code>ï¼Œä»è€Œä½¿å¾— Conv2dQuantizer ä¸­åŒ…å«äº†çˆ¶ç±»&lt;/p>
&lt;h4 id="2132-modeleval">2.1.3.2 model.eval()&lt;/h4>
&lt;p>ä½œç”¨ï¼šä¸å¯åŠ¨ BatchNormalization å’Œ Dropoutï¼Œä¿è¯ BN å’Œ Dropout ä¸å‘ç”Ÿå˜åŒ–ï¼Œpytorch æ¡†æ¶ä¼šè‡ªåŠ¨æŠŠ BN å’Œ Dropout å›ºå®šä½ï¼Œä¸ä¼šå–å¹³å‡å€¼ï¼Œè€Œæ˜¯ç”¨è®­ç»ƒå¥½çš„å€¼ï¼Œä¸ç„¶çš„è¯ï¼Œä¸€æ—¦ test çš„ batch_size è¿‡å°ï¼Œå¾ˆå®¹æ˜“å°±ä¼šè¢« BN å±‚å¯¼è‡´ç”Ÿæˆå›¾ç‰‡é¢œè‰²å¤±çœŸæå¤§ã€‚&lt;/p>
&lt;p>Reference: &lt;a href="https://zhuanlan.zhihu.com/p/357075502">https://zhuanlan.zhihu.com/p/357075502&lt;/a>&lt;/p>
&lt;h4 id="2133-torchno_grad">2.1.3.3 torch.no_grad()&lt;/h4>
&lt;p>tensor æœ‰ä¸€ä¸ªå‚æ•°æ˜¯ &lt;code>requires_grad&lt;/code>ï¼Œå¦‚æœè®¾ç½®ä¸º Trueï¼Œåˆ™åå‘ä¼ æ’­æ—¶è¯¥ tensor ä¼šè‡ªåŠ¨æ±‚å¯¼ï¼Œé»˜è®¤ä¸º Falseï¼Œåå‘ä¼ æ’­æ—¶ä¸æ±‚å¯¼ï¼Œå¯ä»¥æå¤§åœ°èŠ‚çº¦æ˜¾å­˜æˆ–è€…å†…å­˜ã€‚&lt;/p>
&lt;p>&lt;code>with torch.no_grad&lt;/code> çš„ä½œç”¨ï¼šæ‰€æœ‰è®¡ç®—å¾—å‡ºçš„ tensor çš„ requires_grad éƒ½è‡ªåŠ¨è®¾ç½®ä¸º False&lt;/p>
&lt;h3 id="214-crossentropyloss">2.1.4 CrossEntropyLoss&lt;/h3>
&lt;p>This criterion combines LogSoftmax and NLLLoss in one single class.&lt;/p>
&lt;h2 id="22-tensor">2.2 Tensor&lt;/h2>
&lt;p>Tensor å’Œ Numpy ä¸­çš„ ndarrays ç±»ä¼¼ï¼Œä½† Tensor å¯ä»¥ä½¿ç”¨ GPU è¿›è¡ŒåŠ é€Ÿè®¡ç®—ã€‚Tensor å¯èƒ½æ˜¯æ·±åº¦å­¦ä¹ ç¼–ç¨‹ä¸­ï¼Œæ‰€æœ‰æ•°æ®æ“ä½œçš„åŸºç¡€å•å…ƒã€‚&lt;/p>
&lt;blockquote>
&lt;p>å¯ä»¥ç”¨ GPU åŠ é€Ÿè®¡ç®—ï¼Œè¿™ä¸€ç‚¹è¦è®°ä½&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>Tensor&lt;/code> is a multi-dimensional matrix containing elements of a single data type&lt;/p>
&lt;p>å¯ä»¥ç”¨ list ä½œä¸ºå‚æ•°æ¥æ„é€  tensor&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>tensor([[&lt;span style="color:#ae81ff">1.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1.&lt;/span>], [&lt;span style="color:#ae81ff">1.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1.&lt;/span>]])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tensor([[ &lt;span style="color:#ae81ff">1.0000&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1.0000&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">1.0000&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1.0000&lt;/span>]])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>tensor(np&lt;span style="color:#f92672">.&lt;/span>array([[&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>], [&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>]]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tensor([[ &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>]])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="221-view">2.2.1 view&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># to one-dimension&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>grad_output &lt;span style="color:#f92672">=&lt;/span> grad_output&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># shape æ˜¯ä¸€ä¸ª listï¼Œå­˜æ”¾äº† tensor &amp;#39;data&amp;#39; çš„æ•´ä¸ªç»´åº¦ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>shape &lt;span style="color:#f92672">=&lt;/span> data&lt;span style="color:#f92672">.&lt;/span>shape
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŒ‰ data çš„ç¬¬ä¸€ç»´å±•å¼€ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªäºŒç»´çš„ tensorã€‚æœ€ç»ˆçš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ data.shape[0]ï¼Œå’ŒåŸæ¥çš„ç¬¬ä¸€ä¸ªç»´åº¦ç›¸åŒï¼Œç¬¬äºŒä¸ªç»´åº¦æ˜¯åç»­æ‰€æœ‰å…ƒç´ çš„å±•å¼€çš„æ€»å’Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data &lt;span style="color:#f92672">=&lt;/span> data&lt;span style="color:#f92672">.&lt;/span>view(data&lt;span style="color:#f92672">.&lt;/span>shape[&lt;span style="color:#ae81ff">0&lt;/span>], &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç¤ºä¾‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> x &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>randn(&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> x&lt;span style="color:#f92672">.&lt;/span>size()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>Size([&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> y &lt;span style="color:#f92672">=&lt;/span> x&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#ae81ff">16&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> y&lt;span style="color:#f92672">.&lt;/span>size()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>Size([&lt;span style="color:#ae81ff">16&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> z &lt;span style="color:#f92672">=&lt;/span> x&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>) &lt;span style="color:#75715e"># the size -1 is inferred from other dimensions&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> z&lt;span style="color:#f92672">.&lt;/span>size()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>Size([&lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="222-å¸¸ç”¨æ“ä½œ">2.2.2 å¸¸ç”¨æ“ä½œ&lt;/h3>
&lt;h4 id="2222-ç´¢å¼•">2.2.2.2 ç´¢å¼•&lt;/h4>
&lt;p>&lt;strong>è·å–æŸä¸€ç»´åº¦çš„é•¿åº¦&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># input æ˜¯ä¸€ä¸ª size = 1 çš„ tuple&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># input[0] æ˜¯ä¸€ä¸ª tensor, input[0] çš„ size: &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è·å– tensor ç¬¬ 1 ä¸ªç»´åº¦çš„ length&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>input[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>size(&lt;span style="color:#ae81ff">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è·å– tensor ç¬¬ 2 ä¸ªç»´åº¦çš„ length&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>input[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>size(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2222-è·å–æŸ-value-of-index-in-tensor">2.2.2.2 è·å–æŸ value of index in tensor&lt;/h4>
&lt;p>ä¸»è¦æ˜¯ç”¨è¿™ä¸ª nonzero&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>t &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print ((t &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>)&lt;span style="color:#f92672">.&lt;/span>nonzero(as_tuple&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)[&lt;span style="color:#ae81ff">0&lt;/span>])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2223-tensor-æ’åº">2.2.2.3 tensor æ’åº&lt;/h4>
&lt;p>tensor.sort()&lt;/p>
&lt;p>2022-09-12 23:37:09ï¼Œæœ‰ä¸€äº›å‘ï¼Œæ³¨æ„è¿”å›çš„æ˜¯ä¸€ä¸ª tupleï¼Œæ‰€ä»¥è¦æ³¨æ„æ¥æ”¶çš„å½¢å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>grad_output_sorted, grad_output_indices &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>sort(grad_output)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>grad_output_sorted &lt;span style="color:#f92672">=&lt;/span> grad_output_sorted&lt;span style="color:#f92672">.&lt;/span>double() &lt;span style="color:#75715e"># avoid RuntimeError: Found dtype Double but expected Float&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2224-è·å–-tensor-ä¸­æŸ-percentile">2.2.2.4 è·å– tensor ä¸­æŸ percentile&lt;/h4>
&lt;p>tensorflow å¥½åƒæ˜¯æ”¯æŒ tfp.stats.percentileï¼Œç›´æ¥è·å– Finding p% of smallest tensor values&lt;/p>
&lt;p>ç›´æ¥ç”¨ &lt;code>np.percentile(tensor, )&lt;/code>&lt;/p>
&lt;h4 id="2225-torchwhere">2.2.2.5 torch.where()&lt;/h4>
&lt;p>å¿«é€Ÿåœ°ç§»é™¤ tensor ä¸­ä¸æ»¡è¶³æŸæ¡ä»¶çš„ element&lt;/p>
&lt;p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æŠŠå€¼å¤§äº 0.5 çš„å€¼ç½®ä¸º0&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> x &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>randn(&lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> y &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>ones(&lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tensor([[&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">0.4620&lt;/span>, &lt;span style="color:#ae81ff">0.3139&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">0.3898&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">0.7197&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">0.0478&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">0.1657&lt;/span>]])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;gt;&amp;gt;&amp;gt;&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>where(x &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>, x, y)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tensor([[ &lt;span style="color:#ae81ff">1.0000&lt;/span>, &lt;span style="color:#ae81ff">0.3139&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">0.3898&lt;/span>, &lt;span style="color:#ae81ff">1.0000&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [ &lt;span style="color:#ae81ff">0.0478&lt;/span>, &lt;span style="color:#ae81ff">1.0000&lt;/span>]])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®é™…&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>grad_output_sorted &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>where(grad_output_sorted &lt;span style="color:#f92672">&amp;gt;&lt;/span> max_75, &lt;span style="color:#ae81ff">0.&lt;/span>, grad_output_sorted)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>grad_output_sorted &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>where(grad_output_sorted &lt;span style="color:#f92672">&amp;lt;&lt;/span> min_75, &lt;span style="color:#ae81ff">0.&lt;/span>, grad_output_sorted)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2226-torchcat-">2.2.2.6 torch.cat( )&lt;/h4>
&lt;p>åˆ é™¤æ‰ Tensor ä¸­æŒ‡å®š value çš„å…ƒç´ ï¼Œæ¯”å¦‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># remove i-th element&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>T &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>tensor([&lt;span style="color:#ae81ff">1&lt;/span>,&lt;span style="color:#ae81ff">2&lt;/span>,&lt;span style="color:#ae81ff">3&lt;/span>,&lt;span style="color:#ae81ff">4&lt;/span>,&lt;span style="color:#ae81ff">5&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>T &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>cat([T[&lt;span style="color:#ae81ff">0&lt;/span>:i], T[i&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>:&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>]])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="222x-ç»¼åˆ">2.2.2.X ç»¼åˆ&lt;/h4>
&lt;p>ç»¼ä¸Šï¼Œæœ‰ä¸€ä¸ªéœ€æ±‚ã€‚å¯¹äºä¸€ä¸ªä¸€ç»´ Tensorï¼Œæ¶ˆé™¤æ‰å…¶å‰25%çš„å€¼ï¼Œå¾—åˆ°å‰©ä¸‹75%çš„tensor&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="223-function">2.2.3 Function&lt;/h3>
&lt;h4 id="2231-tensordata-tensordetach">2.2.3.1 tensor.data, tensor.detach()&lt;/h4>
&lt;p>detach()å’Œdataç”Ÿæˆçš„éƒ½æ˜¯æ— æ¢¯åº¦çš„çº¯tensor,å¹¶ä¸”é€šè¿‡åŒä¸€ä¸ªtensoræ•°æ®æ“ä½œï¼Œæ˜¯å…±äº«ä¸€å—æ•°æ®å†…å­˜ã€‚ä¸»è¦ç›®çš„æ˜¯è®©å…¶ç‹¬ç«‹äºè®¡ç®—å›¾ä¹‹å¤–&lt;/p>
&lt;h4 id="2232-tensormax-tensorabs-tensorunsqueeze-tensordim-tensorshape">2.2.3.2 tensor.max, tensor.abs, tensor.unsqueeze, tensor.dim, tensor.shape&lt;/h4>
&lt;p>tensor åŸæœ¬æ˜¯ (64, 128, 768)ï¼Œç»è¿‡ &lt;code>view&lt;/code> å°†å…¶äºŒç»´åŒ–ï¼Œç¬¬äºŒç»´ç­‰äºåŸæœ¬æœ€åä¸€ä¸ªç»´åº¦çš„ sizeï¼Œä¹Ÿå°±æ˜¯ 768ã€‚&lt;code>max(1)&lt;/code> è¡¨ç¤ºè¿”å›ç¬¬äºŒä¸ªç»´åº¦çš„æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯ 768 ä¸ªå…ƒç´ ä¸­çš„æœ€å¤§å€¼ï¼Œæœ€åå¾—åˆ°çš„ tensor size å°±æ˜¯ (64*128)ï¼Œç„¶åé€šè¿‡ &lt;code>unsqueeze&lt;/code> è½¬æ¢ä¸º (64*128, 1) dimension&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>x_max, _ &lt;span style="color:#f92672">=&lt;/span> tensor&lt;span style="color:#f92672">.&lt;/span>view(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, tensor&lt;span style="color:#f92672">.&lt;/span>shape[tensor&lt;span style="color:#f92672">.&lt;/span>dim() &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>])&lt;span style="color:#f92672">.&lt;/span>abs()&lt;span style="color:#f92672">.&lt;/span>max(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x_max &lt;span style="color:#f92672">=&lt;/span> x_max&lt;span style="color:#f92672">.&lt;/span>unsqueeze(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="2233-torcndot-torchmv-torchmm">2.2.3.3 torcn.dot. torch.mv, torch.mm&lt;/h4>
&lt;p>torch.dot: å‘é‡ç‚¹ç§¯&lt;/p>
&lt;p>torch.mv: çŸ©é˜µ-å‘é‡ç§¯&lt;/p>
&lt;p>torch.mm: çŸ©é˜µ-çŸ©é˜µä¹˜æ³•&lt;/p>
&lt;h2 id="23-autograd">2.3 autograd&lt;/h2>
&lt;p>weight æ›´æ–°ä¾èµ–äºæ¢¯åº¦çš„è®¡ç®—ï¼Œåœ¨ pytorch ä¸­æ­å»ºå¥½ forward è®¡ç®—å›¾ï¼Œåˆ©ç”¨ &lt;code>torch.autograd&lt;/code> è‡ªåŠ¨æ±‚å¯¼å¾—åˆ°æ‰€æœ‰ gradient of tensor&lt;/p>
&lt;h2 id="24-data-æ¨¡å—">2.4 data æ¨¡å—&lt;/h2>
&lt;p>æ•°æ®æ¨¡å—å¯ä»¥ç»†åˆ†ä¸º 4 ä¸ªéƒ¨åˆ†&lt;/p>
&lt;ul>
&lt;li>æ•°æ®æ”¶é›†ï¼šæ ·æœ¬ï¼Œlabel&lt;/li>
&lt;li>æ•°æ®åˆ’åˆ†ï¼štrain set, valid set, test set&lt;/li>
&lt;li>æ•°æ®è¯»å–ï¼špytorch dataloader æ¨¡å—ï¼Œdataloader åŒ…æ‹¬ sampler, dataset
&lt;ul>
&lt;li>sampler: ç”Ÿæˆç´¢å¼•(index)&lt;/li>
&lt;li>dataset: æ ¹æ®ç”Ÿæˆçš„ç´¢å¼•(index)è¯»å–æ ·æœ¬ä»¥åŠæ ‡ç­¾(label)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ•°æ®é¢„å¤„ç†ï¼šå¯¹åº”äº pytorch transforms&lt;/li>
&lt;/ul>
&lt;h3 id="241-dataloader">2.4.1 DataLoader&lt;/h3>
&lt;p>&lt;code>torch.utils.data.DataLoader()&lt;/code>, æ„å»ºå¯è¿­ä»£çš„æ•°æ®è£…è½½å™¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>utils&lt;span style="color:#f92672">.&lt;/span>data&lt;span style="color:#f92672">.&lt;/span>DataLoader(dataset, batch_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, shuffle&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>, sampler&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, batch_sampler&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, num_workers&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>, collate_fn&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, pin_memory&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>, drop_last&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>, timeout&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>, worker_init_fn&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>, multiprocessing_context&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>dataset: torchvision.datasets ç±»ï¼Œå†³å®šæ•°æ®ä»å“ªé‡Œè¯»å–ï¼Œå¦‚ä½•è¯»å–ï¼Œä»¥åŠæ˜¯å¦ä¸‹è½½ï¼Œæ˜¯å¦è®­ç»ƒï¼Œç»™å‡ºä¸€ä¸ªä¾‹å­&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>cifar100_test &lt;span style="color:#f92672">=&lt;/span> torchvision&lt;span style="color:#f92672">.&lt;/span>datasets&lt;span style="color:#f92672">.&lt;/span>CIFAR100(root&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;./data&amp;#39;&lt;/span>, train&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>, download&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>, transform&lt;span style="color:#f92672">=&lt;/span>transform_test)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>num_works: æ˜¯å¦å¤šè¿›ç¨‹è¯»å–ï¼ŒæŒ‡å®šè¯»å–çš„è¿›ç¨‹æ•°é‡&lt;/li>
&lt;li>shuffle: æ¯ä¸ª epoch æ˜¯å¦ä¹±åº&lt;/li>
&lt;li>sampler: æŒ‡å®šä¸€ä¸ª &lt;code>torch.utils.data.distributed.DistributedSampler&lt;/code> ç±»å‹&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å…¶ä»–åè¯&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Epoch: æ‰€æœ‰è®­ç»ƒæ ·æœ¬éƒ½å·²ç»è¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œç§°ä¸ºä¸€ä¸ª epoch&lt;/li>
&lt;li>Iteration: a batch of æ ·æœ¬å·²ç»è¾“å…¥åˆ°æ¨¡å‹ä¸­&lt;/li>
&lt;li>Batchsize: æ‰¹å¤§å°ï¼Œå†³å®šä¸€ä¸ª iteration æœ‰å¤šå°‘æ ·æœ¬ï¼Œä¹Ÿå†³å®šäº†ä¸€ä¸ª Epoch æœ‰å¤šå°‘ä¸ª Iteration&lt;/li>
&lt;/ul>
&lt;h4 id="2411-nvidiadali">2.4.1.1 NVIDIA.DALI&lt;/h4>
&lt;p>2022-07-28 21:24:17 äº†è§£åˆ°è¿™ç©æ„å„¿&lt;/p>
&lt;h3 id="242-dataset">2.4.2 DataSet&lt;/h3>
&lt;p>&lt;code>torch.utils.data.Dataset&lt;/code>, æŠ½è±¡ç±»ï¼Œæ‰€æœ‰è‡ªå®šä¹‰å¤§çš„ DataSet éƒ½éœ€è¦ç»§æ‰¿è¯¥ç±»ã€‚&lt;/p>
&lt;p>åœ¨Dataset çš„åˆå§‹åŒ–å‡½æ•°ä¸­ä¼šè°ƒç”¨ &lt;code>get_img_info()&lt;/code> æ–¹æ³•ã€‚&lt;/p>
&lt;h3 id="242-torchvision">2.4.2 torchvision&lt;/h3>
&lt;p>è®¡ç®—æœºè§†è§‰å·¥å…·åŒ…ï¼Œæœ‰ 3 ä¸ªä¸»è¦çš„æ¨¡å—&lt;/p>
&lt;ul>
&lt;li>&lt;code>torchvision.transforms&lt;/code>, åŒ…æ‹¬å¸¸ç”¨çš„å›¾åƒé¢„å¤„ç†æ–¹æ³•&lt;/li>
&lt;li>&lt;code>torchvision.datasets&lt;/code>, åŒ…æ‹¬å¸¸ç”¨çš„ dataset, e.g. MNIST, CIFAR-10, ImageNet&lt;/li>
&lt;li>&lt;code>torchvision.models&lt;/code>, å¸¸ç”¨çš„ pre-trained models, e.g. AlexNet, VGG, ResNet, GoogleNet&lt;/li>
&lt;/ul>
&lt;p>data çš„æ•°é‡å’Œåˆ†å¸ƒå¯¹æ¨¡å‹è®­ç»ƒçš„ç»“æœèµ·å†³å®šæ€§çš„ä½œç”¨ï¼Œéœ€è¦å¯¹ data è¿›è¡Œ pre-process å’Œæ•°æ®å¢å¼ºã€‚ç›®çš„æ˜¯å¢åŠ æ•°æ®çš„å¤šæ ·æ€§ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚&lt;/p>
&lt;h3 id="243-batch-size">2.4.3 Batch Size&lt;/h3>
&lt;p>2022-08-09 18:24:56ï¼Œå­¦ä¹ ä¸€ä¸‹æ¢¯åº¦ï¼Œè®­ç»ƒï¼Œå’Œ batch size çš„å…³ç³»ã€‚&lt;/p>
&lt;p>é€šè¿‡ä¸¾ä¾‹æ¥å­¦ä¹ ï¼Œæ¯”å¦‚ç›®å‰ä½¿ç”¨çš„ç½‘ç»œï¼Œbatch_size = 128ï¼Œè®­ç»ƒæ•°æ®è¡Œæ•°ä¸º $|x| = 1024$ï¼Œä»£è¡¨æ¯æ¬¡ç½‘ç»œæ¨¡å‹çš„è¿­ä»£ä½¿ç”¨äº† 128 ä¸ªæ ·æœ¬ï¼Œ128 ä¸ªæ ·æœ¬æ¥è‡ª $x$ï¼Œå¯èƒ½æ˜¯æ— åºæŠ½æ ·ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ‰åºæŠ½æ ·ã€‚&lt;/p>
&lt;p>æ¯ä¸ª epoch åŒ…å« 1024/128 iterations&lt;/p>
&lt;blockquote>
&lt;p>åŒä¸€ä¸ª epochï¼Œæˆ‘ç”¨ç¬¬ä¸€ä¸ª batch å®Œæˆäº†ä¸€æ¬¡å‰å‘åå‘ï¼Œæ¥ä¸‹æ¥çš„ç¬¬äºŒæ¬¡ iterationï¼Œæ¢äº†ä¸€ä¸ª batchï¼Œä½†æ˜¯ weight å·²ç»æ›´æ–°è¿‡äº†
è¿™ä¸ªå°±æ˜¯ä¹‹å‰å¡ä½æˆ‘çš„ç‚¹ï¼Œè¦ç†è§£è¿™ä¸€ç‚¹ã€‚è®­ç»ƒæ˜¯ä¸ºäº†è®© weight æ”¶æ•›ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="2431-epoch-bach-iteration">2.4.3.1 epoch, bach, iteration&lt;/h4>
&lt;p>epoch: æŠŠæ‰€æœ‰è®­ç»ƒæ•°æ®ä¸¢è¿›ç½‘ç»œçš„å‘¨æœŸ&lt;/p>
&lt;p>batch_size: ä¸€æ¬¡è¿­ä»£çš„æ•°æ®é‡ï¼›è¿™ä¸ªä»ä¸€äº›è¯´æ³•ä¸­ï¼Œçœ‹èµ·æ¥æ˜¯å›¾ç‰‡çš„å¼ æ•°&lt;/p>
&lt;p>iteration: å®Œæˆæ‰€æœ‰è®­ç»ƒæ•°æ®çš„è¿­ä»£ï¼Œæ‰€éœ€è¦çš„æ¬¡æ•°ã€‚&lt;/p>
&lt;blockquote>
&lt;p>batch_size = 128ï¼Œè®­ç»ƒæ•°æ®è¡Œæ•°ä¸º $|x| = 1024$ï¼Œä»£è¡¨æ¯æ¬¡ç½‘ç»œæ¨¡å‹çš„è¿­ä»£ä½¿ç”¨äº† 128 ä¸ªæ ·æœ¬ï¼Œ128 ä¸ªæ ·æœ¬æ¥è‡ª $x$ï¼Œå¯èƒ½æ˜¯æ— åºæŠ½æ ·ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ‰åºæŠ½æ ·ã€‚
æ¯ä¸ª epoch åŒ…å« 1024/128 iterations&lt;/p>
&lt;/blockquote>
&lt;p>â­ æ³¨æ„ï¼Œç¬¬ä¸€ä¸ª epoch ç»“æŸä¹‹åï¼Œweight æ˜¯æ²¡æœ‰ reset çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒä¸ª epoch ä»ç„¶æ¥ç€æ›´æ–° weightã€‚&lt;/p>
&lt;blockquote>
&lt;p>epochï¼ŒèƒŒè¯µè¯å…¸æ¬¡æ•°å¤šäº†ï¼Œå°±è®°ç‰¢äº†ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰å¯èƒ½èƒŒå‚»äº†ï¼ˆè¿‡æ‹Ÿåˆï¼‰&lt;/p>
&lt;/blockquote>
&lt;h2 id="25-æ¨¡å‹è®­ç»ƒ">2.5 æ¨¡å‹è®­ç»ƒ&lt;/h2>
&lt;h3 id="251-æŸå¤±å‡½æ•°">2.5.1 æŸå¤±å‡½æ•°&lt;/h3>
&lt;p>Loss Function, è¡¡é‡æ¨¡å‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯ &lt;strong>ä¸€ä¸ª&lt;/strong> æ ·æœ¬çš„ output å’ŒçœŸå®æ ‡ç­¾ï¼ˆlabelï¼‰çš„å·®å¼‚&lt;/p>
&lt;p>Cost Function, è®¡ç®—æ•´ä¸ªæ ·æœ¬é›†çš„ output å’ŒçœŸå®æ ‡ç­¾ï¼ˆlabelï¼‰çš„å·®å¼‚&lt;/p>
&lt;p>pytorch ä¸­çš„æŸå¤±å‡½æ•°ä¹Ÿæ˜¯ç»§æ‰¿äº &lt;code>nn.Module&lt;/code>&lt;/p>
&lt;h3 id="252-optimizer">2.5.2 optimizer&lt;/h3>
&lt;p>PyTorch ä¸­çš„ä¼˜åŒ–å™¨æ˜¯ç”¨äºç®¡ç†å¹¶æ›´æ–°æ¨¡å‹ä¸­ &lt;strong>å¯å­¦ä¹ å‚æ•°çš„å€¼&lt;/strong>ï¼Œä½¿å¾—æ¨¡å‹è¾“å‡ºæ›´åŠ æ¥è¿‘çœŸå®æ ‡ç­¾ã€‚&lt;/p>
&lt;h4 id="2521-å±æ€§">2.5.2.1 å±æ€§&lt;/h4>
&lt;ul>
&lt;li>defaults: ä¼˜åŒ–å™¨çš„è¶…å‚æ•°ï¼Œå¦‚ weight_decay, momentum&lt;/li>
&lt;li>state: å‚æ•°çš„ç¼“å­˜ï¼Œå¦‚ momentum ä¸­éœ€è¦ç”¨åˆ°å‰å‡ æ¬¡çš„æ¢¯åº¦ï¼Œç¼“å­˜åœ¨è¿™ä¸ªå˜é‡ä¸­&lt;/li>
&lt;li>param_groups: ç®¡ç†çš„å‚æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ª listï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯ dictï¼ŒåŒ…æ‹¬ momentum, lr, weight_decay, params&lt;/li>
&lt;li>_step_count: è®°å½•æ›´æ–°æ¬¡æ•°ï¼Œåœ¨å­¦ä¹ ç‡è°ƒæ•´ä¸­ä½¿ç”¨&lt;/li>
&lt;/ul>
&lt;h4 id="2522-optimizer-æ–¹æ³•">2.5.2.2 optimizer æ–¹æ³•&lt;/h4>
&lt;ul>
&lt;li>zero_grad(): æ¸…ç©ºæ‰€ç®¡ç†å‚æ•°çš„æ¢¯åº¦ã€‚å› ä¸º pytorch å¼ é‡çš„æ¢¯åº¦ä¸ä¼šè‡ªåŠ¨æ¸…é›¶ï¼Œå› æ­¤æ¯æ¬¡åå‘ä¼ æ’­ä¹‹åéƒ½éœ€è¦æ¸…ç©ºæ¢¯åº¦&lt;/li>
&lt;li>step(): æ‰§è¡Œä¸€æ­¥æ¢¯åº¦æ›´æ–°&lt;/li>
&lt;li>add_param_group(): æ·»åŠ å‚æ•°ç»„&lt;/li>
&lt;li>state_dict(): è·å–ä¼˜åŒ–å™¨å½“å‰çŠ¶æ€&lt;/li>
&lt;li>load_state_dict(): åŠ è½½çŠ¶æ€ä¿¡æ¯çš„ dict&lt;/li>
&lt;/ul>
&lt;h4 id="2523-learning-rate">2.5.2.3 learning rate&lt;/h4>
&lt;p>learning rate, å½±å“ loss function æ”¶æ•›çš„é‡è¦å› ç´ ï¼Œæ§åˆ¶äº†æ¢¯åº¦ä¸‹é™æ›´æ–°çš„æ­¥ä¼&lt;/p>
&lt;h2 id="26-regularization-æ­£åˆ™åŒ–">2.6 Regularization æ­£åˆ™åŒ–&lt;/h2>
&lt;p>æ­£åˆ™åŒ–æ˜¯ä¸€ç§å‡å°‘æ–¹å·®çš„ç­–ç•¥&lt;/p>
&lt;h3 id="261-weight-decay">2.6.1 weight decay&lt;/h3>
&lt;p>weight decay æ˜¯ä¼˜åŒ–å™¨ä¸­çš„ä¸€ä¸ªå‚æ•°ï¼Œåœ¨æ‰§è¡Œ &lt;code>optim_wdecay_step()&lt;/code> æ—¶ï¼Œä¼šè®¡ç®— weight decay åçš„æ¢¯åº¦&lt;/p>
&lt;h3 id="262-dropout">2.6.2 Dropout&lt;/h3>
&lt;p>ä¸€ç§æŠ‘åˆ¶è¿‡æ‹Ÿåˆçš„æ–¹æ³•ã€‚ç†è§£ä¸ºæ”¾ç¼©æ•°æ®&lt;/p>
&lt;h3 id="263-normalization">2.6.3 Normalization&lt;/h3>
&lt;p>Batch Normalization, ç»è¿‡ normalization åçš„æ•°æ®æœä» $N(0, 1)$ åˆ†å¸ƒï¼Œæœ‰å¦‚ä¸‹ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥ä½¿ç”¨æ›´å¤§çš„ lrï¼ŒåŠ é€Ÿæ¨¡å‹æ”¶æ•›&lt;/li>
&lt;li>å¯ä»¥ä¸ç”¨ç²¾å¿ƒè®¾è®¡ weight åˆå§‹åŒ–&lt;/li>
&lt;li>å¯ä»¥ä¸ç”¨ dropout æˆ–è€…è¾ƒå°çš„ dropout&lt;/li>
&lt;li>å¯ä»¥ä¸ç”¨ L2 æˆ–è€…è¾ƒå°çš„ weight decay&lt;/li>
&lt;li>å¯ä»¥ä¸ç”¨ LRN (Local Response Normalization)&lt;/li>
&lt;/ul>
&lt;h2 id="27-model-ç›¸å…³çš„æ“ä½œ">2.7 Model ç›¸å…³çš„æ“ä½œ&lt;/h2>
&lt;h3 id="271-torchsave">2.7.1 torch.save&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>torch&lt;span style="color:#f92672">.&lt;/span>save(obj, f, pickle_module, pickle_protocol&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>, _use_new_zipfile_serialization&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>obj æ˜¯ä¿å­˜çš„å¯¹è±¡ï¼Œf æ˜¯è¾“å‡ºè·¯å¾„ã€‚è¿˜æœ‰ 2 ç§æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>ä¿å­˜æ•´ä¸ª Module, &lt;code>torch.savev(net, path)&lt;/code> è¿™ç§æ–¹æ³•æ¯”è¾ƒè€—æ—¶ï¼Œä¿å­˜çš„æ–‡ä»¶æ¯”è¾ƒå¤§&lt;/li>
&lt;li>åªä¿å­˜æ¨¡å‹çš„å‚æ•°ï¼Œ&lt;code>torch.savev(state_sict, path)&lt;/code>ï¼Œæ¨èï¼Œä¿å­˜çš„æ–‡ä»¶æ¯”è¾ƒå°&lt;/li>
&lt;/ul>
&lt;h3 id="272-torchload">2.7.2 torch.load&lt;/h3>
&lt;p>å¯¹åº”äº save&lt;/p>
&lt;h3 id="273-fine-tuning">2.7.3 Fine-tuning&lt;/h3>
&lt;p>ä¸€ç§è¿ç§»å­¦ä¹ çš„æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨äººè„¸è¯†åˆ«åº”ç”¨ä¸­ï¼ŒImageNet ä½œä¸º source domainï¼Œäººè„¸æ•°æ®ä½œä¸º target domainã€‚é€šå¸¸ source domain æ¯” target domain å¤§å¾ˆå¤šï¼Œå¯ä»¥åˆ©ç”¨ ImageNet è®­ç»ƒå¥½çš„ç½‘ç»œåº”ç”¨åˆ°äººè„¸è¯†åˆ«ä¸­ã€‚&lt;/p>
&lt;p>&lt;strong>ç†è§£&lt;/strong>
å¯¹äºä¸€ä¸ªæ¨¡å‹ï¼Œå¯ä»¥åˆ†ä¸ºæµç¨‹åœ¨å‰é¢çš„ feature extractor ï¼ˆconv å±‚ï¼‰ å’Œåé¢çš„ classifierã€‚fine-tune é€šå¸¸ä¸æ”¹å˜ feature extractor çš„ weightï¼Œä¹Ÿå°±æ˜¯å†»ç»“ conv å±‚ï¼›æ”¹å˜æœ€åä¸€ä¸ª fc layer çš„è¾“å‡ºæ¥é€‚åº”ç›®æ ‡ä»»åŠ¡ï¼Œè®­ç»ƒåé¢ classifier çš„ weightã€‚&lt;/p>
&lt;p>é€šå¸¸ target domain çš„æ•°æ®æ¯”è¾ƒå°ï¼Œä¸è¶³ä»¥è®­ç»ƒå…¨éƒ¨å‚æ•°ï¼Œå®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆï¼Œå› æ­¤ä¸æ”¹å˜ feature extractor çš„ weightã€‚&lt;/p>
&lt;p>&lt;strong>Step&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>è·å– pre-trained model å‚æ•°&lt;/li>
&lt;li>&lt;code>load_state_dict()&lt;/code> æŠŠå‚æ•°åŠ è½½åˆ°æ¨¡å‹ä¸­&lt;/li>
&lt;li>ä¿®æ”¹è¾“å‡ºå±‚&lt;/li>
&lt;li>å›ºå®š feature extractor çš„å‚æ•°ï¼Œé€šå¸¸æœ‰ 2 ç§åšæ³•
&lt;ul>
&lt;li>å›ºå®š conv å±‚çš„é¢„è®­ç»ƒå‚æ•°ã€‚å¯ä»¥è®¾ç½® &lt;code>requires_grad = False&lt;/code> æˆ–è€… &lt;code>lr = 0&lt;/code>&lt;/li>
&lt;li>é€šè¿‡ &lt;code>params_group&lt;/code> ç»™ feature extractor è®¾ç½®ä¸€ä¸ªè¾ƒå°çš„ lr&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="28-function">2.8 Function&lt;/h2>
&lt;h3 id="281-torchtopk">2.8.1 torch.topk()&lt;/h3>
&lt;p>&lt;strong>ä½œç”¨ï¼š&lt;/strong> å–ä¸€ä¸ª tensor çš„ topk å…ƒç´ ï¼ˆé™åºåçš„å‰ k ä¸ªå¤§å°çš„å…ƒç´ å€¼åŠç´¢å¼•ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>K &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>numel(data) &lt;span style="color:#f92672">//&lt;/span> data&lt;span style="color:#f92672">.&lt;/span>shape[&lt;span style="color:#ae81ff">0&lt;/span>] &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span> &lt;span style="color:#f92672">//&lt;/span> &lt;span style="color:#ae81ff">256&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _, index &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>topk(data&lt;span style="color:#f92672">.&lt;/span>abs(), K, dim &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, largest &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">True&lt;/span>, sorted &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="282-torchnumel">2.8.2 torch.numel&lt;/h3>
&lt;p>è¿”å› tensor ä¸­çš„å…ƒç´ æ€»æ•°é‡&lt;/p>
&lt;h1 id="3-pytorch-åˆ†å¸ƒå¼è®­ç»ƒ">3. pytorch åˆ†å¸ƒå¼è®­ç»ƒ&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>dist&lt;span style="color:#f92672">.&lt;/span>init_process_group(backend&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;nccl&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># backendæ˜¯åå°åˆ©ç”¨ncclè¿›è¡Œé€šä¿¡&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è°ƒè¯•æ—¶æŠ¥é”™ï¼Œå¦‚ä½•åœ¨è°ƒè¯•åˆ†å¸ƒå¼è®­ç»ƒçš„æ¨¡å‹&lt;/p>
&lt;h2 id="31-debug-åˆ†å¸ƒå¼è®­ç»ƒçš„æ¨¡å‹">3.1 debug åˆ†å¸ƒå¼è®­ç»ƒçš„æ¨¡å‹&lt;/h2>
&lt;p>ä¿®æ”¹ python &lt;code>launch.json&lt;/code> æ–‡ä»¶ï¼ŒæŠŠ program æ¢æˆ torch.distribution çš„ launch.py&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">//&lt;/span> Use IntelliSense to learn about possible attributes&lt;span style="color:#f92672">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">//&lt;/span> Hover to view descriptions of existing attributes&lt;span style="color:#f92672">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">//&lt;/span> For more information, visit: https:&lt;span style="color:#f92672">//&lt;/span>go&lt;span style="color:#f92672">.&lt;/span>microsoft&lt;span style="color:#f92672">.&lt;/span>com&lt;span style="color:#f92672">/&lt;/span>fwlink&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">?&lt;/span>linkid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">830387&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;version&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;0.2.0&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;configurations&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Python: Current File&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;python&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;request&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;launch&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;program&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;/nvme/wmhu/anaconda3/envs/ant/lib/python3.8/site-packages/torch/distributed/launch.py&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;console&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;integratedTerminal&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;justMyCode&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;args&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--nproc_per_node=1&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;/nvme/wmhu/work/ANT/ImageNet/main.py&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--dataset=imagenet&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--model=vit_b_16&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--dataset_path=/nvme/imagenet&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--epoch=4&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--mode=int&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--wbit=4&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--abit=4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;env&amp;#34;&lt;/span>:{&lt;span style="color:#e6db74">&amp;#34;CUDA_VISIBLE_DIVICES&amp;#34;&lt;/span>:&lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ &lt;code>nproc_per_node&lt;/code> æ˜¯ Python è‡ªå¸¦çš„å‚æ•°ï¼Œå› æ­¤å¯ä»¥å†™åˆ°é‡Œé¢ï¼Œå¯¹äº &lt;code>--dataset=imagenet&lt;/code> ä¼šæœ‰æŠ¥é”™ã€‚&lt;/p>
&lt;p>&lt;code>--dataset=imagenet&lt;/code> è¦æ”¾åˆ° &lt;code>main.py&lt;/code> çš„åé¢ï¼Œè¿™ä¸ªæ–¹æ³•ç›¸å½“äºç”¨è°ƒæ•´å‚æ•°çš„å½¢å¼æ¥è¾¾åˆ°ç›®çš„ã€‚ä¸å¤ªæœ‰é€šç”¨æ€§ï¼Œç›¸å½“äºä¸“é—¨æ”¹äº†ä¸€ä¸ª &lt;code>launch.json&lt;/code> æ–‡ä»¶ã€‚&lt;/p>
&lt;h2 id="32-å‡ ç§å¹¶è¡Œçš„æ–¹å¼">3.2 å‡ ç§å¹¶è¡Œçš„æ–¹å¼&lt;/h2>
&lt;p>è½¬è½½è‡ª &lt;a href="https://zhuanlan.zhihu.com/p/430383324">https://zhuanlan.zhihu.com/p/430383324&lt;/a>&lt;/p>
&lt;h3 id="321-data-parallelism">3.2.1 Data Parallelism&lt;/h3>
&lt;p>æ¨¡å‹åœ¨forwardå’Œbackwardçš„ä¸­é—´è®¡ç®—è¿‡ç¨‹éƒ½ä¼šæœ‰ä¸­é—´çŠ¶æ€ï¼Œè¿™äº›ä¸­é—´çŠ¶æ€é€šå¸¸å ç”¨çš„ç©ºé—´æ˜¯å’Œbatch sizeæˆæ­£æ¯”çš„ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¹Ÿå°±æ˜¯æ¢¯åº¦ç­‰ä¿¡æ¯å§&lt;/p>
&lt;/blockquote>
&lt;p>æ–¹æ³•æ˜¯å°†å¤§çš„ batch size åˆ‡åˆ†éƒ½å¤šä¸ª GPU ä¸Šï¼›ä¸è¿‡è¿™ç§æ–¹å¼ä¸»è¦åˆ‡åˆ†çš„æ˜¯ batch size æ­£æ¯”çš„éƒ¨åˆ†ä¸­é—´çŠ¶æ€ã€‚ä½†æ˜¯å¯¹äºparameter, optimizer stateç­‰batch sizeæ— å…³çš„ç©ºé—´å¼€é”€æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;strong>ä»€ä¹ˆæ˜¯ parameterï¼Ÿ&lt;/strong>&lt;/p>
&lt;p>parameter: æ¨¡å‹å¯ä»¥æ ¹æ®æ•°æ®å¯ä»¥è‡ªåŠ¨å­¦ä¹ å‡ºçš„å˜é‡ï¼Œåº”è¯¥å°±æ˜¯å‚æ•°ã€‚æ¯”å¦‚ï¼Œæ·±åº¦å­¦ä¹ çš„æƒé‡ï¼Œåå·®ç­‰&lt;/p>
&lt;p>hyperparameter: å°±æ˜¯ç”¨æ¥ç¡®å®šæ¨¡å‹çš„ä¸€äº›å‚æ•°ï¼Œè¶…å‚æ•°ä¸åŒï¼Œæ¨¡å‹æ˜¯ä¸åŒçš„(è¿™ä¸ªæ¨¡å‹ä¸åŒçš„æ„æ€å°±æ˜¯æœ‰å¾®å°çš„åŒºåˆ«ï¼Œæ¯”å¦‚å‡è®¾éƒ½æ˜¯CNNæ¨¡å‹ï¼Œå¦‚æœå±‚æ•°ä¸åŒï¼Œæ¨¡å‹ä¸ä¸€æ ·ï¼Œè™½ç„¶éƒ½æ˜¯CNNæ¨¡å‹å“ˆã€‚)ï¼Œè¶…å‚æ•°ä¸€èˆ¬å°±æ˜¯æ ¹æ®ç»éªŒç¡®å®šçš„å˜é‡ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œè¶…å‚æ•°æœ‰ï¼š&lt;strong>å­¦ä¹ é€Ÿç‡ï¼Œè¿­ä»£æ¬¡æ•°ï¼Œå±‚æ•°ï¼Œæ¯å±‚ç¥ç»å…ƒçš„ä¸ªæ•°&lt;/strong> ç­‰ç­‰ã€‚&lt;/p>
&lt;h3 id="322-model-parallelism">3.2.2 Model Parallelism&lt;/h3>
&lt;p>æŠŠæ¨¡å‹æœ¬èº«è¿›è¡Œåˆ‡åˆ†ï¼Œä½¿å¾—æ¯ä¸ª GPU å¡åªéœ€è¦å­˜å‚¨æ¨¡å‹çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>MPåœ¨ä¸€äº›åº”ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚ä¸Šé¢è¯´çš„ResNetä¾‹å­ï¼‰åœ¨è®¡ç®—ä¸€ä¸ªminibatchæ—¶ï¼Œç¡¬ä»¶æ˜¯ä¾æ¬¡æ¿€æ´»çš„ï¼Œå…¶ä»–ç¡¬ä»¶éƒ½åœ¨ç­‰å¾…ï¼Œç¡¬ä»¶çš„åˆ©ç”¨ç‡ä¼šéå¸¸çš„ä½ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ç®€å•åœ°è¯´ï¼Œå°±æ˜¯å¹¶è¡Œæ¯”è¾ƒå·®&lt;/p>
&lt;/blockquote>
&lt;h3 id="323-pipeline-parallelism">3.2.3 Pipeline Parallelism&lt;/h3>
&lt;p>å‰é¢æåˆ°äº†MPä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯GPUåˆ©ç”¨ç‡ä½ã€‚å½“æ²¡æœ‰è®¡ç®—åˆ°æŸä¸ªGPUä¸Šçš„æ¨¡å‹åˆ†ç‰‡æ—¶ï¼Œè¿™ä¸ªGPUå¸¸å¸¸æ˜¯é—²ç€çš„ã€‚PPä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>PPçš„æ€æƒ³ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨äº†ç»å…¸çš„Pipelineæ€æƒ³ã€‚åœ¨æ¨¡å‹è®¡ç®—æµæ°´çº¿ä¸Šï¼Œæ¯ä¸ªGPUåªè´Ÿè´£æ¨¡å‹çš„ä¸€ä¸ªåˆ†ç‰‡ï¼Œè®¡ç®—å®Œå°±äº¤ç»™ä¸‹ä¸€ä¸ªGPUå®Œæˆä¸‹ä¸€ä¸ªæ¨¡å‹åˆ†ç‰‡çš„è®¡ç®—ã€‚å½“ä¸‹ä¸ªGPUåœ¨è®¡ç®—æ—¶ï¼Œä¸Šä¸€ä¸ªGPUå¼€å§‹ç®—ä¸‹ä¸€ä¸ªminibatchå±äºå®ƒçš„æ¨¡å‹åˆ†ç‰‡ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ç»å…¸çš„æµæ°´çº¿è®¾è®¡æ€æƒ³&lt;/p>
&lt;/blockquote>
&lt;h1 id="4-hook">4. Hook&lt;/h1>
&lt;p>è¿™ä¸ªåŠŸèƒ½è¢«å¹¿æ³›ç”¨äºå¯è§†åŒ–ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„ featureã€gradientï¼Œä»è€Œè¯Šæ–­ç¥ç»ç½‘ç»œä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œåˆ†æç½‘ç»œæœ‰æ•ˆæ€§ã€‚&lt;/p>
&lt;p>è§†é¢‘ï¼šhttps://www.youtube.com/watch?v=syLFCVYua6Q&lt;/p>
&lt;p>pytorch è®¡ç®—å›¾ä¼¼ä¹åªä¼šä¿ç•™å¶å­èŠ‚ç‚¹çš„æ¢¯åº¦ï¼Œèˆå¼ƒä¸­é—´çš„æ¢¯åº¦&lt;/p>
&lt;blockquote>
&lt;p>ç®€è€Œè¨€ä¹‹ï¼Œregister_hookçš„ä½œç”¨æ˜¯ï¼Œåå‘ä¼ æ’­æ—¶ï¼Œé™¤äº†å®ŒæˆåŸæœ‰çš„åä¼ ï¼Œé¢å¤–å¤šå®Œæˆä¸€äº›ä»»åŠ¡ã€‚ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸­é—´å˜é‡çš„hookï¼Œå°†å®ƒçš„gradå€¼æ‰“å°å‡ºæ¥ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨å±€åˆ—è¡¨ï¼Œå°†æ¯æ¬¡çš„gradå€¼æ·»åŠ åˆ°é‡Œé¢å»ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»€ä¹ˆæ˜¯ä¸­é—´å˜é‡ï¼šæœ‰çš„åšå®¢é‡Œæœ‰æåˆ°ï¼Œä¼¼ä¹æ˜¯æ²¡æœ‰ç›´æ¥æŒ‡å®šæ•°å€¼ï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°çš„å˜é‡ã€‚æ¯”å¦‚ä¸‹é¢çš„ z å°±æ˜¯ä¸­é—´å˜é‡ã€‚z çš„æ¢¯åº¦æ˜¯ä¸ä¼šä¿å­˜çš„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>x &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([&lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>])&lt;span style="color:#f92672">.&lt;/span>requires_grad_()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>y &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#ae81ff">6&lt;/span>, &lt;span style="color:#ae81ff">7&lt;/span>])&lt;span style="color:#f92672">.&lt;/span>requires_grad_()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>z &lt;span style="color:#f92672">=&lt;/span> x &lt;span style="color:#f92672">+&lt;/span> y &lt;span style="color:#75715e"># ä¸­é—´å˜é‡&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>output &lt;span style="color:#f92672">=&lt;/span> model(input)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ­¤æ—¶ä¼šåšå‡ ä»¶äº‹ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨ forward æ–¹æ³•è®¡ç®—ç»“æœï¼Œä¸€ä¸ªæ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰æ³¨å†Œ forward_hookï¼Œæœ‰çš„è¯å°±å°† forward çš„è¾“å…¥åŠç»“æœä½œä¸º hook çš„å®å‚&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="41-register_hook">4.1 register_hook&lt;/h2>
&lt;p>&lt;code>z.register_hook(hook_fn)&lt;/code>ï¼Œè¿™ä¸ª hook_fn æ˜¯ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œè¿”å› Tensor ï¼ˆå¦‚æœéœ€è¦å¯¹ grad è¿›è¡Œä¿®æ”¹ï¼‰æˆ–è€… Noneï¼ˆç”¨äºç›´æ¥æ‰“å°ï¼Œä¸ä¿®æ”¹ï¼‰ï¼Œæ‰€ä»¥ç›´æ¥ç”¨ lambda å‡½æ•°å³å¯ï¼Œ&lt;code>z.register_hook(lambda grad: print(grad))&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>ä¸ªäººç†è§£ä¸‹æ¥ï¼Œregister_hook å¯ä»¥å®ç°ä¿ç•™ä¸­é—´å˜é‡æ¢¯åº¦çš„åŠŸèƒ½ï¼Œè€Œä¸”ä¸åƒ &lt;code>retain_grad&lt;/code> é‚£æ ·ä¼šå¸¦æ¥å¾ˆå¤§çš„å¼€é”€&lt;/p>
&lt;/blockquote>
&lt;h3 id="411-register_forward_hook">4.1.1 register_forward_hook&lt;/h3>
&lt;p>&lt;strong>ä½œç”¨&lt;/strong>ï¼šè·å–ä¸­é—´å±‚çš„ feature map&lt;/p>
&lt;p>é€šå¸¸ï¼Œpytorch åªæä¾›äº†ç½‘ç»œæ•´ä½“çš„è¾“å…¥å’Œè¾“å‡ºï¼Œå¯¹äºå¤¹åœ¨ç½‘ç»œä¸­é—´çš„æ¨¡å—ï¼Œå¾ˆéš¾è·å¾—ä»–çš„è¾“å…¥è¾“å‡ºã€‚é™¤éè®¾è®¡ç½‘ç»œæ—¶ï¼Œåœ¨ forward å‡½æ•°çš„è¿”å›å€¼ä¸­åŒ…å«ä¸­é—´ module çš„è¾“å‡ºã€‚æ€»è€Œè¨€ä¹‹åˆ«çš„æ–¹æ³•éƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œpytorch è®¾è®¡å¥½äº† register_forward_hook å’Œ register_backward_hookã€‚&lt;/p>
&lt;p>ç›¸æ¯”é’ˆå¯¹ tensor çš„ register_hookï¼Œè¿™ä¸ª forward hook æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½æ”¹å˜è¾“å…¥ï¼Œåªèƒ½æ‰“å°ã€‚&lt;/p>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼Œåœ¨ forward hook ä¸­ï¼Œinput æ˜¯ xï¼Œè€Œä¸åŒ…æ‹¬ W å’Œ bã€‚&lt;/p>
&lt;p>ä»£ç å®ä¾‹ï¼Œè®²çš„éå¸¸æ¸…æ™°ï¼Œæ¥è‡ª&lt;a href="https://cloud.tencent.com/developer/article/1475430">åšå®¢&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>Class Model(nn&lt;span style="color:#f92672">.&lt;/span>Module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">forward&lt;/span>(self, x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨ä¸­é—´å±‚çš„ feature&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total_feature_out &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total_feature_in &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> Model()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®šä¹‰ forward hook function&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">hook_fn_forward&lt;/span>(module, input, output):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(module) &lt;span style="color:#75715e"># ç”¨äºåŒºåˆ†æ¨¡å—&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;input&amp;#39;&lt;/span>, input) &lt;span style="color:#75715e"># é¦–å…ˆæ‰“å°å‡ºæ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;output&amp;#39;&lt;/span>, output)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total_feature_out&lt;span style="color:#f92672">.&lt;/span>append(output) &lt;span style="color:#75715e"># ç„¶ååˆ†åˆ«å­˜å…¥å…¨å±€ list ä¸­&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total_feature_in&lt;span style="color:#f92672">.&lt;/span>append(input)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç»™æ¯ä¸ª module éƒ½è£…ä¸Š hook&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> name, module &lt;span style="color:#f92672">in&lt;/span> model&lt;span style="color:#f92672">.&lt;/span>named_children():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module&lt;span style="color:#f92672">.&lt;/span>register_forward_hook(hook_fn_forward)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å‰å‘ä¼ æ’­å’Œå›ä¼ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([[&lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">1.0&lt;/span>]])&lt;span style="color:#f92672">.&lt;/span>requires_grad_()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>o &lt;span style="color:#f92672">=&lt;/span> model(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>o&lt;span style="color:#f92672">.&lt;/span>backward()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(&lt;span style="color:#e6db74">&amp;#39;==========Saved inputs and outputs==========&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> idx &lt;span style="color:#f92672">in&lt;/span> range(len(total_feature_in)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;input: &amp;#39;&lt;/span>, total_feature_out[idx])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;output: &amp;#39;&lt;/span>, total_feature_out[idx])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="412-register_backward_hook">4.1.2 register_backward_hook()&lt;/h3>
&lt;h4 id="4121-ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹">4.1.2.1 ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹&lt;/h4>
&lt;p>&lt;strong>ä½œç”¨&lt;/strong>ï¼šç”¨äºè·å–æ¢¯åº¦&lt;/p>
&lt;p>&lt;strong>ä½¿ç”¨&lt;/strong>ï¼š&lt;code>module.register_backward_hook(hook_fn)&lt;/code>, &lt;code>hook_fn(module, grad_input, grad_output) -&amp;gt; Tensor or None&lt;/code>&lt;/p>
&lt;p>å¦‚æœæœ‰å¤šä¸ªè¾“å…¥æˆ–è€…è¾“å‡ºï¼Œgrad_input, grad_output å¯ä»¥æ˜¯ tuple ç±»å‹ã€‚æ¯”å¦‚å¯¹äºçº¿æ€§æ¨¡å—ï¼Œgrad_input æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ï¼Œåˆ†åˆ«æ˜¯ $g_{bias}$, $g_x$, $g_W$ï¼Œå¯¹ bias çš„å¯¼æ•°ï¼Œå¯¹ x çš„å¯¼æ•°ä»¥åŠå¯¹ weight çš„å¯¼æ•°ã€‚&lt;/p>
&lt;p>ç›´æ¥çœ‹ä»£ç ï¼Œè¿™ä¸ªä»£ç æ˜¯å¯ä»¥ç›´æ¥è·‘çš„ï¼Œä¸å¾—ä¸è¯´å†™çš„ç¡®å®å¾ˆå¥½ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> torch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> torch &lt;span style="color:#f92672">import&lt;/span> nn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Model&lt;/span>(nn&lt;span style="color:#f92672">.&lt;/span>Module):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> __init__(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> super(Model, self)&lt;span style="color:#f92672">.&lt;/span>__init__()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc1 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Linear(&lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>relu1 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>ReLU()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc2 &lt;span style="color:#f92672">=&lt;/span> nn&lt;span style="color:#f92672">.&lt;/span>Linear(&lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>initialize()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">initialize&lt;/span>(self):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>no_grad():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc1&lt;span style="color:#f92672">.&lt;/span>weight &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>nn&lt;span style="color:#f92672">.&lt;/span>Parameter(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([[&lt;span style="color:#ae81ff">1.&lt;/span>, &lt;span style="color:#ae81ff">2.&lt;/span>, &lt;span style="color:#ae81ff">3.&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">4.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">5.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">6.&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#ae81ff">7.&lt;/span>, &lt;span style="color:#ae81ff">8.&lt;/span>, &lt;span style="color:#ae81ff">9.&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">10.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">11.&lt;/span>, &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">12.&lt;/span>]]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc1&lt;span style="color:#f92672">.&lt;/span>bias &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>nn&lt;span style="color:#f92672">.&lt;/span>Parameter(torch&lt;span style="color:#f92672">.&lt;/span>Tensor([&lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">2.0&lt;/span>, &lt;span style="color:#ae81ff">3.0&lt;/span>, &lt;span style="color:#ae81ff">4.0&lt;/span>]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc2&lt;span style="color:#f92672">.&lt;/span>weight &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>nn&lt;span style="color:#f92672">.&lt;/span>Parameter(torch&lt;span style="color:#f92672">.&lt;/span>Tensor([[&lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">2.0&lt;/span>, &lt;span style="color:#ae81ff">3.0&lt;/span>, &lt;span style="color:#ae81ff">4.0&lt;/span>]]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>fc2&lt;span style="color:#f92672">.&lt;/span>bias &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>nn&lt;span style="color:#f92672">.&lt;/span>Parameter(torch&lt;span style="color:#f92672">.&lt;/span>Tensor([&lt;span style="color:#ae81ff">1.0&lt;/span>]))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">forward&lt;/span>(self, x):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> o &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>fc1(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> o &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>relu1(o)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> o &lt;span style="color:#f92672">=&lt;/span> self&lt;span style="color:#f92672">.&lt;/span>fc2(o)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> o
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨ä¸­é—´å±‚çš„ feature&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total_grad_out &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total_grad_in &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> Model()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®šä¹‰ forward hook function&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">hook_fn_backward&lt;/span>(module, grad_input, grad_output):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(module) &lt;span style="color:#75715e"># ç”¨äºåŒºåˆ†æ¨¡å—&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ä¸ºäº†ç¬¦åˆåå‘ä¼ æ’­é¡ºåºï¼Œå…ˆæ‰“å° grad_output&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;grad_output&amp;#39;&lt;/span>, grad_output)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;grad_input&amp;#39;&lt;/span>, grad_input)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total_grad_out&lt;span style="color:#f92672">.&lt;/span>append(grad_output)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total_grad_in&lt;span style="color:#f92672">.&lt;/span>append(grad_input)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç»™æ¯ä¸ª module éƒ½è£…ä¸Š hook&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> name, module &lt;span style="color:#f92672">in&lt;/span> model&lt;span style="color:#f92672">.&lt;/span>named_children():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module&lt;span style="color:#f92672">.&lt;/span>register_backward_hook(hook_fn_backward)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å‰å‘ä¼ æ’­å’Œå›ä¼ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¿™é‡Œçš„ requires_grad å¾ˆé‡è¦ï¼Œå¦‚æœä¸åŠ ï¼Œbackward hook&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ‰§è¡Œåˆ°ç¬¬ä¸€å±‚ï¼Œå¯¹ x çš„å¯¼æ•°å°†ä¸º Noneï¼ŒæŸè‹±æ–‡åšå®¢ä½œè€…è¿™é‡Œç–å¿½äº†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ­¤å¤–å†å¼ºè°ƒä¸€é x çš„ç»´åº¦ï¼Œä¸€å®šä¸èƒ½å†™æˆ torch.Tensor([1.0, 1.0, 1.0]).requires_grad_()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¦åˆ™ backward hook ä¼šå‡ºé—®é¢˜ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>x &lt;span style="color:#f92672">=&lt;/span> torch&lt;span style="color:#f92672">.&lt;/span>Tensor([[&lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">1.0&lt;/span>]])&lt;span style="color:#f92672">.&lt;/span>requires_grad_()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>o &lt;span style="color:#f92672">=&lt;/span> model(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>o&lt;span style="color:#f92672">.&lt;/span>backward()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(&lt;span style="color:#e6db74">&amp;#39;==========Saved inputs and outputs==========&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> idx &lt;span style="color:#f92672">in&lt;/span> range(len(total_grad_in)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;input: &amp;#39;&lt;/span>, total_grad_in[idx])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#39;output: &amp;#39;&lt;/span>, total_grad_out[idx])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼Œä½œè€…æåˆ°â€œregister_backward_hookåªèƒ½æ“ä½œç®€å•æ¨¡å—ï¼Œè€Œä¸èƒ½æ“ä½œåŒ…å«å¤šä¸ªå­æ¨¡å—çš„å¤æ‚æ¨¡å—ã€‚å¦‚æœå¯¹å¤æ‚æ¨¡å—ç”¨äº† backward hookï¼Œé‚£ä¹ˆæˆ‘ä»¬åªèƒ½å¾—åˆ°è¯¥æ¨¡å—æœ€åä¸€æ¬¡ç®€å•æ“ä½œçš„æ¢¯åº¦ä¿¡æ¯ã€‚â€ä¸å¤ªç¡®å®šä»€ä¹ˆæ˜¯ç®€å•æ¨¡å—ï¼Œä¸å¤ªç¡®å®šè¯¸å¦‚ resnet18 è¿™æ ·çš„ç½‘ç»œæ˜¯ä¸æ˜¯ç®€å•æ¨¡å—ã€‚&lt;/p>
&lt;p>2022-08-06 23:14:22ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥æ˜¯æƒ³è¯´ï¼Œç”¨ for loop éå† model.named_children() æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦åˆ™ç›´æ¥ &lt;code>model = Model()model.register_backward_hook(hook_fn_backward)&lt;/code> ä¼šæœ‰é—®é¢˜ã€‚&lt;/p>
&lt;h4 id="4122-æ³¨æ„äº‹é¡¹">4.1.2.2 æ³¨æ„äº‹é¡¹&lt;/h4>
&lt;p>&lt;strong>å½¢çŠ¶&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨å·ç§¯å±‚ä¸­ï¼Œweight çš„æ¢¯åº¦å’Œ weight çš„å½¢çŠ¶ç›¸åŒ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å…¨è¿æ¥å±‚ä¸­ï¼Œweight çš„æ¢¯åº¦çš„å½¢çŠ¶æ˜¯ weight å½¢çŠ¶çš„è½¬ç§©ï¼ˆè§‚å¯Ÿä¸Šæ–‡ä¸­ä»£ç çš„è¾“å‡ºå¯ä»¥éªŒè¯ï¼‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>grad_input tuple ä¸­å„æ¢¯åº¦çš„é¡ºåº&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨å·ç§¯å±‚ä¸­ï¼Œbias çš„æ¢¯åº¦ä½äºtuple çš„æœ«å°¾ï¼šgrad_input = (å¯¹featureçš„å¯¼æ•°ï¼Œå¯¹æƒé‡ W çš„å¯¼æ•°ï¼Œå¯¹ bias çš„å¯¼æ•°)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å…¨è¿æ¥å±‚ä¸­ï¼Œbias çš„æ¢¯åº¦ä½äº tuple çš„å¼€å¤´ï¼šgrad_input=(å¯¹ bias çš„å¯¼æ•°ï¼Œå¯¹ feature çš„å¯¼æ•°ï¼Œå¯¹ W çš„å¯¼æ•°)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å½“ batchsize &amp;gt; 1 æ—¶ï¼Œå¯¹ bias çš„æ¢¯åº¦å¤„ç†ä¸åŒ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨å·ç§¯å±‚ï¼Œå¯¹ bias çš„æ¢¯åº¦ä¸ºæ•´ä¸ª batch çš„æ•°æ®åœ¨ bias ä¸Šçš„æ¢¯åº¦ä¹‹å’Œï¼šgrad_input = (å¯¹featureçš„å¯¼æ•°ï¼Œå¯¹æƒé‡ W çš„å¯¼æ•°ï¼Œå¯¹ bias çš„å¯¼æ•°)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å…¨è¿æ¥å±‚ï¼Œå¯¹ bias çš„æ¢¯åº¦æ˜¯åˆ†å¼€çš„ï¼Œbach ä¸­æ¯æ¡æ•°æ®ï¼Œå¯¹åº”ä¸€ä¸ª bias çš„æ¢¯åº¦ï¼šgrad_input = ((data1 å¯¹ bias çš„å¯¼æ•°ï¼Œdata2 å¯¹ bias çš„å¯¼æ•° &amp;hellip;)ï¼Œå¯¹ feature çš„å¯¼æ•°ï¼Œå¯¹ W çš„å¯¼æ•°)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="misc">Misc&lt;/h1>
&lt;p>@classmethod ç”¨æ³•&lt;/p>
&lt;p>æƒ³ç»™åˆå§‹ç±»å†æ–°æ·»åŠŸèƒ½ï¼Œä¸éœ€è¦æ”¹åˆå§‹ç±»ï¼Œåªè¦åœ¨ä¸‹ä¸€ä¸ªç±»å†…éƒ¨æ–°å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ç”¨@classmethodè£…é¥°ä¸€ä¸‹å³å¯ã€‚ã€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@classmethod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">convert_sync_batchnorm&lt;/span>(cls, module, process_group&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>):
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="5-autodiff">5. AutoDiff&lt;/h1>
&lt;blockquote>
&lt;p>æ·±åº¦å­¦ä¹ æ¡†æ¶é€šè¿‡è‡ªåŠ¨è®¡ç®—å¯¼æ•°ï¼Œå³è‡ªåŠ¨å¾®åˆ†ï¼ˆautomatic differentiationï¼‰æ¥åŠ å¿«æ±‚å¯¼ã€‚ å®é™…ä¸­ï¼Œæ ¹æ®æˆ‘ä»¬è®¾è®¡çš„æ¨¡å‹ï¼Œç³»ç»Ÿä¼šæ„å»ºä¸€ä¸ªè®¡ç®—å›¾ï¼ˆcomputational graphï¼‰ï¼Œ æ¥è·Ÿè¸ªè®¡ç®—æ˜¯å“ªäº›æ•°æ®é€šè¿‡å“ªäº›æ“ä½œç»„åˆèµ·æ¥äº§ç”Ÿè¾“å‡ºã€‚ è‡ªåŠ¨å¾®åˆ†ä½¿ç³»ç»Ÿèƒ½å¤Ÿéšååå‘ä¼ æ’­æ¢¯åº¦ã€‚ è¿™é‡Œï¼Œåå‘ä¼ æ’­ï¼ˆbackpropagateï¼‰æ„å‘³ç€è·Ÿè¸ªæ•´ä¸ªè®¡ç®—å›¾ï¼Œå¡«å……å…³äºæ¯ä¸ªå‚æ•°çš„åå¯¼æ•°ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>by &lt;a href="https://zh-v2.d2l.ai/chapter_preliminaries/autograd.html">https://zh-v2.d2l.ai/chapter_preliminaries/autograd.html&lt;/a>&lt;/p>
&lt;h1 id="6-åªä½¿ç”¨ä¸€ä¸ª-gpu">6. åªä½¿ç”¨ä¸€ä¸ª GPU&lt;/h1>
&lt;h2 id="61-æ–‡ä»¶ä¸­">6.1 æ–‡ä»¶ä¸­&lt;/h2>
&lt;p>æ³¨æ„è¿™ä¸ªå¿…é¡»æ”¾åœ¨ &lt;del>&lt;code>import torch&lt;/code> ä¹‹å‰&lt;/del> æ”¾åœ¨æ‰€æœ‰è®¿é—®GPUçš„ä»£ç ä¹‹å‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>os&lt;span style="color:#f92672">.&lt;/span>environ[&lt;span style="color:#e6db74">&amp;#39;CUDA_VISIBLE_DEVICES&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="é—®é¢˜">é—®é¢˜&lt;/h1>
&lt;ul>
&lt;li>Debug çš„æ—¶å€™æ€ä¹ˆçœ‹ tensor å˜é‡çš„å‚æ•°ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/265394674">https://zhuanlan.zhihu.com/p/265394674&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://pytorch-cn.readthedocs.io/zh/latest/package_references/torch-nn/">https://pytorch-cn.readthedocs.io/zh/latest/package_references/torch-nn/&lt;/a> pytorch ä¸­æ–‡æ–‡æ¡£&lt;/p>
&lt;p>&lt;a href="https://cloud.tencent.com/developer/article/1475430#">https://cloud.tencent.com/developer/article/1475430#&lt;/a>&lt;/p></description></item><item><title>å›½å†…ç¡•åšå¦‚ä½•æå‡è‡ªå·±çš„è‹±è¯­</title><link>https://huweim.github.io/post/%E5%8D%9A%E5%AE%A2_%E5%9B%BD%E5%86%85%E5%8D%9A%E5%A3%AB%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E8%87%AA%E5%B7%B1%E7%9A%84%E8%8B%B1%E8%AF%AD/</link><pubDate>Sat, 16 Jul 2022 16:39:35 +0800</pubDate><guid>https://huweim.github.io/post/%E5%8D%9A%E5%AE%A2_%E5%9B%BD%E5%86%85%E5%8D%9A%E5%A3%AB%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E8%87%AA%E5%B7%B1%E7%9A%84%E8%8B%B1%E8%AF%AD/</guid><description>&lt;p>è¿™ä¸ªæ˜¯æœ€è¿‘ï¼ˆ2022-07-16 16:09:15ï¼‰æˆ‘ä¸€ç›´åœ¨æ€è€ƒçš„é—®é¢˜ã€‚å› ä¸ºä¹‹åå¯èƒ½ä¼šé€‰æ‹©åœ¨å›½å†…åº¦è¿‡è‡ªå·±çš„åšå£«ç”Ÿæ¶¯ã€‚ç›®å‰çš„è‹±è¯­æ°´å¹³å¯ä»¥è¯´æ˜¯å®Œå…¨ä¸å¤Ÿçš„ã€‚å¹¶ä¸æ˜¯è¯´ paper çœ‹å¤šäº†ï¼Œè‹±è¯­æ°´å¹³å°±ä¸Šå»äº†ã€‚å¬è¯´è¯»å†™æ˜¯è€¦åˆåœ¨ä¸€èµ·çš„ï¼Œæ²¡æœ‰å›½å¤–çš„è‹±æ–‡ç¯å¢ƒï¼Œå°±éœ€è¦æœ‰æ„è¯†åœ°å»æå‡è‡ªå·±çš„è‹±è¯­æ°´å¹³ã€‚&lt;/p>
&lt;h1 id="1-ä¸€äº›å»ºè®®">1. ä¸€äº›å»ºè®®&lt;/h1>
&lt;p>å³ä½¿åˆ°äº†å›½å¤–ï¼Œå¯èƒ½ä¹Ÿå¾ˆéš¾é€šè¿‡å’Œå¤–å›½äººäº¤æœ‹å‹æ¥æå‡è‡ªå·±çš„è‹±æ–‡æ°´å¹³ï¼Œè‹±è¯­æå‡è¿˜æ˜¯éœ€è¦åˆ»æ„å»ç»ƒä¹ çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼ŒåšæŒåœ°å»é˜…è¯»æˆ–è€…å¬ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚ç”µè§†æ–°é—»è¯„è®ºï¼Œè½¬æ’­çš„ç¯®çƒæ¯”èµ›ï¼Œç”µè§†å‰§ï¼ŒTED æ¼”è®²ç­‰ç­‰ã€‚ä¸€ä¸ªæ˜¯é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿ï¼Œåšèµ·æ¥æ²¡æœ‰é¢å¤–çš„å¼€é”€ï¼Œå¦ä¸€ä¸ªæ˜¯è¦ &lt;strong>åšæŒ&lt;/strong>ï¼Œè‡ªå·±çš„å­¦ä¹ å°±éå¸¸é›¶æ•£ã€‚&lt;/li>
&lt;li>è¯»è‡ªå·±å†™çš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯»å‡ºå£°éŸ³ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="2-æ–½ä¸€å…¬å¦‚ä½•æé«˜ç§‘ç ”å†™ä½œèƒ½åŠ›">2. æ–½ä¸€å…¬ï¼šå¦‚ä½•æé«˜ç§‘ç ”å†™ä½œèƒ½åŠ›&lt;/h1>
&lt;h2 id="21-ä»–æ˜¯æ€ä¹ˆåšçš„">2.1 &lt;strong>ä»–æ˜¯æ€ä¹ˆåšçš„&lt;/strong>ï¼Ÿ&lt;/h2>
&lt;ul>
&lt;li>æ¯å¤©èŠ± 45 åˆ†é’Ÿè¯»ã€Šåç››é¡¿é‚®æŠ¥ã€‹ã€‚ä»–æ¯å¤©æ—©ä¸Šå®‰æ’å®Œç¬¬ä¸€æ‰¹å®éªŒåï¼Œä¼šåœ¨åç‚¹å·¦å³èŠ±ä¸€ä¸ªå°æ—¶é˜…è¯»ã€Šåç››é¡¿é‚®æŠ¥ã€‹ï¼Œä¸»è¦çœ‹æ–°é—»ç‰ˆ
&lt;ul>
&lt;li>è¿™é‡Œçš„é‡ç‚¹å…¶å®ä¸æ˜¯è¯»ä»€ä¹ˆï¼Œè€Œæ˜¯æ¯å¤©éƒ½åšæŒ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é˜…è¯»å˜å¤šäº†ï¼Œä»–å¸¸å¸¸ä¼šæœ‰è‡ªå·±åŠ¨ç¬”å»å†™çš„å†²åŠ¨ã€‚ã€Šå·´å°”çš„æ‘©å¤ªé˜³æŠ¥ã€‹ä¹ŸåˆŠç™»äº†ä»–çš„ä¿¡åˆŠã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="22-ä¸€äº›ç»å†">2.2 &lt;strong>ä¸€äº›ç»å†&lt;/strong>&lt;/h2>
&lt;ul>
&lt;li>ä»–åœ¨ 1994 å¹´å†™å®Œè®ºæ–‡ä¹‹åæ„Ÿè§‰å¾ˆå·®ï¼Œè‡ªå·±éƒ½ä¸æ„¿æ„å†è¯»ç¬¬äºŒéï¼Œå°±äº¤ç»™äº†è€æ¿ã€‚ï¼ˆæˆ‘è‡ªå·±ä¹Ÿæ„Ÿè§‰è‡ªå·±å†™çš„æ˜¯ä¸€å¨å±ï¼Œä¸æƒ³å†çœ‹ï¼‰&lt;/li>
&lt;li>ä»–çš„è€æ¿èŠ±äº† 4 ä¸ªå°æ—¶æŠŠæ–‡ç« çš„æ•´ä½“å†™å®Œäº†ï¼Œåªç¼ºå°‘ method å’Œ referenceï¼Œå¹¶ä¸”æ ¹æœ¬æ²¡ç”¨æ–½ä¸€å…¬çš„åˆç¨¿
&lt;ul>
&lt;li>&lt;strong>å†™æ–‡ç« è´µåœ¨ä¸€æ°”å‘µæˆ&lt;/strong>ï¼Œä¹‹åä»–ä¹Ÿæ²¿è¢­è¿™ä¸ªé£æ ¼ï¼Œä¸¤æ¬¡ä¸€æ™šä¸Šé€šå®µèµ¶ä¸€ç¯‡æ–‡ç« ã€‚ä¸è¿‡å‰ææ˜¯å¯¹ç ”ç©¶é¢†åŸŸéå¸¸ç†Ÿæ‚‰ï¼Œå¯¹æ–‡ç« æ•´ä½“çš„å¤§æ¦‚æ€è·¯å·²ç»æ·±æ€ç†Ÿè™‘ï¼Œæ‰€æœ‰çš„ figures å·²ç»åšå¥½äº†ã€‚&lt;/li>
&lt;li>è¿™äº›å‰æœŸå·¥ä½œï¼Œå…¨èº«å¿ƒæŠ•å…¥ä¹Ÿå¾—èŠ±è´¹ 3-4 å¤©ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="23-æ€»ç»“">2.3 &lt;strong>æ€»ç»“&lt;/strong>&lt;/h2>
&lt;ul>
&lt;li>ä¿æŒé˜…è¯»è‹±æ–‡æ–‡ç« çš„ä¹ æƒ¯ï¼Œæ¯å¤© 30-60 åˆ†é’Ÿã€‚ä»è‹±æ–‡æŠ¥çº¸ï¼Œè‹±æ–‡æ–°é—»å¼€å§‹ï¼Œé€æ¸è½¬ä¸ºä¸“ä¸šçš„æ‚å¿—&lt;/li>
&lt;li>å†™ç§‘ç ”è®ºæ–‡ï¼Œæœ€é‡è¦çš„æ˜¯é€»è¾‘ã€‚å¿…é¡»å…ˆè®¨è®ºå‡ºä¸€å¥—æ¸…æ™°çš„æ€è·¯ï¼Œæ ¹æ®æ€è·¯ä½œå›¾ï¼ˆä¹Ÿå°±æ˜¯é€»è¾‘ flowï¼Œæˆ–è€…ç»“æ„ï¼‰ï¼Œç„¶åå†åŠ¨ç¬”å¼€å§‹å†™&lt;/li>
&lt;li>å†™ä½œæ—¶ï¼Œæ ¹æ®æ€è·¯å†™ä¸€ä¸ª subheading æ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯è®¾è®¡å¥½æ¯ä¸ªéƒ¨åˆ†çš„å°æ ‡é¢˜ã€‚ç¬¬ä¸€ç¨¿åˆ‡å¿Œæ¯å¥è¯éƒ½è¿½æ±‚å®Œç¾ï¼ˆè¿™ä¸ªæ·±æœ‰ä½“ä¼šï¼Œè‡ªå·±ç¬¬ä¸€æ¬¡å†™ä½œæ—¶çŸ¥é“è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯åˆå¿ä¸ä½åå¤ç¢ç£¨ä¸€ä¸ªè¯ä¸€å¥è¯ï¼Œå› ä¸ºè¯æ±‡é‡åŒ®ä¹ï¼Œè¿™ä¸ªè¦é€šè¿‡åå¤ç»ƒä¹ æ¥é¿å…ï¼‰
&lt;ul>
&lt;li>ç¬¬ä¸€ç¨¿è¿½æ±‚çš„é‡ç‚¹æ˜¯é€»è¾‘ï¼ˆlogic flowï¼‰ï¼Œè¦æ³¨æ„å‰åå¥çš„é€»è¾‘å…³ç³»ï¼Œç›¸é‚»ä¸¤æ®µçš„é€»è¾‘å…³ç³»&lt;/li>
&lt;li>å†™ä½œæ—¶ï¼Œå…¨åŠ›ä»¥èµ´ï¼Œä¸å—ä»»ä½•äº‹æƒ…å¹²æ‰°ï¼ˆå…³é—­æ‰‹æœºï¼Œåº§æœºï¼Œå¾®ä¿¡ç­‰ï¼‰ï¼Œäº‰å–åœ¨æœ€çŸ­æ—¶é—´å†…æ‹¿å‡ºç¬¬ä¸€ç¨¿&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ç…§è‘«èŠ¦ç”»ç“¢&lt;/strong>ã€‚å­¦ä¹ è‡ªå·±é¢†åŸŸå†…æ–‡ç« çš„ä¸€äº›å›ºå®šè¡¨è¾¾ï¼Œæ•´ç†ä¸€äº›å±€åŠ¿ï¼Œä½†åˆ‡å¿ŒæŠ„è¢­ã€‚åœ¨ç¾å›½çš„ä¸€äº›æœºæ„ï¼Œè¿ç»­ 7 ä¸ªè‹±æ–‡å•è¯å’Œåˆ«äººå®Œå…¨ä¸€æ ·ï¼ŒåŸåˆ™ä¸Šå°±è¢«è®¤ä¸ºæ˜¯æŠ„è¢­ï¼ˆplagiarismï¼‰&lt;/li>
&lt;li>ç¬¬ä¸€ç¨¿å†™å®Œåï¼Œç»™è‡ªå·±ä¸è¶…è¿‡ä¸€å¤©çš„ä¼‘æ¯æ—¶é—´ï¼Œå¼€å§‹æ”¹ç¬¬äºŒç¨¿ã€‚ä¿®æ”¹æ—¶è¿˜æ˜¯é€»è¾‘ä¸ºä¸»ï¼Œæ¯å¥è¯éƒ½è¦æ¨æ•²ï¼Œè¦å­¦ä¼šåŒä¹‰æ›¿æ¢ï¼ˆthesaurusï¼‰ï¼Œé¿å…è¿‡å¤šé‡å¤ã€‚ç¬¬äºŒç¨¿éå¸¸å…³é”®ï¼Œå¾€åå¯èƒ½ä¸ä¼šå¤§æ”¹äº†ã€‚&lt;/li>
&lt;li>ç¬¬äºŒç¨¿ä»¥åçš„ä¿®æ”¹ï¼Œå…³æ³¨å…·ä½“çš„å­—å¥ï¼Œé€»è¾‘åŸºæœ¬å®šå‹ã€‚æŠ•ç¨¿å‰ï¼Œæ•´ä½“è¯»ä¸€éã€‚ä¸€ç¯‡æ–‡ç« ä¸ä¼šå› ä¸ºä¸ªåˆ«è¯­æ³•é”™è¯¯è¢«æ‹’ï¼Œä½†ä¸€å®šä¼šå› ä¸ºé€»è¾‘æ··ä¹±è¢«æ‹’ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="3-å¯è¡Œçš„æ–¹æ¡ˆ">3. å¯è¡Œçš„æ–¹æ¡ˆ&lt;/h1>
&lt;p>å®é™…ä¸Šï¼Œæœ€éš¾çš„éƒ¨åˆ†è¿˜æ˜¯æ¯å¤©åšæŒï¼Œä¸‹é¢åˆ—ä¸€äº›å¯è¡Œçš„æ–¹æ¡ˆã€‚é˜…è¯» paper è‡ªç„¶ä¸ç”¨è¯´ï¼Œè¿™ä¸ªæ˜¯è‡ªç„¶çš„ã€‚ä½†æ˜¯é™¤äº†é˜…è¯» paper ä»¥å¤–ï¼Œä¹Ÿåº”è¯¥åšæŒé˜…è¯»ä¸€äº›æ–°é—»æ‚å¿—ã€‚&lt;/p>
&lt;ul>
&lt;li>è§‚çœ‹ &lt;strong>LinusTechTips&lt;/strong> é¢‘é“çš„è§†é¢‘ã€‚è¿™æ˜¯ä¸€ä¸ªç§‘æŠ€é¢‘é“ï¼Œæ¯ä¸ªè§†é¢‘ 10 åˆ†é’Ÿå·¦å³ï¼Œä¹Ÿæ˜¯è‡ªå·±æ„Ÿå…´è¶£çš„æ–¹å‘ã€‚ï¼ˆå¬ï¼Œè¯»ï¼‰&lt;/li>
&lt;li>æ¯å¤©æ—©ä¸Šé˜…è¯»ä¸€ç¯‡è‹±æ–‡æ–°é—»ã€‚ï¼ˆè¯»ï¼‰&lt;/li>
&lt;li>æ¯å‘¨ï¼Œæ ¹æ®ä¸€å‘¨é˜…è¯»çš„ paperï¼Œå†™ä¸€ç¯‡è‹±æ–‡ reivewã€‚ä¸€èˆ¬ paper reading éƒ½ä¼šè®°ä¸‹ç¬”è®°ï¼Œå‰æœŸå¯ä»¥æŠŠæ¨¡æ¿å›ºå®šå¥½ã€‚æœ‰äº†ç¬”è®°çš„æ€»ç»“å’Œæ ¼å¼æ¨¡æ¿ï¼Œç†Ÿç»ƒä¹‹åçš„å¼€é”€å°±åªæœ‰å†™ä½œäº†ã€‚ï¼ˆå†™ï¼‰&lt;/li>
&lt;li>ï¼ˆoptionï¼‰ï¼Œitalkï¼Œå®šæœŸå’Œåˆ«äººå¯¹è¯ï¼Œç»ƒä¹ å£è¯­ã€‚ï¼ˆå¬ï¼Œè¯´ï¼‰&lt;/li>
&lt;li>ï¼ˆoptionï¼‰ï¼ŒB ç«™å…³æ³¨å¬è¯´æ–¹é¢çš„ upï¼Œæ¯å¤©è¾¹å¬è¾¹è·Ÿè¯»ã€‚ï¼ˆå¬ï¼Œè¯´ï¼‰&lt;/li>
&lt;li>åšæŒ&lt;/li>
&lt;li>åšæŒ&lt;/li>
&lt;li>åšæŒï¼Œè¿™ä¸ªæ˜¯æœ€éš¾çš„&lt;/li>
&lt;/ul></description></item><item><title>VSCode, Chrome å¸¸ç”¨å¿«æ·é”®</title><link>https://huweim.github.io/post/%E5%B7%A5%E5%85%B7_%E5%BF%AB%E6%8D%B7%E9%94%AE_vscode_chrome/</link><pubDate>Fri, 10 Jun 2022 15:27:08 +0800</pubDate><guid>https://huweim.github.io/post/%E5%B7%A5%E5%85%B7_%E5%BF%AB%E6%8D%B7%E9%94%AE_vscode_chrome/</guid><description>&lt;h1 id="1-vscode">1. VSCode&lt;/h1>
&lt;p>&lt;strong>ç›®å‰ç”Ÿç–ä½†æ˜¯éœ€è¦å¸¸ç”¨çš„&lt;/strong> 2022-06-10 15:14:48&lt;/p>
&lt;ul>
&lt;li>â­ é€‰æ‹©æ‰€æœ‰å½“å‰é€‰ä¸­çš„å­—ç¬¦ï¼ˆå¯ä»¥ç†è§£ä¸ºå…¨å±€ç‰ˆçš„ Ctrl + Dï¼‰: Ctrl + Shift + L&lt;/li>
&lt;li>åœ¨é€‰ä¸­è¡Œæœ«å°¾æ’å…¥å…‰æ ‡ï¼šAlt + Shift + i&lt;/li>
&lt;li>åœ¨å³ä¾§æ‰“å¼€ Markdown é¢„è§ˆï¼šCtrl + K, V&lt;/li>
&lt;li>æŸ¥çœ‹å®šä¹‰ï¼šAlt + F12ï¼›åªæ˜¯å°çª—æŸ¥çœ‹ï¼Œæ¯”è¾ƒæ–¹ä¾¿ï¼Œæ³¨æ„è·³è½¬å’ŒæŸ¥çœ‹çš„åŒºåˆ«&lt;/li>
&lt;li>é‡æ–°æ‰“å¼€æœ€åå…³é—­çš„æ ‡ç­¾é¡µï¼šCtrl + Shift + T&lt;/li>
&lt;li>å‘å·¦åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Tab / Ctrl + PgDn&lt;/li>
&lt;li>å‘å³åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Shift + Tab / Ctrl + PgUp&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å¿«æ·é”®çš„æ„ä¹‰ä¸åœ¨äºè®°ä½æ¯ä¸€ä¸ªé”®ä½ï¼Œè€Œæ˜¯ä½ éœ€è¦çŸ¥é“æŸä¸ªæ“ä½œæ˜¯å¯ä»¥é€šè¿‡å¿«æ·é”®è¾¾åˆ°çš„ã€‚å½“ä½ éœ€è¦å¤šæ¬¡é‡å¤è¿™ä¸ªæ“ä½œæ—¶ï¼Œå¯ä»¥å»æŸ¥æ‰¾è¿™ä¸ªå¿«æ·é”®ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="11-ç¼–è¾‘">1.1 ç¼–è¾‘&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>é€‰ä¸­å½“å‰å•è¯ Ctrl + Dï¼Œå¤šæ¬¡æŒ‰çš„è¯å¯ä»¥æ‰¹é‡æ›´æ”¹å˜é‡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â­ é€‰æ‹©æ‰€æœ‰å½“å‰é€‰ä¸­çš„å­—ç¬¦ï¼ˆå¯ä»¥ç†è§£ä¸ºå…¨å±€ç‰ˆçš„ Ctrl + Dï¼‰: Ctrl + Shift + L&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€‰æ‹©æ‰€æœ‰å‡ºç°çš„å½“å‰å•è¯ï¼šCtrl + F2ï¼›ä¸ç”¨é€‰ä¸­ï¼Œå…‰æ ‡æ”¾åœ¨å•è¯ä¸Šå³å¯ï¼Œç›¸å½“äºå…ˆ Ctrl + D ç„¶å Ctrl + Shift + L&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ§åˆ¶å°ç»ˆç«¯æ˜¾ç¤ºä¸éšè—&lt;/strong>ï¼šCtrl + ~&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>é€‰ä¸­ä»£ç  ï¼š&lt;/strong> Shift + Home/End/æ–¹å‘é”® ï¼ˆé…ç½® Ctrl ä½¿ç”¨æ•ˆæœæ›´ä½³ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å…¨å±€æ›¿æ¢ï¼š&lt;/strong> Ctrl + Shift + H&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ†å± Ctrl + \&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆå¹¶åˆ†å± Ctrl + Alt + \&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é‡æ–°æ‰“å¼€æœ€åå…³é—­çš„æ ‡ç­¾é¡µï¼šCtrl + Shift + T&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨é€‰ä¸­è¡Œæœ«å°¾æ’å…¥å…‰æ ‡/ä¹Ÿå°±æ˜¯ 1.3 ä¸­çš„å¤šè¡Œç¼–è¾‘ï¼šAlt + Shift + i&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å³ä¾§æ‰“å¼€ Markdown é¢„è§ˆï¼šCtrl + K, V&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘å·¦åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Tab / Ctrl + PgDn&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘å³åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Shift + Tab / Ctrl + PgUp&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŒ‰å•è¯è·³è½¬ â­ Ctrl + æ–¹å‘é”®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>è¿™ä¸ªéå¸¸å¸¸ç”¨ï¼Œå¯ä»¥å¿«é€Ÿåœ°åœ¨å•è¡Œçš„å•è¯ä¹‹å‰è·³è½¬å…‰æ ‡&lt;/p>
&lt;/blockquote>
&lt;p>è¡Œæ“ä½œ&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¤åˆ¶å½“å‰è¡Œ&lt;/strong>ï¼šShift + Alt + Up/Down / Ctrl + C&lt;/li>
&lt;li>å‰ªåˆ‡å½“å‰è¡Œ Ctrl + X&lt;/li>
&lt;li>&lt;strong>åˆ é™¤å½“å‰è¡Œ&lt;/strong>ï¼šShift + Ctrl + K&lt;/li>
&lt;li>é€‰æ‹©æ•´è¡Œ Ctrl + L&lt;/li>
&lt;li>ç§»åŠ¨é€‰ä¸­çš„è¡Œï¼šAlt + Up/Down&lt;/li>
&lt;li>è·³è½¬åˆ°æŒ‡å®šè¡Œ Ctrl + G&lt;/li>
&lt;/ul>
&lt;h2 id="12-ç¼–ç¨‹">1.2 ç¼–ç¨‹&lt;/h2>
&lt;ul>
&lt;li>Go to definition: Ctrl + é¼ æ ‡å·¦é”®/F12&lt;/li>
&lt;li>æ˜¾ç¤ºæ‰€æœ‰å¼•ç”¨ï¼šShift + F12&lt;/li>
&lt;li>è·³è½¬åˆ°å…‰æ ‡çš„ä¸Šä¸€ä¸ªä½ç½®ï¼š Alt + æ–¹å‘é”®â†&lt;/li>
&lt;li>å‚æ•°æç¤ºï¼šCtrl + Shift + Space&lt;/li>
&lt;li>æŸ¥çœ‹å®šä¹‰ï¼šAlt + F12ï¼›åªæ˜¯å°çª—æŸ¥çœ‹ï¼Œæ¯”è¾ƒæ–¹ä¾¿ï¼Œæ³¨æ„è·³è½¬å’ŒæŸ¥çœ‹çš„åŒºåˆ«&lt;/li>
&lt;/ul>
&lt;h2 id="13-å¤šè¡Œç¼–è¾‘">1.3 å¤šè¡Œç¼–è¾‘&lt;/h2>
&lt;p>Step&lt;/p>
&lt;ul>
&lt;li>é€‰ä¸­å¤šè¡Œï¼›å¯ä»¥ç”¨é¼ æ ‡ï¼Œä¹Ÿå¯ä»¥ç”¨ Ctrl + Shift + æ–¹å‘é”®/Home/End&lt;/li>
&lt;li>æŒ‰ä¸‹å¿«æ·é”® Alt + Shift + iï¼Œè¿›å…¥å¤šè¡Œç¼–è¾‘çŠ¶æ€&lt;/li>
&lt;/ul>
&lt;h2 id="14-æ–‡ä»¶">1.4 æ–‡ä»¶&lt;/h2>
&lt;p>æ‰“å¼€æ–°çª—å£ï¼šCtrl + N
æ‰“å¼€æ–‡ä»¶ï¼šCtrl + P
é€‰æ‹©æ–‡ä»¶ï¼šCtrl + O
æœ€è¿‘æ‰“å¼€çš„ workplace: Ctrl + R&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h1 id="2-chrome">2. Chrome&lt;/h1>
&lt;p>&lt;strong>æœ€å¸¸ç”¨&lt;/strong>å¹¶ä¸”ç›®å‰æ¯”è¾ƒç”Ÿç– 2022-06-10 14:45:52&lt;/p>
&lt;ul>
&lt;li>æ–°å»ºæ ‡ç­¾é¡µï¼šCtrl + T&lt;/li>
&lt;li>å‘å·¦åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Tab / Ctrl + PgDn&lt;/li>
&lt;li>å‘å³åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Shift + Tab / Ctrl + PgUp&lt;/li>
&lt;li>è·³è½¬åˆ°åœ°å€æ ï¼šCtrl + l / Alt + D / F6&lt;/li>
&lt;/ul>
&lt;h2 id="21-æ ‡ç­¾å’Œçª—å£">2.1 æ ‡ç­¾å’Œçª—å£&lt;/h2>
&lt;p>ä¸ªäººè®¤ä¸ºä¼šæ¯”è¾ƒå¸¸ç”¨çš„&lt;/p>
&lt;ul>
&lt;li>æ–°å»ºæ ‡ç­¾é¡µï¼šCtrl + T&lt;/li>
&lt;li>é‡æ–°æ‰“å¼€æœ€åå…³é—­çš„æ ‡ç­¾é¡µï¼šCtrl + Shift + T&lt;/li>
&lt;li>å‘å·¦åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Tab / Ctrl + PgDn&lt;/li>
&lt;li>å‘å³åˆ‡æ¢æ ‡ç­¾ï¼šCtrl + Shift + Tab / Ctrl + PgUp&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>2022-06-10 14:24:50ï¼Œå‘å·¦å³åˆ‡æ¢æ ‡ç­¾æ­£æ˜¯åœ¨å¯»æ‰¾çš„åŠŸèƒ½ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥ç”¨åœ¨ VSCode çª—å£ä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>åœ¨æ–°çš„åå°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥ï¼šCtrl + å•å‡» / é¼ æ ‡æ»šè½®å•æœº&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å¯ä»¥ä»£æ›¿ å³é”® -&amp;gt; åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥&lt;/p>
&lt;/blockquote>
&lt;p>å…¶ä»–&lt;/p>
&lt;ul>
&lt;li>æ–°å»ºçª—å£ï¼šCtrl + N&lt;/li>
&lt;li>æ–°å»ºæ— ç—•çª—å£ï¼šCtrl + Shift + N&lt;/li>
&lt;li>æ ‡ç­¾å†…æ‰“å¼€ Home é¡µé¢ï¼šAlt + Home&lt;/li>
&lt;li>æœ€å°åŒ–å½“å‰çª—å£ï¼šAlt + ç©ºæ ¼é”® + N&lt;/li>
&lt;li>æœ€å¤§åŒ–å½“å‰çª—å£ï¼šAlt + ç©ºæ ¼é”® + X&lt;/li>
&lt;li>åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥ï¼š Shift + å•å‡»&lt;/li>
&lt;/ul>
&lt;h2 id="22-åŠŸèƒ½">2.2 åŠŸèƒ½&lt;/h2>
&lt;p>ä¸ªäººè®¤ä¸ºå¸¸ç”¨ï¼Œå¥½åƒæ²¡æœ‰ç‰¹åˆ«å¸¸ç”¨çš„ã€‚ã€‚&lt;/p>
&lt;p>å…¶ä»–&lt;/p>
&lt;ul>
&lt;li>ä¸‹è½½å†…å®¹ï¼šCtrl + J&lt;/li>
&lt;li>å†å²è®°å½•ï¼šCtrl + H&lt;/li>
&lt;li>å¼€å‘è€…å·¥å…·ï¼šF12 / Ctrl + Shift + J / Ctrl + Shift + I&lt;/li>
&lt;li>ä¿å­˜ç½‘é¡µï¼šCtrl + S&lt;/li>
&lt;li>æ·»åŠ ä¹¦ç­¾ï¼šCtrl + D&lt;/li>
&lt;li>æ·»åŠ æ‰€æœ‰æ‰“å¼€çš„ç½‘é¡µæ·»åŠ ä¹¦ç­¾ï¼šCtrl + Shift + D&lt;/li>
&lt;li>ä¹¦ç­¾ç®¡ç†å™¨ï¼šCtrl + Shift + O&lt;/li>
&lt;li>ç”¨æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶ï¼šCtrl + O&lt;/li>
&lt;li>ä»»åŠ¡ç®¡ç†å™¨ï¼šShift + Esc&lt;/li>
&lt;li>æ¸…é™¤å†å²è®°å½•ï¼šCtrl + Shift + Del&lt;/li>
&lt;/ul>
&lt;h2 id="23-åœ°å€æ ">2.3 åœ°å€æ &lt;/h2>
&lt;p>&lt;strong>ä¸ªäººè®¤ä¸ºå¸¸ç”¨&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>åœ°å€æ æœç´¢ï¼šCtrl + K / Ctrl + E&lt;/li>
&lt;li>è·³è½¬åˆ°åœ°å€æ ï¼šCtrl + l / Alt + D / F6&lt;/li>
&lt;li>ç«™å†…æœç´¢ï¼šå…³é”®å­— + siteï¼šç½‘å€&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å¿«é€Ÿè·³è½¬åˆ°åœ°å€æ æ˜¯éœ€è¦æŒæ¡çš„
ç«™å†…æœç´¢ï¼šå…³é”®å­— + siteï¼šç½‘å€ï¼Œè¿™ä¸ªå¦‚æœä½¿ç”¨ google éœ€è¦ç¿»å¢™ï¼Œå¹¶ä¸æ˜¯å•çº¯åœ°å­—ç¬¦ä¸²åŒ¹é…ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å…¶ä»–&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨å…¶ä»–æœç´¢å¼•æ“è¿›è¡Œæœç´¢ï¼šTab&lt;/li>
&lt;li>ä¸ºç½‘ç«™åç§°æ·»åŠ  www. å’Œ .comï¼šCtrl + Enter&lt;/li>
&lt;/ul>
&lt;h2 id="24-é¡µé¢">2.4 é¡µé¢&lt;/h2>
&lt;p>ä¸ªäººè®¤ä¸ºå¸¸ç”¨&lt;/p>
&lt;ul>
&lt;li>æœç´¢ï¼šCtrl + F&lt;/li>
&lt;li>åˆ·æ–°ï¼šCtrl + R / F5 / Ctrl + F5&lt;/li>
&lt;li>è°ƒæ•´é¡µé¢å­—ä½“å¤§å°ï¼šCtrl + &amp;lsquo;&amp;rsquo;+&amp;rsquo;&amp;rsquo; / Ctrl + &amp;lsquo;&amp;rsquo;-&amp;rsquo;&amp;rsquo; æˆ–è€… Ctrl + é¼ æ ‡æ»šè½®ä¸Š/ä¸‹&lt;/li>
&lt;/ul>
&lt;p>å…¶ä»–&lt;/p>
&lt;ul>
&lt;li>å…ˆä¸‹ç¿»é¡µï¼šPgUp&lt;/li>
&lt;li>å‘ä¸Šç¿»é¡µï¼šPgDn&lt;/li>
&lt;li>æ»‘åŠ¨åˆ°æœ€é¡¶éƒ¨ï¼šHome&lt;/li>
&lt;li>æ»‘åŠ¨åˆ°æœ€åº•éƒ¨ï¼šEnd&lt;/li>
&lt;li>æ‰“å°ï¼šCtrl + P&lt;/li>
&lt;li>é¡µé¢å­—ä½“æ¢å¤é»˜è®¤ï¼šCtrl + 0&lt;/li>
&lt;li>å…¨å±åˆ‡æ¢ï¼šF11&lt;/li>
&lt;/ul>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/43730820#:~:text=Chrome%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8%201%20%E5%90%8C%E4%B8%AA%E7%AA%97%E5%8F%A3%E6%96%B0%E5%BB%BA%E6%A0%87%E7%AD%BE%EF%BC%9ACtrl%20%2B%20T%202%20%E9%87%8D%E6%96%B0%E6%89%93%E5%BC%80%E6%9C%80%E5%90%8E%E5%85%B3%E9%97%AD%E7%9A%84%E6%A0%87%E7%AD%BE%E9%A1%B5%EF%BC%9ACtrl,%2F%20Ctrl%20%2B%20Shift%20%2B%20...%20%E6%9B%B4%E5%A4%9A%E7%BB%93%E6%9E%9C...%20">https://zhuanlan.zhihu.com/p/43730820#:~:text=Chrome%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8%201%20%E5%90%8C%E4%B8%AA%E7%AA%97%E5%8F%A3%E6%96%B0%E5%BB%BA%E6%A0%87%E7%AD%BE%EF%BC%9ACtrl%20%2B%20T%202%20%E9%87%8D%E6%96%B0%E6%89%93%E5%BC%80%E6%9C%80%E5%90%8E%E5%85%B3%E9%97%AD%E7%9A%84%E6%A0%87%E7%AD%BE%E9%A1%B5%EF%BC%9ACtrl,%2F%20Ctrl%20%2B%20Shift%20%2B%20...%20%E6%9B%B4%E5%A4%9A%E7%BB%93%E6%9E%9C...%20&lt;/a>&lt;/p></description></item><item><title>ï¼ˆè½¬è½½ï¼‰MLSys ä¸ªæ–¹å‘ç»¼è¿°</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_%E8%BD%AC%E8%BD%BDmlsys-%E4%B8%AA%E6%96%B9%E5%90%91%E7%BB%BC%E8%BF%B0/</link><pubDate>Mon, 09 May 2022 22:17:43 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_%E8%BD%AC%E8%BD%BDmlsys-%E4%B8%AA%E6%96%B9%E5%90%91%E7%BB%BC%E8%BF%B0/</guid><description>&lt;p>æœ€è¿‘åœ¨è¯•ç€å¯»æ‰¾ML + syså¯åšçš„æ–¹å‘ï¼Œå‘ç°æ¶‰åŠåˆ°çš„å‘å¤ªå¤šäº†ï¼Œæœ‰ç‚¹çœ¼èŠ±ç¼­ä¹±çš„æ„Ÿè§‰&amp;hellip;&amp;hellip;ä¸å¦‚å†™ç‚¹ä¸œè¥¿æ€»ç»“ä¸€å“ˆï¼Œå¸®è‡ªå·±ç†ä¸€ä¸‹æ€è·¯ã€‚&lt;/p>
&lt;p>ä¸ªäººæ„Ÿè§‰MLsysä¸èƒ½ç®—æ˜¯ä¸€ç§æ–¹å‘ï¼Œè€Œæ˜¯ä¸€ç§æ€è·¯&amp;hellip;&amp;hellip;æ¯”å¦‚å¯¹äºsystemç ”ç©¶è€…æ¥è¯´ï¼Œå¯ä»¥æŠŠMLä½œä¸ºæˆ‘ä»¬å¼€å‘çš„ç³»ç»Ÿè¦é€‚é…çš„ä¸€ç§benchmarkï¼Œå°±åƒtransactionå¯¹äºæ•°æ®åº“ã€æŸç§æ–‡ä»¶åœºæ™¯å¯¹äºFile Systemçš„æ„ä¹‰ä¸€æ ·ã€‚è¿™æ ·ä¸€æƒ³å¯åšçš„ç©ºé—´å°±å®½å¹¿å¤šäº†ã€‚å°±ç®—MLå“ªå¤©åˆè¿›å…¥å¯’å†¬ï¼Œä¹‹å‰æ‰€å­¦çš„æŠ€æœ¯ä¹Ÿä»ç„¶æ˜¯å¯æŒç»­çš„ã€‚ä¼ ç»Ÿçš„systemç ”ç©¶è€…ä¹Ÿåº”è¯¥é€‚åº”è¿™ä¸ªæ½®æµï¼Œä¸èƒ½ç®€å•çš„æŠŠMLsysä¸€å¾‹å½’ä¸ºå¤§æ°´æ¼«çŒ..&lt;/p>
&lt;p>æœ‰å¾ˆå¤štopicæˆ‘ä¹Ÿæ˜¯åˆæ¬¡æ¥è§¦ï¼Œè¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ã€‚å¦‚æœ‰é”™è¯¯è¿˜è¯·æ‰¹è¯„æŒ‡ç‚¹~&lt;/p>
&lt;h1 id="1-åˆ†å¸ƒå¼æœºå™¨å­¦ä¹ distributed-dnn-training">1. åˆ†å¸ƒå¼æœºå™¨å­¦ä¹ ï¼ˆDistributed DNN Trainingï¼‰&lt;/h1>
&lt;p>è¿™ä¸ªåˆå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼šfrom ML / system perspectiveã€‚å®‰åˆ©ä¸€ä¸‹åˆ˜é“å²©è€å¸ˆçš„ã€Šåˆ†å¸ƒå¼æœºå™¨å­¦ä¹ ã€‹è¿™æœ¬ä¹¦ï¼ˆ[ch_]è¡¨ç¤ºå¼•ç”¨è¿™æœ¬ä¹¦ä¸­çš„ä¸€äº›ç« èŠ‚ï¼‰ï¼Œè¿˜æœ‰UCB cs294 19fallçš„è¿™ä¸€èŠ‚ã€‚&lt;/p>
&lt;h2 id="11-ml">1.1 ML&lt;/h2>
&lt;p>ä»MLçš„è§’åº¦åšï¼Œä¸»è¦æ˜¯å‘æ˜æˆ–æ”¹è¿›åˆ†å¸ƒå¼è®­ç»ƒç®—æ³•[ch4] [ch5]ï¼Œä¿è¯åœ¨åˆ†å¸ƒå¼åŠ é€Ÿçš„åŒæ—¶ï¼Œä»ç„¶èƒ½è¾¾åˆ°åŸæ¥çš„å­¦ä¹ æ•ˆæœï¼ˆloss/accuracyï¼‰ã€‚å› æ­¤å¾ˆå¤šå·¥ä½œä¹Ÿè¢«æŠ•åœ¨åƒICMLã€NIPSè¿™ç§ä¸“ä¸šMLä¼šè®®ä¸Šã€‚ä¸»è¦ç”¨åˆ°çš„æ–¹æ³•åŒ…æ‹¬ä¼˜åŒ–ï¼ˆoptimizationï¼‰å’Œç»Ÿè®¡å­¦ä¹ ç†è®ºï¼ˆstatistical learning theoryï¼‰ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ä¸€ç±»å·¥ä½œæ¶‰åŠåˆ°å¦‚ä½•æŠŠå•æœºç®—æ³•æ”¹é€ æˆåˆ†å¸ƒå¼[ch9]ï¼Œæ¯”å¦‚åŒæ­¥/å¼‚æ­¥SGDç­‰ã€‚è¿™é‡Œä¸»è¦æ¶‰åŠåˆ°çš„é—®é¢˜æ˜¯å¦‚ä½•é™ä½åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é€šä¿¡å¼€é”€ï¼Œæé«˜åŠ é€Ÿæ¯”ã€‚&lt;/p>
&lt;p>è¿™æ–¹é¢äº†è§£ä¸å¤šå°±å°‘å†™ç‚¹äº†&amp;hellip; å¯ä»¥å‚è€ƒè¿™é‡Œã€‚&lt;/p>
&lt;h2 id="12-system">1.2 System&lt;/h2>
&lt;p>è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ä»Systemçš„è§’åº¦åšã€‚ä»åˆ†å¸ƒå¼è®¡ç®—çš„è§’åº¦æ¥çœ‹ï¼Œå¯ä»¥æŠŠç›¸å…³å·¥ä½œåˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š&lt;/p>
&lt;p>å¯¹äºè®¡ç®—é‡å¤ªå¤§çš„åœºæ™¯ï¼ˆè®¡ç®—å¹¶è¡Œï¼‰ï¼Œå¯ä»¥å¤šçº¿ç¨‹/å¤šèŠ‚ç‚¹å¹¶è¡Œè®¡ç®—ï¼Œå¤šèŠ‚ç‚¹å…±äº«å…¬å…±çš„å­˜å‚¨ç©ºé—´ã€‚å¸¸ç”¨çš„ä¸€ä¸ªç®—æ³•å°±æ˜¯åŒæ­¥éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆsynchronous stochastic gradient descentï¼‰ï¼Œå«ä¹‰å¤§è‡´ç›¸å½“äºKä¸ªï¼ˆKæ˜¯èŠ‚ç‚¹æ•°ï¼‰mini-batch SGD [ch6.2]
å¯¹äºè®­ç»ƒæ•°æ®å¤ªå¤šï¼Œå•æœºæ”¾ä¸ä¸‹çš„åœºæ™¯ï¼ˆæ•°æ®å¹¶è¡Œï¼Œä¹Ÿæ˜¯æœ€ä¸»è¦çš„åœºæ™¯ï¼‰ï¼Œéœ€è¦å°†æ•°æ®åˆ’åˆ†åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šè®­ç»ƒã€‚æ¯ä¸ªèŠ‚ç‚¹å…ˆç”¨æœ¬åœ°çš„æ•°æ®å…ˆè®­ç»ƒå‡ºä¸€ä¸ªå­æ¨¡å‹ï¼ŒåŒæ—¶å’Œå…¶ä»–èŠ‚ç‚¹ä¿æŒé€šä¿¡ï¼ˆæ¯”å¦‚æ›´æ–°å‚æ•°ï¼‰ä»¥ä¿è¯æœ€ç»ˆå¯ä»¥æœ‰æ•ˆæ•´åˆæ¥è‡ªå„ä¸ªèŠ‚ç‚¹çš„è®­ç»ƒç»“æœï¼Œå¹¶å¾—åˆ°å…¨å±€çš„MLæ¨¡å‹ã€‚ [ch6.3]
å¯¹äºæ¨¡å‹å¤ªå¤§çš„åœºæ™¯ï¼Œéœ€è¦æŠŠæ¨¡å‹ï¼ˆä¾‹å¦‚NNä¸­çš„ä¸åŒå±‚ï¼‰åˆ’åˆ†åˆ°ä¸åŒèŠ‚ç‚¹ä¸Šè¿›è¡Œè®­ç»ƒã€‚æ­¤æ—¶ä¸åŒèŠ‚ç‚¹ä¹‹é—´å¯èƒ½éœ€è¦é¢‘ç¹çš„syncã€‚è¿™ä¸ªå«åšæ¨¡å‹å¹¶è¡Œã€‚ [ch6.4]
Pipeline Parallelismï¼šè¿™æ˜¯å»å¹´ï¼ˆSOSP19 PipeDreamï¼‰æ‰å‡ºç°çš„æ¦‚å¿µï¼Œå‚è€ƒè¿™é‡Œçš„ç¬¬90ã€95é¡µ ä»¥åŠè¿™é‡Œçš„ç®€ä»‹ã€‚Pipeline Parallelismç›¸å½“äºæŠŠæ•°æ®å¹¶è¡Œå’Œæ¨¡å‹å¹¶è¡Œç»“åˆèµ·æ¥ï¼ŒæŠŠæ•°æ®åˆ’åˆ†æˆå¤šä¸ªchunkï¼Œä¹ŸæŠŠè®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹åˆ†æˆäº†Forward Passå’ŒBackward Passä¸¤ä¸ªstageã€‚ç„¶åç”¨æµæ°´çº¿çš„æ€æƒ³è¿›è¡Œè®¡ç®—ã€‚
å¦å¤–ï¼Œåˆ†å¸ƒå¼MLæœ¬è´¨ä¸Šè¿˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿå˜›ï¼Œæ‰€ä»¥åƒä¼ ç»Ÿåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œçš„ä¸€äº›topicï¼ˆæ¯”å¦‚ä¸€è‡´æ€§ã€fault toleranceã€é€šä¿¡ã€load balanceç­‰ç­‰ï¼‰ä¹Ÿå¯ä»¥æ”¾åˆ°è¿™ä¸ªèƒŒæ™¯ä¸‹è¿›è¡Œç ”ç©¶ã€‚&lt;/p>
&lt;p>æœ€è¿‘æŒ–çš„æ¯”è¾ƒå¤šçš„å‘å¤§è‡´æ¶‰åŠä»¥ä¸‹å‡ ä¸ªç‚¹ï¼š&lt;/p>
&lt;h3 id="111-åˆ†å¸ƒå¼mlç³»ç»Ÿè®¾è®¡">1.1.1 åˆ†å¸ƒå¼MLç³»ç»Ÿè®¾è®¡&lt;/h3>
&lt;p>[ch7.3] æœ€è‘—åçš„å°±æ˜¯å‡ å¤§åˆ†å¸ƒå¼DLæ¨¡å‹ï¼šParameter Server / AllReduceç­‰ã€‚&lt;/p>
&lt;p>ä¸ªäººæ„Ÿè§‰è¿™é‡Œé¢ä¸€ä¸ªå¯ä»¥æŒ–çš„å‘æ˜¯Decentralized Trainingã€‚åœ°é‡Œä¸€ä½å¤§ä½¬ä¹Ÿåœ¨åšè¿™ä¸ªæ–¹å‘ã€‚&lt;/p>
&lt;h3 id="112-edge-computing">1.1.2 Edge Computing&lt;/h3>
&lt;p>å¾ˆå¤šMLæ¨¡å‹æ˜¯éœ€è¦åœ¨æ‰‹æœºä¸Šè¿è¡Œçš„ï¼ˆæ¯”å¦‚æ¯å›¾ç§€ç§€ï¼‰ã€‚é’ˆå¯¹è¿™ä¸€åœºæ™¯ï¼Œä¸€ä¸ªæ˜¯è¦å¯¹æ‰‹æœºè¿™ç§ä½åŠŸè€—è®¾å¤‡å¯¹ML modelè¿›è¡Œè£å‰ªåŠ é€Ÿï¼ˆåé¢ä¼šæåˆ°ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªè¦åšçš„å°±æ˜¯è¿è¡Œåœ¨å¤šä¸ªdeviceä¸Šçš„åˆ†å¸ƒå¼MLã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸ªæœ€è¿‘éå¸¸ç«çš„æ¦‚å¿µï¼šFederated Learningã€‚å…¶å®æœ¬è´¨è¿˜æ˜¯ç‚’æ•°æ®å¹¶è¡Œçš„å†·é¥­&amp;hellip;ä¸è¿‡åº”ç”¨åœºæ™¯æ¯”è¾ƒä¸ä¸€æ ·ã€‚FLæ›´å¤šæ˜¯ä¸ºäº†Privacyçš„è€ƒè™‘ï¼Œè€Œåˆ†å¸ƒå¼åŠ é€Ÿè®­ç»ƒåœ¨è¿™é‡Œå€’æ˜¯ä¸ªæ¬¡è¦ç›®æ ‡ã€‚FLè¿˜æ¶‰åŠåˆ°äº†æ¨¡å‹èšåˆ[ch8]ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•æŠŠå¤šä¸ªdeviceæœ¬åœ°è®­ç»ƒå‡ºçš„æ¨¡å‹åˆå¹¶åˆ°ä¸€èµ·ã€‚&lt;/p>
&lt;h3 id="113-å¤§é‡è®¡ç®—èµ„æºçš„scheduling--device-placement">1.1.3 å¤§é‡è®¡ç®—èµ„æºçš„Scheduling / device placement&lt;/h3>
&lt;p>UCBçš„CS294 19springå¯¹è¿™ä¸€èŠ‚æœ‰è¿‡ä»‹ç»ã€‚&lt;/p>
&lt;p>è¿™é‡Œçš„è®¡ç®—èµ„æºçš„æ•°é‡çº§æ˜¯å¾ˆå¤§çš„&amp;hellip;&amp;hellip;æ¯”å¦‚å·¥ä¸šç•Œä¼šæœ‰ä¸‡å°CPUæœåŠ¡å™¨ / ä¸Šåƒå°GPUæœåŠ¡å™¨æ­å»ºçš„DLå¹³å°ã€‚è¿™ä¸ªå°æ–¹å‘è¦è§£å†³çš„é—®é¢˜å°±æ˜¯å¦‚ä½•å……åˆ†åˆ©ç”¨å®ƒä»¬çš„æ€§èƒ½ã€‚æ¯”å¦‚åœ¨é˜¿é‡ŒPAIç»„çš„JDé‡Œå°±æœ‰è¿™ä¹ˆä¸€æ¡ï¼šâ€œè®¾è®¡æ¢ç´¢é«˜æ•ˆçš„åˆ†å¸ƒå¼Placementç®—æ³•ï¼Œä»¥æ›´ç³»ç»ŸåŒ–çš„æ–¹å¼æ¥è§£å†³å¤§è§„æ¨¡æ·±åº¦å­¦ä¹ é«˜æ•ˆè®­ç»ƒçš„é—®é¢˜â€ã€‚&lt;/p>
&lt;p>è¿™æ–¹é¢æ¯”è¾ƒæ—©çš„å·¥ä½œå¤§æ¦‚æ˜¯è¿™ç¯‡paperï¼Œè¯´çš„æ˜¯å¦‚ä½•ä¸ºTensorFlowè®¡ç®—å›¾é‡Œçš„ä¸åŒç®—å­åˆ†é…ä¸åŒçš„deviceï¼Œæœ€åç”¨å¼ºåŒ–å­¦ä¹ å®ç°äº†è¿™ä¸ªç›®æ ‡ã€‚è¿™ä¸ªå·¥ä½œçœ‹èµ·æ¥æœ‰ç‚¹prototypeï¼Œä½†æå‡ºäº†ä¸€ä¸ªæ–°çš„æ€è·¯ã€‚å¦å¤–è¿˜æœ‰å¾ˆå¤šçŒ›å¦‚è™çš„ç±»ä¼¼Train XX model in y minutesçš„å·¥ä½œã€‚è¿™ç§å°±ä¸ä»…æ˜¯placementå¥½å°±èƒ½å®Œæˆçš„äº†ï¼Œè¿˜éœ€è¦æ¶‰åŠç³»ç»Ÿæ‹“æ‰‘çš„è®¾è®¡ã€é™ä½communicationå¼€é”€ç­‰ç­‰ã€‚&lt;/p>
&lt;p>å¯¹äºé›†ç¾¤è°ƒåº¦ï¼Œå·¥ä¸šç•Œçš„ä¸€ä¸ªçƒ­ç‚¹æ˜¯ä½¿ç”¨å®¹å™¨å¹³å°ï¼ˆä¾‹å¦‚k8sï¼‰æ¥è¿è¡Œåˆ†å¸ƒå¼æœºå™¨å­¦ä¹ åº”ç”¨ã€‚è™½ç„¶k8sæœ¬èº«å°±æœ‰å®¹å™¨é›†ç¾¤è°ƒåº¦çš„åŠŸèƒ½ï¼Œä½†ä¸ºäº†è®©å®ƒæ›´å¥½åœ°é€‚åº”MLçš„workloadï¼Œäººä»¬å¼€å‘äº†ä¸€äº›æ–°çš„è½®å­ï¼Œæ¯”å¦‚é’ˆå¯¹TensorFlowï¼ˆParameter Serveræ¨¡å‹ï¼‰å’ŒPyTorchçš„KubeFlowã€‚è¿˜æœ‰ç”¨k8sæ¥è·‘AutoMLçš„katibã€‚å­¦æœ¯ç•Œå¯¹è¿™æ–¹é¢çš„ä¸€ä¸ªç ”ç©¶çƒ­ç‚¹æ˜¯GPUé›†ç¾¤è°ƒåº¦ï¼Œåœ¨ä¸‹é¢2.2èŠ‚ä¼šä»‹ç»ã€‚&lt;/p>
&lt;h3 id="114-communicationç›¸å…³">1.1.4 communicationç›¸å…³&lt;/h3>
&lt;p>[ch3.5] [ch7]ä»‹ç»äº†ä¸€äº›å®è§‚ä¸Šçš„é€šä¿¡æ¨¡å‹ï¼Œä½†æ·±å…¥è¿›å»è¿˜æœ‰å¾ˆå¤šå¯æçš„å‘ã€‚ä¼ ç»Ÿæç½‘ç»œ/åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç»„æ¯”è¾ƒå¥‘åˆè¿™ä¸ªå°æ–¹å‘ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚æˆ‘æ ¡çš„åˆ†å¸ƒå¼ç»„åŸæ¥æœ‰ä¸€äº›geo-distributed systemçš„å·¥ä½œï¼Œç°åœ¨ä¹Ÿå¯ä»¥å¾€MLä¸Šè£…ã€‚&lt;/p>
&lt;h3 id="115-å…¶ä»–sys-for-mlå¯åšçš„å‘">1.1.5 å…¶ä»–sys for MLå¯åšçš„å‘&lt;/h3>
&lt;p>å·¥ä¸šç•Œçš„ä¸€ä¸ªML pipelineä¸ä»…ä»…æ˜¯è®­ç»ƒï¼Œè¿˜æ¶‰åŠåˆ°å¾ˆå¤šå…¶ä»–çš„å‘ã€‚è¿™äº›æ˜¯ç›®å‰è¢«æŒ–çš„è¿˜æ¯”è¾ƒå°‘çš„ï¼š&lt;/p>
&lt;p>å­˜å‚¨ / Data Managementï¼š&lt;/p>
&lt;ol>
&lt;li>è®­ç»ƒæ•°æ®çš„è§„æ¨¡æ˜¯å¾ˆå¤§çš„ã€‚å¦‚ä½•ä¸ºMLè®¾è®¡ä¸€ä¸ªä¸“ç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆç±»ä¼¼å¤§æ•°æ®ç•Œçš„HDFSï¼‰æˆ–è€…æ•°æ®åº“æ¥åŠ é€Ÿè¯»æ•°æ®å‘¢ï¼Ÿ ç±»ä¼¼çš„å·¥ä½œæœ‰ç®¡ç†ML modelçš„ModelDB.&lt;/li>
&lt;li>åœ¨ML frameworkä¸­ï¼Œä»¥åŠParameter Serverä¸­ï¼Œéœ€è¦ç”¨ä¸€ä¸ªKV storage systemæ¥å­˜å‚¨å‚æ•°ã€‚å¯ä¸å¯ä»¥é’ˆå¯¹MLçš„åœºæ™¯ä¼˜åŒ–è¿™ä¸ªKVå­˜å‚¨ç³»ç»Ÿå‘¢ï¼Ÿ å…³äºè¿™ä¸ªå¯ä»¥å‚è€ƒneopenxå¤§ç¥çš„blogã€‚&lt;/li>
&lt;/ol>
&lt;h1 id="2-æ·±åº¦å­¦ä¹ æ¨¡å‹å‹ç¼©åŠ é€Ÿ-">2. æ·±åº¦å­¦ä¹ æ¨¡å‹å‹ç¼©/åŠ é€Ÿ â­&lt;/h1>
&lt;p>è¿™æ–¹é¢å’Œarchitectureç»“åˆæ¯”è¾ƒç´§å¯†ã€‚CS229æœ‰è¿™ä¸€èŠ‚ï¼Œä¹Ÿå¯ä»¥å‚è€ƒNIPS19ä¸Šçš„è¿™ä¸ªtalkã€‚&lt;/p>
&lt;p>å¯¹DL modelè¿›è¡Œå‹ç¼©ä¸»è¦è€ƒè™‘ä¸¤ä¸ªè§’åº¦ï¼šå‡å°‘è®¡ç®—é‡ï¼ˆä¾‹å¦‚convå±‚çš„è®¡ç®—é‡ï¼‰ / å†…å­˜å ç”¨ï¼ˆNNçš„å‚æ•°æ•°é‡ï¼‰ã€‚ä¸ä»…è¦è€ƒè™‘MLä¸Šçš„metricï¼Œä¹Ÿè¦è€ƒè™‘systemå±‚é¢çš„performanceï¼ˆä¾‹å¦‚latency / throughput / åŠŸè€—ã€‚æœ‰æ—¶å€™è¿™äº›æ¯”MLæ¨¡å‹çš„accuracyè¿˜é‡è¦ï¼‰ã€‚å…·ä½“çš„æ–¹å¼å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;ol>
&lt;li>Architectural Compression
Layer Design -&amp;gt; Typically using factorization techniques to reduce storage and computation
Pruningï¼ˆå‰ªæï¼‰ -&amp;gt; Eliminating weights, layers, or channels to reduce storage and computation from large pre-trained models. å‡å°‘å·ç§¯æ ¸å¤§å° / é€šé“æ•°ç­‰ç­‰&lt;/li>
&lt;li>Weight Compression
Low Bit Precision Arithmetic -&amp;gt; Weights and activations are stored and computed using low bit precision
Quantizedï¼ˆé‡åŒ–ï¼‰ Weight Encoding -&amp;gt; Weights are quantized and stored using dictionary encodings.
å¾ˆå¤šç›¸å…³çš„å·¥ä½œæ˜¯åœ¨MLçš„è§’åº¦æ¥å‹ç¼©æ¨¡å‹çš„ï¼ˆä¹Ÿå°±æ˜¯Arch Compressionï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹CNNå’ŒRNNã€‚æ¯”å¦‚å¾ˆè‘—åçš„MobileNetï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆ(kan)ç•¥(bu)è¿‡(dong)ï¼Œæ¥çœ‹ä»Systemçš„è§’åº¦æ˜¯å¦‚ä½•åŠ é€Ÿçš„ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="21-é€šè¿‡quantizedé‡åŒ–é™ä½è®¡ç®—ç²¾åº¦è¦æ±‚-">2.1 é€šè¿‡Quantizedï¼ˆé‡åŒ–ï¼‰é™ä½è®¡ç®—ç²¾åº¦è¦æ±‚ â­â­&lt;/h2>
&lt;p>é‡åŒ–çš„å«ä¹‰æ˜¯å°†å·ç§¯å±‚ï¼ˆthe weights and / or activations of a CNNï¼‰é€šå¸¸è¦ç”¨åˆ°çš„32ä½æµ®ç‚¹æ•°ç”¨æ›´ä½ä½çš„æ•°æ¥è¡¨ç¤ºï¼Œå¦‚int32, int16, int8ç­‰ç­‰ï¼Œæ¥é™ä½èµ„æºå ç”¨ï¼ˆfloat32æ— è®ºæ˜¯è®¡ç®—è¿˜æ˜¯å­˜å‚¨éƒ½æ˜¯å¾ˆåƒèµ„æºçš„..ï¼‰ã€‚é‡åŒ–ä¹‹åæ— ç–‘ä¼šæŸå¤±ä¸€éƒ¨åˆ†ç²¾åº¦ï¼Œä½†ç¥ç»ç½‘ç»œå¯¹å™ªå£°å¹¶ä¸æ˜¯ç‰¹åˆ«æ•æ„Ÿï¼Œå› æ­¤æ§åˆ¶å¥½é‡åŒ–çš„ç¨‹åº¦ä¹‹åå¯¹MLä»»åŠ¡çš„å½±å“å¯ä»¥å¾ˆå°ã€‚&lt;/p>
&lt;p>ä¸€ç§å¸¸ç”¨çš„é‡åŒ–æ–¹æ³•æ˜¯train in floating point and then quantize the resulting weightsï¼Œè®­ç»ƒæ—¶è¿˜æ˜¯ç”¨float32ï¼ˆå› ä¸ºè¦æ¶‰åŠåˆ°åå‘ä¼ æ’­å’Œæ¢¯åº¦ä¸‹é™ï¼Œå…¨æ˜¯intå°±å¾ˆéš¾æäº†..ï¼‰ï¼Œä½†åœ¨inferenceçš„é˜¶æ®µå°±å¯ä»¥åŠ é€Ÿå•¦ã€‚ä¸€ä¸ªç›´è§‚çš„æ–¹æ³•æ˜¯äº‹å…ˆæ‰¾å¥½ä¸€èˆ¬ç½‘ç»œå‚æ•°çš„min / maxå€¼ï¼Œç„¶åå°†è®­ç»ƒå¥½çš„ç½‘ç»œå‚æ•°ä¹˜ä¸€ä¸ªscala factoræ¥æ˜ å°„åˆ°[MIN_INT, MAX_INT]åŒºé—´å†…çš„æ•´æ•°å­˜èµ·æ¥ã€‚åœ¨inferenceæ—¶å…ˆæŒ‰intæ¥è®¡ç®—ï¼Œæœ€åç»“æœå†è½¬æ¢å›float32ã€‚è¿™ä¸€è¿‡ç¨‹ä¸­å…¶å®åŠ é€Ÿäº†å¤§é‡çš„å·ç§¯è®¡ç®—ã€‚æ¯”å¦‚è¿™ç¯‡paperå°±å®ç°äº†float32åˆ°int8çš„é‡åŒ–ã€‚&lt;/p>
&lt;p>æ··åˆç²¾åº¦è®¡ç®—ï¼šä¸Šé¢è®²çš„æ–¹æ³•æ˜¯ç”¨åœ¨inferenceé˜¶æ®µçš„ï¼Œå…¶å®åœ¨æ¨¡å‹è®­ç»ƒæ—¶ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹æ³•æ¥åŠ é€Ÿï¼Œåªä¸è¿‡å†ç”¨intå°±ä¸å¤§è¡Œäº†ã€‚ä¸€ç§æ¯”è¾ƒæ–°çš„æ–¹æ³•æ˜¯ç”¨float16ï¼ˆä¹Ÿå°±æ˜¯ä¿—ç§°çš„åŠç²¾åº¦ï¼‰ï¼Œfp16å ç”¨ç©ºé—´æ˜¯å•ç²¾åº¦(fp32)çš„ä¸€åŠï¼ŒåŒç²¾åº¦(doubleï¼Œä¹Ÿå°±æ˜¯fp64)çš„1/4ã€‚&lt;/p>
&lt;p>é‡åŒ–çš„å…·ä½“å®ç°æ–¹æ³•å¯ä»¥å‚è€ƒè¿™é‡Œã€‚NVIDIAä¸“é—¨æ¨å‡ºäº†é’ˆå¯¹inferenceé˜¶æ®µé‡åŒ–åŠ é€Ÿçš„å·¥å…·åŒ…TensorRT&lt;/p>
&lt;h2 id="22-æ–°ç¡¬ä»¶--dl-acclerator-">2.2 æ–°ç¡¬ä»¶ / DL Acclerator â­â­&lt;/h2>
&lt;p>åœ¨çº¯ç¡¬ä»¶æ–¹é¢é’ˆå¯¹DL workloadçš„å·¥ä½œä¹Ÿæœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ¥çœ‹å‡ ä¸ªparallelç›¸å…³çš„æŠ€æœ¯ã€‚æœ€è¿‘Data-Level Parallelismä¸ä»…åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œåœ¨å…¶ä»–ä¸€äº›é¢†åŸŸï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼‰ä¹Ÿæœ‰äº†è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ã€‚&lt;/p>
&lt;p>CPUï¼šå°½ç®¡GPUå·²ç»æˆäº†æ·±åº¦å­¦ä¹ è®¡ç®—çš„æ ‡é…ï¼Œæœ‰æ—¶å€™ä»ç„¶æ˜¯éœ€è¦CPUè¿ç®—çš„ã€‚ä¾‹å¦‚è¦åœ¨æ‰‹æœºç­‰è¾£é¸¡è®¾å¤‡ä¸Šè¿›è¡Œinferenceã€‚&lt;/p>
&lt;p>SIMDï¼šSIMDçš„å«ä¹‰æ˜¯åŒä¸€æ¡æŒ‡ä»¤åœ¨å¤šä¸ªæ•°æ®æµä¸Šæ“ä½œï¼Œå’Œåœ¨å‘é‡å¤„ç†å™¨ä¸­ä¸€æ ·ã€‚åœ¨å…·ä½“å®ç°ä¸­ï¼ˆä¾‹å¦‚SSEæŒ‡ä»¤é›†ï¼‰æ˜¯æŠŠä¸€ä¸ª128ä½SSEå¯„å­˜å™¨ï¼ˆè¿™æ˜¯æ–°å¢åŠ çš„SIMDä¸“ç”¨å¯„å­˜å™¨ï¼Œå’Œæ—©æœŸå€Ÿç”¨FPUå¯„å­˜å™¨çš„MMXä¸åŒã€‚åœ¨SSEæŒ‡ä»¤é›†ä¸­æ˜¯å¢åŠ äº†8ä¸ªè¿™ç§å¯„å­˜å™¨ï¼‰åˆ’åˆ†æˆ4ä¸ªå—ï¼ŒåŒæ—¶å­˜æ”¾4ä¸ªfloat32å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ4ä¸ªå—å¯ä»¥åŒæ—¶è¿›è¡Œè¿ç®—ï¼ˆæœ‰å¤šä¸ªè¿ç®—å•å…ƒï¼Œä½œç”¨äºä¸åŒçš„åœ°å€ï¼‰ï¼Œè¿™æ ·å°±æé«˜äº†å¹¶è¡Œåº¦ã€‚åæ¥çš„SSE2 / SSE3 / SSE4 / AVXæŒ‡ä»¤é›†åœ¨æ­¤åŸºç¡€ä¸Šåˆå¢åŠ å¯¹float64 / æ›´å¤šè¿ç®—çš„æ”¯æŒï¼Œä»¥åŠæ‰©å±•äº†SIMDä¸“ç”¨å¯„å­˜å™¨çš„ä½æ•°ï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€æ ·çš„ã€‚ã€€ã€€å¦å¤–ï¼ŒSIMDå¸¦æ¥çš„å¹¶è¡Œå’Œè¶…æ ‡é‡å¤„ç†å™¨çš„å¹¶è¡Œæ€§ï¼ˆä¸€ä¸ªå‘¨æœŸissueå¤šä¸ªæŒ‡ä»¤ï¼Œç”¨äºinstruction level parallelismï¼‰ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚éè¶…æ ‡é‡å¤„ç†å™¨ä¹Ÿå¯ä»¥SIMDï¼Œè€Œè¶…æ ‡é‡å¤„ç†å™¨å¯ä»¥æ›´å¹¶è¡Œissueå¤šä¸ªSIMDæ“ä½œã€‚&lt;/p>
&lt;p>VLIWï¼šå’Œä¸€æ¬¡issueå¤šæ¡æŒ‡ä»¤ï¼Œç„¶åé ç¡¬ä»¶è¿›è¡ŒILPè°ƒåº¦ï¼ˆä¹Ÿå«åŠ¨æ€å¤šå‘å°„ã€‚éœ€è¦ç¡¬ä»¶å®ç°ä¹±åºæ‰§è¡Œã€åˆ†æ”¯é¢„æµ‹ç­‰æ“ä½œï¼‰çš„è¶…æ ‡é‡å¤„ç†å™¨ä¸åŒï¼ŒVLIWï¼ˆVery Large Instruction Widthï¼Œé‡‡ç”¨è¿™ç§æŠ€æœ¯çš„å¤„ç†å™¨ä¹Ÿå«åšé™æ€å¤šå‘å°„å¤„ç†å™¨ï¼‰çš„å«ä¹‰æ˜¯ä¸€æ¬¡åªissueä¸€æ¡å¯ä»¥å®Œæˆå¤šä¸ªæ“ä½œçš„å¤æ‚é•¿æŒ‡ä»¤ï¼ˆä¹Ÿå«å‘å°„åŒ…ï¼Œå…¶å®ä»è½¯ä»¶çš„è§’åº¦çœ‹æ˜¯å¤šæ¡æŒ‡ä»¤çš„é›†åˆï¼‰ã€‚å› æ­¤ä¸€æ¡æŒ‡ä»¤çš„ä½å®½å¯ä»¥å¾ˆå¤§ã€‚VLIWæ˜¯é€šè¿‡ç¼–è¯‘å™¨æ¥è¿›è¡ŒæŒ‡ä»¤çº§å¹¶è¡Œè°ƒåº¦çš„ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ˜¯å¾ªç¯å±•å¼€ï¼Œé€šè¿‡è¯†åˆ«å‡ºå¯å¹¶è¡Œçš„é‡å è·¨å¾ªç¯ä½“æŒ‡ä»¤å—æ¥å®ç°ILPï¼‰ã€‚VLIWçš„æœ¬æ„æ˜¯å¸Œæœ›åœ¨ç¼–è¯‘é˜¶æ®µå°±è¯†åˆ«å‡ºç¨‹åºä¸­çš„ä¾èµ–å…³ç³»ï¼ˆé™æ€è°ƒåº¦ï¼‰ï¼Œå¾—åˆ°å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„å‘å°„åŒ…ï¼Œç¡¬ä»¶åªéœ€è¦æ ¹æ®è°ƒåº¦å¥½çš„å‘å°„åŒ…ç›´æ¥æ‰§è¡Œå³å¯ï¼Œè¿™æ ·å°±ç®€åŒ–äº†ç¡¬ä»¶å®ç°ï¼Œä»è€Œå®ç°æ›´å¤§å®½åº¦å‘å°„åŒ…çš„å¹¶è¡Œæ‰§è¡Œã€‚intel Itaniumçš„IA64æŒ‡ä»¤é›†å°±ä½¿ç”¨äº†è¿™ä¸ªæŠ€æœ¯ï¼Œä½†å®ƒåœ¨å½“å¹´å¹¶æ²¡æœ‰å–å¾—æˆåŠŸã€‚ä¸€ä¸ªé‡è¦çš„åŸå› æ˜¯å®ƒåªé€‚åˆè®¡ç®—å¯†é›†ã€ç®—æ³•å›ºå®šå¯æ§çš„workloadã€‚ä¼ ç»Ÿçš„é€šç”¨åº”ç”¨ç¨‹åºå¯èƒ½å¾ˆéš¾å…·å¤‡è¿™ä¸ªå±æ€§ï¼ˆæœ‰å¾ˆå¤šrun-timeæ‰èƒ½ç¡®å®šçš„å€¼ï¼Œå¦å¤–cacheè®¿é—®ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ï¼‰ï¼Œä½†æ·±åº¦å­¦ä¹ ä»»åŠ¡å…·å¤‡è¿™äº›æ€§è´¨ã€‚&lt;/p>
&lt;p>GPUï¼šGPUçš„æœ¬è´¨å¯ä»¥çœ‹åšSIMTï¼ˆSingle Instruction Multiple Threadsï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>GPUé›†ç¾¤ï¼šDLæ¡†æ¶ä¸€èˆ¬éƒ½æ”¯æŒGPUå’Œåˆ†å¸ƒå¼è®­ç»ƒï¼Œå·²ç»å¯ä»¥åœ¨GPUé›†ç¾¤ç¯å¢ƒä¸‹è¿è¡Œäº†ï¼Œä½†å®é™…ä¸Šè¿˜å­˜åœ¨ä¸€äº›é—®é¢˜å¯¼è‡´åˆ†å¸ƒå¼åœºæ™¯ä¸‹èµ„æºçš„ä½¿ç”¨ç‡æä¸ä¸Šå»ï¼š1). CPUå’ŒGPUä¹‹é—´memcpyå¼€é”€å¤ªå¤§ã€2). å‚æ•°é€šä¿¡å¼€é”€å¤ªå¤§ã€3). æ˜¾å­˜ä¸å¤Ÿç”¨ã€4). GPUå¾ˆéš¾è™šæ‹ŸåŒ–(å¤šä»»åŠ¡å…±äº«)ã€5).éœ€è¦é’ˆå¯¹ML workloadçš„æ›´å¥½çš„é›†ç¾¤è°ƒåº¦ç­–ç•¥ã€‚ å¯¹äº1å’Œ3å…¶å®ä¹Ÿå¯ä»¥ç”¨å‰é¢æåˆ°çš„ç¥ç»ç½‘ç»œå‹ç¼©ã€æ¨¡å‹å¹¶è¡Œç­‰æ–¹æ³•è§£å†³ï¼› å¯¹äº2ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å°½é‡è®©è®¡ç®—å’Œé€šä¿¡åœ¨æ—¶é—´ä¸Šé‡å èµ·æ¥ï¼Œå‚è€ƒATC17çš„Poseidonï¼› MSRå¯¹äº5åšäº†å¾ˆå¤šå·¥ä½œï¼Œä¸€æ–¹é¢æ˜¯å¯¹å¤§è§„æ¨¡GPUé›†ç¾¤ä¸Šçš„çœŸå®æ—¥å¿—æ•°æ®è¿›è¡Œåˆ†æï¼Œå¾—å‡ºäº†ä¸€äº›ç»éªŒï¼ˆå‘è¡¨åœ¨ATC19ï¼‰ã€‚å¦ä¸€æ–¹é¢æ˜¯è®¾è®¡ä¸€äº›æ›´å¥½çš„schedulingç­–ç•¥ï¼Œä¾‹å¦‚OSDI2018çš„Gandivaï¼ˆé’ˆå¯¹DL workloadè‡ªèº«çš„ç‰¹ç‚¹æ¥æé«˜GPUé›†ç¾¤ä½¿ç”¨ç‡ï¼‰å’ŒNSDI2019çš„Tiresiasï¼› å¯¹äº4ç›®å‰è¿˜æ²¡å•¥å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å¯ä»¥é€šè¿‡ä¸€äº›è½¯è°ƒåº¦æ–¹æ¡ˆæ¥æ¨¡æ‹Ÿã€‚&lt;/li>
&lt;li>è¿™å­¦æœŸ8205è¯¾ä¸Šä¼šæœ‰GPGPUçš„topicï¼Œåˆ°æ—¶å€™å†è¡¥å…… â­â­â­&lt;/li>
&lt;/ul>
&lt;p>ç³»ç»Ÿç»“æ„ï¼šè¿™ä¸ªå’Œçº¯è®¡ç®—å…³ç³»ä¸æ˜¯å¾ˆå¤§ï¼Œå¯èƒ½æš‚æ—¶å’ŒMLåŠ é€Ÿä¹Ÿæ²¡å•¥å…³ç³»ï¼ˆäº‹å®ä¸Šç›®å‰åœ¨è®¡ç®—æœºç½‘ç»œç ”ç©¶ä¸­ç”¨çš„è¿˜å¤šä¸€äº›ï¼‰&amp;hellip;&amp;hellip;ä½†å¯¹äºä¼˜åŒ–æ•´ä½“æ€§èƒ½ä¼šæœ‰å¸®åŠ©&lt;/p>
&lt;ul>
&lt;li>NUMAï¼šå½“å•ä¸ªCPUæ€§èƒ½å·²ç»åˆ°ç“¶é¢ˆæ—¶ï¼Œå¤šå¤„ç†å™¨å°±æˆäº†æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä¸ºäº†æ–¹ä¾¿ç¼–ç¨‹ï¼Œéœ€è¦ä¿è¯èƒ½ä¸ºåº”ç”¨ç¨‹åºæä¾›è·¨è¶Šæ‰€æœ‰å¤„ç†å™¨çš„å•ä¸€ç‰©ç†åœ°å€ç©ºé—´ï¼Œè¿™ç§ä¹Ÿå«åšå…±äº«å†…å­˜å¤„ç†å™¨ï¼ˆShared Memory Processorï¼‰ã€‚SMPåˆå¯ä»¥åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š1) ä»»ä½•å¤„ç†å™¨è®¿é—®ä»»ä½•åœ°å€çš„ä»¿å­˜æ—¶é—´éƒ½æ˜¯ç›¸åŒçš„ï¼Œå«åšç»Ÿä¸€å­˜å‚¨è®¿é—®ï¼ˆUniform Memory Accessï¼‰ã€‚ 2) å¯¹äºæ¯ä¸ªæ ¸å¿ƒï¼Œè®¿é—®æŸäº›å­—ä¼šæ¯”è®¿é—®å…¶ä»–å­—å¿«ä¸€äº›ï¼Œæ•´ä¸ªå†…å­˜ç©ºé—´è¢«åˆ†å‰²å¹¶åˆ†é…ç»™ä¸åŒå¤„ç†å™¨ / å†…å­˜æ§åˆ¶å™¨ï¼Œè¿™å«åšéç»Ÿä¸€å­˜å‚¨è®¿é—®ï¼ˆNonUniform Memory Accessï¼ŒNUMAï¼‰ã€‚NUMAè™½ç„¶çœ‹èµ·æ¥å¤æ‚ï¼Œä½†å¯ä»¥æ”¯æŒæ›´å¤§çš„è§„æ¨¡ï¼ˆæ›´å¤šçš„æ ¸å¿ƒï¼‰ï¼Œå¹¶ä¸”è®¿é—®é™„è¿‘çš„å­˜å‚¨å™¨æ—¶å…·æœ‰è¾ƒä½çš„å»¶è¿Ÿã€‚ åœ¨è¿‡å»å†…å­˜æ§åˆ¶å™¨è¿˜åœ¨åŒ—æ¡¥çš„æ—¶ä»£ï¼Œå¤šå¤„ç†å™¨ç”¨çš„æ˜¯UMAï¼ˆæ‰€æœ‰å¤„ç†å™¨éƒ½é€šè¿‡FSBæ€»çº¿è¿æ¥åŒ—æ¡¥ï¼Œå†è®¿é—®å†…å­˜ï¼‰ã€‚åæ¥éšç€æ ¸å¿ƒè¶Šæ¥è¶Šå¤šï¼Œä¸ºæé«˜è®¿å­˜é€Ÿåº¦ï¼Œå†…å­˜å¤„ç†å™¨è¢«åšåˆ°äº†CPUå†…ï¼Œæ¯ä¸ªCPUæœ‰ï¼ˆæˆ–è€…å¾ˆå°‘çš„å‡ ä¸ªæ ¸å¿ƒå…±äº«ï¼‰ä¸€ä¸ªå†…å­˜æ§åˆ¶å™¨ï¼Œç„¶åç›´è¿ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´ï¼Œè¿™äº›æ ¸å¿ƒå°±è¢«å½’ä¸ºä¸€ä¸ªNUMA nodeã€‚è€Œè·¨NUMA nodeä¹‹é—´çš„å†…å­˜è®¿é—®éœ€è¦èµ°QPIæ€»çº¿ã€‚å¯ä»¥å‚è€ƒè¿™é‡Œçš„å›¾è§£ã€‚ åœ¨ä¸€äº›æ¶‰åŠmany coreçš„å·¥ä½œä¸­ä¼šç»å¸¸ç”¨åˆ°NUMAçš„æ¦‚å¿µ&lt;/li>
&lt;li>RDMAï¼šåœ¨ç½‘ç»œç¯å¢ƒä¸­ä¼šç”¨åˆ°ã€‚RDMAå…¨ç§°æ˜¯Remote Direct Memory Accessï¼Œç”¨äºå®ç°ä¸éœ€è¦OSå‚ä¸çš„è¿œç¨‹å†…å­˜è®¿é—®ï¼ˆå› ä¸ºmessage passing through kernelä¼šæµªè´¹æœ¬æ¥å¾ˆå¤§çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ï¼‰ã€‚å…·ä½“çš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒè¿™é‡Œã€‚ä¸è¿‡æœ€è¿‘ï¼ˆEurosys2019ï¼‰å·²ç»æœ‰äº†åº”ç”¨RDMAæ¥åŠ é€Ÿåˆ†å¸ƒå¼æœºå™¨å­¦ä¹ çš„å·¥ä½œã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸“ç”¨ç¡¬ä»¶ï¼šCPUæ€§èƒ½å¤ªèœï¼ŒGPUåˆå¤ªåºå¤§ï¼Œäºæ˜¯äººä»¬å¼€å‘äº†AIä¸“ç”¨èŠ¯ç‰‡&lt;/p>
&lt;ul>
&lt;li>FPGAï¼šå…¨ç§°æ˜¯Field Programmable Gate Arrayï¼Œæ˜¯å¯ä»¥å¤šæ¬¡çƒ§å†™çš„ã€‚å› ä¸ºæœ¬è´¨ä¸Šå±äºè½¯ä»¶æ‰€ä»¥å¯ä»¥å¿«é€Ÿå¼€å‘ / è¿­ä»£ã€‚&lt;/li>
&lt;li>ASICï¼šå…¨ç§°æ˜¯application-specific integrated circuitsï¼Œå‡ºå‚åç”µè·¯å°±ä¸å¯ä»¥æ”¹å˜äº†ï¼ˆéœ€è¦æµç‰‡ï¼‰ã€‚ä½†æ˜¯æ€§èƒ½æ¯”FPGAé«˜ã€‚Googleçš„TPUå°±å±äºä¸€ç§ASICã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="23-çŸ©é˜µç®—å­ä¼˜åŒ–">2.3 çŸ©é˜µç®—å­ä¼˜åŒ–&lt;/h2>
&lt;p>ç¥ç»ç½‘ç»œä¸­çš„å¾ˆå¤šè¿ç®—æœ¬è´¨ä¸Šå°±æ˜¯å¯¹çŸ©é˜µè¿ç®—ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸€äº›çŸ©é˜µä¹˜æ³•ä¼˜åŒ–æ–¹æ¡ˆæ¥åŠ é€Ÿã€‚æ¯”å¦‚cublaså°±æ˜¯å°è£…å¥½çš„é’ˆå¯¹çŸ©é˜µå’Œå‘é‡è¿ç®—çš„åŠ é€Ÿåº“ï¼Œè€Œå¯¹äºç¥ç»ç½‘ç»œåŠ é€Ÿåˆ™ä¼šä½¿ç”¨cudnn&lt;/p>
&lt;p>ç®—å­ä¼˜åŒ–æ˜¯ä¸ªéå¸¸è´´è¿‘hardwareçš„å·¥ä½œï¼Œå¯¹å¤šç§è®¾å¤‡éƒ½äººå·¥è°ƒä¼˜è¿™äº›ç®—å­å…¶å®æ˜¯æ¯”è¾ƒéš¾çš„&amp;hellip;å¦‚æœèƒ½ç®€åŒ–ä¸€éƒ¨åˆ†å·¥ä½œå°±æœ€å¥½å•¦ã€‚äºæ˜¯å°±æœ‰äº†ä¸‹é¢ä¼šæåˆ°çš„æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªå·¥ä½œå¯èƒ½åå‘äºå·¥ä¸šç•Œ&lt;/p>
&lt;/blockquote>
&lt;h2 id="24-automl">2.4 AutoML&lt;/h2>
&lt;p>è¿™ä¸ªä¸¥æ ¼æ¥è¯´å¯èƒ½ä¸ç®—MLsysäº†&amp;hellip;ä½†å®ƒçš„æ€è·¯åœ¨å¾ˆå¤šMLsysé—®é¢˜ä¸­ä¹Ÿä¼šè¢«ç”¨åˆ°&lt;/p>
&lt;p>AutoMLæœ€æ—©åªèƒ½è°ƒå¾ˆæœ‰é™çš„å‡ ç§å‚æ•°ï¼Œç”¨çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒæš´åŠ›ï¼ˆå¯å‘å¼æœç´¢ï¼‰ã€‚åæ¥èƒ½è°ƒçš„ä¸œè¥¿è¶Šæ¥è¶Šå¤šï¼Œæ–¹æ³•ä¹Ÿæ›´åŠ çŒ›å¦‚è™&amp;hellip;ä¸€ä¸ªé‡Œç¨‹ç¢‘æ˜¯NASï¼Œæ ‡å¿—ç€ç¥ç»ç½‘ç»œç»“æ„ä¹Ÿå¯ä»¥Autoäº†ã€‚&lt;/p>
&lt;p>å¸¸ç”¨çš„è°ƒå‚æ–¹æ³•å¤§è‡´å¯ä»¥åˆ†ä¸ºè¿™å‡ ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>éšæœºæœç´¢ï¼Œæˆ–è€…è¯´å«å¯å‘å¼æœç´¢ã€‚åŒ…æ‹¬ GridSearch å’Œ RandomSearchã€‚è¿™ç§æ–¹æ³•çš„æ”¹è¿›ç©ºé—´ä¸»è¦ä½“ç°åœ¨ä½¿ç”¨ä¸åŒçš„é‡‡æ ·æ–¹æ³•ç”Ÿæˆé…ç½®ï¼Œä½†æœ¬è´¨ä¸Šä»ç„¶æ˜¯éšæœºè¯•éªŒä¸åŒçš„é…ç½®ï¼Œæ²¡æœ‰æ ¹æ®è·‘å‡ºæ¥çš„ç»“æœæ¥åé¦ˆæŒ‡å¯¼é‡‡æ ·è¿‡ç¨‹ï¼Œæ•ˆç‡æ¯”è¾ƒä½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Multi-armed Banditã€‚è¿™ç§æ–¹æ³•ç»¼åˆè€ƒè™‘äº†â€œæ¢ç´¢â€å’Œâ€œåˆ©ç”¨â€ä¸¤ä¸ªé—®é¢˜ï¼Œæ—¢å¯ä»¥é…ç½®æ›´å¤šèµ„æºï¼ˆä¹Ÿå°±æ˜¯é‡‡æ ·æœºä¼šï¼‰ç»™æœç´¢ç©ºé—´ä¸­æ•ˆæœæ›´ä¼˜çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¼šè€ƒè™‘å°è¯•å°½é‡å¤šçš„å¯èƒ½æ€§ã€‚Bandit ç»“åˆè´å¶æ–¯ä¼˜åŒ–ï¼Œå°±æ„æˆäº†ä¼ ç»Ÿçš„ AutoML çš„æ ¸å¿ƒã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ·±åº¦å¼ºåŒ–å­¦ä¹ ã€‚å¼ºåŒ–å­¦ä¹ åœ¨ AutoML ä¸­æœ€è‘—åçš„åº”ç”¨å°±æ˜¯ NASï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆç¥ç»ç½‘ç»œç»“æ„ã€‚å¦å¤–å®ƒåœ¨ æ·±åº¦å­¦ä¹ å‚æ•°è°ƒä¼˜ ä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ä»â€œä»æ•°æ®ä¸­å­¦ä¹ â€è½¬å˜ä¸ºâ€œä»åŠ¨ä½œä¸­å­¦ä¹ â€ï¼ˆæ¯”å¦‚æŸä¸ªå‚æ•°ä»å°è°ƒåˆ°å¤§ï¼‰ï¼Œæ—¢å¯ä»¥ä»æ€§èƒ½å¥½çš„æ ·æœ¬ä¸­å­¦ä¹ ï¼Œä¹Ÿå¯ä»¥ä»æ€§èƒ½åçš„æ ·æœ¬ä¸­å­¦ä¹ ã€‚ä½†å¼ºåŒ–å­¦ä¹ çš„å‘ä¹Ÿæ¯”è¾ƒå¤šï¼Œä½“ç°åœ¨è®­ç»ƒå¯èƒ½æ¯”è¾ƒå›°éš¾ï¼Œæœ‰æ—¶ç»“æœæ¯”è¾ƒéš¾å¤ç°ã€‚
ä¹‹æ‰€ä»¥æŠŠAutoMLä¹Ÿåˆ—å‡ºæ¥ï¼Œæ˜¯å› ä¸ºè¿™äº›æ–¹æ³•åœ¨ä¸‹é¢æåˆ°çš„ML for systemé—®é¢˜ä¸­ä¼šå¾ˆæœ‰ç”¨ã€‚æ¯”å¦‚ä¹‹å‰åšè¿‡çš„AutoTiKVå°±åº”ç”¨äº†ä¸€ç§è´å¶æ–¯ä¼˜åŒ–æ–¹æ³•æ¥è°ƒèŠ‚æ•°æ®åº“å‚æ•°ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>cs294ä¸­ç»™å‡ºäº†å‡ ä¸ªå¯æé«˜çš„æ–¹å‘ï¼š&lt;/p>
&lt;p>Accelerate data collection and preparation&lt;/p>
&lt;ul>
&lt;li>Automatic data discovery&lt;/li>
&lt;li>Distributed data processing, esp. for image and video data&lt;/li>
&lt;li>Data cleaning and schema driven auto-featurization&lt;/li>
&lt;/ul>
&lt;p>Accelerate model selection and hyper-parameter search&lt;/p>
&lt;ul>
&lt;li>Parallel and distributed execution&lt;/li>
&lt;li>Data and feature caching across training runs&lt;/li>
&lt;/ul>
&lt;p>Provenance&lt;/p>
&lt;ul>
&lt;li>Track previous model development to inform future decisions&lt;/li>
&lt;li>Connect errors in production with decisions in model development&lt;/li>
&lt;/ul>
&lt;h1 id="3-æ·±åº¦å­¦ä¹ æ¡†æ¶ç³»ç»Ÿè®¾è®¡">3. æ·±åº¦å­¦ä¹ æ¡†æ¶/ç³»ç»Ÿè®¾è®¡&lt;/h1>
&lt;p>å’ŒDistributed Trainingçš„åŒºåˆ«æ˜¯è¿™é‡Œæ›´å…³æ³¨ä¸€äº›å·¥ç¨‹ä¸Šçš„ä¸œè¥¿ï¼ˆæ¡†æ¶è®¾è®¡ã€APIè®¾è®¡ç­‰ç­‰ï¼‰ã€‚ä¸€ä¸ªDeep Learning Frameworkå¤§è‡´éœ€è¦ä»¥ä¸‹å‡ ä¸ªå…ƒç´ ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒå„ç§ç®—å­(op) å’Œ tensor (data)&lt;/li>
&lt;li>è®¡ç®—å›¾çš„å®šä¹‰æ–¹å¼ï¼ˆåŠ¨æ€ v.s. é™æ€ï¼‰&lt;/li>
&lt;li>Auto Diff&lt;/li>
&lt;li>Optimizerï¼ˆä¾‹å¦‚Adamï¼‰&lt;/li>
&lt;li>å„ç§åŠ é€Ÿå’Œä¼˜åŒ–çš„åº“ï¼šcudnn, openblas,mklç­‰&lt;/li>
&lt;/ul>
&lt;h2 id="31-deep-learning-framework">3.1 Deep Learning Framework&lt;/h2>
&lt;p>è¿™ä¸€èŠ‚é‡ç‚¹å…³æ³¨è¿™å‡ ä¸ªæ–¹å‘ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Differentiable Programmingï¼šå¦‚æœç”¨è¿‡Kerasæˆ–è€…PyTorchå°±ä¼šè®°å¾—å®ƒå¯ä»¥ç®€å•å¾—åƒæ­ç§¯æœ¨ä¸€æ ·æ‘ä¸€ä¸ªNNå‡ºæ¥ï¼Œåªéœ€è¦å®šä¹‰ä¸€ä¸ªä¸€ä¸ªçš„å±‚ï¼ˆå‰å‘ä¼ æ’­é€»è¾‘ï¼‰å’ŒæŸå¤±å‡½æ•°å°±è¡Œäº†ã€‚è€ŒNNçš„è®­ç»ƒéœ€è¦Backward Propagation / Forward Propagationï¼Œä¹Ÿå°±æ˜¯è®¡ç®—å¾®åˆ†ï¼Œè¿ç®—æ—¶frameworkå¯ä»¥æ ¹æ®å®šä¹‰å¥½çš„è®¡ç®—å›¾è‡ªåŠ¨æ±‚å¯¼ç®—æ¢¯åº¦ã€‚åªè¦å¯å¾®åˆ†å°±å¯ä»¥ä¿è¯è¿™ä¸ªç§¯æœ¨èƒ½æ‘å‡ºæ¥ï¼Œç„¶åä½¿ç”¨é“¾å¼æ³•åˆ™å°±å¯ä»¥è‡ªåŠ¨è®¡ç®—å¾®åˆ†ï¼ˆAutomatic Differentiationï¼‰ã€‚å¦‚æœä¸€ä¸ªè¯­è¨€æˆ–è€…frameworkå…·å¤‡äº†Differentiable Programmingçš„æ€§è´¨ï¼Œå°±å¯ä»¥æ›´ç®€å•çš„åœ¨å®ƒä¸Šé¢å¼€å‘Deep Learningåº”ç”¨ï¼ˆå¯ä»¥ç±»æ¯”pythonæ‰‹å†™NNå’ŒKerasçš„åŒºåˆ«ï¼‰ã€‚è¿™ç¯‡æ–‡ç« å¯¹Auto Diffçš„å®ç°åšäº†å¾ˆè¯¦ç»†çš„ä»‹ç»ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Embedded Domain Specific Languagesï¼šDSLçš„æ¦‚å¿µæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ¯”å¦‚SQLå°±æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­çš„DSLï¼Œä½†è¿™å·²ç»ç›¸å½“äºä¸€ä¸ªå…¨æ–°çš„è¯­è¨€äº†ã€‚Embedded DSLæ˜¯åœ¨ç°æœ‰è¯­è¨€ä¸Šï¼ˆä¾‹å¦‚Pythonï¼‰é’ˆå¯¹æŸä¸ªç‰¹å®šä»»åŠ¡åšçš„æ‰©å±•ã€‚æ¯”å¦‚ä¸ºäº†è®©PythonåšçŸ©é˜µè®¡ç®—æ›´æ–¹ä¾¿å‘æ˜äº†numpyï¼›ä¸ºäº†è¿›è¡Œæœºå™¨å­¦ä¹ å°±æœ‰äº†TensorFlow / PyTorchç­‰ç­‰ã€‚Embedded DSLçš„ä½œç”¨æ˜¯å®Œæˆ Linear Algebra -&amp;gt; Pipelines -&amp;gt; Differentiable Programs çš„è½¬åŒ–ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ ¹æ®è®¡ç®—å›¾çš„å®šä¹‰æ–¹å¼ï¼Œå¯ä»¥åˆ†ä¸ºDeclarative Abstractionï¼ˆEmbedded DSLå…ˆç”Ÿæˆé™æ€è®¡ç®—å›¾ï¼Œç±»ä¼¼ç¼–è¯‘æ‰§è¡Œ define-and-runï¼Œä¾‹å¦‚Tensorflowã€Caffeï¼‰å’ŒImperativeï¼ˆEmbedded DSLç”ŸæˆåŠ¨æ€è®¡ç®—å›¾å¹¶ç›´æ¥è¾“å‡ºç»“æœï¼Œç±»ä¼¼è§£é‡Šæ‰§è¡Œ define-by-runï¼Œä¾‹å¦‚PyTorchã€Tensorflow Eagerï¼‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å¯¹äºå…·ä½“çš„DLæ¡†æ¶æ¥è¯´ï¼Œè™½ç„¶å¾ˆå¤šå…¬å¸éƒ½å¼€å§‹è‡ªç ”æ¡†æ¶äº†ï¼Œä½†æœ€æµè¡Œçš„åŸºæœ¬å°±TensorFlowã€PyTorchã€mxnetç­‰ç­‰é‚£å‡ å®¶äº†ã€‚ä¸è¿‡æœ€è¿‘åˆå‡ºç°äº†åˆ†å¸ƒå¼å¼ºåŒ–å­¦ä¹ æ¡†æ¶Rayï¼Œä¹Ÿå…·æœ‰å¾ˆå¥½çš„è½åœ°æ½œèƒ½ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ç¡®å®å¦‚æ­¤ï¼Œå·¥ä¸šç•Œå¾ˆå¤šå…¬å¸éƒ½åœ¨åšè‡ªå·±çš„æ¡†æ¶äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="32-inference--model-serving">3.2 Inference / Model Serving&lt;/h2>
&lt;p>ä¹‹å‰å…³æ³¨äº†å¾ˆå¤šè®­ç»ƒMLæ¨¡å‹ä¸­ä¼šé‡åˆ°çš„é—®é¢˜ã€‚ä½†å®é™…åº”ç”¨åœºæ™¯é‡Œï¼Œinferenceï¼ˆç›´æ¥ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹predictï¼‰çš„æ¬¡æ•°ä¼šæ¯”trainingå¤šå¾ˆå¤šï¼Œå› æ­¤inferenceçš„æ€§èƒ½ä¹Ÿå¾ˆé‡è¦ã€‚&lt;/p>
&lt;p>Inferenceå¯ä»¥å†åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Offline: Pre-Materialize Predictionsï¼šæ‰€æœ‰å¯èƒ½çš„queryéƒ½æ˜¯å·²çŸ¥çš„ï¼Œå°±äº‹å…ˆpredictå¥½å­˜èµ·æ¥ã€‚ä¸€èˆ¬æ²¡æœ‰è¿™ä¹ˆç©çš„&amp;hellip;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Online: Compute Predictions on the flyï¼šæ ¹æ®ç”¨æˆ·çš„è¾“å…¥å®æ—¶predictã€‚è¿™æ‰æ˜¯æœ€å¸¸è§çš„åœºæ™¯&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªå…¸å‹çš„ML inference pipelineå¤§è‡´æ¶‰åŠåˆ°ä»¥ä¸‹å·¥åºï¼š&lt;/p>
&lt;ul>
&lt;li>input data&lt;/li>
&lt;li>-&amp;gt; Preprocessing(æ¯”å¦‚å›¾ç‰‡è¦resize)&lt;/li>
&lt;li>-&amp;gt; model prediction(æœ‰æ—¶å€™ä¼šåŒæ—¶ç”¨å¾ˆå¤šmodelï¼Œè¿˜è¦ensembleèµ·æ¥)&lt;/li>
&lt;li>-&amp;gt; è¾“å‡ºç»“æœï¼Œæœ‰æ—¶å€™è¿˜è¦å¤„ç†ä¸€ä¸‹&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªpipelineçš„è¡¡é‡æŒ‡æ ‡åŒ…æ‹¬Latencyã€Throughputç­‰ï¼ˆå’Œä¼ ç»Ÿçš„systemé—®é¢˜ä¸€æ ·å‘€ï¼‰ã€‚cs294é‡Œåˆ—å‡ºäº†å‡ ä¸ªæœ€è¿‘çš„å·¥ä½œï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œçš„paperè§£è¯»ã€‚ä¸ªäººæ„Ÿè§‰è¿™é‡Œå¯åšçš„å‘ä¸å¤š&amp;hellip;.å¤§å¤šæ˜¯ä¿®ä¿®è¡¥è¡¥&amp;hellip;&lt;/p>
&lt;h2 id="33æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨">3.3æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨&lt;/h2>
&lt;p>è¿™é‡Œå€¼å¾—æä¸€ä¸‹TVMã€‚è¿™ç¯‡æ–‡ç« å¯¹TVMè¿›è¡Œäº†éå¸¸è¯¦ç»†çš„ä»‹ç»ã€‚&lt;/p>
&lt;p>ç®€å•çš„è¯´TVMæ˜¯åœ¨æŠŠè®­ç»ƒå¥½çš„ML modeléƒ¨ç½²åœ¨ä¸åŒè®¾å¤‡ä¸Šæ—¶ç”¨çš„ï¼Œé‡ç‚¹å…³æ³¨çš„æ˜¯Inferenceè€Œä¸æ˜¯Trainingï¼ˆä¹Ÿå°±æ˜¯æ¨ç†å¼•æ“ï¼‰ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹æœ¬èº«å¯èƒ½ç”¨äº†ä¸åŒçš„frameworkæ¥å†™ï¼ˆæ¯”å¦‚tensorflow / PyTorch / MXNetï¼Œæœ¬è´¨åŒºåˆ«åœ¨äºä½¿ç”¨çš„ç®—å­ç±»å‹å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼Œè€Œè¦éƒ¨ç½²åˆ°çš„è®¾å¤‡ä¹Ÿå¯èƒ½æœ‰ä¸åŒçš„ç¡¬ä»¶æ¶æ„ï¼ˆæ¯”å¦‚x86 / ARM / GPU / FPGAï¼‰ã€‚inferenceçš„è¿‡ç¨‹ä¹Ÿå°±æ˜¯å°†framework Xå†™å‡ºæ¥çš„modelæ”¾åœ¨ç¡¬ä»¶Yä¸Šè¿è¡Œçš„è¿‡ç¨‹ï¼Œè¿™ä¸€è¿‡ç¨‹å’Œç¼–è¯‘å™¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼ˆå°†è¯­è¨€Xå†™çš„ç¨‹åºç¼–è¯‘åˆ°ç¡¬ä»¶Yä¸Šè¿è¡Œï¼‰ï¼Œè¿™ä¹Ÿå°±æ˜¯æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨çš„å«ä¹‰ã€‚&lt;/p>
&lt;p>ä¸ºäº†è®¾è®¡ä¸€ä¸ªé«˜æ•ˆçš„æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨ï¼ŒTVMå€Ÿé‰´äº†ä¼ ç»Ÿç¼–è¯‘å™¨LLVMçš„è®¾è®¡æ€æƒ³ï¼šæŠ½è±¡å‡ºç¼–è¯‘å™¨å‰ç«¯[ é«˜çº§è¯­è¨€C/java -&amp;gt; IR ]ï¼Œç¼–è¯‘å™¨ä¸­ç«¯[ ä¼˜åŒ–IRï¼Œè¿™ç§æ˜¯ä¸åŒç¼–è¯‘å™¨å¹³å°å…±äº«çš„ ]ï¼Œç¼–è¯‘å™¨åç«¯[ IR -&amp;gt; ç›®æ ‡ç¡¬ä»¶ä¸Šçš„binary ]ç­‰æ¦‚å¿µï¼Œå¼•å…¥IR (Intermediate Representationã€‚æ·±åº¦å­¦ä¹ é—®é¢˜ä¸­å¯ä»¥å°†è®¡ç®—å›¾ä½œä¸ºIRï¼Œç§°ä¸ºGraph IR)ã€‚è¿™æ ·ä¸åŒç¡¬ä»¶/frameworkéƒ½å¯¹æ ‡åŒä¸€å¥—IRï¼Œå°±é¿å…äº†éœ€è¦å¯¹æ¯ç§ç¡¬ä»¶å’Œframeworkæ’åˆ—ç»„åˆé€‚é…çš„é—®é¢˜ã€‚TVMä¸»è¦è§£å†³çš„æ˜¯åç«¯çš„é—®é¢˜[åœ¨ç›®æ ‡ç¡¬ä»¶ä¸Šé«˜æ•ˆè¿è¡ŒIR]ã€‚è€Œå‰ç«¯çš„é—®é¢˜[ç”Ÿæˆå’Œä¼˜åŒ–IR]å°±äº¤ç»™æ·±åº¦å­¦ä¹ æ¡†æ¶ä»¬å®Œæˆï¼ˆé’ˆå¯¹è¿™ä¸€æ­¥ï¼Œåœ¨TVM stackä¸­æä¾›äº†NNVMï¼Œä½œç”¨æ˜¯represent workloads from different frameworks into standardized computation graphsï¼‰ã€‚&lt;/p>
&lt;p>TVMæ˜¯å’Œç¡¬ä»¶æ·±åº¦é›†æˆçš„ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é’ˆå¯¹æ¯ç§ç¡¬ä»¶å¹³å°å®ç°ç›¸å…³çš„AIç®—å­ï¼ˆç±»ä¼¼NVIDIA GPUä¸Šçš„cuDNNï¼‰ã€‚ç„¶è€Œäººå·¥è°ƒä¼˜è¿™äº›ç®—å­çš„å®ç°æ˜¯å¾ˆè´¹ç²¾åŠ›çš„ï¼ˆç‰¹åˆ«æ˜¯è¦é’ˆå¯¹ä¸åŒå½¢çŠ¶çš„ä¸šåŠ¡æ¨¡å‹ï¼‰ï¼Œè¿™é‡Œé¢ä¹Ÿæœ‰ä¸€äº›knobéœ€è¦è°ƒæ•´ã€‚ä¸ºäº†è®©è¿™ä¸ªè¿‡ç¨‹ä¹Ÿèƒ½MLåŒ–ï¼Œäºæ˜¯åæ¥æœ‰äº†AutoTVMã€‚&lt;/p>
&lt;p>cs294 sp19è¿˜æå‡ºäº†å‡ ä¸ªå¯èƒ½çš„future workï¼š&lt;/p>
&lt;ul>
&lt;li>Compilers are great at Ahead of Time scheduling, what about Just-In-Time scheduling?&lt;/li>
&lt;li>Any way we can share GPU in predictable way and maximize utilization for DNN inference?&lt;/li>
&lt;li>Can we optimize for â€œfitnessâ€ of the kernel when itâ€™s executed along with other kernels instead of its latency?&lt;/li>
&lt;/ul>
&lt;h1 id="4-ç”¨mlä¼˜åŒ–ä¼ ç»Ÿçš„systemé—®é¢˜">4. ç”¨MLä¼˜åŒ–ä¼ ç»Ÿçš„systemé—®é¢˜&lt;/h1>
&lt;p>è¿™é‡Œé¢çš„èŠ±æ ·å°±æ›´å¤šäº†&amp;hellip;åœ¨ä¸Šå­¦æœŸJonçš„ML systemè¯¾ä¸Šæœ‰è¿‡è¾ƒè¯¦ç»†çš„æ¥è§¦ã€‚å¤§éƒ¨åˆ†æ˜¯ç”¨MLå»ä¼˜åŒ–ä¸€ä¸ªä¼ ç»Ÿsystemé—®é¢˜ä¸­ï¼Œä¸€äº›éœ€è¦äººå·¥ç»éªŒè°ƒæ•´ã€æˆ–è€…è¯´å¯ä»¥ä»å†å²æƒ…å†µlearnåˆ°ä¸€äº›ä¸œè¥¿çš„æ¨¡å—ã€‚æ¯”å¦‚æ•°æ®åº“å‚æ•°ã€æ“ä½œç³»ç»Ÿé¡µè¡¨ã€æ•°æ®åº“ç´¢å¼•ç­‰ç­‰ã€‚ä¸€ä¸ªæ¨¡å—å¯ä»¥è¢«MLåŒ–çš„å‰ææ˜¯å®ƒå¿…é¡»æ˜¯empiricalçš„ï¼Œå‚è€ƒå®ƒåœ¨é¡µè¡¨ï¼ˆOSçš„å·¥ä½œé›†åŸç†ï¼‰ã€æ•°æ®åº“ï¼ˆDBAæ˜¯ä¸ªå¾ˆåƒç»éªŒçš„æ´»&amp;hellip;ï¼‰ä¸­çš„åº”ç”¨ã€‚å¦‚æœäººå·¥éƒ½çœ‹ä¸å‡ºæ¥å•¥è§„å¾‹å°±åˆ«æŒ‡æœ›å®ƒèƒ½MLäº†&amp;hellip;&lt;/p>
&lt;p>ä¸€èˆ¬è®¤ä¸ºç”¨MLä¼˜åŒ–systemçš„æ€æƒ³æ˜¯èµ·æºäºJeff Deanåœ¨NIPS2017çš„workshopã€‚è¿™æ–¹é¢çš„å·¥ä½œå¾ˆå¤šå‘è¡¨åœ¨çº¯systemçš„é¡¶çº§ä¼šè®®ä»¥åŠä¸‹å±çš„AI for xxx workshopä¸Šï¼Œå¦å¤–ä¸€äº›AIä¼šè®®çš„workshopä¹Ÿä¼šæ”¶å½•ä¸€äº›è¿™æ–¹é¢çš„å·¥ä½œï¼Œæ¯”å¦‚nips 2018çš„MLsys workshopã€‚ä»2017å¹´å¼€å§‹å·²ç»æœ‰å¾ˆå¤šå‘è¢«åšè¿‡äº†ï¼Œä½†ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æœ‰ä¸€äº›æå¤´çš„ã€‚æ„Ÿè§‰å¯ä»¥ä»ä¸‹é¢ä¸¤ä¸ªè§’åº¦å†æ¥æï¼š&lt;/p>
&lt;p>åŒæ ·çš„scenarioï¼Œä½¿ç”¨æ›´åˆé€‚çš„MLç®—æ³•ã€‚æ³¨æ„è¿™é‡Œæ˜¯æ›´åˆé€‚ï¼Œè€Œä¸æ˜¯æ›´é«˜å¤§ä¸ŠçŒ›å¦‚è™ã€‚
æ¯”å¦‚è¿™ç¯‡ML+Databaseçš„paperï¼Œä½¿ç”¨äº†LSTMæ¥é¢„æµ‹æœªæ¥çš„workload patternï¼Œè¿˜è¦ç”¨GPUè®­ç»ƒï¼Œä½†ç”Ÿäº§ç¯å¢ƒä¸Šè¦æ±‚æ•°æ®åº“æœåŠ¡å™¨ä¹Ÿå®‰ä¸ªæ˜¾å¡æ˜¯ä¸ç°å®çš„ã€‚å·¥ç¨‹ä¸Šçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æä¸ªé›†ä¸­å¼çš„è®­ç»ƒé›†ç¾¤ï¼ˆç±»ä¼¼OtterTuneï¼‰ï¼Œåœ¨DBaaSçš„æƒ…å†µä¸‹è¿™ç§æ–¹æ³•å€’æ˜¯è¡Œå¾—é€šï¼Œä½†åœ¨å¯¹å¤–å‘å¸ƒçš„æ•°æ®åº“äº§å“ä¸­å°±ä¸è¡Œäº†ã€‚
è¿™é‡Œæ„Ÿè§‰å¯ä»¥å‚è€ƒæ—©æœŸAutoMLçš„ä¸€äº›å·¥ä½œï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨æ˜¯å¾ˆç±»ä¼¼çš„ï¼ˆéƒ½æ˜¯è°ƒå‚å˜›&amp;hellip;ï¼‰ã€‚ä¼ ç»Ÿæ–¹æ³•æœ‰å¯å‘å¼æœç´¢/è´å¶æ–¯ä¼˜åŒ–ã€‚æœ€è¿‘ä¹Ÿæœ‰å¾ˆå¤šäººç”¨å¼ºåŒ–å­¦ä¹ å»æï¼Œä½†è¿˜æ˜¯å­˜åœ¨å¤ªåƒèµ„æºçš„é—®é¢˜&amp;hellip;
è¿™æ–¹é¢å¯¹MLçŸ¥è¯†çš„è¦æ±‚é«˜ä¸€ç‚¹ã€‚
å¯»æ‰¾systemç•Œæ›´å¤šå¯ä»¥MLåŒ–çš„åœºæ™¯ã€‚è¿™ä¸ªæ›´é€‚åˆä¸“ä¸šçš„system researcheræ¥åšï¼Œå¯¹MLå€’æ˜¯ç•¥æœ‰äº†è§£å³å¯ã€‚
æœ‰ä¸€ç±»æ€è·¯æ˜¯æŠŠMLæ·±åº¦é›†æˆåˆ°ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œæ¯”å¦‚Andyåœ¨2019å¹´çš„15-721è¯¾ä¸Šæåˆ°è¿‡Self-Driving Databaseçš„æ¦‚å¿µï¼Œå’Œä¹‹å‰ç”¨MLä¼˜åŒ–æ•°æ®åº“çš„å·¥ä½œä¸åŒçš„æ˜¯ï¼ŒSelf-Driving DBæ›´å…³æ³¨å¦‚ä½•æŠŠMLå’ŒDBæ·±åº¦é›†æˆï¼Œè€Œä¸æ˜¯æä¸€ä¸ªåˆä¸€ä¸ªå¤–æŒ‚çš„æ¨¡å—äº†ã€‚
ä¸€ä¸ªç±»ä¼¼çš„å·¥ä½œæ˜¯åœ¨OSé¢†åŸŸï¼šhttps://engineering.purdue.edu/WukLab/LearnedOS-OSR19.pdf ã€‚
å¦å¤–è¿˜æœ‰ä¸ªå·¥ä½œæ˜¯åœ¨Key-Value Storage Engineçš„é¢†åŸŸï¼šhttps://arxiv.org/pdf/1907.05443.pdfã€‚å®ƒæå‡ºäº†Design Continuumçš„æ¦‚å¿µï¼šå­˜å‚¨ç³»ç»Ÿä¸­çš„å¾ˆå¤šæ•°æ®ç»“æ„æœ¬è´¨ä¸Šæ˜¯å¾ˆåƒçš„ï¼ˆarise from the very same set of fundamental design principlesï¼‰ï¼Œä¾‹å¦‚B+tree, LSM-tree, LSH-tableç­‰ï¼Œä½†å®ƒä»¬å´æœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚KV Storeä¸­ç”¨LSMå°±æ¯”B+ Treeæ›´åˆé€‚ï¼‰ï¼Œå¾ˆéš¾æœ‰ä¸€ä¸ªåå…¨åç¾çš„è®¾è®¡ã€‚è¿™è¯´æ˜å®ƒä»¬æœ‰ç›¸äº’æ›¿æ¢çš„ç©ºé—´ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å°†ä¸åŒæ•°æ®ç»“æ„çš„é€‰æ‹©ä¹Ÿä½œä¸ºå­˜å‚¨ç³»ç»Ÿçš„ä¸€ä¸ªknobï¼Œæ ¹æ®å…·ä½“workloadå’Œç¡¬ä»¶çš„æƒ…å†µæ¥è‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åº•å±‚æ•°æ®ç»“æ„ï¼ˆfind a close to optimal data structure design for a key-value store given a target workload and hardware environmentï¼‰ã€‚
ä¸€ä¸ªæ›´å®è§‚ä¸€äº›çš„æ€è·¯æ˜¯åšsystem and algorithm co-designï¼Œè®©ä»»æ„è®¡ç®—æœºç³»ç»Ÿéƒ½èƒ½å’Œmlæ·±åº¦é›†æˆã€‚è™½ç„¶å…·ä½“çš„target systemä¸ä¸€æ ·ï¼Œä½†å…¶ä¸­æœ‰å¾ˆå¤šæ¨¡å—éƒ½æ˜¯ç±»ä¼¼çš„ï¼ˆä¾‹å¦‚trainingã€inferenceã€system monitorç­‰ç­‰ï¼‰ã€‚é’ˆå¯¹è¿™ä¸€ç›®æ ‡MSRæå‡ºäº†AutoSysï¼Œå¯¹è¿™äº›é€šç”¨æ¨¡å—è¿›è¡Œäº†æ•´åˆã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™éƒ¨åˆ†å°±å¦‚åŒç”¨ ML æ–¹æ³•å»é€‰æ‹©è°ƒåº¦ç®—æ³•ä¸€æ ·ï¼Œæ¯”è¾ƒ trickã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="5-å…¶ä»–">5. å…¶ä»–&lt;/h1>
&lt;p>æ–¹å‘ä¸æ˜¯å¾ˆå¥‘åˆå°±å…ˆä¸çœ‹äº†&amp;hellip;ç­‰ç”¨åˆ°äº†å†å¡«å‘&lt;/p>
&lt;p>ML pipeline / lifecycleï¼šhttps://ucbrise.github.io/cs294-ai-sys-fa19/assets/lectures/lec03/03_ml-lifecycle.pdf
Privacyï¼šhttps://ucbrise.github.io/cs294-ai-sys-fa19/assets/lectures/lec10/10_adversarial_ml.pdf
å›¾ç¥ç»ç½‘ç»œè®­ç»ƒç³»ç»Ÿï¼šhttps://www.msra.cn/zh-cn/news/features/2019-review-machine-learning-system [ATC19 NeuGraph]&lt;/p>
&lt;p>éœ€è¦çš„æŠ€èƒ½æ ‘
è¿™æ˜¯ä»ä¸€äº›å…¬å¸ML System Research Scientistå²—ä½çš„æ‹›è˜è¦æ±‚ä¸­æ•´ç†å‡ºæ¥çš„ï¼Œæ›´ä¾§é‡systemä¸€äº›ã€‚&lt;/p>
&lt;p>Systemï¼š&lt;/p>
&lt;p>å·¥ç¨‹åŸºç¡€ï¼šC/C++ã€OO programmingã€‚é˜…è¯»æºç æ˜¯ä¸ªå¾ˆå¥½çš„å­¦ä¹ æ–¹å¼
OS
åˆ†å¸ƒå¼ç³»ç»Ÿ
ç¼–è¯‘åŸç†ã€‚ç‰¹åˆ«æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ã€LLVMã€memory optimizationã€‚Parserä¹‹ç±»ä¸å–œæ¬¢ä¹Ÿå¯ä»¥ä¸çœ‹
Computer Architectureã€‚å¦å¤–è¿˜éœ€è¦äº†è§£ï¼š1.GPUæ¶æ„ï¼Œä¾‹å¦‚æ˜¾å­˜åˆ†é…æœºåˆ¶ã€CPUä¸GPUäº¤äº’ã€‚ 2.CPUã€å­˜å‚¨ç³»ç»Ÿç›¸å…³çš„æ–°æŠ€æœ¯ã€‚ 3.æœ‰æ¡ä»¶å¯ä»¥äº†è§£ä¸‹æ·±åº¦å­¦ä¹ ä¸“ç”¨ç¡¬ä»¶ã€‚
å¸¸è§çš„å¹¶è¡Œè®¡ç®—æ¡†æ¶ï¼Œä¾‹å¦‚MPI/OpenMP/CUDA
ML frameworkçš„åº•å±‚åŸç†ï¼Œæ‰’æºç 
å·¥ä¸šç•Œçš„ä¸€äº›æ–°ä¸œè¥¿ï¼šä¾‹å¦‚k8sã€KubeFlowã€ElasticDL
MLï¼š&lt;/p>
&lt;p>æœºå™¨å­¦ä¹ åŸºç¡€
å¸¸è§çš„åˆ†å¸ƒå¼æœºå™¨å­¦ä¹ ç®—æ³•ã€DLæ¨¡å‹å‹ç¼©ã€æ¨¡å‹åŠ é€Ÿæ–¹æ³•ï¼ˆæ ¹æ®å…·ä½“æ–¹å‘è€Œå®šï¼‰
æ•°ç†åŸºç¡€ä¸è¦å¤ªèœâ€¦ä¸è¦è¢«äººåæ§½åƒæ²¡å­¦è¿‡é«˜ä¸­æ•°å­¦â€¦&lt;/p>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/104444471">https://zhuanlan.zhihu.com/p/104444471&lt;/a>&lt;/p></description></item><item><title>cmake ç›®å½•ç»“æ„å’Œä½¿ç”¨</title><link>https://huweim.github.io/post/%E5%B7%A5%E5%85%B7_cmake-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%92%8C%E4%BD%BF%E7%94%A8/</link><pubDate>Mon, 09 May 2022 22:17:43 +0800</pubDate><guid>https://huweim.github.io/post/%E5%B7%A5%E5%85%B7_cmake-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%92%8C%E4%BD%BF%E7%94%A8/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>cuTLASS ä½¿ç”¨åˆ°äº† cmakeï¼Œä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ï¼Œå…ˆå­¦ä¹ ä¸€ä¸‹ä»–çš„ç›®å½•ç»“æ„å’Œç¼–è¯‘è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>2023-03-16 11:25:11ï¼Œåœ¨å­¦ä¹ ä¸€ä¸ªå·¥å…·æ—¶ï¼ŒGetting Started æˆ–è®¸æ˜¯æœ€å¿«çš„å…¥é—¨æ–¹å¼ã€‚&lt;/p>
&lt;h2 id="01-cmake-ç®€ä»‹">0.1 Cmake ç®€ä»‹&lt;/h2>
&lt;p>å¯¹äº C++ ç¨‹åºï¼Œæ‰‹åŠ¨ç¼–å†™ Makefile éå¸¸éº»çƒ¦ã€‚cmake ç”¨äºè‡ªåŠ¨ç¼–å†™ Makefileã€‚é€šè¿‡è¯»å– CMakeLists.txt æ–‡ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆ make æ–‡ä»¶ã€‚cmake ä¸­ macro å’Œ function çš„ä½¿ç”¨ï¼Œä½¿å¾— cmake æ›´åƒæ˜¯ä¸€ä¸ªè„šæœ¬è¯­è¨€ã€‚&lt;/p>
&lt;h2 id="02-å®‰è£…">0.2 å®‰è£…&lt;/h2>
&lt;p>å®˜æ–¹ç»™å‡ºäº†å»ºè®®çš„ç¯å¢ƒï¼Œcmake æ²¡æœ‰å®‰è£…ï¼Œapt-get install å®‰è£…çš„æ˜¯ 3.12 ç‰ˆæœ¬ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ 3.20 cmakeï¼Œ&lt;a href="https://gist.github.com/bmegli/4049b7394f9cfa016c24ed67e5041930">æ•™ç¨‹&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get and build CMake&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://github.com/Kitware/CMake/releases/download/v3.24.0/cmake-3.24.0.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -zvxf cmake-3.24.0.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd cmake-3.24.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./bootstrap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make -j8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># add path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>$PATH:$CUDA_INSTALL_PATH/bin:~/cmake-3.24.0/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„æœ‰ä¸ª BUGï¼Œ&lt;code> Could NOT find OpenSSL,&lt;/code>ï¼Œ&lt;code>apt-get install libssl-dev&lt;/code> å³å¯&lt;/p>
&lt;h2 id="03-åŸºæœ¬ç‰¹æ€§">0.3 åŸºæœ¬ç‰¹æ€§&lt;/h2>
&lt;p>cmake å‘½ä»¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯å˜é‡åŒºåˆ†å¤§å°å†™ã€‚&lt;/p>
&lt;h1 id="1-ç®€ä»‹">1. ç®€ä»‹&lt;/h1>
&lt;h2 id="11-å¸¦æœ‰-cmake-çš„é¡¹ç›®">1.1 å¸¦æœ‰ cmake çš„é¡¹ç›®&lt;/h2>
&lt;p>ä»‹ç»æœ€åŸºæœ¬çš„ï¼Œå¸¦æœ‰ cmake çš„é¡¹ç›®çš„æ•´ä½“ç»“æ„&lt;/p>
&lt;h3 id="111-ç›®å½•ç»“æ„">1.1.1 ç›®å½•ç»“æ„&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>|-- bin &lt;span style="color:#75715e">#å­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- build &lt;span style="color:#75715e">#ç›®å½•ç”¨äºå­˜æ”¾ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- dependencies &lt;span style="color:#75715e">#å­˜æ”¾ external libraries or dependencies that are required by the project being built&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- CMakeFiles
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- CMakeLists.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- include &lt;span style="color:#75715e">#ç»Ÿä¸€å­˜æ”¾å¤´æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- hello.h
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- gpgpu.h
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- lib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- README.md
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|-- src
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- CMakeLists.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- main.cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- model1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- CMakeLists.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- gpgpu.cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- model.cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| |-- model2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- CMakeLists.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- hello.cpp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| | |-- model.cpp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹äºå¤§ä¸€ç‚¹çš„é¡¹ç›®å¯èƒ½è¿˜ä¼šéœ€è¦ util ç›®å½•ï¼Œlibrary ç›®å½•å¤¹æˆ–è€… tool ç›®å½•&lt;/p>
&lt;p>&lt;strong>src&lt;/strong>: è¿™ä¸ª example åŒ…å«äº† 2 modelsï¼Œmain.cpp ä¾èµ–äº 2 åŸºç¡€ modelsï¼Œå¦å¤–ï¼Œæ³¨æ„åˆ°ä»–ä»¬éƒ½åŒ…å« &lt;code>CMakeLists.txt&lt;/code> æ–‡ä»¶&lt;/p>
&lt;h2 id="112-ç†è§£-cmakeliststxt">1.1.2 ç†è§£ CMakeLists.txt&lt;/h2>
&lt;p>æ³¨æ„ cmake æ–‡ä»¶ä¸­ä¸åŒºåˆ†å¤§å°å†™&lt;/p>
&lt;blockquote>
&lt;p>In a CMake-based project, each directory containing C++ source code should contain a CMakeLists.txt file. This file describes the rules for building the code in that directory.&lt;/p>
&lt;/blockquote>
&lt;p>2023-03-16 14:19:11ï¼Œæ¯ä¸ª dir ä¸‹éƒ½è¦æœ‰ä¸€ä¸ª CMakeLists.txt&lt;/p>
&lt;p>æœ€åŸºç¡€çš„åŒ…å«ä»¥ä¸‹ä¸€äº›ä¿¡æ¯ï¼Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è§„å®šè¯¥CMakeLists.txté€‚ç”¨çš„cmakeæœ€å°ç‰ˆæœ¬ï¼Œè¿™é‡Œæ˜¯ 3.12ï¼Œè‡ªå·±æ‰‹åŠ¨å®‰è£…äº† 3.20 ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cmake_minimum_required&lt;span style="color:#f92672">(&lt;/span>VERSION 3.12.4 FATAL_ERROR&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é¡¹ç›®åç§°ï¼Œä¹Ÿå°±æ˜¯ cutlass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>project&lt;span style="color:#f92672">(&lt;/span>CUTLASS VERSION 2.9.0 LANGUAGES CXX&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®šä¹‰ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶(ç¨‹åº)çš„åç§°ï¼Œå‡è®¾ä¸º gemm&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¿™é‡Œæ²¡æ‰¾åˆ° cutlass å¯¹åº”çš„ï¼Œcutlass ä¸­æœ‰ä¸€ä¸ª function(cutlass_add_executable_tests NAME TARGET)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>add_executable &lt;span style="color:#f92672">(&lt;/span>gemm gemm.cxx&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŒ‡å®šå¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œæ ¹ç›®å½•ä¸‹ include&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>include_directories &lt;span style="color:#f92672">(&lt;/span>include&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="12-cmake-ç¼–è¯‘è¿‡ç¨‹">1.2 cmake ç¼–è¯‘è¿‡ç¨‹&lt;/h2>
&lt;h3 id="121-build-ç¼–è¯‘å¹¶è¿è¡Œ">1.2.1 build, ç¼–è¯‘å¹¶è¿è¡Œ&lt;/h3>
&lt;p>build ç›®å½•ç”¨äºå­˜æ”¾ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¸€èˆ¬çš„ç¼–è¯‘è¿‡ç¨‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ mkdir build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> &lt;span style="color:#75715e"># compile for NVIDIA Turing GPU architecture&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="122-é—®é¢˜å¯æ‰§è¡Œç¨‹åºåœ¨å“ªä¸ªç›®å½•ç”Ÿæˆ">1.2.2 é—®é¢˜ï¼Œå¯æ‰§è¡Œç¨‹åºåœ¨å“ªä¸ªç›®å½•ç”Ÿæˆï¼Ÿ&lt;/h3>
&lt;p>çœ‹èµ·æ¥ä¼¼ä¹æ˜¯å’Œ Makefile æ–‡ä»¶åŒä¸€ç›®å½•ï¼Œè€Œ cutlass ä¸­ï¼Œæ‰§è¡Œ make æ“ä½œä¹‹åï¼Œä¼šå¯¹ç¨‹åºè¿›è¡Œç¼–è¯‘ï¼Œç„¶åç›´æ¥è¿è¡Œã€‚ç”±äºåœ¨ sim ä¸Šè¿è¡Œéœ€è¦æŠŠ gpgpusim.config æ”¾åˆ°ç¨‹åºè¿è¡Œçš„ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çŸ¥é“æ˜¯åœ¨å“ªä¸ªç›®å½•è¿è¡Œçš„ã€‚&lt;/p>
&lt;p>cmake è®¾ç½® library and executable æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>set&lt;span style="color:#f92672">(&lt;/span>LIBRARY_OUTPUT_PATH path&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set&lt;span style="color:#f92672">(&lt;/span>EXECUTABLE_OUTPUT_PATH path&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>å¦‚æœå­ç›®å½•ä¸­çš„æŸä¸ªCMakeLists.txtä¸­è®¾ç½®äº† set(&amp;hellip;)ï¼Œå°±ä»¥å½“å‰æ–‡ä»¶ä¸­è®¾ç½®çš„è·¯å¾„ä¸ºä¸»ï¼Œå¦åˆ™ä»¥çˆ¶ç›®å½•ä¸­è®¾ç½®çš„è·¯å¾„ä¸ºä¸»&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœéƒ½æ²¡è®¾ç½®å‘¢ï¼Ÿä»ç®€å•çš„ç¨‹åºæ¥çœ‹ï¼Œåœ¨ &lt;code>build&lt;/code> ç›®å½•ä¸‹ &lt;code>cmake .. XXXX&lt;/code>ï¼Œåœ¨ &lt;code>build&lt;/code> ç›®å½•ä¸‹ç”Ÿæˆ Makefileï¼Œæ‰§è¡Œ &lt;code>make &amp;amp; make install&lt;/code>ï¼Œå¯æ‰§è¡Œç¨‹åºå°±åœ¨å½“å‰ï¼ˆ&lt;code>build&lt;/code>ï¼‰ ç›®å½•ä¸‹ã€‚&lt;/p>
&lt;h3 id="123-cmake-æ–‡ä»¶å˜é‡èµ‹å€¼">1.2.3 cmake æ–‡ä»¶å˜é‡èµ‹å€¼&lt;/h3>
&lt;p>cutlass ç¼–è¯‘ example æŠ¥é”™ï¼Œä¸ç¡®å®šé—®é¢˜æ˜¯ä¸æ˜¯å‡ºåœ¨å˜é‡çš„ä¼ é€’ã€‚&lt;/p>
&lt;p>2023-03-14 15:49:24ï¼Œä¼¼ä¹æ˜¯ç¼–è¯‘ example çš„æ–¹å¼ä¸å¯¹ã€‚&lt;/p>
&lt;h3 id="124-åˆ¶å®š-cuda-ç¼–è¯‘å™¨">1.2.4 åˆ¶å®š cuda ç¼–è¯‘å™¨&lt;/h3>
&lt;p>ä½¿ç”¨ CMAKE_CUDA_COMPILER è¿™ä¸ªå†…å»ºå˜é‡å¯ä»¥åšåˆ°ã€‚&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡å‘½ä»¤ &lt;code>cmake -DCMAKE_CUDA_COMPILER=&amp;quot;xxx&amp;quot;&lt;/code> æ¥ä¿®æ”¹&lt;/p>
&lt;h1 id="2-å‘½ä»¤è¡Œå‚æ•°ç¼–è¯‘é€‰é¡¹-command-line-option">2. å‘½ä»¤è¡Œå‚æ•°ï¼Œç¼–è¯‘é€‰é¡¹ command line option&lt;/h1>
&lt;h2 id="21--d">2.1 -D&lt;/h2>
&lt;p>åŸæ¥ -D æ˜¯ä¸€ä¸ªä¼ å‚é€‰é¡¹ï¼Œæ€ªä¸å¾—åœ¨ CMakeList é‡Œé¢ç›´æ¥æœç´¢ -DCUTLASS_NVCC_ARCHSï¼Œæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå‘½ä»¤ã€‚&lt;/p>
&lt;p>-D çš„ä½œç”¨å°±æ˜¯å®šä¹‰å˜é‡çš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚ &lt;code>-DCUTLASS_NVCC_ARCHS=75&lt;/code>ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰äº† &lt;code>CUTLASS_NVCC_ARCHS&lt;/code> çš„å€¼&lt;/p>
&lt;p>æ­¤å¤–ï¼Œ&lt;code>CUTLASS_NVCC_ARCHS&lt;/code> çš„å±æ€§åº”è¯¥å¾—æ˜¯ä¸€ä¸ª CACHE STRINGï¼Œå¦åˆ™å¯èƒ½æ— æ³•è¢«æ”¹å˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>set&lt;span style="color:#f92672">(&lt;/span>CUTLASS_NVCC_ARCHS &lt;span style="color:#e6db74">${&lt;/span>CUTLASS_NVCC_ARCHS_SUPPORTED&lt;span style="color:#e6db74">}&lt;/span> CACHE STRING &lt;span style="color:#e6db74">&amp;#34;The SM architectures requested.&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set&lt;span style="color:#f92672">(&lt;/span>CUTLASS_LIBRARY_KERNELS &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> CACHE STRING &lt;span style="color:#e6db74">&amp;#34;Comma delimited list of kernel name filters. If unspecified, only the largest tile size is enabled. If &amp;#39;all&amp;#39; is specified, all kernels are enabled.&amp;#34;&lt;/span>&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‚£ä¹ˆï¼Œå°è¯•ä¿®æ”¹ &lt;code>CMAKE_CUDA_ARCHITECTURES&lt;/code>ï¼Œæ‰¾åˆ°ç»™å…¶èµ‹å€¼ï¼Œå¹¶ä¸”å±æ€§ä¸º CACHE STRING çš„ &lt;code>TCNN_CUDA_ARCHITECTURES&lt;/code>ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cmake . -B build -DTCNN_CUDA_ARCHITECTURES&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;75&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="23-cmake_progress_start">2.3 cmake_progress_start&lt;/h2>
&lt;h2 id="24--b-æŒ‡å®šæ„å»ºç›®å½•çš„è·¯å¾„--s-æŒ‡å®šæºä»£ç ç›®å½•">2.4 -B æŒ‡å®šæ„å»ºç›®å½•çš„è·¯å¾„ -S æŒ‡å®šæºä»£ç ç›®å½•&lt;/h2>
&lt;p>&lt;code>/home/wmhu/cmake-3.24.0/bin/cmake -S/home/wmhu/work/tiny-cuda-nn -B/home/wmhu/work/tiny-cuda-nn/build --check-build-system CMakeFiles/Makefile.cmake 0&lt;/code>&lt;/p>
&lt;p>&lt;code>--check-build-system&lt;/code> é€‰é¡¹ç”¨äºæ£€æŸ¥æ„å»ºç³»ç»Ÿæ˜¯å¦å¯ç”¨ï¼Œä»¥åŠæ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°æ„å»º&lt;/p>
&lt;p>0 æ˜¯ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œç”¨äºè®¾ç½®ç”ŸæˆMakefileæ—¶çš„è°ƒè¯•çº§åˆ«ã€‚&lt;/p>
&lt;h1 id="3-command-å‘½ä»¤">3. Command å‘½ä»¤&lt;/h1>
&lt;p>æœ‰ç‚¹åƒå‡½æ•°ï¼Œä½†æ˜¯è‹±æ–‡æ˜¯ command&lt;/p>
&lt;h2 id="31-set-ç³»åˆ—">3.1 set ç³»åˆ—&lt;/h2>
&lt;h3 id="311-set-normal-value">3.1.1 Set Normal Value&lt;/h3>
&lt;p>&lt;code>set (&amp;lt;variable&amp;gt; &amp;lt;value&amp;gt;... [PARENT_SCOPE])&lt;/code>
&lt;code>set(CMAKE_CXX_FLAGS &amp;quot;-std=c++11 ${CMAKE_CXX_FLAGS}&amp;quot;)&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>If the PARENT_SCOPE option is given the variable will be set in the scope above the current scope. Each new directory or function() command creates a new scope. A scope can also be created with the block() command.&lt;/p>
&lt;/blockquote>
&lt;p>ç›®å‰è¿˜æ²¡æœ‰å¤ªæ˜ç™½ scope çš„æ¦‚å¿µã€‚&lt;/p>
&lt;h3 id="312-set-cache-entry">3.1.2 Set Cache Entry&lt;/h3>
&lt;p>&lt;code>set(&amp;lt;variable&amp;gt; &amp;lt;value&amp;gt;... CACHE &amp;lt;type&amp;gt; &amp;lt;docstring&amp;gt; [FORCE])&lt;/code>&lt;/p>
&lt;p>&lt;code>FORCE&lt;/code> option to overwrite existing entries&lt;/p>
&lt;h2 id="32-add-ç³»åˆ—">3.2 add ç³»åˆ—&lt;/h2>
&lt;h3 id="321-æ·»åŠ ç¼–è¯‘é€‰é¡¹-add_compilie_options">3.2.1 æ·»åŠ ç¼–è¯‘é€‰é¡¹ add_compilie_options&lt;/h3>
&lt;p>å¯¹äº C/C++ ä»£ç ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç¼–è¯‘é€‰é¡¹å‘½åä¸º FLAGã€‚å¯ä»¥é€šè¿‡ &lt;code>add_compilie_options&lt;/code> å‘½ä»¤è®¾ç½®ç¼–è¯‘é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ &lt;code>set&lt;/code> å‘½ä»¤ä¿®æ”¹ &lt;code>CMAKE_CXX_FLAGS&lt;/code> æˆ–è€… &lt;code>CMAKE_C_FLAGS&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>add_compile_options&lt;/code> æ·»åŠ çš„é€‰é¡¹æ˜¯é’ˆå¯¹æ‰€æœ‰ç¼–è¯‘å™¨ï¼ŒåŒ…æ‹¬ C å’Œ C++&lt;/li>
&lt;li>set å‘½ä»¤è®¾ç½®çš„ &lt;code>CMAKE_CXX_FLAGS&lt;/code> æˆ–è€… &lt;code>CMAKE_C_FLAGS&lt;/code> å˜é‡åˆ†åˆ«é’ˆå¯¹ C å’Œ C++&lt;/li>
&lt;/ul>
&lt;p>e.g.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#åˆ¤æ–­ç¼–è¯‘å™¨ç±»å‹,å¦‚æœæ˜¯gccç¼–è¯‘å™¨,åˆ™åœ¨ç¼–è¯‘é€‰é¡¹ä¸­åŠ å…¥c++11æ”¯æŒ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>if(&lt;span style="color:#e6db74">CMAKE_COMPILER_IS_GNUCXX&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> set(&lt;span style="color:#e6db74">CMAKE_CXX_FLAGS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;-std=c++11 ${CMAKE_CXX_FLAGS}&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> message(&lt;span style="color:#e6db74">STATUS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;optional:-std=c++11&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>endif(&lt;span style="color:#e6db74">CMAKE_COMPILER_IS_GNUCXX&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>add_compile_options(&lt;span style="color:#e6db74">&amp;lt;option&amp;gt;&lt;/span> &lt;span style="color:#e6db74">...&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#75715e"># ä¾‹å­
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>add_compile_options(&lt;span style="color:#e6db74">-Wall&lt;/span> &lt;span style="color:#e6db74">-Wextra&lt;/span> &lt;span style="color:#e6db74">-pedantic&lt;/span> &lt;span style="color:#e6db74">-Werror&lt;/span> &lt;span style="color:#e6db74">-g&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="33-message">3.3 message&lt;/h2>
&lt;p>è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯æ‰“å°&lt;/p>
&lt;p>&lt;code>message(STATUS &amp;quot;Obtained CUDA architectures from CMake variable TCNN_CUDA_ARCHITECTURES=${TCNN_CUDA_ARCHITECTURES}&amp;quot;)&lt;/code>&lt;/p>
&lt;h2 id="34-function">3.4 function&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>function(&lt;span style="color:#e6db74">&amp;lt;name&amp;gt;&lt;/span> &lt;span style="color:#e6db74">[&amp;lt;arg1&amp;gt;&lt;/span> &lt;span style="color:#e6db74">...]&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;commands&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>endfunction()&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>NOTE: A function opens a new scope: see set(var PARENT_SCOPE) for details.&lt;/p>
&lt;p>function ä¼´éš scope çš„æ¦‚å¿µï¼Œæˆ–è®¸å¯ä»¥ç”¨å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡å»ç†è§£ã€‚&lt;/p>
&lt;h2 id="35-list">3.5 list&lt;/h2>
&lt;p>list æœ‰å¾ˆå¤šå­å‘½ä»¤ï¼ŒåŒ…æ‹¬ &lt;code>APPEND&lt;/code>, &lt;code>INSERT&lt;/code> ç­‰ï¼Œç”¨äºä¿®æ”¹å˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>if (&lt;span style="color:#e6db74">MSVC&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> list(&lt;span style="color:#e6db74">APPEND&lt;/span> &lt;span style="color:#e6db74">CUDA_NVCC_FLAGS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;-Xcompiler=/bigobj&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>else()&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> list(&lt;span style="color:#e6db74">APPEND&lt;/span> &lt;span style="color:#e6db74">CUDA_NVCC_FLAGS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;-Xcompiler=-Wno-float-conversion&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> list(&lt;span style="color:#e6db74">APPEND&lt;/span> &lt;span style="color:#e6db74">CUDA_NVCC_FLAGS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;-Xcompiler=-fno-strict-aliasing&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span> list(&lt;span style="color:#e6db74">APPEND&lt;/span> &lt;span style="color:#e6db74">CUDA_NVCC_FLAGS&lt;/span> &lt;span style="color:#e6db74">&amp;#34;-Xcudafe=--diag_suppress=unrecognized_gcc_pragma&amp;#34;&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="4-å±æ€§-property">4. å±æ€§ Property&lt;/h1>
&lt;p>åœ¨ CMake ä¸­ï¼ŒPropertiesï¼ˆå±æ€§ï¼‰æ˜¯ä¸€ç§ç”¨äºè®¾ç½®ç›®æ ‡å±æ€§çš„æœºåˆ¶ã€‚ä¸€ä¸ªç›®æ ‡å¯ä»¥æœ‰å¤šä¸ªå±æ€§ï¼Œæ¯ä¸ªå±æ€§æœ‰ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œä¸€ä¸ªç›®æ ‡å¯ä»¥æœ‰ä¸€ä¸ªåä¸ºâ€œCXX_STANDARDâ€çš„å±æ€§ï¼Œå…¶å€¼ä¸ºâ€œ11â€ã€‚å±æ€§å¯ä»¥å½±å“ç¼–è¯‘å’Œé“¾æ¥è¿‡ç¨‹ä¸­çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨é€‰é¡¹ã€ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ç‰¹æ€§ï¼Œä»¥åŠæ„å»ºç›®æ ‡çš„æ–¹å¼ã€‚å¯ä»¥ä½¿ç”¨ set_target_properties() å‘½ä»¤æ¥è®¾ç½®ç›®æ ‡å±æ€§ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>set_target_properties(&lt;span style="color:#e6db74">MyTarget&lt;/span> &lt;span style="color:#e6db74">PROPERTIES&lt;/span> &lt;span style="color:#e6db74">CXX_STANDARD&lt;/span> &lt;span style="color:#e6db74">11&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="5-æ¨¡å—å’ŒåŒ…ç®¡ç†-module-package">5. æ¨¡å—å’ŒåŒ…ç®¡ç† module, package&lt;/h1>
&lt;h1 id="object-file-and-link">Object file and link&lt;/h1>
&lt;p>åœ¨ç›®å½• &lt;code>mlp_learning_an_image.dir&lt;/code> ç”Ÿæˆ &lt;code>.o&lt;/code> æ–‡ä»¶ä¹‹åï¼ŒåŒä¸€ä¸ªç›®å½•ä¸‹æœ‰ &lt;code>link.txt&lt;/code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç”¨æ¥è¿›è¡Œé“¾æ¥çš„ã€‚&lt;/p>
&lt;p>è§£æä¸€ä¸‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>/usr/bin/c++ -O3 -DNDEBUG CMakeFiles/mlp_learning_an_image.dir/mlp_learning_an_image.cu.o CMakeFiles/mlp_learning_an_image.dir/__/dependencies/stbi/stbi_wrapper.cpp.o -o ../mlp_learning_an_image -L/usr/local/cuda/targets/x86_64-linux/lib ../libtiny-cuda-nn.a -lcuda ../dependencies/fmt/libfmt.a -lcudadevrt -lcudart_static -lrt -lpthread -ldl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ../libtiny-cuda-nn.a è¿™ä¸ªæ˜¯ tiny-cuda-nn é‚£ä¸€å †ç¼–è¯‘ç”Ÿæˆçš„ï¼Œä¹Ÿä¼šè¢«é“¾æ¥è¿›æ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nvcc -o mlp_learning_an_image CMakeFiles/mlp_learning_an_image.dir/mlp_learning_an_image.cu.o CMakeFiles/mlp_learning_an_image.dir/__/dependencies/stbi/stbi_wrapper.cpp.o -L/usr/local/cuda/targets/x86_64-linux/lib ../libtiny-cuda-nn.a -lcuda ../dependencies/fmt/libfmt.a -lcudadevrt -lcudart_static -lrt -lpthread -ldl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>/usr/bin/ar qc libtiny-cuda-nn.a &amp;quot;CMakeFiles/tiny-cuda-nn.dir/src/common.cu.o&amp;quot;...&lt;/code>ï¼Œ&lt;code>ar&lt;/code> å‘½ä»¤ç”¨äºåˆ›å»ºå’Œç®¡ç† static lib, qc æ˜¯å…¶ opti&lt;/p>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/93895403">https://zhuanlan.zhihu.com/p/93895403&lt;/a>&lt;/p></description></item><item><title>Hugo_è®©ä½ çš„åšå®¢è¢«Googleæ”¶å½•</title><link>https://huweim.github.io/post/blog_hugo_%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%8D%9A%E5%AE%A2%E8%A2%ABgoogle%E6%94%B6%E5%BD%95/</link><pubDate>Mon, 09 May 2022 22:17:43 +0800</pubDate><guid>https://huweim.github.io/post/blog_hugo_%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%8D%9A%E5%AE%A2%E8%A2%ABgoogle%E6%94%B6%E5%BD%95/</guid><description>&lt;h1 id="1-step">1. Step&lt;/h1>
&lt;p>ç½‘ç«™åœ¨æ²¡æœ‰æäº¤æœç´¢å¼•æ“æ”¶å½•ä¹‹å‰ï¼Œç›´æ¥æœç´¢ä½ ç½‘ç«™çš„å†…å®¹æ˜¯æœä¸åˆ°çš„ï¼Œå› ä¸ºæœç´¢å¼•æ“ä¸ä¼šå»æ£€ç´¢ä½ çš„Githubä»“åº“ã€‚ä¸‹é¢çš„è§£å†³æ–¹æ³•&lt;/p>
&lt;h2 id="11-check-æ˜¯å¦è¢«è°·æ­Œæ”¶å½•">1.1 Check æ˜¯å¦è¢«è°·æ­Œæ”¶å½•&lt;/h2>
&lt;p>æ‰“å¼€è°·æ­Œæœç´¢ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥&lt;/p>
&lt;p>site:https://huweim.github.io/&lt;/p>
&lt;p>å¦‚æœæç¤ºè¯´ï¼šæ‰¾ä¸åˆ°å’Œæ‚¨æŸ¥è¯¢çš„â€œsite:https://huweim.github.io/ â€ ç›¸ç¬¦çš„å†…å®¹æˆ–ä¿¡æ¯ï¼Œè¯´æ˜æœªè¢«æ”¶å½•ã€‚&lt;/p>
&lt;p>å¦‚æœæœç´¢ç»“æœçš„ç¬¬ä¸€æ¡å°±æ˜¯ä½ çš„åšå®¢ç«™ç‚¹ï¼Œè¯´æ˜å·²è¢«æ”¶å½•ï¼Œä¸ç”¨å†ç»§ç»­çœ‹ä¸‹é¢çš„å†…å®¹äº†ã€‚&lt;/p>
&lt;h2 id="12-æäº¤è°·æ­Œæœç´¢">1.2 æäº¤è°·æ­Œæœç´¢&lt;/h2>
&lt;p>è¿›å…¥Google Web Master Search Consoleï¼Œç™»å½•ä¹‹åæäº¤ä½ çš„åšå®¢ç½‘å€&lt;/p>
&lt;p>æäº¤åéœ€è¦é€šè¿‡ DNS è®°å½•éªŒè¯åŸŸåæ‰€æœ‰æƒï¼ŒGithub DNS æœåŠ¡å™¨é…ç½®æ•™ç¨‹ï¼šhttps://docs.github.com/cn/enterprise-server@3.2/admin/configuration/configuring-network-settings/configuring-dns-nameservers&lt;/p>
&lt;p>âŒ 1.2.1 ssh é“¾æ¥åˆ° GitHub Enterprise Server instanceï¼Œä¸ä½¿ç”¨åŸŸåéªŒè¯æ–¹æ³•ï¼Œä½¿ç”¨ä¸Šä¼  html æ–‡ä»¶çš„æ–¹æ³•&lt;/p>
&lt;h2 id="13-ä¸Šä¼ -html-æ–‡ä»¶">1.3 ä¸Šä¼  html æ–‡ä»¶&lt;/h2>
&lt;h3 id="131-æ”¾åœ¨-content">1.3.1 æ”¾åœ¨ content&lt;/h3>
&lt;p>å°†ä¸‹è½½çš„ html æ–‡ä»¶æ”¾ç½®åœ¨ &lt;code>content&lt;/code> ç›®å½•ä¸‹ï¼Œå¼€å¯æœåŠ¡åï¼Œ&lt;code>http://localhost:1313/googlead4e3c06724927ae/&lt;/code> èƒ½å¤Ÿç´¢å¼•åˆ°å³å¯ï¼Œç„¶å push to Github. âŒ&lt;/p>
&lt;h3 id="132-æ”¾åœ¨-themelayouts">1.3.2 æ”¾åœ¨ theme/layouts&lt;/h3>
&lt;p>æ”¾åœ¨ content ç›®å½•ä¸‹ä¸è¡Œï¼Œæ£€ç´¢ä¸åˆ°åç¼€ .htmlï¼Œæ¯”å¦‚ &lt;code>http://localhost:1313/googlead4e3c06724927ae.html/&lt;/code> å°±ç´¢å¼•ä¸åˆ°äº†ã€‚æŠ˜è…¾äº†åŠä¸ªå°æ—¶ï¼Œå‘ç°åº”è¯¥æ”¾åœ¨ &lt;code>themes\jane\layouts&lt;/code> ç›®å½•ä¸‹ï¼Œå› ä¸ºå‘ç° &lt;code>http://localhost:1313/index.html&lt;/code> æ‰èƒ½å¤Ÿæœ‰æ•ˆåœ°ç´¢å¼•ï¼Œé‚£ä¹ˆå¯¹äº &lt;code>googlead4e3c06724927ae.html&lt;/code> ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚&lt;/p>
&lt;p>ä¸è¿‡ä»ç„¶æ‰¾ä¸åˆ°ï¼Œä¸æ˜¯è¯´å¤åˆ¶åˆ°&lt;code>themes\jane\layouts&lt;/code> ç›®å½•ä¸‹å°±èƒ½ç´¢å¼•åˆ°ï¼Œæ¯”å¦‚æˆ‘å¤åˆ¶äº†ä¸€ä¸ª &lt;code>404.html&lt;/code>ï¼Œæ”¹åä¸º &lt;code>40411.html&lt;/code>ï¼Œæ˜¯æ— æ³•ç›´æ¥æ‰¾åˆ°çš„ã€‚&lt;/p>
&lt;h3 id="133-static">1.3.3 static&lt;/h3>
&lt;p>çŸ¥è¯†ï¼šstaticè¿™ä¸ªæ–‡ä»¶å¤¹æœ‰ä¸€ä¸ªç‰¹æ€§å°±æ˜¯å¯ä»¥å°†é‡Œé¢çš„æ–‡ä»¶å¤åˆ¶åˆ°publicæ–‡ä»¶å¤¹é‡Œé¢ã€‚æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„é¡µé¢æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå› ä¸ºå®ƒä¸æ˜¯hugoç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è¦†ç›–ã€‚&lt;/p>
&lt;p>é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸‹çš„ &lt;code>static&lt;/code> ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç›®å½•åæ˜¯ä½ çš„é¡µé¢åï¼ˆgooglead4e3c06724927ae.htmlï¼‰ã€‚ç„¶ååœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»º &lt;code>index.html&lt;/code>ï¼ŒæŠŠ &lt;code>googlead4e3c06724927ae.html&lt;/code> ä¸­çš„å†…å®¹å¤åˆ¶åˆ° &lt;code>index.html&lt;/code>ï¼Œç›®çš„å°±è¾¾åˆ°äº†ã€‚è¿™æ ·ï¼Œè®¿é—® &lt;code>http://localhost:1313/googlead4e3c06724927ae.html/&lt;/code> é¡µé¢æ—¶åŠ è½½çš„å°±æ˜¯ &lt;code>googlead4e3c06724927ae.html&lt;/code> çš„å†…å®¹ã€‚&lt;/p>
&lt;p>2022-05-09 11:13:15ï¼Œè¿™ä¸€æ–¹æ³•éªŒè¯æˆåŠŸã€‚&lt;/p>
&lt;p>&lt;img src="./Img/Verify.png" alt="">&lt;/p>
&lt;h2 id="14-ç­‰å¾…">1.4 ç­‰å¾…&lt;/h2>
&lt;p>æäº¤åšå®¢ä¹‹åï¼Œéœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½åœ¨Googleä¸Šæœåˆ°ï¼Œå› ä¸ºGoogleéœ€è¦æ—¶é—´æ¥å¤„ç†æˆ‘ä»¬çš„è¯·æ±‚ã€æŠ“å–ç›¸åº”ç½‘é¡µå¹¶å°†å…¶ç¼–å…¥ç´¢å¼•ã€‚&lt;/p>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://huiyu-li.github.io/2019/11/27/Tools/2019-11-27-%E8%AE%A9%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E5%88%B0%E8%87%AA%E5%B7%B1%E5%86%8DGitHub%E4%B8%8A%E7%9A%84%E5%8D%9A%E5%AE%A2/">https://huiyu-li.github.io/2019/11/27/Tools/2019-11-27-%E8%AE%A9%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E5%88%B0%E8%87%AA%E5%B7%B1%E5%86%8DGitHub%E4%B8%8A%E7%9A%84%E5%8D%9A%E5%AE%A2/&lt;/a>&lt;/p></description></item><item><title>ç¼–è¯‘è¿è¡Œ CUTLASS å’Œ cuBLAS</title><link>https://huweim.github.io/post/%E5%AE%9E%E9%AA%8C_%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8Ccutlass%E5%92%8Ccublas/</link><pubDate>Mon, 09 May 2022 22:17:43 +0800</pubDate><guid>https://huweim.github.io/post/%E5%AE%9E%E9%AA%8C_%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8Ccutlass%E5%92%8Ccublas/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>å†…å®¹åŒ…æ‹¬æ ¹æ®å®˜æ–¹æ–‡æ¡£è¿è¡Œ CUTLASS çš„å®ä¾‹ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œåœ¨ GPGPU-Sim ä¸Šè¿è¡Œ CUTLASSï¼Œé˜…è¯»å®˜æ–¹ doc çš„ç¬”è®°ã€‚&lt;/p>
&lt;p>åŒ…æ‹¬æ ¹æ®å®˜æ–¹æ–‡æ¡£è¿è¡Œ cuBLAS çš„å®ä¾‹ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p>
&lt;h1 id="1-ç¯å¢ƒ">1. ç¯å¢ƒ&lt;/h1>
&lt;h2 id="10-project-çš„ç›®å½•ç»“æ„">1.0 project çš„ç›®å½•ç»“æ„&lt;/h2>
&lt;p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤š .cmake æ–‡ä»¶ï¼Ÿåº”è¯¥æ˜¯æä¾›äº†å…¶ä»–åŠŸèƒ½çš„æ¨¡æ¿&lt;/p>
&lt;ul>
&lt;li>For a project with cmake, why there is a CMakeFiles dir in build dir, and there is &amp;ldquo;Makefile2&amp;rdquo; in CMakeFiles dir
&lt;ul>
&lt;li>The &lt;code>CMakeFiles&lt;/code> directory is generated during the CMake build process and contains all the necessary &lt;strong>intermediate files&lt;/strong> used to build the project.&lt;/li>
&lt;li>&lt;code>Makefile2&lt;/code> æ–‡ä»¶ä¸æ˜¯ç”¨æ¥ç”±ç”¨æˆ·ç›´æ¥ä¿®æ”¹çš„ï¼Œè€Œæ˜¯ç”±CMakeç”Ÿæˆï¼Œå¹¶ç”±makeæ ¹æ®CMakeLists.txtæ–‡ä»¶ä¸­æŒ‡å®šçš„æŒ‡ç¤ºæ¥æ„å»ºé¡¹ç›®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="11-prerequisites">1.1 Prerequisites&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ git clone https://github.com/NVIDIA/cutlass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>CUTLASS requires:&lt;/p>
&lt;ul>
&lt;li>NVIDIA CUDA Toolkit (9.2 or later required, 11.1 recommended)&lt;/li>
&lt;li>CMake 3.12+&lt;/li>
&lt;li>host compiler supporting C++11 or greater (g++ 7.3.0 or Microsoft Visual Studio 2015 recommended)&lt;/li>
&lt;li>Python 3.6+&lt;/li>
&lt;/ul>
&lt;p>CUTLASS may be optionally compiled and linked with&lt;/p>
&lt;ul>
&lt;li>cuBLAS&lt;/li>
&lt;li>cuDNN v7.6 or later&lt;/li>
&lt;/ul>
&lt;h3 id="111-cmake">1.1.1 cmake&lt;/h3>
&lt;p>å®˜æ–¹ç»™å‡ºäº†å»ºè®®çš„ç¯å¢ƒï¼Œcmake æ²¡æœ‰å®‰è£…ï¼Œapt-get install å®‰è£…çš„æ˜¯ 3.12 ç‰ˆæœ¬ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ 3.20 cmakeï¼Œ&lt;a href="https://gist.github.com/bmegli/4049b7394f9cfa016c24ed67e5041930">æ•™ç¨‹&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get and build CMake&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://github.com/Kitware/CMake/releases/download/v3.20.0/cmake-3.20.0.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -zvxf cmake-3.20.0.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd cmake-3.20.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./bootstrap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make -j8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># add path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>$PATH:$CUDA_INSTALL_PATH/bin:~/cmake-3.20.0/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„æœ‰ä¸ª BUGï¼Œ&lt;code> Could NOT find OpenSSL,&lt;/code>ï¼Œ&lt;code>apt-get install libssl-dev&lt;/code> å³å¯&lt;/p>
&lt;h3 id="112-gcc">1.1.2 gcc&lt;/h3>
&lt;h2 id="12-build">1.2 Build&lt;/h2>
&lt;p>2023-03-16 15:31:43ï¼Œç¼–è¯‘çš„é€»è¾‘æ˜¯å§å¤šä¸ª cutlass ç®—å­éƒ½é“¾æ¥åˆ° cutlass_profiler æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;p>ä¹‹åå°±å¯ä»¥ build äº†ã€‚è¿™é‡Œç”¨ Turing æ¶æ„&lt;/p>
&lt;p>Construct a build directory and run CMake.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ export CUDACXX&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>CUDA_INSTALL_PATH&lt;span style="color:#e6db74">}&lt;/span>/bin/nvcc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ mkdir build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> &lt;span style="color:#75715e"># compiles for NVIDIA Turing GPU architecture&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åœ¨ ~/cutlass/build/tools/library/generated/ ç›®å½•ä¸‹ç”Ÿæˆ conv2d and gemm çš„æ‰€æœ‰æŠ½è±¡ç»„åˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>all
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä»…éœ€è¦ subset of gemm kernels with FP32 accumulation and FP16 input, in Ampere and Turing&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;75;80&amp;#39;&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_s*gemm_f16_*_nt_align8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æˆ‘æƒ³è¿™ä¸ª * åº”è¯¥è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ make cutlass_profiler -j16
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>éœ€æ±‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_i88*gemm_s*_256x128_*x2_tn_align*
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_i8832gemm_s4_256x128_128x2_tn_align32
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">75&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_i8816gemm_s8_256x128_64x2_tn_align16
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ make cutlass_profiler -j16
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ nsys profile --stats&lt;span style="color:#f92672">=&lt;/span>true ./turing_tensorop_gemm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="121-cmake-åœ¨åšä»€ä¹ˆ">1.2.1 cmake åœ¨åšä»€ä¹ˆ&lt;/h3>
&lt;p>&lt;code>cmake .. -DCUTLASS_NVCC_ARCHS=75 -DCUTLASS_LIBRARY_KERNELS=all &lt;/code>ï¼Œåœ¨ &lt;code>~/cutlass/build/tools/library/generated/&lt;/code> ç›®å½•ä¸‹ç”Ÿæˆç›¸åº”çš„ .cu æ¥å£&lt;/p>
&lt;h3 id="122-make-åœ¨åšä»€ä¹ˆ">1.2.2 make åœ¨åšä»€ä¹ˆ&lt;/h3>
&lt;p>&lt;code>Building CUDA object tools/library/CMakeFiles/cutlass_library_objs.dir/generated/gemm/cutlass_tensorop_i8816gemm_s8_256x128_64x2_tn_align16.cu.o&lt;/code>&lt;/p>
&lt;p>çŒœæµ‹æ˜¯æ ¹æ® cmake ä¸­ç”Ÿæˆçš„æ¥å£æ–‡ä»¶ï¼Œç”Ÿæˆ &lt;code>cutlass_profiler&lt;/code> èƒ½å¤Ÿè¿è¡Œ/è°ƒç”¨çš„ç›®æ ‡æ–‡ä»¶ã€‚&lt;/p>
&lt;blockquote>
&lt;p>2023-03-23 14:19:09ï¼Œä»¥ä¸Šçš„çŒœæµ‹åŸºæœ¬æ²¡æœ‰é—®é¢˜ã€‚generated ç›®å½•ä¸‹çš„ .cu æ–‡ä»¶åº”è¯¥åªæ˜¯ç»™å‡ºä¸€ä¸ªé…ç½®çš„å®ä¾‹ï¼Œå…¶å¯¹åº”çš„ kernel å·²ç»å…¨éƒ¨ç¼–è¯‘åˆ° &lt;code>/tools/profiler/cutlass_profiler&lt;/code> è¿™ä¸ª bin æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>make cutlass_profiler -j16&lt;/code> ä¹‹åï¼Œä½¿ç”¨ &lt;code>./tools/profiler/cutlass_profiler --kernels=cutlass_tensorop_i8816gemm_s8_256x128_64x2_tn_align16&lt;/code> æ¥è¿è¡Œã€‚&lt;/p>
&lt;h3 id="123-test-in-real-gpu">1.2.3 Test in real GPU&lt;/h3>
&lt;p>å·¥ä½œç«™ GPU æ˜¯ GTX980ï¼ŒSM_50&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ cmake .. -DCUTLASS_NVCC_ARCHS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">50&lt;/span> -DCUTLASS_LIBRARY_KERNELS&lt;span style="color:#f92672">=&lt;/span>cutlass_simt_sgemm_128x128_8x2_nn_align1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ make cutlass_profiler -j16
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ./tools/profiler/cutlass_profiler --kernels&lt;span style="color:#f92672">=&lt;/span>cutlass_simt_sgemm_128x128_8x2_nn_align1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="13-build-and-run-the-cutlass-profiler">1.3 Build and run the CUTLASS Profiler&lt;/h2>
&lt;blockquote>
&lt;p>2023-03-23 14:22:54ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œå®é™…ä¸Š 1.2 æè¿°çš„å°±æ˜¯ build profiler çš„è¿‡ç¨‹&lt;/p>
&lt;/blockquote>
&lt;p>From the &lt;code>build/&lt;/code> directory created above, compile the the CUTLASS Profiler. ä¸»è¦æ˜¯ build &lt;code>build/tool/profiler&lt;/code> ç›®å½•ã€‚ âœ”ï¸&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ make cutlass_profiler -j12
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then execute the CUTLASS Profiler computing GEMM, execute the following command. âŒ&lt;/p>
&lt;p>è¿™ä¸€æ­¥æœç„¶ä¸è¡Œï¼ŒcudaGetDeviceProperties() failed for given deviceï¼Œæ‰¾ä¸åˆ° device&lt;/p>
&lt;p>2022-05-08 14:41:46ï¼Œâœ”ï¸ï¼Œåœ¨å·¥ä½œç«™ä¸Šå°±å¯ä»¥ç”¨ gpgpu-sim è¿è¡Œï¼Œå¾ˆå¥‡æ€ªï¼Œæ˜æ˜éƒ½æ˜¯åŒä¸€ä¸ª Docker ç¯å¢ƒï¼Œåªæ˜¯è‡ªå·±ç”µè„‘æ²¡æœ‰ GPU è€Œå·²&lt;/p>
&lt;p>è¿è¡Œç»™å‡ºçš„è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼Œç»™å‡ºäº†å¯ä»¥è‡ªå·±è®¾ç½®çš„ optionï¼Œä¹Ÿç»™å‡ºäº†æ€§èƒ½ï¼ˆGFLOPSï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./tools/profiler/cutlass_profiler --kernels&lt;span style="color:#f92672">=&lt;/span>sgemm --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4352&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>4096
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">=============================&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Problem ID: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Provider: CUTLASS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Operation: cutlass_simt_sgemm_128x128_nn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Disposition: Passed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Status: Success
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Arguments: --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4352&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --A&lt;span style="color:#f92672">=&lt;/span>f32:column --B&lt;span style="color:#f92672">=&lt;/span>f32:column --C&lt;span style="color:#f92672">=&lt;/span>f32:column --alpha&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --beta&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --split_k_slices&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --batch_count&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --op_class&lt;span style="color:#f92672">=&lt;/span>simt --accum&lt;span style="color:#f92672">=&lt;/span>f32 --cta_m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">128&lt;/span> --cta_n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">128&lt;/span> --cta_k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --stages&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> --warps_m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> --warps_n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> --warps_k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --inst_m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --inst_n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --inst_k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> --min_cc&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">50&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --max_cc&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1024&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Bytes: &lt;span style="color:#ae81ff">52428800&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FLOPs: &lt;span style="color:#ae81ff">146064539648&lt;/span> flops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Runtime: 10.5424 ms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Memory: 4.63158 GiB/s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Math: 13854.9 GFLOP/s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="14-build-and-run-cutlass-unit-tests">1.4 Build and run CUTLASS Unit Tests&lt;/h2>
&lt;h3 id="141-è‡ªå·±çš„-workspace">1.4.1 è‡ªå·±çš„ Workspace&lt;/h3>
&lt;p>From the &lt;code>build/&lt;/code> directory created above, simply build the target &lt;code>test_unit&lt;/code> to compile and run all unit tests. âŒ&lt;/p>
&lt;p>è¿™ä¸€æ­¥å¤±è´¥ï¼Œçœ‹èµ·æ¥æ˜¯ gcc ç‰ˆæœ¬çš„é—®é¢˜ã€‚æ¢äº† gcc ç‰ˆæœ¬ï¼Œè¿˜æ˜¯ç›´æ¥å´©æ‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ make test_unit -j
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>----------&lt;span style="color:#f92672">]&lt;/span> Global test environment tear-down
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[==========]&lt;/span> &lt;span style="color:#ae81ff">946&lt;/span> tests from &lt;span style="color:#ae81ff">57&lt;/span> test cases ran. &lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#ae81ff">10812&lt;/span> ms total&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span> PASSED &lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#ae81ff">946&lt;/span> tests.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æŒ‡å®šä¸€ä¸ª unitï¼Œä¼š building ç›®å½• &lt;code>test/unit/gemm/warp/CMakeFiles&lt;/code> ä¸­çš„å†…å®¹ï¼Œä»ç„¶æ˜¯æ‰¾ä¸åˆ° GPU Device ID&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ make test_unit_gemm_warp -j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="142-å·¥ä½œç«™">1.4.2 å·¥ä½œç«™&lt;/h3>
&lt;p>&lt;strong>å·¥ä½œç«™ï¼š&lt;/strong> è¿˜æ˜¯æ‰¾ä¸åˆ° gpgpusim.configï¼Œè¿™ä¸ªåº”è¯¥æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç›®å½•ï¼ŒæŠŠ config æ–‡ä»¶å¤åˆ¶è¿‡å»å³å¯ã€‚&lt;code>cp ~/gpgpu-sim_distribution/configs/tested-cfgs/SM75_RTX2060/* ~/cutlass/build/test/unit/gemm/warp/CMakeFiles/test_unit_gemm_warp.dir/&lt;/code>&lt;/p>
&lt;p>2022-05-09 15:31:59ï¼ŒçŒœæµ‹æ˜¯åœ¨ &lt;code>/cutlass/build/test/unit/gemm/warp&lt;/code> ç›®å½•ä¸‹æ‰§è¡Œï¼ŒæŠŠ gpgpusim.config æ–‡ä»¶å¤åˆ¶è¿‡å»ã€‚âœ”ï¸&lt;/p>
&lt;p>å¯ä»¥æˆåŠŸè¿è¡Œï¼Œæ–°çš„é—®é¢˜æ˜¯ä¹‹å‰é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œwmma æŒ‡ä»¤çš„ align syntax é”™è¯¯ã€‚&lt;/p>
&lt;h2 id="15-profiler-å’Œ-test-unit-çš„æ‰§è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«">1.5 Profiler å’Œ Test Unit çš„æ‰§è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/h2>
&lt;p>2023-03-23 14:25:03ï¼Œç»“åˆæ–‡æ¡£çš„è¯´æ˜å’Œä¸ªäººçš„ç†è§£ã€‚å•å…ƒæµ‹è¯•å°±æ˜¯æµ‹è¯•åŠŸèƒ½æ­£ç¡®æ€§ï¼Œä¿è¯çŸ©é˜µçš„è®¡ç®—ä¸å‡ºé”™ï¼Œåœ¨å•å…ƒæµ‹è¯•æƒ…å†µä¸‹çŸ©é˜µçš„ sizeï¼Œdata type å¯ä»¥å¤šæ ·ä¸€ç‚¹ã€‚
æ€§èƒ½æµ‹è¯•çš„è¯è‡ªå·±æ‰‹åŠ¨è®¾ç½®çš„ä¸œè¥¿å°±æ¯”è¾ƒå¤šï¼Œç²’åº¦æ›´ç»†ï¼ŒåŒæ—¶ä¼šç»™å‡ºæ€§èƒ½çš„æŠ¥å‘Šã€‚&lt;/p>
&lt;h2 id="16-gemm-è¿è¡Œå‚æ•°">1.6 gemm è¿è¡Œå‚æ•°&lt;/h2>
&lt;p>cutlass_profiler æ”¯æŒéå¸¸è‡ªç”±çš„è¿è¡Œå‚æ•°ï¼Œå¹¶ä¸”æ”¯æŒå‚æ•°çš„æ‰¹å¤„ç†ï¼ˆç”¨ , é—´éš”ï¼‰ã€‚å‚æ•°å¦‚ä¸‹ï¼Œf32 åº”è¯¥å°±æ˜¯å¯¹åº”çš„ data type è®¾ç½®ã€‚&lt;/p>
&lt;p>2022-05-09 20:34:24 æ‰¾åˆ°äº†å®˜æ–¹çš„ &lt;a href="https://github.com/NVIDIA/cutlass#documentation">Documentation&lt;/a>ï¼Œå¯ä»¥çœ‹ Section 3 ä¸­çš„è¯¦ç»†è§£é‡Šã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cutlass_profiler &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --operation&lt;span style="color:#f92672">=&lt;/span>Gemm &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8192&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8192&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8192&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --A&lt;span style="color:#f92672">=&lt;/span>f32:column &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --B&lt;span style="color:#f92672">=&lt;/span>f32:column &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --C&lt;span style="color:#f92672">=&lt;/span>f32:column &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --beta&lt;span style="color:#f92672">=&lt;/span>0,1,2 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --profiling-iterations&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --providers&lt;span style="color:#f92672">=&lt;/span>cutlass &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --output&lt;span style="color:#f92672">=&lt;/span>functional-test.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å°è¯•ä¿®æ”¹ data typeï¼Œæ˜¯å¦æœ‰ i8? è¿™ä¸ªè¯­å¥æ‰§è¡Œç»“æŸåç”Ÿæˆäº†ä¸€å † .csv æ–‡ä»¶ï¼ŒåŒ…æ‹¬ conv2d, conv3d, gemm, rank_k, rank_2kï¼Œéš¾é“æ˜¯ä¸€æ¬¡æ‰§è¡Œäº†è¿™ä¹ˆå¤šç¨‹åºï¼Ÿè€Œä¸”æ²¡æœ‰æˆåŠŸè·‘èµ·æ¥ âŒ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./tools/profiler/cutlass_profiler --kernels&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_s*gemm_f16_*_nt_align8 --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3456&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --A&lt;span style="color:#f92672">=&lt;/span>i8:column --B&lt;span style="color:#f92672">=&lt;/span>i8:column --C&lt;span style="color:#f92672">=&lt;/span>i8:column --output&lt;span style="color:#f92672">=&lt;/span>test.csv &amp;gt; ~/output/tensor_op3.log.lrr &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å»æ‰ output é€‰é¡¹ï¼Œdata type æ”¹æˆ f32&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./tools/profiler/cutlass_profiler --kernels&lt;span style="color:#f92672">=&lt;/span>cutlass_tensorop_s*gemm_f16_*_nt_align8 --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3456&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --A&lt;span style="color:#f92672">=&lt;/span>f32:column --B&lt;span style="color:#f92672">=&lt;/span>f32:column --C&lt;span style="color:#f92672">=&lt;/span>f32:column &amp;gt; ~/output/tensor_op3.log.lrr &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="2-cutlass-examples">2. cutlass examples&lt;/h1>
&lt;p>ä½¿ç”¨å®˜æ–¹ README.md ç¼–è¯‘ä¼šå› ä¸ºæ²¡æœ‰ Device è€Œå¤±è´¥ï¼Œé‚£ä¹ˆæ¢ä¸€ä¸ªæ€è·¯ï¼Œå°è¯•åˆ©ç”¨ cmake ç¼–è¯‘è¿è¡Œ examples ä¸­æä¾›çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;blockquote>
&lt;p>2023-03-23 14:27:07ï¼Œåœ¨å­¦ä¹ äº† cmake ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹ &lt;code>build&lt;/code> ç›®å½•ä¸­ç”Ÿæˆçš„ &lt;code>Makefile&lt;/code> æ–‡ä»¶ã€‚Makefile æ–‡ä»¶ä¸­æä¾›äº†æ¯ä¸ª example çš„ targetï¼Œå¯ä»¥ç¼–è¯‘ç”Ÿæˆå¯¹åº”çš„ bin æ–‡ä»¶ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="21-cmake-ç¼–è¯‘æµç¨‹">2.1 cmake ç¼–è¯‘æµç¨‹&lt;/h2>
&lt;ul>
&lt;li>ç¼–å†™ CMakeLists.txt&lt;/li>
&lt;li>é€šè¿‡ cmake ç”Ÿæˆ Makefile&lt;/li>
&lt;li>make ç¼–è¯‘&lt;/li>
&lt;/ul>
&lt;p>cuTLASS åœ¨ &lt;code>example&lt;/code> ç›®å½•ä¸‹æä¾›äº† CMakeLists.txtã€‚ç”¨æ³•&lt;/p>
&lt;ul>
&lt;li>è¿›å…¥ example ç›®å½•ï¼Œæ–°å»º build æ–‡ä»¶å¤¹ï¼›&lt;code>$ mkdir build; cd build&lt;/code>&lt;/li>
&lt;li>&lt;code>cmake ../&lt;/code>; cmakeä¼šåœ¨æ‰¾åˆ°ä¸Šçº§ç›®å½•æ‰¾åˆ° CMakeLists.txtï¼Œç”Ÿæˆ makefile å’Œä¸€äº›å…¶å®ƒæ–‡ä»¶&lt;/li>
&lt;li>åœ¨ makefile æ‰€åœ¨ç›®å½•ï¼Œè°ƒç”¨ make å‘½ä»¤ï¼Œä¼šæ ¹æ® makefile å¯¹ç¨‹åºè¿›è¡Œç¼–è¯‘ç”Ÿæˆã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>2023-03-23 14:28:43ï¼Œè¿™é‡Œè¦æ³¨æ„å¹¶ä¸æ˜¯è¿›å…¥åˆ°æ¯ä¸ªç›®å½•å»å•ç‹¬ç¼–è¯‘ï¼Œè€Œæ˜¯ &lt;code>build&lt;/code> æ ¹ç›®å½•ä¸‹å·²ç»æä¾›äº†è¿™ä¸ªæ¥å£å’Œ targetï¼Œæ¯ä¸ª example ä¸­çš„ Makefile æ–‡ä»¶å¯èƒ½æ˜¯æ›´åŠ å…·ä½“çš„å®ç°ï¼Œä½†æ˜¯åœ¨æ ¹ç›®å½•ä¸‹è°ƒç”¨å³å¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="3-documentation">3. Documentation&lt;/h1>
&lt;p>check å®˜æ–¹æ–‡æ¡£&lt;/p>
&lt;h2 id="32-functionality">3.2 Functionality&lt;/h2>
&lt;p>è¿™ä¸ªéƒ¨åˆ†ä»‹ç»äº† opcode class, *&lt;strong>data type&lt;/strong>, layout. data type æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚&lt;/p>
&lt;p>opcode class, including Simt, TensorOp, SpTensorOp&lt;/p>
&lt;h3 id="322-device-level-implicit-gemm-convolution">3.2.2 Device-level Implicit GEMM convolution&lt;/h3>
&lt;p>åˆ—å‡ºäº† Device-level Implicit GEMM convolution çš„ opcode class, data type, layout&lt;/p>
&lt;h3 id="323-warp-level-matrix-multiply-with-tensor-cores">3.2.3 Warp-level Matrix Multiply with Tensor Cores&lt;/h3>
&lt;p>TensorOp 16-by-8-by-64. æ”¯æŒ int4b_tï¼Œ&lt;/p>
&lt;h3 id="324-warp-level-matrix-multiply-with-cuda-wmma-api">3.2.4 Warp-level Matrix Multiply with CUDA WMMA API&lt;/h3>
&lt;p>WmmaTensorOp,&lt;/p>
&lt;p>Instruction Shape ( 16-by-16-by-16, 8-by-32-by-16)&lt;/p>
&lt;p>Warp Shapes (32x32x16, 32x64x16, 64x32x16; 32x32x16, 32x64x16, 64x32x16)&lt;/p>
&lt;h2 id="33-efficient-gemm-in-cuda">3.3 Efficient GEMM in CUDA&lt;/h2>
&lt;h3 id="331-threadblock-level-gemm">3.3.1 Threadblock-level GEMM&lt;/h3>
&lt;p>Each threadblock computes its portion of the output GEMM by iteratively loading tiles of input matrices and computing an accumulated matrix product.&lt;/p>
&lt;h3 id="332-warp-level-gemm">3.3.2 Warp-level GEMM&lt;/h3>
&lt;p>Multiple warps within a threadblock fetch data from shared memory into registers and perform computations. Warp-level GEMMs may be implemented either by TensorCores issuing mma.sync or wmma instructions or by thread-level matrix computations issued to CUDA cores. For maximum performance, access to shared memory should be bank conflict free. To maximize data reuse within the warp, a large warp-level GEMM tile should be chosen.&lt;/p>
&lt;p>ä½¿ç”¨åˆ°äº† wmma æŒ‡ä»¤ï¼Œshared memoryã€‚&lt;/p>
&lt;h3 id="333-thread-level-gemm">3.3.3 Thread-level GEMM&lt;/h3>
&lt;p>SGEMM, IGEMM, HGEMM, and DGEMM are computed by SIMT math instructions issued by thread-level matrix multiply procedures.&lt;/p>
&lt;p>æ‰€ä»¥ç°åœ¨è·‘çš„æ˜¯ thread-level GEMM&lt;/p>
&lt;h2 id="34-terminology">3.4 Terminology&lt;/h2>
&lt;p>Layout: functor mapping logical coordinates of a tensor to linear offset (as LongIndex); owns stride vectors, if any.&lt;/p>
&lt;p>Operator: an object performing a computation on matrix or tensor objects. May be further refined by scope within the execution model hierarchy.&lt;/p>
&lt;p>Tile: partitions of a tensor that have constant extents and layout known at compile time&lt;/p>
&lt;h2 id="35-align-å«ä¹‰">3.5 align å«ä¹‰&lt;/h2>
&lt;p>&lt;code>cutlass_tensorop_f16_s884gemm_f16_64x64_32x2_tn_align8.cu&lt;/code>&lt;/p>
&lt;p>In the case of this Cutlass file, the &amp;ldquo;align8&amp;rdquo; suffix indicates that the matrix data is aligned to an 8-byte boundary. This can help improve performance when the matrix multiplication algorithm accesses the matrix data.&lt;/p>
&lt;h2 id="35-cutlass-profiler-">3.5 CUTLASS Profiler â­&lt;/h2>
&lt;p>The CUTLASS Profiler is a command-line driven test and profiling environment for CUTLASS computations defined in the CUTLASS Instance Library. The CUTLASS Profiler is capable of executing each GEMM, Sparse Gemm, Conv2d, and Conv3d kernel.&lt;/p>
&lt;p>&lt;code>cutlass_profiler&lt;/code> å°±æ˜¯ä¸€ä¸ªå°è£…å¥½çš„è„šæœ¬ï¼Œè¿è¡Œå„ç±»ç¨‹åº&lt;/p>
&lt;p>è¿›å…¥åˆ°ç›®å½• &lt;code>build/tools/profiler&lt;/code>ï¼Œè¿è¡Œ &lt;code>cutlass_profiler --help&lt;/code> å¯ä»¥æŸ¥çœ‹ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œç›´æ¥ &lt;code>cutlass_profiler --help&lt;/code> æ‰¾ä¸åˆ° cutlass_profilerï¼›ç”¨ &lt;code>./cutlass_profiler --help&lt;/code> å°±å¼€å§‹è·‘ç¨‹åºäº†ï¼Œæœ‰ç‚¹ä¸çŸ¥é“æ€ä¹ˆç”¨è¿™ä¸ª &amp;ndash;helpã€‚&lt;/p>
&lt;p>2022-05-09 20:22:30ï¼Œè¿˜æ˜¯ç”¨ &lt;code>./cutlass_profiler --help&lt;/code> å°±å¯ä»¥è·‘ï¼Œä¸è¿‡ç¥å¥‡çš„æ˜¯è¿™æ˜¯ç”¨ gpgpu-sim è·‘å¾—ï¼Œæœ€åä¼šæŠŠéœ€è¦çš„ä¿¡æ¯ print åœ¨å±å¹•ä¸Šã€‚&lt;/p>
&lt;h3 id="351-gemm">3.5.1 GEMM&lt;/h3>
&lt;p>The CUTLASS Profiler is capable of executing GEMM and Sparse GEMM problems.&lt;/p>
&lt;h4 id="3511-gemm-arguments-">3.5.1.1 GEMM Arguments â­&lt;/h4>
&lt;p>The complete set of arguments available to each operation may be viewed by specifying the operation name in addition to &amp;ndash;help. The argument flags and their aliases usable for GEMM appear as follows.&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡ option &lt;code>--help&lt;/code> æŸ¥çœ‹å®Œæ•´çš„ operationï¼Œä»–è¿™é‡Œç»™å‡ºçš„ä¾‹å­æ˜¯ &lt;code>./tools/profiler/cutlass_profiler --operation=gemm --help&lt;/code>ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾—æ‰§è¡Œè¿™ä¸ªè„šæœ¬å§ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>To execute kernels targeting Tensor Core operations, supply the flag &lt;code>--op_class=tensorop&lt;/code> in the command line.&lt;/p>
&lt;p>å®é™…ä¸Šï¼Œop_class ä¹Ÿå°±æ˜¯é€‰æ‹© TensorOp or SIMT&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./tools/profiler/cutlass_profiler --op_class&lt;span style="color:#f92672">=&lt;/span>tensorop --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3456&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">4096&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8192&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="3513-è‡ªå·±è¿è¡Œ">3.5.1.3 è‡ªå·±è¿è¡Œ&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>./tools/profiler/cutlass_profiler --operation&lt;span style="color:#f92672">=&lt;/span>Gemm --op_class&lt;span style="color:#f92672">=&lt;/span>tensorop --m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1024&lt;/span> --n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1024&lt;/span> --k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">128&lt;/span> --inst_m&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span> --inst_n&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span> --inst_k&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">32&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>å¦‚ä½•ä½¿ç”¨ 4-bit è¿›è¡Œè®¡ç®—&lt;/strong>: å¯¹äº TensorOp, Instruction Shape 8-by-8-by-32 å¯¹åº”çš„æ˜¯ A-int4b_t, B-int4b_t, C-int32_tï¼Œé€šè¿‡å‚æ•° &lt;code>--inst_m&lt;/code>, &lt;code>--inst_n&lt;/code>, &lt;code>inst_k&lt;/code> æ¥å†³å®š&lt;/p>
&lt;h3 id="352-conv">3.5.2 Conv&lt;/h3>
&lt;p>å’Œ gemm ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œé‡ç‚¹è¿˜æ˜¯ææ‡‚ä»–ä»¬çš„å‚æ•°ã€‚&lt;/p>
&lt;h2 id="36-gemm-api-components">3.6 GEMM API Components&lt;/h2>
&lt;p>This document focuses on device-level, threadblock-level GEMMs, warp-level GEMMs, thread-level GEMMs, and instruction-level GEMMs.&lt;/p>
&lt;h3 id="361-device-wide-gemm-api">3.6.1 Device-wide GEMM API&lt;/h3>
&lt;p>The device-wide GEMM API is embodied by the following operators&lt;/p>
&lt;ul>
&lt;li>cutlass::gemm::device::Gemm - basic GEMM operation&lt;/li>
&lt;li>cutlass::gemm::device::GemmArray - batched GEMM operation in which input matrices are read from arrays of pointers&lt;/li>
&lt;li>cutlass::gemm::device::GemmBatched - batched GEMM operation in which input matrices are separated by a constant stride&lt;/li>
&lt;li>cutlass::gemm::device::GemmSplitKParallel - GEMM operation that partitions the GEMM K dimension then launches a separate reduction kernel&lt;/li>
&lt;/ul>
&lt;p>éƒ½åœ¨ &lt;code>cutlass/include/cutlass/gemm/device/&lt;/code> ç›®å½•ä¸‹ï¼Œbasic GEMM å¯¹åº” &lt;code>gemm.h&lt;/code> æ–‡ä»¶&lt;/p>
&lt;h1 id="4-åœ¨-gpgpu-sim-ä¸Šè¿è¡Œ">4. åœ¨ GPGPU-Sim ä¸Šè¿è¡Œ&lt;/h1>
&lt;h2 id="41-cutlass-sim">4.1 cutlass-sim&lt;/h2>
&lt;p>å°è¯•äº† Admodt æä¾›çš„ &lt;code>https://github.com/gpgpu-sim/cutlass-gpgpu-sim&lt;/code>ï¼Œä»ç„¶æ˜¯ syntax errorï¼Œä¼°è®¡æ˜¯æ–°ç‰ˆæœ¬ç¼–è¯‘çš„ PTX æœ‰é—®é¢˜ã€‚2022-05-26 15:53:30ï¼Œç¡®å®å¦‚æ­¤ã€‚&lt;/p>
&lt;p>ä¸åŒ CUDA ç‰ˆæœ¬å¯¹åº”ä¸åŒçš„ PTX .versionï¼Œå¾—åˆ°çš„ PTX æŒ‡ä»¤æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ CUDA 11.4 wmma æŒ‡ä»¤ä¼šæŠ¥é”™ã€‚&lt;/p>
&lt;h2 id="42-step">4.2 Step&lt;/h2>
&lt;ul>
&lt;li>ä¸‹è½½å¹¶å®‰è£… CUDA Toolkit 9.2ï¼Œä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬ç¼–è¯‘æ¨¡æ‹Ÿå™¨ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="5-cutlass-in-detail">5. CUTLASS in detail&lt;/h1>
&lt;p>é€šè¿‡ cutlass æ·±å…¥ç†è§£å…¶ makefile ä»¥åŠ cmakeï¼›åŒæ—¶ï¼Œæ¯”è¾ƒæ·±å…¥åœ° trace GEMM kernel å‡½æ•°ï¼Œç›®çš„æ˜¯å¯¹åº” SASS å»çœ‹ã€‚&lt;/p>
&lt;h2 id="51-makefile-and-cmake-in-detail">5.1 Makefile and cmake in detail&lt;/h2>
&lt;h3 id="511-s-æ–‡ä»¶">5.1.1 .s æ–‡ä»¶&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">cd&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">/home/data2/Workspace/huwm/share/work/cutlass/build&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>MAKE&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>MAKESILENT&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">-f&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">tools/library/CMakeFiles/cutlass_library_objs.dir/build.make&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">tools/library/CMakeFiles/cutlass_library_objs.dir/generated/trmm/cutlass_tensorop_z884trmm_128x64_8x3_tn_rs_u_un_align1.cu.s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>.s æ–‡ä»¶å°±æ˜¯ assembly code.&lt;/p>
&lt;h3 id="512-makefile-ä¸­è¿™ä¸ª-rule-çš„æ„ä¹‰">5.1.2 Makefile ä¸­è¿™ä¸ª rule çš„æ„ä¹‰&lt;/h3>
&lt;p>è¿™é‡Œ rule çš„ä½œç”¨æ˜¯ä»€ä¹ˆ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">tools/profiler/CMakeFiles/cutlass_profiler.dir/rule&lt;/span>&lt;span style="color:#f92672">:&lt;/span> cmake_check_build_system
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CMAKE_COMMAND&lt;span style="color:#66d9ef">)&lt;/span> -E cmake_progress_start /home/data2/Workspace/huwm/share/work/cutlass/build/CMakeFiles &lt;span style="color:#ae81ff">50&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>MAKE&lt;span style="color:#66d9ef">)&lt;/span> &lt;span style="color:#66d9ef">$(&lt;/span>MAKESILENT&lt;span style="color:#66d9ef">)&lt;/span> -f CMakeFiles/Makefile2 tools/profiler/CMakeFiles/cutlass_profiler.dir/all
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">$(&lt;/span>CMAKE_COMMAND&lt;span style="color:#66d9ef">)&lt;/span> -E cmake_progress_start /home/data2/Workspace/huwm/share/work/cutlass/build/CMakeFiles &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY &lt;/span>&lt;span style="color:#f92672">:&lt;/span> tools/profiler/CMakeFiles/cutlass_profiler.dir/rule
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="513-d-æ–‡ä»¶">5.1.3 .d æ–‡ä»¶&lt;/h3>
&lt;blockquote>
&lt;p>The .d file is a dependency file that specifies the dependencies of the source file&lt;/p>
&lt;/blockquote>
&lt;p>åˆ—å‡ºæºæ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªå¯è¯»çš„æ–‡æœ¬æ–‡ä»¶ã€‚&lt;/p>
&lt;h3 id="514-make-cutlass_profiler-and-test_unit">5.1.4 make cutlass_profiler and test_unit&lt;/h3>
&lt;p>cutlass æä¾›äº†ä¸¤ç§ targetï¼Œç†è§£ä¸º test_unit æ˜¯ç”¨äºæµ‹è¯•ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œè€Œ cutalss_profiler å†…ç½®äº†è¯„ä¼°æ€§èƒ½çš„ä»£ç ã€‚&lt;/p>
&lt;h3 id="515-tiny-cuda-nn-link-æ‰€æœ‰-o-æ–‡ä»¶">5.1.5 tiny-cuda-nn link æ‰€æœ‰ .o æ–‡ä»¶&lt;/h3>
&lt;p>éƒ½åœ¨ &lt;code>build/CMakeFiles/tiny-cuda-nn.dir/build.make&lt;/code> ä¸­ï¼Œ&lt;code>libtiny-cuda-nn.a:&lt;/code> targetï¼Œè¿™ä¸ª target ä¸­ï¼Œåˆ—å‡ºäº†æ‰€æœ‰çš„ä¾èµ–æ–‡ä»¶&lt;/p>
&lt;h2 id="52-gemm-iteration">5.2 GEMM iteration&lt;/h2>
&lt;p>2023-03-22 15:45:45ï¼Œç»ˆäºæ‰¾åˆ°äº† cutlass çš„ real loop&lt;/p>
&lt;p>&lt;code>void gemm_iters&lt;/code> in &lt;code>cutlass/gemm/threadblock/mma_pipelined.h&lt;/code>ï¼Œåœ¨è¿™ä¸ª kernel function ä¸­ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ &lt;code>warp_mma()&lt;/code>ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªæ“ä½œç¬¦é‡è½½çš„å¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡æœ¬èº«ç›´æ¥è°ƒç”¨å…¶ &lt;code>operator&lt;/code> å‡½æ•°ã€‚&lt;/p>
&lt;p>&lt;code>warp_mma()&lt;/code> è°ƒç”¨çš„å°±æ˜¯ &lt;code>cutlass/gemm/warp/mma_tensor_op.h&lt;/code> ä¸­çš„ &lt;code>void operator()&lt;/code> å‡½æ•°&lt;/p>
&lt;h3 id="521-mma_pipelinedh-void-gemm_iters">5.2.1 mma_pipelined.h void gemm_iters()&lt;/h3>
&lt;p>SASS æŒ‡ä»¤ä¸­çš„ &lt;code>.L_5&lt;/code> éƒ¨åˆ†å°±æ˜¯è¿™ä¸ªå‡½æ•°ä¸­ &lt;code>for (int warp_mma_k = 0; warp_mma_k &amp;lt; Base::kWarpGemmIterations; ++warp_mma_k)&lt;/code> çš„å¾ªç¯å±•å¼€ã€‚&lt;/p>
&lt;hr>
&lt;h1 id="cublas">cuBLAS&lt;/h1>
&lt;p>æ¥ä¸‹æ¥æ˜¯ç¼–è¯‘è¿è¡Œ cuBLAS çš„è¿‡ç¨‹&lt;/p>
&lt;h1 id="1-nvidia-samples">1. NVIDIA Samples&lt;/h1>
&lt;p>&lt;a href="https://github.com/NVIDIA/cuda-samples/">https://github.com/NVIDIA/cuda-samples/&lt;/a> åœ¨ library ç›®å½•ä¸­æœ‰æä¾›è°ƒç”¨ cublas çš„ä»£ç ï¼Œæœç„¶å®˜æ–¹æä¾›çš„èµ„æºæ‰æ˜¯æœ€å¥½çš„ã€‚git clone ä¸‹æ¥å°±å¯ä»¥åœ¨ A10 ä¸Šç¼–è¯‘è¿è¡Œã€‚é‡ç‚¹æ˜¯ç†è§£ä¸åŒ API çš„å«ä¹‰ï¼Œéœ€è¦çš„ parameterï¼Œgemm çš„ data type, shape ç­‰ç­‰ï¼Œè¿™ä¸€ç‚¹éœ€è¦å¤šçœ‹æ–‡æ¡£ã€‚&lt;/p>
&lt;h2 id="11-å¦‚ä½•ç¡®å®šè°ƒç”¨äº†-tensor-core">1.1 å¦‚ä½•ç¡®å®šè°ƒç”¨äº† tensor core?&lt;/h2>
&lt;blockquote>
&lt;p>Tensor cores were first introduced with Volta GPUs (compute capability&amp;gt;=sm_70) and significantly accelerate matrix multiplications. Starting with cuBLAS version 11.0.0, the library will automatically make use of Tensor Core capabilities wherever possible, unless they are explicitly disabled by selecting pedantic compute modes in cuBLAS (see cublasSetMathMode(), cublasMath_t).&lt;/p>
&lt;/blockquote>
&lt;p>æ–‡æ¡£ä¸­è¯´ cublas ä¼šè‡ªåŠ¨è°ƒç”¨ tensor core&lt;/p>
&lt;blockquote>
&lt;p>2023-03-23 14:30:21ï¼Œå¯ä»¥é€šè¿‡ nsys è°ƒç”¨ Nsight å·¥å…·æ¥æŸ¥çœ‹å…·ä½“çš„ kernel ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code>cuobjdump -sass&lt;/code> å¾—åˆ° SASS æŒ‡ä»¤ï¼Œé€šè¿‡æŒ‡ä»¤çš„ä¿¡æ¯æ¥åˆ¤æ–­ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="2-documentation">2. Documentation&lt;/h1>
&lt;h2 id="21-using-the-cublas-api">2.1 Using the cuBLAS API&lt;/h2>
&lt;blockquote>
&lt;p>cuBLASåº“æä¾›äº†ç°æˆçš„çŸ©é˜µä¹˜æ³•ç®—å­ï¼Œä¾‹å¦‚&lt;code>cublasGemmEx&lt;/code>å’Œ&lt;code>cublasLtMatmul&lt;/code>ã€‚å…¶ä¸­åè€…æ˜¯è½»é‡çº§ç‰ˆæœ¬ï¼ŒAPIè°ƒç”¨æ›´çµæ´»ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>cublasGemmEx&lt;/p>
&lt;h2 id="211-general-description">2.1.1 General Description&lt;/h2>
&lt;blockquote>
&lt;p>åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œè¯¥åº“å°†é€‰æ‹©å¯ç”¨ Tensor Core çš„å®ç°ï¼Œåªè¦å®ƒç¡®å®šå®ƒå°†æä¾›æœ€ä½³æ€§èƒ½ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>cuBLAS 11.0.0 ä¹‹åæ”¯æŒä»»ä½• size çš„çŸ©é˜µï¼Œåªæ˜¯å¯¹é½çš„ size èƒ½å¤Ÿæ›´å¥½åœ°å‘æŒ¥ Tensor core çš„æ€§èƒ½ã€‚&lt;/p>
&lt;h2 id="212-cublas-datatypes-reference">2.1.2 cuBLAS Datatypes Reference&lt;/h2>
&lt;p>&lt;code>cublasDataType_t handle&lt;/code>ï¼Œä¸€ä¸ªæœ‰å…³cuBLASåº“çš„ä¸Šä¸‹æ–‡çš„å¥æŸ„ï¼Œä¹‹åéœ€è¦ä¼ é€’ç»™APIå‡½æ•°ï¼Œå³è®¡ç®—ä¹˜æ³•çš„å‡½æ•°&lt;/p>
&lt;p>&lt;code>cublasOperation_t&lt;/code>, N, éè½¬ç½®ï¼›Tï¼Œè½¬ç½®ï¼›Cï¼Œå…±è½­è½¬ç½®ã€‚&lt;/p>
&lt;p>&lt;code>cublasGemmEx&lt;/code> ä¸­çš„ &lt;code>cublasGemmAlgo_t&lt;/code>ï¼Œ&lt;code>cublasGemmAlgo_t&lt;/code> æœ€é«˜æ”¯æŒ sm_75ï¼Œsm_80 å·²ç»ä¸æ”¯æŒäº†ï¼Œæ‰€ä»¥åœ¨ sm_80 ä¸­æŒ‡å®šäº†ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œåœ¨ sm_80 ä¸­æ‰€æœ‰æšä¸¾éƒ½ç­‰åŒäº &lt;code>CUBLAS_GEMM_DEFAULT&lt;/code> æˆ–è€… &lt;code>CUBLAS_GEMM_DEFAULT_TENSOR_OP&lt;/code>ã€‚åœ¨æ›´æ–°çš„æ¶æ„ä¸­ä¹Ÿä¼š deprecated&lt;/p>
&lt;p>&lt;code>cudaDataType_t&lt;/code>, ç›´æ¥ä½œä¸º &lt;code>cublasGemmEx&lt;/code> çš„å‚æ•°ï¼Œæ”¯æŒ int8 åˆ° double ç±»å‹ã€‚&lt;/p>
&lt;h3 id="213-cublas-level---3-function-reference">2.1.3 cuBLAS Level - 3 Function Reference&lt;/h3>
&lt;p>&lt;code>cublasSgemm&lt;/code>, &lt;code>cublasDgemm&lt;/code>, &lt;code>cublasCgemm&lt;/code>, &lt;code>cublasZgemm&lt;/code>, &lt;code>cublasHgemm&lt;/code> åº”è¯¥æ˜¯æ¯”è¾ƒåˆå§‹çš„ APIã€‚&lt;/p>
&lt;h3 id="214-blas-like-extension">2.1.4 BLAS-like Extension&lt;/h3>
&lt;blockquote>
&lt;p>&lt;code>cublasGemmEx()&lt;/code>. This function is an extension of cublas&lt;!-- raw HTML omitted -->gemm that allows the user to individually specify the data types for each of the A, B and C matrices, the precision of computation and the GEMM algorithm to be run. Supported combinations of arguments are listed further down in this section.&lt;/p>
&lt;/blockquote>
&lt;p>è‡ªå®šä¹‰ data typesï¼Œè‡ªå·±åœ¨ int8 ä¸­å°±ç”¨çš„è¿™ä¸ª APIï¼Œæ”¯æŒ sm_50 ä»¥ä¸Šçš„æ¶æ„ã€‚&lt;/p>
&lt;h2 id="22-using-the-cublaslt-api">2.2 Using the cuBLASLt API&lt;/h2>
&lt;p>cuBLASLt, a lightweight library dedicated to GEMM&lt;/p>
&lt;blockquote>
&lt;p>The cuBLASLt in general does not guarantee to support all possible sizes and configurations.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸ä¸€å®šæ”¯æŒä»»ä½• size&lt;/p>
&lt;h3 id="221-cublaslt-datatypes-reference">2.2.1 cuBLASLt Datatypes Reference&lt;/h3>
&lt;p>&lt;code>cublasLtMatmulTile_t&lt;/code> æä¾›å¤šç§ tile size&lt;/p>
&lt;h2 id="23-using-the-cublasxt-api">2.3 Using the cuBLASXt API&lt;/h2>
&lt;p>The cuBLASXt API of cuBLAS exposes a multi-GPU capable Host interface&lt;/p>
&lt;p>cuBLASXT ä¼¼ä¹å¯ä»¥è°ƒç”¨å¤šä¸ª GPUï¼Œæ¯”å¦‚æœ‰ 4 A10 in QZ Serverï¼Œcode é™åˆ¶åªç”¨ä¸¤ä¸ª GPUã€‚é€šè¿‡ cuBLASXT æ‰§è¡Œ FP32 gemmï¼ŒTFLOPS åº”è¯¥ä¸å…·å¤‡å‚è€ƒæ€§äº†ã€‚&lt;/p>
&lt;h1 id="bug">BUG&lt;/h1>
&lt;p>2022&lt;/p>
&lt;h4 id="1212">12.12&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>CMake Error at CMakeLists.txt:31 &lt;span style="color:#f92672">(&lt;/span>cutlass_example_add_executable&lt;span style="color:#f92672">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unknown CMake command &lt;span style="color:#e6db74">&amp;#34;cutlass_example_add_executable&amp;#34;&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åŸå› ï¼šå¯èƒ½æ˜¯ gcc ç‰ˆæœ¬é—®é¢˜ï¼Œå®˜æ–¹è¯´çš„æ˜¯ gcc7.3+ï¼Œç”¨çš„æ˜¯ gcc5.5ã€‚&lt;/p>
&lt;p>åˆ‡æ¢åˆ° gcc7.5.0 æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;h4 id="314">3.14&lt;/h4>
&lt;p>2023.3.14 ç»§ç»­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>2023-03-14 15:49:24ï¼Œä¼¼ä¹æ˜¯ç¼–è¯‘ example çš„æ–¹å¼ä¸å¯¹ï¼Œæ ¹æ®ä¸€ä¸ªæ¨¡æ¿ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥ç¼–è¯‘&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ ¹ç›®å½•ä¸‹ç¼–è¯‘æ•´ä¸ª projec&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ mkdir build &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> cd build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ cmake ..
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ make 00_basic_gemm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 00_basic_gemm bin ä¼šç”Ÿæˆåœ¨ cutlass/build/examples/00_basic_gemm ç›®å½•ä¸‹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>å‚è€ƒï¼šhttps://github.com/sxzhang1993/Run-cutlass-with-gpgpu-sim&lt;/p></description></item><item><title>å…³äº Deep Work</title><link>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_deep_work/</link><pubDate>Sun, 08 May 2022 20:56:54 +0800</pubDate><guid>https://huweim.github.io/post/%E6%80%BB%E7%BB%93_deep_work/</guid><description>&lt;h1 id="0-å‰è¨€">0. å‰è¨€&lt;/h1>
&lt;p>Why read? æœ€è¿‘åŒæ­¥æ¨è¿›çš„ä»»åŠ¡æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬é›…æ€/æ‰˜ç¦ï¼ŒLeetCodeåˆ·é¢˜ï¼ˆä¸èƒ½è¯´ä¸æ‰¾å®ä¹ å°±è’åºŸæ‰äº†ï¼‰ï¼Œè‡ªå·±leadçš„è¯¾é¢˜ï¼ˆå¯ä»¥å…ˆè¯»paperæ…¢å¼€å§‹ï¼Œä½†æ˜¯å¯¹æœ¬äººæå‡å¾ˆé‡è¦ï¼‰ï¼Œç§‘ç ”å®ä¹ çš„è¯¾é¢˜ï¼ˆè¿™ä¸ªå¿…é¡»å®šæ—¶æœ‰åé¦ˆï¼Œç•™ä¸‹ä¸é”™çš„å°è±¡ï¼‰ï¼Œå…¬å¸çš„ä¸€äº›æ´»å„¿ï¼ˆæŒ‰æ—¶å®Œæˆä¸”ä¸Šå¿ƒï¼‰ï¼Œé”»ç‚¼ï¼ˆè’åºŸäº†ä¸€æ®µæ—¶é—´ä½†æ˜¯å¿…é¡»ï¼‰ï¼ŒAICS è¯¾ç¨‹ï¼ˆå¥½åœ¨è¿™ä¸ªå’Œç›®å‰çš„ç ”ç©¶æœ‰äº†ç›¸å…³æ€§ï¼‰ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œéœ€è¦è¿›è¡Œè¯¦ç»†è€Œä¸”æ¯”è¾ƒä¸¥æ ¼çš„æ—¶é—´ç®¡ç†ï¼Œæ‰èƒ½åŒæ—¶åšå¥½è¿™ä¹ˆå¤šäº‹æƒ…ã€‚&lt;/p>
&lt;h2 id="01-çŸ¥ä¹">0.1 çŸ¥ä¹&lt;/h2>
&lt;p>çŸ¥ä¹ä¸€ä½ä½œè€…å†™çš„è‡ªæˆ‘è§‚å¯Ÿéå¸¸å¥½ï¼Œåœ¨æˆ‘éœ€è¦å»å®Œæˆè®ºæ–‡çš„é‚£æ®µæ—¶é—´ï¼Œæˆ‘ä¹Ÿæ˜¯è¿›å…¥äº†è¿™æ ·ä¸€ç§çŠ¶æ€ã€‚è¿™ä¸ªä»»åŠ¡å¿…é¡»å»äº¤ä»˜ï¼ˆDDL 4.14ï¼‰ï¼Œè€Œä¸”éœ€è¦äº¤äº’ï¼ˆä¿®æ”¹ä¹‹åç»™å¨„è€å¸ˆï¼Œå¹¶ä¸”å®Œæˆå¨„è€å¸ˆäº¤ä»£çš„æ”¹åŠ¨ï¼‰ï¼Œæ˜¯ä¸€ç§ç´§å¼ ï¼Œç´§å‡‘çš„ä»»åŠ¡ï¼Œä½†æ˜¯ä¸è§‰å¾—æ•ˆç‡å¾ˆé«˜ï¼Œå†™åˆç¨¿åè€Œç£•ç£•ç›¼ç›¼ï¼Œä½†æ˜¯äº‹åæ¥çœ‹ï¼Œåœ¨ä¸€æ®µæ¯”è¾ƒçŸ­çš„æ—¶é—´å†…ï¼ˆ4.4-4.13ï¼‰äº§å‡ºäº†ä¸€ç¯‡æœ‰ç»“æ„çš„åˆç¨¿å¹¶ä¸”æ…¢æ…¢å®Œå–„å¹¶æŠ•ç¨¿ã€‚è€Œç°åœ¨ï¼Œä½ éœ€è¦è®°ä½ã€é‡æ‹¾è¿™ç§çŠ¶æ€ï¼Œå¹¶æŠŠä»–èå…¥åˆ°ä½ çš„æ—¥å¸¸å·¥ä½œä¸­ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æˆ‘è§‚å¯Ÿåˆ°è‡ªå·±çœŸæ­£éå¸¸é«˜æ•ˆåœ°æ¨è¿›å›°éš¾ä»»åŠ¡ï¼Œäº§å‡ºè‡ªå·±æƒ³è¦çš„ç»“æœå¾€å¾€å‘ç”Ÿåœ¨è¿ç»­çš„é•¿æ—¶é—´çš„å·¥ä½œä¸­ï¼Œå¹¶ä¸”æˆ‘çš„å¿ƒç†çŠ¶æ€æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä¸€å®šè¦åœ¨è¿™ä¸ªä»»åŠ¡ä¸Šæœ‰é‡å¤§çªç ´æˆ–è€…å®Œæˆå®ƒï¼Œä¸ç„¶é¥­ä¹Ÿå…ˆåˆ«åƒäº†ï¼Œäºæ˜¯æˆ‘å¾€å¾€ä¼šåœ¨åŒä¸€ä¸ªä»»åŠ¡ä¸Šä»ä¸‹åˆä¸€ç‚¹å·¥ä½œåˆ°å…­ä¸ƒç‚¹ï¼Œæˆ–è€…ä»ä¸‹åˆäº”ç‚¹å·¥ä½œåˆ°æ™šä¸Šåç‚¹åä¸€ç‚¹ï¼Œç¢°åˆ°é—®é¢˜å°±è§£å†³é—®é¢˜ï¼Œæ²¡æœ‰å¤´ç»ªå°±å°è¯•å„ç§å¯èƒ½æ¨è¿›ä»»åŠ¡çš„å¯èƒ½æ€§ã€‚åˆ«çœ‹è¿™ä¸€ä¸‹å­æ—¶é—´èŠ±çš„æŒºé•¿ï¼Œäº§ç”Ÿçš„ç»“æœå’Œè¿›å±•å¸¸å¸¸ä»¤æˆ‘æ„Ÿåˆ°æƒŠè®¶ã€‚ä»¥æˆ‘å¸¸è§„çš„å·¥ä½œæ–¹å¼ï¼ˆå¦‚æ¯å¤©å›ºå®šæŠ•å…¥1-2å°æ—¶ï¼‰ï¼Œå¾€å¾€æ‹–äº†ä¸€ä¸¤å‘¨éƒ½æ¯«æ— è¿›å±•çš„å›°éš¾ä»»åŠ¡ï¼Œæˆ‘ä¸€æ•´ä¸ªä¸‹åˆå°±è§£å†³äº†ã€‚è¿™æ ·çš„æƒ…å†µå‘ç”Ÿäº†å¾ˆå¤šæ¬¡ï¼Œå¹¶ä¸”åå·®å¦‚æ­¤çš„å¼ºçƒˆï¼Œäºæ˜¯æˆ‘æ‰“ç®—å°†è¿™ä¸ªç°è±¡æ€è€ƒæ¸…æ¥šï¼Œæ€»ç»“å‡ºå…¶ä¸­çš„åŸå› ã€‚æˆ‘å¾ˆè‡ªç„¶åœ°è”æƒ³åˆ°äº†Cal Newportçš„ã€ŠDeep Workã€‹ï¼Œéšéšæ„Ÿè§‰å’Œä»–æå‡ºçš„â€œæ·±åº¦å·¥ä½œâ€çš„è¿™ä¸ªæ¦‚å¿µæœ‰å…³ã€‚å½“ç„¶åœ¨æ€»ç»“ä»–ä¹¦ä¸­çš„è§‚ç‚¹ä¹‹å‰ï¼Œæˆ‘ä¼šæƒ³æ¢³ç†ä¸€ä¸‹è‡ªå·±çš„æ€è€ƒã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="02-çŸ¥ä¹æ€»ç»“">0.2 çŸ¥ä¹æ€»ç»“&lt;/h2>
&lt;blockquote>
&lt;p>æœ€å°é˜»åŠ›å®šå¾‹ ï¼ˆThe Law of Least Resistanceï¼‰ï¼Œæˆ‘ä»¬äººç±»å¤©ç”Ÿå€¾å‘äºé€‰æ‹©ä¸€æ¡é˜»åŠ›æœ€å°çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å€¾å‘äºå›é¿å›°éš¾ä»»åŠ¡ï¼Œé€‰æ‹©æ›´è½»æ¾ã€æ›´ç®€å•çš„äº‹æƒ…å…ˆåšã€‚å› æ­¤åœ¨å¸¸è§„å·¥ä½œæ–¹å¼ä¸‹ï¼Œä½ å¤ªå®¹æ˜“ä¸è‡ªè§‰åœ°å›é¿å›°éš¾ä»»åŠ¡äº†ï¼Œè™½ç„¶ä½ å¯èƒ½è®¡åˆ’è¦åœ¨æŸä»¶äº‹ä¸Šå·¥ä½œ1-2å°æ—¶ï¼Œä½†å…¶å®åœ¨è¿™äº›æ—¶é—´å†…ï¼Œä½ éƒ½å¾ˆå¯èƒ½æœ‰æ„æ— æ„åœ°è¿œç¦»çœŸæ­£èƒ½æ¨è¿›ä»»åŠ¡çš„å›°éš¾çš„ç‚¹ï¼Œåªæ˜¯åšäº›è¡¨å±‚çš„ç®€å•çš„äº‹ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“è¢«åˆ«çš„äº‹æƒ…åˆ†å¿ƒä»è€Œä¸­æ–­åœ¨è¿™ä¸ªä»»åŠ¡ä¸Šçš„æŠ•å…¥ï¼ˆæ¯”å¦‚ï¼ŒæŸ¥çœ‹å›å¤é‚®ä»¶ï¼Œè‚šå­é¥¿äº†æƒ³ç€å…ˆå›å®¶åƒé¥­ï¼‰ï¼›äºæ˜¯ä½ åœ¨è¿™ä¸ªå›°éš¾ä»»åŠ¡ä¸ŠçœŸæ­£çš„æœ‰æ•ˆæŠ•å…¥å…¶å®éå¸¸æœ‰é™ï¼Œä¹Ÿå°±ä¸å¥‡æ€ªå‡ å‘¨æ—¶é—´ä¹Ÿæ²¡ä»€ä¹ˆè¿›å±•äº†ã€‚è€Œå¦ä¸€ç§æ·±åº¦å·¥ä½œæ–¹å¼ï¼Œç”±äºæˆ‘åœ¨ä¸€å¼€å§‹å°±å’Œè‡ªå·±çº¦å®šå¥½äº†ï¼šä¸è§£å†³é—®é¢˜ï¼Œé¥­éƒ½ä¸åƒï¼Œåšå¥½äº†æ‰“æŒä¹…æˆ˜çš„å‡†å¤‡ï¼Œæ‰€ä»¥é€€æ— å¯é€€ï¼Œé¿æ— å¯é¿ï¼Œåªèƒ½ç›´é¢æœ€å›°éš¾çš„ç‚¹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ¯«æ— ç–‘é—®ï¼Œæˆ‘ä¼šå€¾å‘äºåœ¨ç®€å•ä»»åŠ¡ï¼ˆLeetCodeç®€å•é¢˜ï¼Œå›å¤é‚®ä»¶ï¼Œåˆ·çŸ¥ä¹ï¼Œè¯»paperçš„intructionå’Œabstractï¼Œæµ…å±‚çš„é˜…è¯»ä»£ç ï¼‰ä¸ŠèŠ±è´¹æ—¶é—´æ¥è·å–åé¦ˆã€æ»¡è¶³æ„Ÿå’Œå®Œæˆæ„Ÿã€‚é¢å¯¹å›°éš¾ä»»åŠ¡æ—¶ï¼Œæ€»æ˜¯åœ¨è§£å†³æ‰å›°éš¾ä»»åŠ¡çš„ä¸€ä¸ªç®€å•éƒ¨åˆ†\æœ‰æ‰€è¿›å±•ä¹‹åï¼Œå°±æƒ³å›åˆ°åºŠä¸Šèººä¸€ä¼šå„¿ã€‚è¿™æ—¶æœ€è¿‘ï¼ˆ2022-05-07 14:40:33ï¼‰å·¥ä½œçš„æ™®éç°è±¡ã€‚&lt;/p>
&lt;blockquote>
&lt;p>å°½é‡ä¸è¦åˆ‡æ¢ä»»åŠ¡ï¼Œå› ä¸ºæœ‰å„ç§æˆæœ¬ï¼ˆæ„å¿—åŠ›æˆæœ¬ï¼Œä»»åŠ¡å¯åŠ¨æˆæœ¬ï¼‰ã€‚æ„å¿—åŠ›æˆæœ¬ï¼šæˆ‘ä»¬å¯¹å›°éš¾ä»»åŠ¡å¤šå°‘ä¼šæœ‰äº›ææƒ§ï¼Œæ‰€ä»¥å¯åŠ¨å®ƒæœ¬èº«å°±è¦æ¶ˆè€—ä¸€äº›æ„å¿—åŠ›ï¼Œå¦‚æœä½ æŒ‰ç…§å¸¸è§„çš„å·¥ä½œæ–¹å¼æ‹–ç€å¾ˆå¤šå¤©éƒ½æ²¡è§£å†³ï¼Œé‚£ä¹ˆæ¯æ¬¡å¯åŠ¨è¿™ä¸ªä»»åŠ¡çš„æ—¶å€™éƒ½è¦ä¸€æ¬¡åˆä¸€æ¬¡åœ°æ¶ˆè€—æ„å¿—åŠ›æˆæœ¬ã€‚ä»»åŠ¡å¯åŠ¨æˆæœ¬ï¼šå¯åŠ¨ä»»åŠ¡ç›´åˆ°åœ¨æœ€å›°éš¾çš„ç‚¹æƒ³åŠæ³•æ¨è¿›ä»»åŠ¡ä¹‹å‰ï¼Œä½ éœ€è¦å›é¡¾æ¶‰åŠåˆ°çš„å„ç§èƒŒæ™¯çŸ¥è¯†ã€çº¦æŸæ¡ä»¶å’Œç»†èŠ‚ï¼Œå› æ­¤ä½ åœ¨ä¸åŒçš„æ—¶é—´æ®µå¯åŠ¨ä»»åŠ¡æ—¶ï¼Œæ¯æ¬¡è¿™ä¸ªä»»åŠ¡å¯åŠ¨æˆæœ¬ä¹Ÿæ˜¯ä¸èƒ½çœçš„ã€‚å› æ­¤ä¸€ä»¶äº‹å¹²å¤§åŠå¤©ã€ä¸€æ•´å¤©çš„æ”¶ç›Šå’Œäº§ç”Ÿçš„ä»·å€¼è¿œè¿œè¶…è¿‡ä½ ä¸€å¤©åœ¨å‡ ä¸ªä»»åŠ¡é—´åˆ‡æ¢ï¼Œæ¯ä¸ªä»»åŠ¡å„èŠ±1-2å°æ—¶ã€‚å½“æˆ‘ä»¬æŠŠæŒ‡æ•°æ•ˆåº”æ”¾åˆ°è¾ƒå¤§çš„æ—¶é—´å°ºåº¦ä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç°è±¡æ˜¯ä¸€ä»¶äº‹ä½ åšæŒå¾ˆå¤šå¤©ï¼Œå¾ˆå¤šä¸ªæœˆï¼Œå¾ˆå¤šå¹´ï¼Œè¶Šåˆ°åæœŸä½ è¶Šèƒ½è·å¾—æŒ‡æ•°çº§çš„ä¸°åšå›æŠ¥ï¼›å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠæŒ‡æ•°æ•ˆåº”æ”¾åˆ°è¾ƒå°çš„æ—¶é—´å°ºåº¦ä¸‹ï¼Œæ¯”å¦‚ä¸€å¤©ï¼Œåœ¨ä¸€å¤©ä¸­ï¼Œä½ åšæŒåšä¸€ä»¶äº‹ä¸€ç›´åšä¸‹å»ï¼Œè¶Šåˆ°åé¢ä½ ä¹Ÿè¶Šèƒ½è·å¾—æŒ‡æ•°çº§çš„å›æŠ¥ï¼Œè€Œå¦‚æœä½ åªåœ¨ä¸€ä»¶äº‹ä¸ŠèŠ±äº†1-2å°æ—¶ï¼Œå¾ˆå¯èƒ½ä½ è¿˜æ²¡ç­‰åˆ°æ”¶ç›ŠæŒ‡æ•°çº§å¢é•¿çš„æ—¶å€™ã€‚ï¼ˆè€Œåƒç›–èŒ¨è¿™æ ·çš„å¤§ç¥ï¼Œåœ¨åˆ›ä¸šåˆæœŸå†™ç¨‹åºçš„æ—¶å€™ï¼Œå¯èƒ½è¿ç»­å‡ å‘¨å‡ ä¸ªæœˆè¿è½´è½¬éƒ½åœ¨é«˜åº¦ä¸“æ³¨åœ°æ¨è¿›ä¸€ä»¶äº‹ï¼Œå¯ä»¥æƒ³è±¡åˆ°åé¢æ‰€äº§ç”Ÿçš„ææ€–çš„æŒ‡æ•°çº§çš„ä»·å€¼ã€‚ï¼‰&lt;/p>
&lt;/blockquote>
&lt;p>æ²¡é”™ï¼Œå¯åŠ¨ä»»åŠ¡ä¼šæ¶ˆè€—å¤§é‡çš„ç²¾ç¥åŠ›ï¼Œè€Œè‡ªå·±è€æ˜¯åœ¨å¯åŠ¨åè‡ªæˆ‘ä¸­æ–­ï¼Œè¿™æ— ç–‘å¤§å¤§é™ä½äº†è‡ªå·±çš„æ•ˆç‡ã€‚è‡ªå·±èƒ½è®¤è¯†åˆ°ä¸­æ–­ä»»åŠ¡çš„è´Ÿé¢åæ˜ ï¼ŒçŸ¥é“è¿‡äºå›ºå®šçš„ä»»åŠ¡æ—¶é—´ï¼ˆæ¯”å¦‚ä¸¥æ ¼ 2h paper readingï¼‰æ˜¯ä¸å¯å–çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å¯»æ±‚ time management æ–¹æ³•çš„åŸå› ã€‚&lt;/p>
&lt;blockquote>
&lt;p>å½“ç„¶ä¸æ˜¯æ‰€æœ‰äº‹æƒ…éƒ½é€‚åˆç”¨æ·±åº¦å·¥ä½œçš„æ–¹å¼ï¼Œç°åœ¨çœ‹æ¥è‡ªè®¤ä¸ºçš„å›°éš¾ä»»åŠ¡æ˜¯é€‚åˆçš„ï¼Œè€Œæ¯”è¾ƒç®€å•ä½†å·¥ä½œé‡å·¨å¤§çš„ä»»åŠ¡å´ä¸é€‚åˆï¼ŒåŸå› å…¶å®å°±åœ¨ä¸Šé¢å†™çš„ä¸¤æ¡ä¸­äº†ã€‚
æ›´æ–°ä¸€æ¡ï¼šé•¿æ—¶é—´ä¸“æ³¨äºåŒä¸€ä¸ªä»»åŠ¡ï¼Œè¶Šåˆ°åé¢è¶Šä¼šæœ‰æŒ‡æ•°çº§çš„æ•ˆåº”å’Œäº§å‡ºï¼Œè¿˜å¾ˆå¯èƒ½å’Œcognitive workload theoryæœ‰å…³ï¼Œè¶Šåˆ°åé¢ï¼Œå› ä¸ºåœ¨ä¹‹å‰çš„æ—¶é—´é‡Œä½ å·²ç»å°†é‚£äº›åŸºç¡€æ€§çš„ä¸œè¥¿éƒ½å¼„å¾—å¾ˆç†Ÿæ‚‰äº†ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸å†å æ®ä½ çš„è®¤çŸ¥å·¥ä½œè´Ÿè·ï¼ˆcognitive workloadï¼‰ï¼Œè¿™æ ·åˆ°æœ€åä½ å¤§è„‘çš„è®¤çŸ¥æ€è€ƒèƒ½åŠ›å…¨éƒ¨è¢«è§£æ”¾å‡ºæ¥é›†ä¸­åœ¨æœ€éš¾çš„ç‚¹ä¸Šï¼Œä¸æ–­åœ°å–å¾—ä¹‹å‰æµ…åº¦å·¥ä½œï¼ˆshallow workï¼‰æ‰€ä¸èƒ½å–å¾—çš„çªç ´ã€‚&lt;/p>
&lt;p>Calè‡ªå·±æ˜¯â€æ·±åº¦å·¥ä½œâ€œçš„è·µè¡Œè€…ï¼Œä»–çš„ä¸€æ•´å¤©éƒ½ä¼šæ·±åº¦å›´ç»•ç€ä¸€é¡¹æ ¸å¿ƒçš„å·¥ä½œï¼Œç„¶åå°†é‚£äº›æ— æ³•é¿å…çš„æµ…å±‚å·¥ä½œå‹ç¼©åˆ°è‡ªå·±æ—¥ç¨‹çš„è¾¹è§’æ–™æ—¶é—´æ®µé‡Œã€‚è¿™æ ·ä¸€å¤©ä»…ä»…ä¸‰åˆ°å››ä¸ªå°æ—¶çš„æ— ä¸­æ–­çš„é«˜åº¦ä¸“æ³¨çš„å·¥ä½œï¼Œä¸€å‘¨äº”å¤©å°±èƒ½åˆ›é€ å‡ºå¾ˆå¤šæœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚Calè‡ªå·±è¿˜æ˜¯ä¸¤ä¸ªå­©å­çš„çˆ¶äº²ï¼Œè¿™æ ·çš„å·¥ä½œæ–¹å¼ä¹Ÿè®©ä»–æœ‰æ›´å¤šçš„æ—¶é—´ç•™ç»™å®¶äººï¼Œå¹¶ä¸”è®©ä»–æœ‰æ—¶é—´é˜…è¯»æƒŠäººæ•°é‡çš„ä¹¦ç±ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="1-youtube">1. Youtube&lt;/h1>
&lt;p>ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼ŒJK ç½—ç³ä¸ºäº†é¿å…å¹²æ‰°ï¼Œæ‰¾äº†å®¶é…’åº—å†™ä½œï¼Œå¥¹åŸæœ¬æ²¡æ‰“ç®—ä¸€ç›´å¾…åœ¨é‚£é‡Œã€‚ä½†æ˜¯ç¬¬ä¸€å¤©å·¥ä½œçš„æ•ˆæœå¾ˆå¥½ï¼Œæ‰€ä»¥ä»–å°±ç»§ç»­ä¸‹å»äº†ï¼Œç›´åˆ°å®Œæˆã€Šå“ˆåˆ©æ³¢ç‰¹ã€‹ã€‚&lt;/p>
&lt;p>æ¯”å°”ç›–èŒ¨ 1974 å¹´ç”¨ deep work ç†è®ºå®Œæˆ basic çš„ç¬¬ä¸€ç‰ˆï¼Œåœ¨ 8 ä¸ªå‘¨çš„æ—¶é—´å†…ï¼Œä»–ä¸€ç›´åœ¨å†™ä»£ç ï¼Œç´¯äº†å°±åœ¨é”®ç›˜ä¸Šè¶´ä¸€ä¼šå„¿ï¼Œç¡ä¸€ä¸ªå°æ—¶ã€‚æœ€å 8 å‘¨å®Œæˆäº†è¿™ä¸ªè½¯ä»¶ã€‚&lt;/p>
&lt;p>MIT å’Œä¸€äº›å­¦æ ¡çš„å­¦ç”Ÿã€è€å¸ˆå‘ç° deep work å¯¹ä»–ä»¬ç ”ç©¶å·¥ä½œçš„å¸®åŠ©ï¼Œäºæ˜¯åˆ›ä½œäº†è¿™æœ¬ä¹¦ã€‚æ™®é€šäººå¯èƒ½æ²¡æ³•åƒä»–ä»¬é‚£æ ·ä¸€æ¬¡åœ¨ä¸€ä¸ªå·¥ä½œä¸ŠæŠ•å…¥ 8 weeksï¼Œä½†æ˜¯ä»ç„¶æœ‰è¿›å…¥ deep work çš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>deep work å¾ˆéš¾ï¼Œä¹Ÿå¾ˆç¨€å°‘ã€‚æˆ‘ä»¬çš„ä¸–ç•Œæœ‰å¾ˆå¤šåˆ†æ•£æ³¨æ„åŠ›çš„ä¸œè¥¿ï¼Œæ¯”å¦‚åˆä½œæ—¶éœ€è¦ç«‹åˆ»å›é‚®ä»¶ï¼Œå›æ¶ˆæ¯ï¼Œæ¯”å¦‚ç¤¾äº¤åª’ä½“çš„å½±å“ï¼Œåˆ·è™æ‰‘ï¼Œå¾®åšç­‰ç­‰ã€‚&lt;/p>
&lt;p>ä¸€äº› deep work çš„æ–¹æ³•&lt;/p>
&lt;h2 id="11-schedule-distraction">1.1 Schedule Distraction&lt;/h2>
&lt;p>å¤§æ¦‚å°±æ˜¯è¯´ç»Ÿä¸€ä¸€ä¸ªæ—¶é—´æ¥å¤„ç†åˆ†æ•£æ³¨æ„åŠ›çš„äº‹é¡¹ã€‚è¿™ä¸ªå’Œæˆ‘æœ€è¿‘åœ¨åšçš„å…¶å®å¾ˆåƒï¼Œæ¯”å¦‚æ˜¨å¤©ï¼ˆ2022-05-07ï¼‰åœ¨æƒ³å»çœ‹ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼ˆç ”ç©¶é™¢ï¼‰æ²¡æœ‰ç«‹åˆ»å»ï¼Œè€Œæ˜¯æŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œä¹‹ä¸€ç»Ÿä¸€å¤„ç†ã€‚è¿™æ˜¯ä¸€ä¸ªé¿å…åˆ†æ•£æ³¨æ„åŠ›ï¼Œä¿æŒé«˜æ•ˆçš„æ–¹æ³•ã€‚ç©æ‰‹æœºï¼Œå›é‚®ä»¶ä¹Ÿåº”è¯¥æœ‰æ„è¯†åœ°å»å…‹åˆ¶ã€‚&lt;/p>
&lt;h2 id="12-deep-work-ritual">1.2 Deep Work Ritual&lt;/h2>
&lt;p>ç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼Œä¿æŒèŠ‚å¥ï¼Œå…»æˆä¹ æƒ¯ã€‚å…»æˆä¹ æƒ¯è¿™ä¸ªæŠ€å·§ï¼Œåœ¨æœ‰æ„è¯†åœ°å­¦ä¹ ã€‚&lt;/p>
&lt;p>ä¸€å‘¨ 7 å¤©ï¼Œä½ å¯èƒ½ä¹ æƒ¯åœ¨æ™šä¸Šè¿›å…¥ deep workï¼Œé‚£å°± 7 å¤©éƒ½ä¿æŒè¿™ä¸ªèŠ‚å¥ï¼ŒæŠŠä¼šè®®ï¼Œäº‹é¡¹å®‰æ’åˆ°æ—©ä¸Šï¼ŒæŠŠéœ€è¦ deep work çš„å·¥ä½œå®‰æ’åœ¨æ™šä¸Šã€‚&lt;/p>
&lt;p>ç ”ç©¶è¡¨æ˜æ–°æ‰‹å¤§æ¦‚èƒ½ä¿æŒ 1h deep workï¼Œä½†æ˜¯ deep work master èƒ½å¤Ÿä¿æŒå¤§æ¦‚ 4hï¼Œè¦äº‰å–åšåˆ°è¿™ä¸ªå¼ºåº¦ã€‚&lt;/p>
&lt;h2 id="13-evening-shundown">1.3 Evening Shundown&lt;/h2>
&lt;p>ä¼‘æ¯å¥½å¾ˆé‡è¦ã€‚æ²¡åšå®Œçš„äº‹æƒ…ï¼Œæ‹†åˆ†æˆæ¯”è¾ƒå…·ä½“çš„äº‹æƒ…ï¼Œå†™å…¥ç¬¬äºŒå¤©çš„è®¡åˆ’ä¸­ã€‚å› ä¸ºæ­¤æ—¶ä¸€å¤©çš„å·¥ä½œè¿˜ä¿å­˜åœ¨å¤§è„‘çš„ cache ä¸­ï¼Œä¸»è¦æ˜¯è¿˜æ²¡æœ‰æ–­å¼€è¿æ¥ï¼Œåˆ—å¥½è®¡åˆ’ï¼Œç¬¬äºŒå¤©å¯ä»¥å‡å°‘å¾ˆå¤šå¼€é”€ã€‚å¯¹äºéœ€è¦ deep work çš„å·¥ä½œï¼Œéœ€è¦åŠæ—¶ shutdownï¼Œåˆ—å¥½è®¡åˆ’ä¹‹ååœ¨ç¬¬äºŒå¤©ç•™å‡ºå……è¶³çš„æ—¶é—´æ¥å®Œæˆï¼Œè€Œä¸æ˜¯å¼ºè¡Œä½æ•ˆç‡åœ°å»ç£¨ã€‚&lt;/p>
&lt;h1 id="reference">Reference&lt;/h1>
&lt;p>&lt;a href="https://zhuanlan.zhihu.com/p/39759254">https://zhuanlan.zhihu.com/p/39759254&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.youtube.com/watch?v=gTaJhjQHcf8">https://www.youtube.com/watch?v=gTaJhjQHcf8&lt;/a>&lt;/p></description></item></channel></rss>