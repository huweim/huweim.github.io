<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Git中常用的操作 - Cory Code</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Git中常用的操作"><meta itemprop=description content="Git中常用的操作 1. Remote Repo 1.1 Add Remote Repo $ git remote add origin git@github.com:huweim/repo_name.git 1.2 Delete Remote Repo  Add a wrong remote repo, we could delete it.  $ git remote -v origin git@github.com:huweim/huweim.github.io.git (fetch) origin git@github.com:huweim/huweim.github.io.git (push)  Delete it  $ git remote rm origin 1.3 Pull Origin Master to Local :x:似乎 push 之前如果有东西需要先 pull
 是因为远端已经创建了 README.md，local 也有README.md。有冲突，所以需要先 pull 过来同步。  git pull 命令用于从远程获取代码并合并本地的版本。
git pull 其实就是 git fetch 和 git merge FETCH_HEAD 的简写。 命令格式如下："><meta itemprop=datePublished content="2021-03-08T19:12:40+08:00"><meta itemprop=dateModified content="2021-03-08T19:12:40+08:00"><meta itemprop=wordCount content="505"><meta itemprop=keywords content="技巧,"><meta property="og:title" content="Git中常用的操作"><meta property="og:description" content="Git中常用的操作 1. Remote Repo 1.1 Add Remote Repo $ git remote add origin git@github.com:huweim/repo_name.git 1.2 Delete Remote Repo  Add a wrong remote repo, we could delete it.  $ git remote -v origin git@github.com:huweim/huweim.github.io.git (fetch) origin git@github.com:huweim/huweim.github.io.git (push)  Delete it  $ git remote rm origin 1.3 Pull Origin Master to Local :x:似乎 push 之前如果有东西需要先 pull
 是因为远端已经创建了 README.md，local 也有README.md。有冲突，所以需要先 pull 过来同步。  git pull 命令用于从远程获取代码并合并本地的版本。
git pull 其实就是 git fetch 和 git merge FETCH_HEAD 的简写。 命令格式如下："><meta property="og:type" content="article"><meta property="og:url" content="https://huweim.github.io/posts/%E7%BC%96%E7%A8%8B_git%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E6%93%8D%E4%BD%9C/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-08T19:12:40+08:00"><meta property="article:modified_time" content="2021-03-08T19:12:40+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git中常用的操作"><meta name=twitter:description content="Git中常用的操作 1. Remote Repo 1.1 Add Remote Repo $ git remote add origin git@github.com:huweim/repo_name.git 1.2 Delete Remote Repo  Add a wrong remote repo, we could delete it.  $ git remote -v origin git@github.com:huweim/huweim.github.io.git (fetch) origin git@github.com:huweim/huweim.github.io.git (push)  Delete it  $ git remote rm origin 1.3 Pull Origin Master to Local :x:似乎 push 之前如果有东西需要先 pull
 是因为远端已经创建了 README.md，local 也有README.md。有冲突，所以需要先 pull 过来同步。  git pull 命令用于从远程获取代码并合并本地的版本。
git pull 其实就是 git fetch 和 git merge FETCH_HEAD 的简写。 命令格式如下："><link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://huweim.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://huweim.github.io/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://huweim.github.io/css/dark.css><script src=https://huweim.github.io/js/feather.min.js></script>
<script src=https://huweim.github.io/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://huweim.github.io/>Cory Code</a></h1><div class=site-description><p>Minimal and Clean <a href=https://github.com/athul/hugo-ink>blog theme for Hugo</a></p><nav class="nav social"><ul class=flat><li><a href=https://github.com/huweim title=GitHub><i data-feather=github></i></a></li><li><a href=https://twitter.com/athulcajay/ title=Twitter><i data-feather=twitter></i></a></li><li><a href=https://gitlab.com/athul/ title=GitLab><i data-feather=gitlab></i></a></li><li><a href=# class=scheme-toggle id=scheme-toggle></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/categories/>Categories</a></li><li><a href=/archives>Archives</a></li><li><a href=/tags>Tags</a></li><li><a href=/about/>About</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>08</span>
<span class=rest>Mar 2021</span></div></div><div class=matter><h1 class=title>Git中常用的操作</h1></div></div><div class=markdown><h1 id=git中常用的操作>Git中常用的操作</h1><h3 id=1-remote-repo>1. Remote Repo</h3><h4 id=11-add-remote-repo>1.1 Add Remote Repo</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git remote add origin git@github.com:huweim/repo_name.git
</span></span></code></pre></div><h4 id=12-delete-remote-repo>1.2 Delete Remote Repo</h4><ul><li>Add a wrong remote repo, we could delete it.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git remote -v
</span></span><span class=line><span class=cl>origin  git@github.com:huweim/huweim.github.io.git <span class=o>(</span>fetch<span class=o>)</span>
</span></span><span class=line><span class=cl>origin  git@github.com:huweim/huweim.github.io.git <span class=o>(</span>push<span class=o>)</span>
</span></span></code></pre></div><ul><li>Delete it</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git remote rm origin
</span></span></code></pre></div><h4 id=13-pull-origin-master-to-local>1.3 Pull Origin Master to Local</h4><p>:x:似乎 push 之前如果有东西需要先 pull</p><ul><li>是因为远端已经创建了 README.md，local 也有README.md。有冲突，所以需要先 pull 过来同步。</li></ul><p><strong>git pull</strong> 命令用于从远程获取代码并合并本地的版本。</p><p><strong>git pull</strong> 其实就是 <strong>git fetch</strong> 和 <strong>git merge FETCH_HEAD</strong> 的简写。 命令格式如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;
</span></span></code></pre></div><p>将远程主机 origin 的 master 分支拉取过来，与本地的 brantest 分支合并。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull origin master:brantest
</span></span></code></pre></div><p>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull origin master
</span></span></code></pre></div><p>上面命令表示，取回 origin/master 分支，再与本地的 brantest 分支合并。</p><h3 id=2-clone-from-remote-repo>2. Clone from Remote Repo</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git clone git@github.com:huweim/repo_name.git
</span></span><span class=line><span class=cl>$ git clone https://github.com/huweim/repo_name.git
</span></span></code></pre></div><ul><li>很多时候http速度很慢，会clone失败报错，所以建议使用ssh。</li></ul><h3 id=3-delete>3. Delete</h3><h4 id=31-删除工作区文件>3.1 删除工作区文件</h4><ul><li><p>与win中右键删除没有区别</p></li><li><p>If you want to remove the file from the Git repository <strong>and the filesystem</strong>, use:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git rm file1.txt   <span class=c1>#删除file1.txt</span>
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;remove file1.txt&#34;</span>
</span></span></code></pre></div><h4 id=32-仅删除暂存区中的文件>3.2 仅删除暂存区中的文件</h4><p>But if you want to remove the file only from the Git repository and not remove it from the filesystem, use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git rm --cached file1.txtgit commit -m <span class=s2>&#34;remove file1.txt&#34;</span>
</span></span></code></pre></div><p>And to push changes to remote repo</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push origin branch_name
</span></span></code></pre></div><h4 id=33-删除文件夹-踩坑>3.3 删除文件夹 (踩坑)</h4><ul><li>主要是由于之前commit过某些文件和文件夹，导致无法忽略这些文件</li><li>采用命令git rm &ndash;cached &ldquo;文件路径&rdquo;</li><li>删除文件夹的时候，出现 not removing &lsquo;game/logs&rsquo; recursively without -r，说明我们需要添加参数 -r 来递归删除文件夹里面的文件</li><li>git rm -r &ndash;cached &ldquo;文件路径&rdquo;</li><li>然后commit</li></ul><h3 id=4-回滚>4. 回滚</h3><ul><li><code>HEAD</code>指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令<code>git reset --hard commit_id</code>。</li><li>穿梭前，用<code>git log</code>可以查看提交历史，以便确定要回退到哪个版本。</li><li>要重返未来，用<code>git reflog</code>查看命令历史，以便确定要回到未来的哪个版本。</li></ul><h4 id=41-查看历史版本>4.1 查看历史版本</h4><h5 id=411-查看过去>4.1.1 查看过去</h5><ul><li><p><code>git log</code>命令显示从最近到最远的提交日志</p></li><li><p>commit_id（版本号） 964ab89b23c2&mldr;&mldr;.</p></li><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git reset --hard commit_id$ git reset --hard 964ab89
</span></span></code></pre></div></li><li><p>知道commit_id可以回到过去的版本</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git logcommit 964ab89b23c2aa367c89ee2e9578e1398819d523 <span class=o>(</span>HEAD -&gt; master, origin/master<span class=o>)</span>Author: huweim &lt;506834968@qq.com&gt;Date:   Mon Mar <span class=m>8</span> 15:43:24 <span class=m>2021</span> +0800    add first postcommit bd6582181e070822896bbb8cfb2b3a3e80cf3163Author: huweim &lt;506834968@qq.com&gt;Date:   Mon Mar <span class=m>8</span> 15:30:25 <span class=m>2021</span> +0800    Full themes of archie
</span></span></code></pre></div><h5 id=412-寻找未来>4.1.2 寻找未来</h5><ul><li><code>git reflog</code>查看命令历史</li><li>根据commit_id寻找当前版本的“未来”</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git reflog964ab89 <span class=o>(</span>HEAD -&gt; master, origin/master<span class=o>)</span> HEAD@<span class=o>{</span>0<span class=o>}</span>: commit: add first postbd65821 HEAD@<span class=o>{</span>1<span class=o>}</span>: commit: Full themes of archie23ca6d2 HEAD@<span class=o>{</span>2<span class=o>}</span>: commit: modify the hugo themesa6ad376 HEAD@<span class=o>{</span>3<span class=o>}</span>: reset: moving to HEAD^4eaa987 HEAD@<span class=o>{</span>4<span class=o>}</span>: reset: moving to HEAD^d7770ba HEAD@<span class=o>{</span>5<span class=o>}</span>: commit: Publish fitst 14eaa987 HEAD@<span class=o>{</span>6<span class=o>}</span>: commit: Publish fitsta6ad376 HEAD@<span class=o>{</span>7<span class=o>}</span>: pull: Fast-forward6db58f9 HEAD@<span class=o>{</span>8<span class=o>}</span>: commit <span class=o>(</span>initial<span class=o>)</span>: Initial Commit
</span></span></code></pre></div><h4 id=42-撤销修改操作>4.2 撤销修改操作</h4><h5 id=case-1---修改了file还未add>Case 1 -> 修改了file，还未add</h5><p>Case以文件 README.md 为例</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout -- file
</span></span></code></pre></div><p>e.g</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout -- README.md
</span></span></code></pre></div><ul><li>丢弃工作区的修改，回到上一次commit时的状态。</li></ul><h5 id=case-2---修改了file且已经add>Case 2 -> 修改了file，且已经add</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git reset HEAD &lt;file&gt;    <span class=c1>#撤销对暂存区的修改  回到case 1的状态git checkout -- file     #情况来到case1, 撤销工作区修改</span>
</span></span></code></pre></div><p>e.g</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git reset HEAD README.mdgit checkout -- README.md
</span></span></code></pre></div><h5 id=case-3---修改了file且已经add并commit>case 3 -> 修改了file，且已经add，并commit</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git reset --hard HEAD^    <span class=c1>#回到上一个版本，回到case 2的状态git reset HEAD &lt;file&gt;     #撤销对暂存区的修改  回到case 1的状态git checkout -- file      #情况来到case1, 撤销工作区修改</span>
</span></span></code></pre></div><p>e.g</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git reset --hard HEAD^git reset HEAD README.mdgit checkout -- README.md
</span></span></code></pre></div><h4 id=43-版本回退>4.3. 版本回退</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git reset --hard HEAD^    <span class=c1>#回到上一个版本git reset --hard HEAD^^   #回到上上一个版本git reset --hard 1084a    #回到commit_id以1084a开头的版本git reset --hard HEAD~100 #回到上100个版本</span>
</span></span></code></pre></div><h4 id=44-回滚后在提交坑>4.4 回滚后在提交（坑）</h4><h5 id=i-基本操作>I. 基本操作</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git add -A   git commit -m <span class=s1>&#39;说明&#39;</span>push -u origin master   
</span></span></code></pre></div><h5 id=ii-报错>II. 报错</h5><p>在执行<code>push -u origin master</code> 命令后报错</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>error: failed to push some refs to <span class=s1>&#39;github.com:huweim/huweim.github.io.git&#39;</span>hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Integrate the remote changes <span class=o>(</span>e.g.hint: <span class=s1>&#39;git pull ...&#39;</span><span class=o>)</span> before pushing again.hint: See the <span class=s1>&#39;Note about fast-forwards&#39;</span> in <span class=s1>&#39;git push --help&#39;</span> <span class=k>for</span> details.
</span></span></code></pre></div><blockquote><p>报错原因-> <code>当前提交版本低于git主版本</code></p></blockquote><h5 id=iii-解决方法>III. 解决方法</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>push -u origin master -f
</span></span></code></pre></div><blockquote><ul><li><strong><code>-f</code></strong> 覆盖当前主分支 如果您的仓库只有自己在玩,这个命令可以随意使用</li><li>如果你是协同开发共用仓库,请务必不要带 <strong><code>-f</code></strong> 参数提交代码,后果不亚于 <strong>删库跑路</strong></li></ul></blockquote><h3 id=5-reference>5. Reference</h3><p><a href=https://www.jianshu.com/p/bc067471781f>https://www.jianshu.com/p/bc067471781f</a></p><p><a href=https://www.runoob.com/git/git-basic-operations.html>https://www.runoob.com/git/git-basic-operations.html</a></p><p><a href=https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192>https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192</a></p><h3 id=6-git常用命令速查表>6. Git常用命令速查表</h3></div><div class=tags><ul class=flat><li><a href=/tags/%E6%8A%80%E5%B7%A7>技巧</a></li></ul></div></div></div><div class="footer wrapper"><nav class=nav><div>2022 © Athul | <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>