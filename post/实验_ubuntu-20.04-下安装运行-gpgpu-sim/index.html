<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage data-theme=light><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Ubuntu 20.04 下安装运行 GPGPU-Sim - Weiming Hu
</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=color-scheme content="light dark"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=generator content="Hugo 0.140.2"><link rel=canonical href=https://huweim.github.io/post/%E5%AE%9E%E9%AA%8C_ubuntu-20.04-%E4%B8%8B%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C-gpgpu-sim/><meta name=author content="Weiming Hu"><meta name=description content="0. 前言 最近因为课程 Project 需要使用 GPGPU-Sim 复现一篇 paper，在之后的课题中可能也会用到这个模拟器。所以收集了相关资料以搭建 GPGPU-Sim 的环境并运行 Demo。GPGPU-Sim 的参考资料实在是不多，主要参考了官方文档、Github 中 README 文件，还有一些相关的 Blog。
"><meta name=keywords content="GPGPU-Sim"><meta property="og:url" content="https://huweim.github.io/post/%E5%AE%9E%E9%AA%8C_ubuntu-20.04-%E4%B8%8B%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C-gpgpu-sim/"><meta property="og:site_name" content="Weiming Hu"><meta property="og:title" content="Ubuntu 20.04 下安装运行 GPGPU-Sim"><meta property="og:description" content="0. 前言 最近因为课程 Project 需要使用 GPGPU-Sim 复现一篇 paper，在之后的课题中可能也会用到这个模拟器。所以收集了相关资料以搭建 GPGPU-Sim 的环境并运行 Demo。GPGPU-Sim 的参考资料实在是不多，主要参考了官方文档、Github 中 README 文件，还有一些相关的 Blog。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-05-10T15:17:51+08:00"><meta property="article:modified_time" content="2025-02-11T14:04:29+00:00"><meta property="article:tag" content="GPGPU-Sim"><meta itemprop=name content="Ubuntu 20.04 下安装运行 GPGPU-Sim"><meta itemprop=description content="0. 前言 最近因为课程 Project 需要使用 GPGPU-Sim 复现一篇 paper，在之后的课题中可能也会用到这个模拟器。所以收集了相关资料以搭建 GPGPU-Sim 的环境并运行 Demo。GPGPU-Sim 的参考资料实在是不多，主要参考了官方文档、Github 中 README 文件，还有一些相关的 Blog。"><meta itemprop=datePublished content="2021-05-10T15:17:51+08:00"><meta itemprop=dateModified content="2025-02-11T14:04:29+00:00"><meta itemprop=wordCount content="2271"><meta itemprop=keywords content="GPGPU-Sim"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu 20.04 下安装运行 GPGPU-Sim"><meta name=twitter:description content="0. 前言 最近因为课程 Project 需要使用 GPGPU-Sim 复现一篇 paper，在之后的课题中可能也会用到这个模拟器。所以收集了相关资料以搭建 GPGPU-Sim 的环境并运行 Demo。GPGPU-Sim 的参考资料实在是不多，主要参考了官方文档、Github 中 README 文件，还有一些相关的 Blog。"><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/style.min.de488e0d4b09a0b9f6412192239661fda9bb9ea66e49d8f210bf0786a4e36acb.css integrity="sha256-3kiODUsJoLn2QSGSI5Zh/am7nqZuSdjyEL8HhqTjass=" media=screen crossorigin=anonymous><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script>(function(){var e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script></head><body><div id=back-to-top></div><header class=site-header><div class=desktop-header><div class=desktop-header-logo><a href=/ class=logo>Weiming Hu</a></div><nav class=desktop-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/>Home</a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/post>All posts</a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/archives>Archives</a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/tags>Tags</a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/about/>About</a></li><li class=menu-item><a class="theme-toggle menu-item-link" href=javascript:void(0);><svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg><svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></a></li><li class=menu-item><a class=menu-item-link href=https://huweim.github.io/index.xml rel="noopener alternate" type=application/rss+xml title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></li></ul></nav></div><div class=mobile-header><div id=mobile-navbar class=mobile-navbar><div id=mobile-navbar-icon class=mobile-navbar-icon><svg aria-hidden="true" class="lucide lucide-menu hi-svg-inline icon--menu" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg></div><div class=mobile-navbar-logo><a href=/ class=logo>Weiming Hu</a></div></div><div id=mobile-menu-close-modal class=mobile-menu-close-modal></div><nav id=mobile-menu class=mobile-menu><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/>Home</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/post>All posts</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/categories/>Categories</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/archives>Archives</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/tags>Tags</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/about/>About</a></li><li class=mobile-menu-item><a class="theme-toggle menu-item-link" href=javascript:void(0);><svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg><svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></a></li><li class=mobile-menu-item><a class=menu-item-link href=https://huweim.github.io/index.xml rel="noopener alternate" type=application/rss+xml title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></li></ul></nav></div></header><main id=main class="main pico container"><div class=content-wrapper><aside class=sidebar></aside><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Ubuntu 20.04 下安装运行 GPGPU-Sim</h1><div class=post-meta-list><div class="post-meta-item post-meta-author"><svg aria-hidden="true" class="lucide lucide-user-round-pen hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M2 21a8 8 0 0110.821-7.487"/><path d="M21.378 16.626a1 1 0 00-3.004-3.004l-4.01 4.012a2 2 0 00-.506.854l-.837 2.87a.5.5.0 00.62.62l2.87-.837a2 2 0 00.854-.506z"/><circle cx="10" cy="8" r="5"/></svg>
Weiming Hu</div><div class="post-meta-item post-meta-time"><svg aria-hidden="true" class="lucide lucide-calendar-days hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
<time datetime=2021-05-10>2021-05-10
</time><span class="post-meta-item post-meta-lastmod">(LastMod:
2025-02-11)</span></div><div class=post-meta__right><span class=post-meta-more>2271 words -
5 min read</span><div class="post-meta-item post-meta-category"><a href=https://huweim.github.io/categories/%E7%BC%96%E7%A8%8B/>编程</a></div></div></div></header><div class=post-content><h3 id=0-前言><strong>0. 前言</strong></h3><p>最近因为课程 Project 需要使用 GPGPU-Sim 复现一篇 paper，在之后的课题中可能也会用到这个模拟器。所以收集了相关资料以搭建 GPGPU-Sim 的环境并运行 Demo。GPGPU-Sim 的参考资料实在是不多，主要参考了<a href=http://gpgpu-sim.org/manual/index.php/Main_Page>官方文档</a>、<a href=https://github.com/gpgpu-sim/gpgpu-sim_distribution>Github 中 README 文件</a>，还有一些相关的 Blog。</p><p>本次只跑了一个非常简单的 Demo，关于 CUDA 实例可以参考 Textbook 《CUDA by Example》。里面提供了一些 CUDA 编程的源码介绍。有人在 <a href=https://github.com/jiekebo/CUDA-By-Example>Github</a> 上提供了《CUDA by Example》的源代码。</p><p><strong>不过自己搭建 GPGPU-Sim 的环境坑比较多，一定要注意 gcc/g++ 版本问题以及链接库。所以我个人还是建议如果不是长期使用，可以直接下载官方提供的 fully setup virtual machine</strong> 。在 <a href=http://gpgpu-sim.org/>http://gpgpu-sim.org/</a> 下载，然后导入 Virtual Box 使用。他们提供的虚拟机已经配置好了环境，可以直接使用 GPGPU-Sim 编译 .cu 文件然后在模拟器上运行。具体步骤可以参考 <a href=http://www.danielwong.org/classes/ee260-w17/assignment1>UCR 给的流程</a>。</p><h3 id=1-介绍><strong>1. 介绍</strong></h3><p>GPGPU-sim能够在Linux系统下，提供对GPU的功能模拟和性能仿真，让你在没有装NVIDIA显卡的情况下可以编译并运行CUDA程序。当然它更重要的意义是，可以通过修改仿真参数，让开发者修改GPU内部架构，并进行性能仿真，以针对自己的项目需求进行更好的代码设计，获得更好的性能表现。</p><p>我使用的环境是</p><ul><li>Ubuntu 20.04</li><li>CUDA Toolkit 11.1</li><li>gcc/g++ 5</li><li>⚠️ 注意：在 Build GPGPU-Sim 之前最好就确保使用 gcc/g++ 5 版本</li><li>当时 GPGPU-Sim 作者测试时使用的是 CUDA 4.2 版本，gcc/g++也是 4.X 版本。</li><li>我使用 gcc/g++ 9 编译 .cu 得到的可执行程序在模拟器上运行会报错: Segmentation Fault. 使用 gcc/g++ 5 版本重新 Build 模拟器并编译后才正常运行。</li></ul><h3 id=2-环境搭建><strong>2. 环境搭建</strong></h3><p><strong>2.1 Dependencies</strong></p><p>官方给出了需要的环境</p><p>GPGPU-Sim Dependencies</p><ul><li>gcc</li><li>g++</li><li>make</li><li>makedepend</li><li>xutils</li><li>bison</li><li>flex</li><li>zlib</li><li>CUDA Toolkit</li></ul><p>GPGPU-Sim documentation dependencies</p><ul><li>doxygen</li><li>graphvi</li></ul><p>AerialVision Dependencies</p><ul><li>python-pmw</li><li>python-ply</li><li>python-numpy</li><li>libpng 12-dev</li><li>python-matplotlib</li></ul><p>如果您正在使用Ubuntu，以下命令将安装除 CUDA 工具包之外的所有必需的依赖项。 所以我们直接用以下命令行安装所有需要的依赖。</p><p>GPGPU-Sim dependencies:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>sudo apt-get install build-essential xutils-dev bison zlib1g-dev flex libglu1-mesa-dev</code></pre></div><p>GPGPU-Sim documentation dependencies:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>sudo apt-get install doxygen graphviz</code></pre></div><p>AerialVision dependencies:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>sudo apt-get install python-pmw python-ply python-numpy libpng12-dev python-matplotlib</code></pre></div><p>CUDA SDK dependencies:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>sudo apt-get install libxi-dev libxmu-dev libglut3-dev</code></pre></div><h3 id=22-cuda安装><strong>2.2 CUDA安装</strong></h3><p>这里讲一下 CUDA Toolkit 的安装过程</p><h3 id=i-cuda官网下载对应的包><strong>I. CUDA官网下载对应的包</strong></h3><ul><li>进入CUDA官网[https://developer.nvidia.com/zh-cn/cuda-downloads]</li><li>根据自己的系统选择，建议下载runfile文件，官网给出了命令行操作</li></ul><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>$ wget https://developer.download.nvidia.com/compute/cuda/11.1.0/local_installers/cuda_11.1.0_455.23.05_linux.run
$ sudo sh cuda_11.1.0_455.23.05_linux.run</code></pre></div><p><img src=https://pic1.zhimg.com/v2-7ba2629b1e3b75a29461c9ecbc851ed4_b.png alt=img></p><p>CUDA官网下载对应的包</p><ul><li>在这一界面输入 accept 继续</li></ul><p><img src=https://pic3.zhimg.com/v2-6a47063759886db4e5b5a4d11cd5e78a_b.png alt=img></p><p>输入 accept</p><ul><li>安装CUDA工具包时如果电脑上没有GPU无需安装Driver，用叉号进行选择，仅勾选 CUDA Toolkit 即可，然后Install回车</li></ul><p><img src=https://pic2.zhimg.com/v2-3cb43abb13dd63dd71c8c1eaa559f28d_b.png alt=img></p><p>勾选Toolkit后 Install</p><ul><li>之后会弹出一个带有 Summary 的界面，表示安装成功</li></ul><h3 id=ii-配置环境变量><strong>II. 配置环境变量</strong></h3><ul><li>命令行输入sudo gedit ~/.bashrc</li><li>在文件尾部插入如下命令，注意要去 ./usr/local 中核对一下cuda文件的名称，我这里是cuda-11.1为例</li></ul><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>export CUDA_INSTALL_PATH=/usr/local/cuda-11.1
export PATH=$CUDA_INSTALL_PATH/bin
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-11.1/lib64</code></pre></div><p><img src=https://pic4.zhimg.com/v2-d8f6ca792f79b725d244f73aedc4812f_b.png alt=img></p><p>在文件尾部插入命令后保存退出</p><h3 id=iii-验证><strong>III. 验证</strong></h3><ul><li>输入nvcc -V验证是否安装成功，注意是大写的 V 查看版本信息</li></ul><p><img src=https://pic3.zhimg.com/v2-a48113b779f1f6f0c74bd2182e74ed36_b.png alt=img></p><p>出现版本信息</p><h3 id=3-gpgpu-sim部署><strong>3. GPGPU-Sim部署</strong></h3><h3 id=31-安装-gpgpu-sim><strong>3.1 安装 GPGPU-Sim</strong></h3><h3 id=i-clone-gpgpu-sim-repo><strong>I. Clone GPGPU-Sim Repo</strong></h3><p>GPGPU-Sim使用从官方 git 地址 clone 的方式，Github一般能直接搜到</p><p><a href=https://github.com/gpgpu-sim/gpgpu-sim_distribution>https://github.com/gpgpu-sim/gpgpu-sim_distribution</a></p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>$ git clone https://github.com/gpgpu-sim/gpgpu-sim_distribution</code></pre></div><h3 id=ii-部署gpgpu-sim><strong>II. 部署GPGPU-Sim</strong></h3><p>进入clone项目代码的文件夹，打开命令行，执行以下命令</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>source setup_environment</code></pre></div><p>弹出 setup_environment succeeded</p><p><img src=https://pic2.zhimg.com/v2-e932eff774baf3bfcb073260cc533e3d_b.png alt=img></p><p>setup_environment succeeded</p><p>然后执行以下命令</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>make
make docs</code></pre></div><p>这部分的作用是 Build Simulator，可以参考<a href=https://zhuanlan.zhihu.com/p/369673760/%28https://github.com/gpgpu-sim/gpgpu-sim_distribution%29>官方文档</a> README 中的 Step 2 来了解细节。</p><h3 id=32-run><strong>3.2 Run</strong></h3><p>从安装好到运行这一步还真不容易，再次感叹 GPGPU-Sim 的相关资料太少了。花了一些时间去了解 CUDA，去看官方文档，这里给出运行的 Demo 实例。来自<a href=https://www.gpuinsight.com/gpgpusim_install/>博客</a></p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>/* file: hello.cu */
#include &lt;stdio.h&gt;
#include &lt;cuda_runtime.h&gt;

__global__ void add(int a, int b, int *c)
{
    *c = a + b;
}

int main()
{
    int c;
    int *dev_c;
    cudaMalloc((void **)&amp;dev_c, sizeof(int));
    add&lt;&lt;&lt;1, 1&gt;&gt;&gt;(2, 7, dev_c);
    cudaMemcpy(&amp;c, &amp;dev_c, sizeof(int), cudaMemcpyDeviceToHost);
    printf(&#34;2 + 7 = %d\n&#34;, c);

    return 0;
}</code></pre></div><p><strong>I. 编译</strong></p><blockquote><p>Before we run, we need to make sure the application&rsquo;s executable file is dynamically linked to CUDA runtime library. This can be done during compilation of your program by introducing the nvcc flag &ldquo;&ndash;cudart shared&rdquo; in makefile (quotes should be excluded).</p></blockquote><ul><li>编译程序时指定&ndash;cudart shared确保可执行程序动态链接到CUDA runtime库</li></ul><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>nvcc --cudart shared -o hello hello.cu</code></pre></div><p><strong>II. 链接</strong></p><blockquote><p>To confirm the same, type the follwoing command: ldd &lt;your_application_name></p></blockquote><p>本文 3.1 -> II 中已经通过source setup_environment设置可执行程序连接到GPGPU-Sim编译的libcudart.so中。 运行ldd确保链接正确的libcudart.so:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>ldd hello</code></pre></div><p>❗️❌之前没有链接到正确的 libcudart.so</p><p><img src=https://pic1.zhimg.com/v2-6248557c4f5b684d7acfbd389c106128_b.png alt=img></p><p>没有链接到 GPGPU-Sim 中的 libcudart.so 文件</p><blockquote><p>You should see that your application is using libcudart.so file in GPGPUSim directory.</p></blockquote><p>✔️ 您应该看到您的应用程序正在使用 GPGPUSim 目录中的 libcudart.so 文件</p><p><img src=https://pic3.zhimg.com/v2-0082a419b7b3d2ddc3fc6bb021e7eab6_b.png alt=img></p><p>成功链接到 GPGPU-Sim 中的 libcudart.so 文件</p><p>链接到 GPGPU-Sim 中的 <a href=http://libcudart.so/>libcudart.so</a> 文件</p><p><strong>III. 拷贝 Config 文件</strong></p><blockquote><p>Copy the contents of configs/QuadroFX5800/ or configs/GTX480/ to your application&rsquo;s working directory. These files configure the microarchitecture models to resemble the respective GPGPU architectures.</p></blockquote><p>⭐️运行程序之前需要拷贝 GPGPU-Sim 路径下的configs/tested-cfgs/SM2_GTX480/的配置文件到当前运行 demo 的路径下。</p><blockquote><p>Now To run a CUDA application on the simulator, simply execute source setup_environment &lt;build_type> Use the same &lt;build_type> you used while building the simulator. Then just launch the executable as you would if it was to run on the hardware. By running source setup_environment &lt;build_type> you change your LD_LIBRARY_PATH to point to GPGPU-Sim&rsquo;s instead of CUDA or OpenCL runtime so that you do NOT need to re-compile your application simply to run it on GPGPU-Sim.</p></blockquote><p>通过运行 source setup_environment release，将 LD_LIBRARY_PATH 更改为指向 GPGPU-Sim 而不是 CUDA or OpenCL</p><p><strong>IV. Run</strong></p><p>最后运行可执行程序:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>./hello</code></pre></div><h3 id=-此时出现了-segementation-fault这个应该是编译器版本的问题引起的如前所述一开始我使用的-gccg-9>❌ 此时出现了 Segementation fault，这个应该是编译器版本的问题引起的，如前所述，一开始我使用的 gcc/g++ 9</h3><p><img src=https://pic2.zhimg.com/v2-64e3d159139c56a51db44fef1f68b639_b.png alt=img></p><p>使用gcc/g++ 9编译出来的文件运行报错</p><p>在官方 Github 下面找到了<a href=https://github.com/gpgpu-sim/gpgpu-sim_distribution/issues/73>解决方法</a>，有人建议使用 gcc-5.4/g++-5.4 build the simulator，然后使用 gcc-4.4 编译 CUDA code。这样非常麻烦。</p><p><strong>我的解决方法</strong> 是将 gcc/g++ 9 版本降为 gcc/g++ 5 版本，可以参考 <a href=https://blog.csdn.net/EternallyAccompany/article/details/108865331>gcc/g++版本切换</a> 。如果一开始就是用 gcc/g++ 5 版本应该不会出现这个问题。</p><p><img src=https://pic2.zhimg.com/v2-6eb40ad4d1b928dfc6707d678dc04375_b.png alt=img></p><p>成功运行，不过结果有问题QAQ</p><h3 id=算是成功在-gpgpu-sim-上运行了-demo>算是成功在 GPGPU-Sim 上运行了 Demo</h3><h3 id=更新><strong>更新</strong></h3><p>2021-08-16 20:59:32 更新：</p><p>结果有问题还是之前对 C 语言的指针部分没理解到位，经评论区 @原子 提醒，将 <code>cudaMemcpy(&amp;c, &amp;dev_c, sizeof(int), cudaMemcpyDeviceToHost)</code> 改为 <code>cudaMemcpy(&amp;c, dev_c, sizeof(int), cudaMemcpyDeviceToHost)</code> 即可。</p><p>或者都使用指针，如下</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><pre tabindex=0><code>/* file: hello.cu */
#include &lt;stdio.h&gt;
#include &lt;cuda_runtime.h&gt;

__global__ void add(int a, int b, int *c)
{
    *c = a + b;
}

int main()
{
    int *c;
    c = (int*)malloc(sizeof(int));
    int *dev_c;
    cudaMalloc((void **)&amp;dev_c, sizeof(int));
    add&lt;&lt;&lt;1, 1&gt;&gt;&gt;(2, 7, dev_c);
    cudaMemcpy(c, dev_c, sizeof(int), cudaMemcpyDeviceToHost);
    printf(&#34;2 + 7 = %d\n&#34;,*c);

    return 0;
}</code></pre></div><p><img src=https://pic1.zhimg.com/v2-cbaf91f9c6d6f085936c1c80a233051c_b.png alt=img></p><p>正确结果</p><h3 id=reference><strong>Reference</strong></h3><ul><li>[https://blog.csdn.net/NKU_Yang/article/details/114662776?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242] GPGPU-sim环境搭建教程</li><li><a href=https://www.gpuinsight.com/gpgpusim_install/>https://www.gpuinsight.com/gpgpusim_install/</a> GPGPU-Sim 安装过程</li><li><a href=http://gpgpu-sim.org/manual/index.php/Main_Page>http://gpgpu-sim.org/manual/index.php/Main_Page</a> 官方手册</li><li><a href=https://github.com/gpgpu-sim/gpgpu-sim_distribution>https://github.com/gpgpu-sim/gpgpu-sim_distribution</a> Github 源码</li><li><a href=http://www.danielwong.org/classes/ee260-w17/assignment1>http://www.danielwong.org/classes/ee260-w17/assignment1</a> UCR</li><li><a href=https://blog.csdn.net/EternallyAccompany/article/details/108865331>https://blog.csdn.net/EternallyAccompany/article/details/108865331</a> gcc/g++版本切换</li><li><a href=https://github.com/gpgpu-sim/gpgpu-sim_distribution/issues/73>https://github.com/gpgpu-sim/gpgpu-sim_distribution/issues/73</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>Weiming Hu</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2025-02-11</span></p><p class=copyright-item><span class=item-title>License</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=https://huweim.github.io/tags/gpgpu-sim/>GPGPU-Sim</a></div><nav class=post-nav><a class=prev href=/post/blog_hugo_%E5%9F%BA%E6%9C%AC%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%8D%A2/><i class=iconfont><svg aria-hidden="true" class="lucide lucide-chevron-left hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="m15 18-6-6 6-6"/></svg>
</i><span class="prev-text nav-default">Hugo 基本部署及主题更换</span>
<span class="prev-text nav-mobile">Prev</span>
</a><a class=next href=/post/%E6%80%BB%E7%BB%93_summary_of_phd/><span class="next-text nav-default">读田渊栋博士《博士五年总结系列》</span>
<span class="prev-text nav-mobile">Next</span>
<i class=iconfont><svg aria-hidden="true" class="lucide lucide-chevron-right hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="m9 18 6-6-6-6"/></svg></i></a></nav></footer></article></div><nav class=toc id=toc><div class=toc-title>Table of Contents</div><div class="toc-content custom-scrollbar"><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#0-前言><strong>0. 前言</strong></a></li><li><a href=#1-介绍><strong>1. 介绍</strong></a></li><li><a href=#2-环境搭建><strong>2. 环境搭建</strong></a></li><li><a href=#22-cuda安装><strong>2.2 CUDA安装</strong></a></li><li><a href=#i-cuda官网下载对应的包><strong>I. CUDA官网下载对应的包</strong></a></li><li><a href=#ii-配置环境变量><strong>II. 配置环境变量</strong></a></li><li><a href=#iii-验证><strong>III. 验证</strong></a></li><li><a href=#3-gpgpu-sim部署><strong>3. GPGPU-Sim部署</strong></a></li><li><a href=#31-安装-gpgpu-sim><strong>3.1 安装 GPGPU-Sim</strong></a></li><li><a href=#i-clone-gpgpu-sim-repo><strong>I. Clone GPGPU-Sim Repo</strong></a></li><li><a href=#ii-部署gpgpu-sim><strong>II. 部署GPGPU-Sim</strong></a></li><li><a href=#32-run><strong>3.2 Run</strong></a></li><li><a href=#-此时出现了-segementation-fault这个应该是编译器版本的问题引起的如前所述一开始我使用的-gccg-9>❌ 此时出现了 Segementation fault，这个应该是编译器版本的问题引起的，如前所述，一开始我使用的 gcc/g++ 9</a></li><li><a href=#算是成功在-gpgpu-sim-上运行了-demo>算是成功在 GPGPU-Sim 上运行了 Demo</a></li><li><a href=#更新><strong>更新</strong></a></li><li><a href=#reference><strong>Reference</strong></a></li></ul></li></ul></li></ul></nav></div></nav></div></main><footer id=footer class=site-footer><div class=social-icon-links><a href=mailto:huwm1@shanghaitech.edu.cn rel="me noopener" class=social-icon-link title=email><svg aria-hidden="true" class="icon hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 1451 1024" width="1em" xlink="http://www.w3.org/1999/xlink"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg>
</a><a href=http://localhost:1313 rel="me noopener" class=social-icon-link title=linkedin target=_blank><svg aria-hidden="true" class="icon hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink"><path d="M872.405333 872.618667H720.768V635.008c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333.0-91.136 61.653333-91.136 125.397334v241.792H398.976V384H544.64v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667.0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667.0 01-88.021333-88.106666A88.064 88.064.0 11227.712 317.141333zm76.032 555.477334H151.68V384h152.064v488.618667zM948.266667.0h-872.704C33.792.0.0 33.024.0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667.0 948.138667.0h.128z"/></svg>
</a><a href=https://github.com/huweim rel="me noopener" class=social-icon-link title=github target=_blank><svg aria-hidden="true" class="icon hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg>
</a><a href=https://www.zhihu.com/people/hu-wei-ming-31-86 rel="me noopener" class=social-icon-link title=zhihu target=_blank><svg aria-hidden="true" class="icon hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink"><path d="M351.791182 562.469462h192.945407c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262h159.282726s-.86367-67.402109-18.578124-67.402109-279.979646.0-279.979646.0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461s24.62791 5.832845 36.941354.0c12.313443-5.832845 68.050885-25.924439 84.252893-103.69571h86.570681c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262H109.86113c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449H279.868105c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513.0.0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-.055259.185218 167.855986 193.263655s22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-.045025.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"/><path d="M584.918753 182.033893v668.840094h70.318532l28.807093 80.512708 121.875768-80.512708h153.600307L959.520453 182.033893h-374.6017zM887.150192 778.934538h-79.837326l-99.578949 65.782216-23.537066-65.782216h-24.855084L659.341766 256.673847h227.807403V778.934538z"/></svg>
</a><a href=https://huweim.github.io/index.xml rel="noopener alternate" type=application/rss+xml class=social-icon-link title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span><span class=division>|</span>
<span class=theme-info>Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span><span class=copyright-year>&copy;
2020 -
2025
<span class=heart><i class=iconfont><svg aria-hidden="true" class="lucide lucide-heart hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5.0 0016.5 3c-1.76.0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5.0 002 8.5c0 2.3 1.5 4.05 3 5.5l7 7z"/></svg>
</i></span><span class=author>Weiming Hu</span></span></div></footer><script type=text/javascript src=/js/main.eb94e793601239645bc98e36c443aef1b210646ccb43e2217ea949a0212e0ed1.js integrity="sha256-65Tnk2ASOWRbyY42xEOu8bIQZGzLQ+IhfqlJoCEuDtE=" crossorigin=anonymous></script><script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script></body></html>